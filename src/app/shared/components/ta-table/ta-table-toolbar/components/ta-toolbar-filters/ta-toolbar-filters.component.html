<div
    class="table-filter-container"
    [ngClass]="{
        'table-filter-padding': options.toolbarActions.showSearchBorder
    }"
>
    <!-- VIEW MODE SELECT -->

    <!-- TOTAL MONEY COUNT -->
    <ng-container *ngIf="activeTableData.moneyCountSelected">
        <div
            class="money-count-container d-flex justify-content-center align-items-center"
            [ngClass]="{
                'money-count-select-style': activeTableData.moneyCountSelected
            }"
        >
            <div
                class="container-money ta-font-bold d-flex justify-content-center align-items-center"
            >
                {{ activeTableData.moneyCount | moneyFilter }}
            </div>
        </div>
    </ng-container>

    <ng-container
        *ngIf="
            options?.toolbarActions?.viewModeOptions?.length &&
            activeTableData.moneyCountSelected
        "
    >
        <div
            class="border-container d-flex justify-content-center align-items-center"
        >
            <div class="border-stick"></div>
        </div>
    </ng-container>

    <ng-container *ngIf="options?.toolbarActions?.viewModeOptions?.length">
        <div class="view-mode-container d-flex">
            <ng-container
                *ngFor="let viewMode of options.toolbarActions.viewModeOptions"
            >
                <div
                    class="mode ta-font-extra-bold d-flex justify-content-center align-items-center"
                    [ngClass]="{
                        'mode-active': viewMode.active,
                        'mode-margin':
                            activeTableData.gridNameTitle === 'Account' ||
                            activeTableData.gridNameTitle === 'Contact' ||
                            activeTableData.gridNameTitle === 'User'
                    }"
                    (click)="changeModeView(viewMode.name)"
                >
                    {{ viewMode.name }}
                </div>
            </ng-container>
        </div>
    </ng-container>

    <!-- BORDER -->
    <ng-container
        *ngIf="
            options?.toolbarActions?.viewModeOptions?.length &&
            !options.toolbarActions.hideSearch
        "
    >
        <div
            class="border-container d-flex justify-content-center align-items-center"
        >
            <div class="border-stick"></div>
        </div>
    </ng-container>

    <!-- SEARCH -->
    <ng-container *ngIf="!options.toolbarActions.hideSearch">
        <div
            [ngClass]="{
                'disabled-icon pe-none': options.toolbarActions.disableSearch
            }"
        >
            <app-ca-search-multiple-states
                [searchType]="'tabel'"
                [selectedTabData]="activeTableData"
                [toolbarSearch]="true"
            ></app-ca-search-multiple-states>
        </div>
    </ng-container>

    <!-- SEARCH BORDER ONLY -->
    <ng-container *ngIf="!options.toolbarActions.hideSearch">
        <div
            class="border-container d-flex justify-content-center align-items-center"
        >
            <div class="border-stick"></div>
        </div>
    </ng-container>

    <app-ta-special-filter
        *ngIf="options.toolbarActions.showArhiveCount"
        [type]="'archiveFilter'"
        [icon]="'ic_deactivate'"
        [filterTitle]="'Deactivated user'"
        [dataArray]="this.activeTableData.deactivatedUserArray"
        (setFilter)="onSpecialFilter($event, 'deactivatedUserArray')"
        [selectedFilter]="
            this.activeTableData?.deactivatedUserArray?.selectedFilter
        "
        [class]="
            options?.toolbarActions?.filtersOrder?.archive
                ? 'order-' + options.toolbarActions.filtersOrder.archive
                : ''
        "
    ></app-ta-special-filter>

    <!-- BORDER -->
    <ng-container
        *ngIf="
            options.toolbarActions.showCountSelectedInList &&
            activeTableData?.listSelectedCount.length
        "
    >
        <div
            class="border-container d-flex justify-content-center align-items-center"
        >
            <div class="border-stick"></div>
        </div>
    </ng-container>

    <!-- COUNT SELECTED IN LIST  -->
    <ng-container
        *ngIf="
            options.toolbarActions.showCountSelectedInList &&
            activeTableData?.listSelectedCount
        "
    >
        <div
            class="count-selected-in-list-container ta-font-bold d-flex justify-content-center align-items-center"
        >
            {{ activeTableData.listSelectedCount }} Selected
        </div>
    </ng-container>

    <!-- LOCATION FILTER -->

    <app-ca-filter
        *ngIf="options.toolbarActions.showLocationFilter"
        [type]="'locationFilter'"
        [icon]="'address'"
        [filterTitle]="'Area Filter'"
        [areaFilter]="true"
        [locationDefType]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
    >
    </app-ca-filter>

    <!-- FUEL STOP FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showFuelStopFilter"
        [type]="'fuelStopFilter'"
        [icon]="'fuel'"
        [filterTitle]="'Fuel Stop Filter'"
        [noLeftIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [unselectedUser]="fuelStopArray"
    >
    </app-ca-filter>

    <!-- DEPARTMENT FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showDepartmentFilter"
        [type]="'departmentFilter'"
        [icon]="'department'"
        [filterTitle]="'Department Filter'"
        [noLeftIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [pmFilterArray]="[]"
    >
    </app-ca-filter>

    <!-- STATE FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showStateFilter"
        [type]="'stateFilter'"
        [icon]="'state'"
        [filterTitle]="'State / Province Filter'"
        [leftSideIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [class]="
            options?.toolbarActions?.filtersOrder?.state
                ? 'order-' + options.toolbarActions.filtersOrder.state
                : ''
        "
        [usaStates]="usaStates"
        [canadaStates]="canadaStates"
    >
    </app-ca-filter>

    <!-- ARHIVE FILTER -->
    <app-ta-special-filter
        *ngIf="options.toolbarActions.showArhiveFilter"
        [type]="'archiveFilter'"
        [icon]="'ic_driver_arhive'"
        [filterTitle]="'Archive Filter'"
        [dataArray]="this.activeTableData.driverArhivedArray"
        (setFilter)="onSpecialFilter($event, 'driverArhivedArray')"
        [selectedFilter]="
            this.activeTableData?.driverArhivedArray?.selectedFilter
        "
    ></app-ta-special-filter>

    <!-- TIME FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showTimeFilter"
        [type]="'timeFilter'"
        [icon]="'ic_time'"
        [filterTitle]="'Time Filter'"
        [timeSubType]="'past'"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
    >
    </app-ca-filter>

    <!-- VACATION FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showDispatchVacationFilter"
        [type]="'vacationFilter'"
        [isButtonFilter]="true"
        [icon]="'vacation'"
        [filterTitle]="'Vacation Filter'"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
    >
    </app-ca-filter>

    <!-- INJURY FILTER -->
    <app-ta-filter
        *ngIf="options.toolbarActions.showInjuryFilter"
        [type]="'injuryFilter'"
        [icon]="'ic_injury'"
        [filterTitle]="'Injury Filter'"
        [swipeFilter]="true"
        (setFilter)="onFilter($event)"
        [class]="
            options?.toolbarActions?.filtersOrder?.injury
                ? 'order-' + options.toolbarActions.filtersOrder.injury
                : ''
        "
    >
    </app-ta-filter>

    <!-- PM FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showPMFilter"
        [type]="'pmFilter'"
        [icon]="'default_pm'"
        [pmSubtype]="
            options.toolbarActions.showTrailerPmFilter ? 'trailer' : 'truck'
        "
        [filterTitle]="'PM Filter'"
        [noLeftIcon]="false"
        [leftSideIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [class]="
            options?.toolbarActions?.filtersOrder?.pm
                ? 'order-' + options.toolbarActions.filtersOrder.pm
                : ''
        "
        [pmFilterArray]="pmFilterArray"
    >
    </app-ca-filter>

    <!-- CATEGORY REPAIR FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showCategoryRepairFilter"
        [type]="'categoryRepairFilter'"
        [icon]="'ic_key-repair'"
        [filterTitle]="'Service Filter'"
        [noLeftIcon]="false"
        [leftSideIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [pmFilterArray]="categoryRepairArray"
    >
    </app-ca-filter>

    <!-- CATEGORY FUEL FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showCategoryFuelFilter"
        [type]="'pmFilter'"
        [icon]="'funnel'"
        [filterTitle]="'Fuel Item Filter'"
        [noLeftIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [pmFilterArray]="categoryFuelArray"
    >
    </app-ca-filter>

    <!-- DISPECHER FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showDispatcherFilter"
        [type]="'dispatcherFilter'"
        [icon]="'user'"
        [searchState]="true"
        [filterTitle]="'Dispatcher Filter'"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [unselectedUser]="unselectedDispatcher"
    >
    </app-ca-filter>

    <!-- STATUS FILTER -->
    <app-ca-filter
        *ngIf="
            options.toolbarActions.showStatusFilter ||
            options.toolbarActions.showStatusDispatchFilter
        "
        [type]="'statusFilter'"
        [icon]="'broker-half-circle'"
        [filterTitle]="'Status Filter'"
        [noLeftIcon]="false"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [isDispatchFilter]="options.toolbarActions.showStatusDispatchFilter"
        [loadStatusOptionsArray]="loadStatusOptionsArray"
    >
    </app-ca-filter>

    <!-- PARKING FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showParkingFilter"
        [type]="'parkingFilter'"
        [icon]="'parking'"
        [filterTitle]="'Parking Filter'"
        [noLeftIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [pmFilterArray]="loadParkingOptionsArray"
    >
    </app-ca-filter>

    <!-- TRUCK TYPE FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showTruckTypeFilter"
        [type]="'truckTypeFilter'"
        [icon]="'truck'"
        [filterTitle]="'Truck Type Filter'"
        [noLeftIcon]="false"
        [leftSideIcon]="true"
        [largeLeftIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [truckTypeArray]="truckTypeArray"
    >
    </app-ca-filter>

    <!-- TRAILER TYPE FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showTrailerTypeFilter"
        [type]="'trailerTypeFilter'"
        [icon]="'trailer'"
        [filterTitle]="'Trailer Type Filter'"
        [noLeftIcon]="false"
        [leftSideIcon]="true"
        [largeLeftIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [trailerTypeArray]="trailerTypeArray"
    >
    </app-ca-filter>

    <!-- TRUCK FILTER -->
    <app-ca-filter
        *ngIf="
            options.toolbarActions.showTruckFilter ||
            options.toolbarActions.showTruckPmFilter ||
            options.toolbarActions.showTruckDispatchFilter
        "
        [type]="'truckTypeFilter'"
        [icon]="'truck'"
        [filterTitle]="'Truck Type Filter'"
        [noLeftIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [isRepairFilter]="!!options.toolbarActions.showTruckPmFilter"
        [isDispatchFilter]="options.toolbarActions.showTruckDispatchFilter"
        [truckTypeArray]="truckTypeArray"
    >
    </app-ca-filter>

    <!-- TRAILER FILTER -->
    <app-ca-filter
        *ngIf="
            options.toolbarActions.showTrailerFilter ||
            options.toolbarActions.showTrailerPmFilter ||
            options.toolbarActions.showTrailerDispatchFilter
        "
        [type]="'trailerTypeFilter'"
        [icon]="'trailer'"
        [filterTitle]="'Trailer Type Filter'"
        [noLeftIcon]="true"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [isRepairFilter]="options.toolbarActions.showTrailerPmFilter"
        [isDispatchFilter]="options.toolbarActions.showTrailerDispatchFilter"
        [trailerTypeArray]="trailerTypeArray"
    >
    </app-ca-filter>

    <!-- MONEY FILTER -->
    <app-ca-filter
        *ngIf="options.toolbarActions.showMoneyFilter"
        [type]="'moneyFilter'"
        [icon]="'dollar'"
        [filterTitle]="'Money Filter'"
        [subType]="options.toolbarActions.hideMoneySubType ? '' : 'all'"
        [isMoneyFilter]="true"
        [isMilesFilter]="false"
        [isFuelType]="!!options.toolbarActions.fuelMoneyFilter"
        [isLoadType]="!!options.toolbarActions.loadMoneyFilter"
        (setFilter)="onFilter($event)"
        (clearAll)="onFilter($event)"
        [isRepairFilter]="
            options.toolbarActions.showTrailerPmFilter ||
            options.toolbarActions.showTruckPmFilter
        "
    >
    </app-ca-filter>

    <!-- FILTER -->
    <ng-container *ngIf="options.toolbarActions.showLtlFilter">
        <ng-container *ngFor="let filterData of loadFilterData">
            <div
                class="no-filter ta-font-extra-bold d-flex justify-content-center align-items-center"
                [ngClass]="{
                    'active-options-filter': filterData.active
                }"
                (click)="changeFilterView(filterData.name)"
            >
                {{ filterData.name | uppercase }}
            </div>
        </ng-container>
        <div
            class="border-container d-flex justify-content-center align-items-center"
        >
            <div class="border-stick"></div>
        </div>
    </ng-container>

    <app-ta-special-filter
        *ngIf="
            options.toolbarActions.showLtlFilter &&
            showFtl &&
            this.activeTableData.ftlArray
        "
        [type]="'load-filter'"
        [icon]="'ic_shuffle'"
        [filterTitle]="'Schuffle Filter'"
        [dataArray]="this.activeTableData.ftlArray"
        (setFilter)="onSpecialFilter($event, 'ftlArray')"
        [selectedFilter]="this.activeTableData.ftlArray.selectedFilter"
    ></app-ta-special-filter>

    <app-ta-special-filter
        *ngIf="
            options.toolbarActions.showLtlFilter &&
            showLtl &&
            this.activeTableData.ltlArray
        "
        [type]="'load-filter'"
        [icon]="'ic_ltl_single'"
        [filterTitle]="'LTL Single'"
        [dataArray]="this.activeTableData.ltlArray"
        (setFilter)="onSpecialFilter($event, 'ltlArray')"
        [selectedFilter]="this.activeTableData.ltlArray.selectedFilter"
    ></app-ta-special-filter>

    <app-ta-special-filter
        *ngIf="
            options.toolbarActions.showBrokerFilter &&
            this.activeTableData?.bannedArray?.filteredArray?.length > 0
        "
        [type]="'ban-filter'"
        [icon]="'ic_banned_broker'"
        [filterTitle]="'Banned'"
        [dataArray]="this.activeTableData.bannedArray"
        (setFilter)="onSpecialFilter($event, 'ban')"
        [selectedFilter]="this.activeTableData?.bannedArray?.selectedFilter"
    ></app-ta-special-filter>

    <app-ta-special-filter
        *ngIf="
            options.toolbarActions.showBrokerFilter &&
            this.activeTableData?.dnuArray?.filteredArray?.length > 0
        "
        [type]="'dnu-filter'"
        [icon]="'ic_dnu_broker'"
        [filterTitle]="'Do not use'"
        [dataArray]="this.activeTableData.dnuArray"
        (setFilter)="onSpecialFilter($event, 'dnu')"
        [selectedFilter]="this.activeTableData.dnuArray.selectedFilter"
    ></app-ta-special-filter>

    <ng-container 
        *ngIf="
            (options.toolbarActions.showBrokerFilter ||
                options.toolbarActions.showRepairShop ||
                options.toolbarActions.showBrokerFilterClosed ||
                options.toolbarActions.showFuelPermanentlyClosed)
            "
    >
        <app-ta-special-filter
            [type]="tableStringEnum.FUEL_STOP_FILTER_CLOSED"
            [icon]="'ic_closed_broker'"
            [filterTitle]="'Permanently Closed'"
            [dataArray]="activeTableData.data"
            [dataCount]="activeTableData.fuelStopClosedCount"
            (setFilter)="onSpecialFilter($event, tableStringEnum.CLOSED_ARRAY)"
            [selectedFilter]="activeTableData?.closedArray?.selectedFilter"
        ></app-ta-special-filter>
    </ng-container>
    

    <ng-container
        *ngIf="options.toolbarActions.showIntegratedFuelTransactionsFilter"
    >
        <app-ta-special-filter
            [type]="tableStringEnum.FUEL_TRANSACTION_FILTER_INTEGRATED"
            [icon]="'ic_fuel_transaction'"
            [filterTitle]="'Integrated Transactions'"
            [dataArray]="activeTableData.data"
            [dataCount]="activeTableData.integratedDataCount"
            (setFilter)="onSpecialFilter($event, tableStringEnum.FUEL_ARRAY)"
            [selectedFilter]="activeTableData?.fuelArray?.selectedFilter"
        ></app-ta-special-filter>
    </ng-container>

    @if (options.toolbarActions.showIncompleteFuelTransactionsFilter) {
        <app-ta-special-filter
            [type]="tableStringEnum.FUEL_TRANSACTION_FILTER_INCOMPLETE"
            [icon]="'ic_transaction_incomplete'"
            [filterTitle]="'Incomplete Transactions'"
            [dataArray]="activeTableData.data"
            [dataCount]="activeTableData.incompleteDataCount"
            (setFilter)="onSpecialFilter($event, tableStringEnum.FUEL_INCOMPLETE_ARRAY)"
            [selectedFilter]="activeTableData?.fuelIncompleteArray?.selectedFilter"
        ></app-ta-special-filter>
    }

    <app-ta-special-filter
        *ngIf="options.toolbarActions.showRepairOrderFilter"
        [type]="'repair-filter'"
        [icon]="'ic_repair_track'"
        [filterTitle]="'Repair Filter'"
        [dataArray]="this.activeTableData.repairArray"
        (setFilter)="onSpecialFilter($event, 'repairArray')"
        [selectedFilter]="this.activeTableData?.repairArray?.selectedFilter"
    ></app-ta-special-filter>
</div>
