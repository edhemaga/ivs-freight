<table class="truckassist-table-body-style">
    <tbody *ngIf="viewData.length">
        <app-ta-custom-scrollbar
            [scrollBarOptions]="{
                showVerticalScrollBar: false,
                showHorizontalScrollBar: true,
                dataLength: viewData.length,
            }"
            [horizontalScrollHeight]="
                activeAttachment !== -1 ||
                activeMedia !== -1 ||
                activeInsurance !== -1
                    ? viewData.length * 34 +
                      (viewData.length - 1) * 2 +
                      22 +
                      300 +
                      7
                    : viewData.length * 34 + (viewData.length - 1) * 2 + 22 + 7
            "
            [isOverflowUnset]="
                tableData[0].title === 'Contacts' ||
                tableData[0].gridNameTitle === 'Owner'
            "
            (scrollEvent)="onHorizontalScroll($event)"
        >
            <ng-container
                *ngFor="
                    let row of viewData;
                    let i = index;
                    trackBy: trackTableRow
                "
            >
                <!-- For Rendering One By One -->
                <tr
                    class="table-tr"
                    [ngClass]="{
                        'regular-row': !row.isSelected,
                        'selected-row':
                            row.isSelected || dropDownActive === row.id,
                        'user-archived': row.userStatus === 0,
                        'add-animation': row.actionAnimation === 'add',
                        'update-animation': row.actionAnimation === 'update',
                        'deactivate-animation':
                            row.actionAnimation === 'deactivate',
                        'multiple-deactivate-animation':
                            row.actionAnimation === 'multiple-deactivate',
                        'activate-animation':
                            row.actionAnimation === 'activate',
                        'multiple-activate-animation':
                            row.actionAnimation === 'multiple-activate',
                        'delete-animation': row.actionAnimation === 'delete',
                        'multiple-delete-animation':
                            row.actionAnimation === 'delete-multiple',
                    }"
                >
                    <!-- Table Row -->

                    <div class="columns-container">
                        <!-- PINED -->

                        <div class="pined-columns">
                            <ng-container
                                *ngFor="
                                    let column of pinedColumns;
                                    trackBy: trackTablePinedColumns
                                "
                            >
                                <td
                                    [ngClass]="{
                                        'pined-columns-margin':
                                            column.ngTemplate !== '' &&
                                            column.ngTemplate !== 'checkbox' &&
                                            column.ngTemplate !==
                                                'user-checkbox',
                                    }"
                                    [ngStyle]="{
                                        'margin-right':
                                            column.ngTemplate ===
                                                'description' ||
                                            column.ngTemplate === 'gallon' ||
                                            column.ngTemplate === 'ppg'
                                                ? 0
                                                : column.ngTemplate === 'total'
                                                  ? '7px'
                                                  : '',
                                    }"
                                >
                                    <!-- NO TEMPLATE -->

                                    <div
                                        *ngIf="column.ngTemplate === ''"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        class="td-content"
                                    >
                                        <div class="no-template">
                                            NO TEMPLATE
                                        </div>
                                    </div>

                                    <!-- VIN COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'vin'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div class="vin-container">
                                            {{ row[column.field].regularText }}
                                            <span class="vin-bold">
                                                {{ row[column.field].boldText }}
                                            </span>
                                        </div>
                                    </div>

                                    <!-- CHECKBOX TEMPLATE -->

                                    <div
                                        *ngIf="column.ngTemplate === 'checkbox'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        class="td-content set-center"
                                        ngbTooltip
                                    >
                                        <input
                                            (change)="onSelectItem(row, i)"
                                            [checked]="row.isSelected"
                                            class="table-checkbox"
                                            id="checkbox-table-{{ i }}"
                                            type="checkbox"
                                        />
                                        <label
                                            #op="ngbPopover"
                                            [ngbPopover]="optionsPopover"
                                            [placement]="'bottom-right'"
                                            [autoClose]="'outside'"
                                            popoverClass="toolbar-options-popover"
                                            triggers="manual"
                                            (hidden)="optionsPopupOpen = false"
                                            [mainTooltip]="
                                                !row.isSelected
                                                    ? 'Select'
                                                    : 'Clear'
                                            "
                                            [tooltipBackground]="'#424242'"
                                            [tooltipColor]="'#ffff'"
                                            position="bottom"
                                            class="table-checkbox-label"
                                            for="checkbox-table-{{ i }}"
                                        ></label>
                                    </div>

                                    <!-- MILES HALF PERCENT COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'halfPercentage'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div class="halfPercentage">
                                            <span class="table-text">{{
                                                row[column.field]
                                            }}</span>
                                            <span class="perc-span">
                                                {{
                                                    row[column.fieldPercentage]
                                                }}</span
                                            >
                                        </div>
                                    </div>

                                    <!-- STATUS COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'status'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        #ngbStatus="ngbPopover"
                                        [autoClose]="true"
                                        [ngbPopover]="statusPopover"
                                        [placement]="'bottom top'"
                                        container="body"
                                        popoverClass="table-status-popover"
                                        triggers="manual"
                                    >
                                        <div
                                            class="status-container"
                                            [ngStyle]="{
                                                width: column.width - 20 + 'px',
                                            }"
                                            (click)="
                                                toggleStatusDropdown(
                                                    ngbStatus,
                                                    row
                                                )
                                            "
                                        >
                                            <div class="status">
                                                <app-load-status-string
                                                    [status]="{
                                                        name: row.status
                                                            .statusString,
                                                        valueForRequest:
                                                            row.status
                                                                .statusValue
                                                                .name,
                                                    }"
                                                    [justifyStart]="true"
                                                ></app-load-status-string>
                                            </div>
                                            <div
                                                class="status-time ta-font-medium"
                                            >
                                                {{ row[column.field].time }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- PICKUP AND DELIVERY COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'pickup'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <div
                                                class="pickup-delivery-counter"
                                                [ngClass]="{
                                                    'pickup-count':
                                                        column.pickupDeliveryType ===
                                                            'pickup' &&
                                                        row[column.field]
                                                            .count !== 'S',
                                                    'delivery-count':
                                                        column.pickupDeliveryType ===
                                                            'delivery' &&
                                                        row[column.field]
                                                            .count !== 'S',
                                                    'special-count':
                                                        row[column.field]
                                                            .count === 'S',
                                                }"
                                            >
                                                {{ row[column.field].count }}
                                            </div>

                                            <div
                                                class="pickup-delivery-location-container"
                                            >
                                                <div
                                                    class="location"
                                                    [ngStyle]="{
                                                        width:
                                                            column.width -
                                                            28 +
                                                            'px',
                                                    }"
                                                >
                                                    {{
                                                        row[column.field]
                                                            .location
                                                    }}
                                                </div>
                                                <div
                                                    class="date-time-container"
                                                    [ngStyle]="{
                                                        width:
                                                            column.width -
                                                            30 +
                                                            'px',
                                                    }"
                                                >
                                                    <div class="date">
                                                        {{
                                                            row[column.field]
                                                                .date
                                                        }}
                                                    </div>
                                                    <div class="time">
                                                        {{
                                                            row[column.field]
                                                                .time
                                                        }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- TEXT COLOR COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate === 'text-color'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            class="text-color"
                                            [ngStyle]="{
                                                color: row[column.field].color,
                                                'margin-left':
                                                    column.margin + 'px',
                                                'padding-left':
                                                    column.padding + 'px',
                                            }"
                                        >
                                            {{ row[column.field].number }}
                                        </div>
                                    </div>

                                    <!-- USER CHECKBOX TEMPLATE -->

                                    <div
                                        *ngIf="
                                            column.ngTemplate ===
                                            'user-checkbox'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        class="td-content set-center"
                                        ngbTooltip
                                    >
                                        <!-- IF USER IS OWNER -->

                                        <svg-icon
                                            *ngIf="row.userStatus === 'Owner'"
                                            [src]="
                                                'assets/svg/truckassist-table/user-owner-icon.svg'
                                            "
                                            [svgStyle]="{
                                                'width.px': '14',
                                                'height.px': '14',
                                            }"
                                        ></svg-icon>

                                        <!-- IF USER IS NOT OWNER -->

                                        <input
                                            *ngIf="row.userStatus !== 'Owner'"
                                            (change)="onSelectItem(row, i)"
                                            [checked]="row.isSelected"
                                            class="table-checkbox"
                                            id="checkbox-table-{{ i }}"
                                            type="checkbox"
                                        />
                                        <label
                                            #op="ngbPopover"
                                            [ngbPopover]="optionsPopover"
                                            [placement]="'bottom-right'"
                                            [autoClose]="'outside'"
                                            popoverClass="toolbar-options-popover"
                                            triggers="manual"
                                            (hidden)="optionsPopupOpen = false"
                                            [mainTooltip]="
                                                !row.isSelected
                                                    ? 'Select'
                                                    : 'Clear'
                                            "
                                            [tooltipBackground]="
                                                optionsPopupOpen
                                                    ? '#CCCCCC'
                                                    : '#424242'
                                            "
                                            [tooltipColor]="
                                                optionsPopupOpen
                                                    ? '#2F2F2F'
                                                    : '#FFFFFF'
                                            "
                                            position="bottom"
                                            *ngIf="row.userStatus !== 'Owner'"
                                            class="table-checkbox-label"
                                            for="checkbox-table-{{ i }}"
                                        ></label>
                                    </div>

                                    <!-- CUSTOMER NAME COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'customer-name'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <ng-container
                                            *ngIf="row[column.field]?.name"
                                        >
                                            <ng-container
                                                *ngIf="
                                                    column.ngTemplate ===
                                                    'customer-name'
                                                "
                                            >
                                                <div
                                                    class="td-content"
                                                    [ngStyle]="{
                                                        width:
                                                            column.width + 'px',
                                                        'min-width.px':
                                                            column?.minWidth
                                                                ? column.minWidth
                                                                : 'unset',
                                                    }"
                                                >
                                                    <svg-icon
                                                        *ngIf="
                                                            row[column.field]
                                                                .hasBanDnu
                                                        "
                                                        class="customer-icon"
                                                        [src]="
                                                            row[column.field]
                                                                .isDnu
                                                                ? 'assets/svg/truckassist-table/dnu-icon.svg'
                                                                : !row[
                                                                        column
                                                                            .field
                                                                    ].isClosed
                                                                  ? 'assets/svg/truckassist-table/ban-icon.svg'
                                                                  : 'assets/svg/common/ic_closed_broker.svg'
                                                        "
                                                        [svgStyle]="{
                                                            'width.px': '18',
                                                            'height.px': '18',
                                                        }"
                                                    ></svg-icon>
                                                    <ng-container
                                                        *ngIf="
                                                            !column.link
                                                                ?.doesNotHaveRout
                                                        "
                                                        ><div
                                                            class="td-content"
                                                            [ngStyle]="{
                                                                width:
                                                                    column.width +
                                                                    'px',
                                                                'min-width.px':
                                                                    column?.minWidth
                                                                        ? column.minWidth
                                                                        : 'unset',
                                                            }"
                                                            ngbTooltip
                                                        >
                                                            <div
                                                                [ngStyle]="{
                                                                    width:
                                                                        column.width +
                                                                        'px',
                                                                }"
                                                                class="table-name-link"
                                                                [ngClass]="{
                                                                    'has-details-page':
                                                                        !column
                                                                            .link
                                                                            ?.doesNotHaveRout,
                                                                }"
                                                                (click)="
                                                                    goToDetails(
                                                                        column,
                                                                        row
                                                                    )
                                                                "
                                                                #op="ngbPopover"
                                                                [ngbPopover]="
                                                                    optionsPopover
                                                                "
                                                                [placement]="
                                                                    'bottom-right'
                                                                "
                                                                [autoClose]="
                                                                    'outside'
                                                                "
                                                                popoverClass="toolbar-options-popover"
                                                                triggers="manual"
                                                                (hidden)="
                                                                    otionsPopupOppen = false
                                                                "
                                                                mainTooltip="View Detail"
                                                                [tooltipBackground]="
                                                                    '#424242'
                                                                "
                                                                [tooltipColor]="
                                                                    '#ffff'
                                                                "
                                                                position="bottom"
                                                            >
                                                                {{
                                                                    row[
                                                                        column
                                                                            .field
                                                                    ].name
                                                                }}
                                                            </div>
                                                        </div>
                                                    </ng-container>

                                                    <ng-container
                                                        *ngIf="
                                                            column.link
                                                                ?.doesNotHaveRout
                                                        "
                                                    >
                                                        <div
                                                            class="customer-name"
                                                            [ngStyle]="{
                                                                width: row[
                                                                    column.field
                                                                ].hasBanDnu
                                                                    ? column.width -
                                                                      22 +
                                                                      'px'
                                                                    : column.width +
                                                                      'px',
                                                            }"
                                                            [ngClass]="{
                                                                'customer-name-ban':
                                                                    !row[
                                                                        column
                                                                            .field
                                                                    ].isDnu &&
                                                                    row[
                                                                        column
                                                                            .field
                                                                    ].hasBanDnu,
                                                            }"
                                                        >
                                                            {{
                                                                row[
                                                                    column.field
                                                                ].name
                                                            }}
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </ng-container>
                                        </ng-container>

                                        <ng-container
                                            *ngIf="!row[column.field]?.name"
                                        >
                                            <div
                                                class="td-content"
                                                [ngStyle]="{
                                                    width: column.width + 'px',
                                                    'min-width.px':
                                                        column?.minWidth
                                                            ? column.minWidth
                                                            : 'unset',
                                                }"
                                                ngbTooltip
                                            >
                                                <ng-container
                                                    *ngIf="
                                                        !column.link
                                                            ?.doesNotHaveRout
                                                    "
                                                >
                                                    <div
                                                        [ngStyle]="{
                                                            width:
                                                                column.width +
                                                                'px',
                                                        }"
                                                        class="table-name-link"
                                                        [ngClass]="{
                                                            'has-details-page':
                                                                !column.link
                                                                    ?.doesNotHaveRout,
                                                        }"
                                                        (click)="
                                                            goToDetails(
                                                                column,
                                                                row
                                                            )
                                                        "
                                                        #op="ngbPopover"
                                                        [ngbPopover]="
                                                            optionsPopover
                                                        "
                                                        [placement]="
                                                            'bottom-right'
                                                        "
                                                        [autoClose]="'outside'"
                                                        popoverClass="toolbar-options-popover"
                                                        triggers="manual"
                                                        (hidden)="
                                                            otionsPopupOppen = false
                                                        "
                                                        mainTooltip="View Detail"
                                                        [tooltipBackground]="
                                                            '#424242'
                                                        "
                                                        [tooltipColor]="'#ffff'"
                                                        position="bottom"
                                                    >
                                                        {{ row[column.field] }}
                                                    </div>
                                                </ng-container>

                                                <ng-container
                                                    *ngIf="
                                                        column.link
                                                            ?.doesNotHaveRout
                                                    "
                                                >
                                                    <div
                                                        [ngStyle]="{
                                                            width:
                                                                column.width +
                                                                'px',
                                                        }"
                                                        class="table-name-link"
                                                        [ngClass]="{
                                                            'has-details-page':
                                                                !column.link
                                                                    ?.doesNotHaveRout,
                                                        }"
                                                        (click)="
                                                            goToDetails(
                                                                column,
                                                                row
                                                            )
                                                        "
                                                    >
                                                        {{ row[column.field] }}
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </ng-container>
                                    </div>

                                    <!-- LOAD TOTAL COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate === 'load-total'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div class="load-totla-container">
                                            <div
                                                class="main-total"
                                                [ngStyle]="{
                                                    width: column.width + 'px',
                                                }"
                                            >
                                                {{ row[column.field].total }}
                                            </div>

                                            <div
                                                *ngIf="
                                                    row[column.field].subTotal
                                                "
                                                [ngStyle]="{
                                                    width: column.width + 'px',
                                                }"
                                                class="sub-total"
                                            >
                                                {{ row[column.field].subTotal }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- DISPECHER AVATAR COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'dispatcher-avatar'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <ng-container
                                            *ngIf="row[column.field].name"
                                        >
                                            <img
                                                [src]="
                                                    row[column.field]?.avatar
                                                        ? row[column.field]
                                                              .avatar
                                                        : 'assets/svg/truckassist-table/user-avatar-no-profile.svg'
                                                "
                                                alt=""
                                                class="dispecher-img"
                                            />

                                            <div
                                                class="dispatcher-name"
                                                [ngStyle]="{
                                                    width:
                                                        column.width -
                                                        24 +
                                                        'px',
                                                }"
                                            >
                                                {{ row[column.field].name }}
                                            </div>
                                        </ng-container>
                                    </div>

                                    <!-- AVATAR COLUMN -->
                                    <div
                                        *ngIf="column.ngTemplate === 'avatar'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        class="td-content"
                                        ngbTooltip
                                    >
                                        <div
                                            class="avatar-container"
                                            [ngClass]="{
                                                'avatar-is-owner': row.isOwner,
                                            }"
                                        >
                                            @if (
                                                row.isIncompleteFuelTransaction &&
                                                column.name === 'Driver' &&
                                                !row.driver
                                            ) {
                                                <div
                                                    mainTooltip="Driver not Linked"
                                                    mainContent
                                                    ngbTooltip
                                                    tooltipBackground="#424242"
                                                    tooltipColor="#FFFFFF"
                                                    position="bottom"
                                                    tooltipTextAlign="center"
                                                >
                                                    <svg-icon
                                                        class="lh-1 mr-1 column-text-svg-transaction-incomplete"
                                                        [src]="
                                                            tableBodySvgRoutes.fuelIncompleteTransactionSvgRoute
                                                        "
                                                    ></svg-icon>
                                                </div>
                                            } @else {
                                                <ng-container
                                                    [ngTemplateOutlet]="
                                                        avatarColumn
                                                    "
                                                    [ngTemplateOutletContext]="{
                                                        row: row,
                                                        column: column,
                                                    }"
                                                ></ng-container>

                                                <img
                                                    class="avatar-owner"
                                                    alt="avatar"
                                                    *ngIf="row.isOwner"
                                                    src="assets/svg/truckassist-table/owner-badge.svg"
                                                />
                                            }
                                        </div>

                                        @if (
                                            row.isIncompleteFuelTransaction &&
                                            column.name === 'Driver' &&
                                            !row.driver
                                        ) {
                                            <span
                                                class="table-text column-text-red"
                                                [ngClass]="{
                                                    'ta-font-semi-bold':
                                                        column.isTextBold ||
                                                        row[column.field] ===
                                                            'Unlimited',
                                                    'align-end':
                                                        column.isJustifyEnd,
                                                }"
                                                [innerHtml]="
                                                    row[column.field]
                                                        ? (row[column.field]
                                                          | tableHighlightSearchText
                                                              : this
                                                                    .chipsForHighlight)
                                                        : ''
                                                "
                                            ></span>
                                        } @else {
                                            <div
                                                (click)="
                                                    goToDetails(column, row)
                                                "
                                                [ngClass]="{
                                                    'has-details-page':
                                                        !column.link
                                                            ?.doesNotHaveRout,
                                                }"
                                                class="table-avatar-name"
                                                [innerHtml]="
                                                    row[column.field]
                                                        ? (row[column.field]
                                                          | tableHighlightSearchText
                                                              : this
                                                                    .chipsForHighlight)
                                                        : ''
                                                "
                                                #op="ngbPopover"
                                                [ngbPopover]="optionsPopover"
                                                [placement]="'bottom-right'"
                                                [autoClose]="'outside'"
                                                popoverClass="toolbar-options-popover"
                                                triggers="manual"
                                                (hidden)="
                                                    optionsPopupOpen = false
                                                "
                                                mainTooltip="View Detail"
                                                [tooltipBackground]="'#424242'"
                                                [tooltipColor]="'#ffff'"
                                                position="bottom"
                                            >
                                                {{ row[column.field] }}
                                            </div>
                                        }
                                    </div>

                                    <!-- USER AVATAR COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate === 'user-avatar'
                                        "
                                    >
                                        <div
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                            class="td-content"
                                        >
                                            <div
                                                class="user-avatar-container"
                                                *ngIf="row[column.field]?.name"
                                            >
                                                <!-- User Archived Icon -->

                                                <div
                                                    class="user-avatar-archived-icon"
                                                    *ngIf="row.userStatus === 0"
                                                >
                                                    <svg-icon
                                                        (click)="
                                                            onActivateUser(row)
                                                        "
                                                        [src]="
                                                            'assets/svg/truckassist-table/user-archived.svg'
                                                        "
                                                        [svgStyle]="{
                                                            'width.px': '17',
                                                            'height.px': '17',
                                                        }"
                                                    ></svg-icon>
                                                </div>

                                                <!-- User Avatar Img -->

                                                <img
                                                    alt="avatar"
                                                    *ngIf="
                                                        row[column.field]
                                                            .avatar &&
                                                        row.userStatus !== 0
                                                    "
                                                    [src]="
                                                        row[column.field].avatar
                                                    "
                                                    class="avatar"
                                                />

                                                <!-- User Avatar Text -->
                                                <div
                                                    class="user-avatar-no-img"
                                                    *ngIf="
                                                        !row[column.field]
                                                            .avatar &&
                                                        row.userStatus !== 0
                                                    "
                                                    [ngStyle]="{
                                                        'background-color': row[
                                                            column.field
                                                        ].avatarColor
                                                            ?.background
                                                            ? row[column.field]
                                                                  .avatarColor
                                                                  .background
                                                            : 'unset',
                                                        color: row[column.field]
                                                            .avatarColor?.color
                                                            ? row[column.field]
                                                                  .avatarColor
                                                                  .color
                                                            : 'unset',
                                                    }"
                                                >
                                                    {{
                                                        row[column.field]
                                                            .textShortName
                                                    }}
                                                </div>
                                            </div>

                                            <span
                                                class="table-avatar-name"
                                                [ngClass]="{
                                                    'has-details-page':
                                                        !column.link
                                                            ?.doesNotHaveRout,
                                                }"
                                                *ngIf="row[column.field]?.name"
                                                >{{
                                                    row[column.field].name
                                                }}</span
                                            >
                                        </div>
                                    </ng-container>

                                    <!-- USER STATUS COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate === 'user-status'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            class="user-status-container ta-font-bold"
                                            [ngStyle]="{
                                                color:
                                                    row[column.field].status ===
                                                    'Owner'
                                                        ? '#259F94'
                                                        : row[column.field]
                                                                .status ===
                                                            'Admin'
                                                          ? '#3B73ED'
                                                          : row[column.field]
                                                                  .status ===
                                                              'User'
                                                            ? '#6C6C6C'
                                                            : '#AAAAAA',
                                            }"
                                        >
                                            {{ row[column.field].status }}
                                        </div>
                                    </div>

                                    <!-- USER ACTIVITY COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'user-activity'
                                        "
                                    >
                                        <div
                                            class="td-content set-center"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <div
                                                class="user-activity-container d-flex gap-1 align-items-center table-text"
                                                [class.ta-font-semi-bold]="
                                                    row[column.field] ===
                                                    'Online'
                                                "
                                            >
                                                <ng-cotainer
                                                    *ngIf="
                                                        row[column.field] ===
                                                        'Online'
                                                    "
                                                >
                                                    <div
                                                        class="online-icon"
                                                    ></div>
                                                </ng-cotainer>
                                                {{ row[column.field] }}
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- INVOICE COLUMN -->

                                    @if (column.ngTemplate === 'invoice') {
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                            ngbTooltip
                                        >
                                            <div
                                                class="invoice-text"
                                                [ngStyle]="{
                                                    width:
                                                        column.width -
                                                        21 +
                                                        'px',
                                                }"
                                                (click)="
                                                    goToDetails(column, row)
                                                "
                                                #op="ngbPopover"
                                                [ngbPopover]="optionsPopover"
                                                [placement]="'bottom-right'"
                                                [autoClose]="'outside'"
                                                popoverClass="toolbar-options-popover"
                                                triggers="manual"
                                                (hidden)="
                                                    otionsPopupOppen = false
                                                "
                                                mainTooltip="View Detail"
                                                [tooltipBackground]="'#424242'"
                                                [tooltipColor]="'#ffff'"
                                                position="bottom"
                                            >
                                                <span>
                                                    {{
                                                        row[column.field]
                                                            ?.invoice
                                                    }}
                                                </span>
                                            </div>

                                            <!-- Hide LTL and FTL icons for now  -->
                                            <!-- @if (row[column.field].type) { -->
                                            <!-- <svg-icon
                                                    [src]="
                                                        row[column.field].type === 'LTL'
                                                            ? tableBodySvgRoutes.loadLtl
                                                            : tableBodySvgRoutes.loadFtl
                                                    "
                                                    [svgStyle]="{
                                                        'width.px': '14',
                                                        'height.px': '14'
                                                    }"
                                                ></svg-icon> -->
                                            <!-- } -->
                                        </div>
                                    }

                                    <!-- NAME LINK COLUMN -->

                                    @if (column.ngTemplate === 'nameLink') {
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                            ngbTooltip
                                        >
                                            @if (column.link?.doesNotHaveRout) {
                                                <div
                                                    [ngStyle]="{
                                                        width:
                                                            column.width + 'px',
                                                    }"
                                                    class="table-name-link"
                                                    [ngClass]="{
                                                        'has-details-page':
                                                            !column.link
                                                                ?.doesNotHaveRout,
                                                    }"
                                                    (click)="
                                                        goToDetails(column, row)
                                                    "
                                                >
                                                    @if (
                                                        row?.tableFuelStopIsClosed
                                                    ) {
                                                        <svg-icon
                                                            [src]="
                                                                tableBodySvgRoutes.brokerClosedRoute
                                                            "
                                                        ></svg-icon>
                                                    }

                                                    @if (
                                                        row.isIntegratedFuelTransaction
                                                    ) {
                                                        <svg-icon
                                                            class="mr-3 lh-0 integrated-fuel-transaction"
                                                            [src]="
                                                                tableBodySvgRoutes.circleRoute
                                                            "
                                                        ></svg-icon>
                                                    } @else if (
                                                        !row.isIntegratedFuelTransaction &&
                                                        activeTableData?.gridNameTitle ===
                                                            'FUEL'
                                                    ) {
                                                        <svg-icon
                                                            class="mr-3 lh-0 manual-fuel-transaction"
                                                            [src]="
                                                                tableBodySvgRoutes.circleRoute
                                                            "
                                                        ></svg-icon>
                                                    }

                                                    {{ row[column.field] }}

                                                    @if (
                                                        row.isRepairOrder &&
                                                        !row.actionAnimation
                                                    ) {
                                                        <svg-icon
                                                            class="repair-order-icon"
                                                            [src]="
                                                                tableBodySvgRoutes.circleRoute
                                                            "
                                                            [svgStyle]="{
                                                                'width.px': 10,
                                                                'height.px': 10,
                                                            }"
                                                        ></svg-icon>
                                                    }
                                                </div>
                                            } @else {
                                                <div
                                                    [ngStyle]="{
                                                        width:
                                                            column.width + 'px',
                                                    }"
                                                    class="table-name-link"
                                                    [ngClass]="{
                                                        'has-details-page':
                                                            !column.link
                                                                ?.doesNotHaveRout,
                                                    }"
                                                    (click)="
                                                        goToDetails(column, row)
                                                    "
                                                    #op="ngbPopover"
                                                    [ngbPopover]="
                                                        optionsPopover
                                                    "
                                                    [placement]="'bottom-right'"
                                                    [autoClose]="'outside'"
                                                    popoverClass="toolbar-options-popover"
                                                    triggers="manual"
                                                    (hidden)="
                                                        otionsPopupOppen = false
                                                    "
                                                    mainTooltip="View Detail"
                                                    [tooltipBackground]="
                                                        '#424242'
                                                    "
                                                    [tooltipColor]="'#ffff'"
                                                    position="bottom"
                                                >
                                                    @if (
                                                        row?.tableFuelStopIsClosed
                                                    ) {
                                                        <svg-icon
                                                            [src]="
                                                                tableBodySvgRoutes.brokerClosedRoute
                                                            "
                                                        ></svg-icon>
                                                    }

                                                    {{
                                                        row[column.field]
                                                            ?.name ||
                                                            row[column.field]
                                                    }}
                                                </div>
                                            }
                                        </div>
                                    }

                                    <!-- OOS COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="column.ngTemplate === 'oos'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div class="oos-container">
                                            <div
                                                [ngClass]="{
                                                    'oos-active':
                                                        row.oos[0].active,
                                                }"
                                            >
                                                {{ row.oos[0].value }}
                                            </div>

                                            <div
                                                [ngClass]="{
                                                    'oos-active':
                                                        row.oos[1].active,
                                                }"
                                            >
                                                {{ row.oos[1].value }}
                                            </div>

                                            <div
                                                [ngClass]="{
                                                    'oos-active':
                                                        row.oos[2].active,
                                                }"
                                            >
                                                {{ row.oos[2].value }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- VIOLATION STATE COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'violation-state'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="violation-state-container">
                                            {{ row[column.field] }}
                                        </div>
                                    </div>

                                    <!-- INV. AGING COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate === 'inv-aging'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                            }"
                                            #invoicePopover="ngbPopover"
                                            [ngbPopover]="invoiceAgingPopover"
                                            container="body"
                                            [placement]="'bottom-left'"
                                            popoverClass="table-invoice-aging-popover"
                                            triggers="manual"
                                            [autoClose]="'outside'"
                                            (hidden)="
                                                invoiceDropdownActive ===
                                                    row.id &&
                                                invoiceDropdownType ===
                                                    column.field
                                                    ? (invoiceDropdownActive =
                                                          -1)
                                                    : {}
                                            "
                                            (click)="
                                                row[column.field]
                                                    ?.tablePayTerm &&
                                                    !!row[column.field]
                                                        ?.invoiceAgeingGroupOne &&
                                                    onShowInvoiceAgingDropdown(
                                                        invoicePopover,
                                                        row,
                                                        column
                                                    )
                                            "
                                        >
                                            <div
                                                class="inv-aging-container d-flex align-items-center"
                                                [ngClass]="{
                                                    'invoice-popover-open':
                                                        invoiceDropdownActive ===
                                                            row.id &&
                                                        invoiceDropdownType ===
                                                            column.field,
                                                    'disable-hover':
                                                        !row[column.field]
                                                            ?.tablePayTerm ||
                                                        !row[column.field]
                                                            ?.invoiceAgeingGroupOne,
                                                }"
                                                ngbTooltip
                                                [mainTooltip]="
                                                    column.field ===
                                                    'tablePaidInvAging'
                                                        ? 'Paid Invoice Aging'
                                                        : 'Unpaid Invoice Aging'
                                                "
                                                [tooltipBackground]="'#424242'"
                                                [tooltipColor]="'#ffff'"
                                                position="bottom"
                                                [disableTooltip]="
                                                    !row[column.field]
                                                        ?.tablePayTerm
                                                "
                                            >
                                                <div
                                                    class="inv-aging-group main-group ta-font-semi-bold d-flex align-items-center justify-content-center"
                                                >
                                                    {{
                                                        row[column.field]
                                                            ?.invoiceAgeingGroup
                                                            ?.countInvoice
                                                            | thousandToShortFormatPipe
                                                    }}
                                                </div>

                                                <div
                                                    class="inv-aging-group-border mx-1"
                                                ></div>

                                                <ng-container
                                                    *ngIf="
                                                        row[column.field]
                                                            ?.tablePayTerm;
                                                        else noPayTermTemplate
                                                    "
                                                >
                                                    <div
                                                        class="inv-aging-group group-1 ta-font-semi-bold d-flex align-items-center justify-content-center"
                                                    >
                                                        {{
                                                            column.field ===
                                                            'tableUnpaidInvAging'
                                                                ? (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupOne
                                                                      ?.countInvoice
                                                                  | thousandToShortFormatPipe)
                                                                : (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupOne
                                                                      ?.percentage ??
                                                                      0) + '%'
                                                        }}
                                                    </div>

                                                    <div
                                                        class="inv-aging-group group-2 ta-font-semi-bold d-flex align-items-center justify-content-center"
                                                    >
                                                        {{
                                                            column.field ===
                                                            'tableUnpaidInvAging'
                                                                ? (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupTwo
                                                                      ?.countInvoice
                                                                  | thousandToShortFormatPipe)
                                                                : (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupTwo
                                                                      ?.percentage ??
                                                                      0) + '%'
                                                        }}
                                                    </div>

                                                    <div
                                                        class="inv-aging-group group-3 ta-font-semi-bold d-flex align-items-center justify-content-center"
                                                    >
                                                        {{
                                                            column.field ===
                                                            'tableUnpaidInvAging'
                                                                ? (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupThree
                                                                      ?.countInvoice
                                                                  | thousandToShortFormatPipe)
                                                                : (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupThree
                                                                      ?.percentage ??
                                                                      0) + '%'
                                                        }}
                                                    </div>

                                                    <div
                                                        class="inv-aging-group group-4 ta-font-semi-bold d-flex align-items-center justify-content-center"
                                                    >
                                                        {{
                                                            column.field ===
                                                            'tableUnpaidInvAging'
                                                                ? (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupFour
                                                                      ?.countInvoice
                                                                  | thousandToShortFormatPipe)
                                                                : (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupFour
                                                                      ?.percentage ??
                                                                      0) + '%'
                                                        }}
                                                    </div>
                                                </ng-container>

                                                <ng-template #noPayTermTemplate>
                                                    <div
                                                        class="d-flex align-items-center inv-aging-text"
                                                    >
                                                        <div
                                                            class="d-flex align-items-center justify-content-center inv-aging-group group-5 ta-font-medium"
                                                        >
                                                            {{
                                                                row[
                                                                    column.field
                                                                ]
                                                                    ?.invoiceAgeingGroup
                                                                    ?.averageDays ??
                                                                    0
                                                            }}
                                                        </div>

                                                        <p
                                                            class="m-0 text-color-black-2"
                                                        >
                                                            days average
                                                        </p>
                                                    </div>
                                                </ng-template>

                                                <div
                                                    class="inv-aging-group-border mx-1"
                                                ></div>

                                                <div
                                                    class="inv-aging-text total-amount-text"
                                                    [ngClass]="{
                                                        'ta-font-semi-bold text-color-white':
                                                            invoiceDropdownActive ===
                                                                row.id &&
                                                            invoiceDropdownType ===
                                                                column.field,
                                                        'text-color-black-2':
                                                            invoiceDropdownActive ===
                                                            -1,
                                                    }"
                                                    [ngStyle]="{
                                                        'margin-left':
                                                            invoiceDropdownActive ===
                                                                row.id &&
                                                            invoiceDropdownType ===
                                                                column.field
                                                                ? '4px'
                                                                : '',
                                                    }"
                                                >
                                                    {{
                                                        row[column.field]
                                                            ?.totalPaid
                                                            ? (row[column.field]
                                                                  .totalPaid
                                                              | formatCurrency)
                                                            : row[column.field]
                                                                    ?.totalDebt
                                                              ? (row[
                                                                    column.field
                                                                ].totalDebt
                                                                | formatCurrency)
                                                              : (0
                                                                | formatCurrency)
                                                    }}
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- CONTACT COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'contact'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                            }"
                                        >
                                            <ng-container
                                                *ngIf="row?.[column?.field]"
                                            >
                                                <div class="contacts-container">
                                                    <app-ta-input-dropdown-contacts
                                                        [contactsData]="
                                                            row[column.field]
                                                        "
                                                        (onAddButton)="
                                                            onAddContact(row)
                                                        "
                                                        (onEditButton)="
                                                            onEditContact(row)
                                                        "
                                                        (onDeleteButton)="
                                                            onDeleteContact(row)
                                                        "
                                                    ></app-ta-input-dropdown-contacts>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- WORK HOUR COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate === 'work-hour'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                            }"
                                        >
                                            <ng-container
                                                *ngIf="row[column.field]"
                                            >
                                                <div
                                                    class="d-flex align-items-center work-hour-container"
                                                >
                                                    <div
                                                        ngbTooltip
                                                        [mainTooltip]="
                                                            (column?.title ===
                                                                'Shipping' &&
                                                                row?.shippingAppointment) ||
                                                            (column?.title ===
                                                                'Receiving' &&
                                                                row?.receivingAppointment)
                                                                ? 'Appointment'
                                                                : 'Open Hours'
                                                        "
                                                        tooltipBackground="#424242"
                                                        position="bottom"
                                                    >
                                                        <svg-icon
                                                            class="work-hour-icon"
                                                            [ngClass]="{
                                                                appointment:
                                                                    column?.title ===
                                                                    'Shipping'
                                                                        ? row?.shippingAppointment
                                                                        : row.receivingAppointment,
                                                            }"
                                                            [src]="
                                                                tableBodySvgRoutes.workHourRoute
                                                            "
                                                            [svgStyle]="{
                                                                'width.px': 14,
                                                                'height.px': 14,
                                                            }"
                                                        ></svg-icon>
                                                    </div>

                                                    <p class="m-0">
                                                        {{ row[column.field] }}
                                                    </p>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- DESCRIPTION COLUMN (GALLON, PPG, TOTAL)-->

                                    <ng-container
                                        *ngIf="
                                            [
                                                'description',
                                                'total',
                                                'gallon',
                                                'ppg',
                                            ].includes(column.ngTemplate)
                                        "
                                    >
                                        <div
                                            class="td-content description-items-container"
                                            [ngClass]="{
                                                'order-cost-container':
                                                    column.ngTemplate ===
                                                        'total' &&
                                                    row?.isRepairOrder,
                                                'order-items-active':
                                                    descriptionOrderActiveIndex ===
                                                    i,
                                                hovered:
                                                    descriptionCostHoverIndex ===
                                                        i &&
                                                    !row?.isRepairOrder,
                                                'd-flex justify-content-end':
                                                    column.ngTemplate ===
                                                    'gallon',
                                            }"
                                            [ngStyle]="{
                                                width:
                                                    (column.ngTemplate ===
                                                        'ppg' ||
                                                    column.ngTemplate ===
                                                        'total'
                                                        ? column.width + 6
                                                        : column.width) + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                            #t1="ngbPopover"
                                            container="body"
                                            placement="bottom-left"
                                            triggers="manual"
                                            popoverClass="table-description-popover"
                                            [ngbPopover]="descriptionPopover"
                                            (click)="
                                                column.ngTemplate ===
                                                    'description' &&
                                                    onShowDescriptionDropdown(
                                                        t1,
                                                        tableData[0]
                                                            ?.gridNameTitle,
                                                        column?.width,
                                                        row
                                                    )
                                            "
                                            (mouseenter)="
                                                descriptionCostHoverIndex = i
                                            "
                                            (mouseleave)="
                                                descriptionCostHoverIndex = -1
                                            "
                                            (shown)="
                                                descriptionOrderActiveIndex = i
                                            "
                                            (hidden)="
                                                descriptionOrderActiveIndex = -1
                                            "
                                        >
                                            <ng-container
                                                [ngSwitch]="column.ngTemplate"
                                            >
                                                <!-- DESCRIPTION COLUMN -->

                                                <ng-container
                                                    *ngSwitchCase="
                                                        'description'
                                                    "
                                                >
                                                    <div
                                                        class="w-100"
                                                        ngbTooltip
                                                        tooltipBackground="#424242"
                                                        position="bottom"
                                                        [mainTooltip]="
                                                            column.field ===
                                                            'tableDescription'
                                                                ? 'Show Items'
                                                                : ''
                                                        "
                                                        [appDescriptionItemsTextCount]="
                                                            row[column.field]
                                                        "
                                                        [itemSpecialStylesIndexArray]="
                                                            row.tableDescriptionSpecialStylesIndexArray
                                                        "
                                                        [containerWidth]="
                                                            column.width
                                                        "
                                                    ></div>
                                                </ng-container>

                                                <!-- TOTAL COLUMN -->

                                                <ng-container
                                                    *ngSwitchCase="'total'"
                                                >
                                                    <div
                                                        class="d-flex align-items-center justify-content-end w-100"
                                                    >
                                                        <ng-container
                                                            *ngIf="
                                                                !row.isRepairOrder;
                                                                else repairOrder
                                                            "
                                                        >
                                                            <span
                                                                class="ta-font-semi-bold text-size-14 text-color-black"
                                                                [innerHtml]="
                                                                    row[
                                                                        column
                                                                            .field
                                                                    ]
                                                                        ? row[
                                                                              column
                                                                                  .field
                                                                          ]
                                                                        : ''
                                                                "
                                                            ></span>
                                                        </ng-container>

                                                        <ng-template
                                                            #repairOrder
                                                        >
                                                            <div
                                                                class="d-flex justify-content-center align-items-center ta-font-bold text-size-11 text-color-blue-18 finish-order-action"
                                                                (click)="
                                                                    onFinishOrder(
                                                                        row
                                                                    )
                                                                "
                                                            >
                                                                FINISH ORDER
                                                            </div>
                                                        </ng-template>
                                                    </div>
                                                </ng-container>

                                                <!-- GALLON COLUMN -->

                                                <ng-container
                                                    *ngIf="
                                                        column.ngTemplate ===
                                                        'gallon'
                                                    "
                                                >
                                                    <div
                                                        class="d-flex justify-content-end gallon-container"
                                                    >
                                                        <span
                                                            class="table-text"
                                                            [innerHtml]="
                                                                row[
                                                                    column.field
                                                                ]
                                                                    ? (row[
                                                                          column
                                                                              .field
                                                                      ]
                                                                      | tableHighlightSearchText
                                                                          : chipsForHighlight)
                                                                    : ''
                                                            "
                                                        ></span>
                                                    </div>
                                                </ng-container>

                                                <!-- PPG COLUMN -->

                                                <ng-container
                                                    *ngSwitchCase="'ppg'"
                                                >
                                                    <ng-container
                                                        *ngIf="
                                                            row[column.field]
                                                        "
                                                    >
                                                        <div
                                                            class="d-flex align-items-center justify-content-end w-100 ppg-container"
                                                        >
                                                            <svg-icon
                                                                class="ppg-status-icon"
                                                                [svgStyle]="{
                                                                    'width.px': 10,
                                                                    'height.px': 10,
                                                                }"
                                                                [src]="
                                                                    tableBodySvgRoutes.circleRoute
                                                                "
                                                            >
                                                            </svg-icon>

                                                            <span
                                                                class="table-text"
                                                                [ngClass]="{
                                                                    'align-end':
                                                                        column.isJustifyEnd,
                                                                }"
                                                                >{{
                                                                    '$' +
                                                                        row[
                                                                            column
                                                                                .field
                                                                        ]
                                                                }}</span
                                                            >
                                                        </div>
                                                    </ng-container>
                                                </ng-container>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- DESCRIPTION COLUMN DRIVER (OFFDUTY LOCATION, RESTRICTION, ENDORSEMENT) -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'description-driver'
                                        "
                                    >
                                        <div
                                            class="td-content description-items-driver-container"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                            [ngClass]="{
                                                'has-value':
                                                    row[column.field]?.length,
                                            }"
                                            #t3="ngbPopover"
                                            container="body"
                                            placement="bottom-left"
                                            triggers="manual"
                                            popoverClass="table-description-popover"
                                            [ngbPopover]="descriptionPopover"
                                            (click)="
                                                row[column.field]?.length &&
                                                    onShowDescriptionDropdown(
                                                        t3,
                                                        tableData[0]
                                                            ?.gridNameTitle,
                                                        column?.width,
                                                        row,
                                                        column.field
                                                    )
                                            "
                                        >
                                            <div
                                                ngbTooltip
                                                tooltipBackground="#424242"
                                                position="bottom"
                                                [mainTooltip]="
                                                    column.name.includes('Duty')
                                                        ? 'View Off Duty locations'
                                                        : column.name ===
                                                            'Restriction'
                                                          ? 'View Restrictions'
                                                          : 'View Endorsements'
                                                "
                                                [appDescriptionItemsTextCount]="
                                                    row[column.field]
                                                "
                                                [containerWidth]="column.width"
                                            ></div>
                                        </div>
                                    </ng-container>

                                    <!-- SHARED COLUMN-->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'shared'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div
                                            class="d-flex align-items-center shared-container"
                                        >
                                            <app-ta-input-dropdown-table
                                                *ngIf="
                                                    row.departmentContacts
                                                        .length
                                                "
                                                [type]="'contacts'"
                                                [data]="row.departmentContacts"
                                            ></app-ta-input-dropdown-table>

                                            <ng-container
                                                *ngIf="
                                                    !row.departmentContacts
                                                        .length
                                                "
                                            >
                                                <p class="m-0">Only You</p>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <!-- LVL COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="column.ngTemplate === 'lvl'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="lvl-container">
                                            {{ row[column.field] }}
                                        </div>
                                    </div>

                                    <!-- VL COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'violation-count'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div
                                            [ngClass]="{
                                                'active-vl-count':
                                                    row[column.field] > 0,
                                                'zero-vl-count':
                                                    !row[column.field],
                                            }"
                                        >
                                            {{
                                                row[column.field]
                                                    ? row[column.field]
                                                    : '0'
                                            }}
                                        </div>
                                    </div>

                                    <!-- COMPACT TEXT -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate === 'compact-text'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div
                                            class="compact-text-container"
                                            *ngIf="
                                                row[column.field][0].value ||
                                                row[column.field][1].value ||
                                                row[column.field][2].value
                                            "
                                        >
                                            <!-- First -->
                                            <div
                                                class="title-values-container title-values-margin"
                                                *ngIf="
                                                    row[column.field][0].value
                                                "
                                            >
                                                <div class="title-compact-text">
                                                    {{
                                                        row[column.field][0]
                                                            .title
                                                    }}
                                                </div>

                                                <div
                                                    class="values-compact-text"
                                                >
                                                    {{
                                                        row[column.field][0]
                                                            .value
                                                    }}
                                                </div>
                                            </div>

                                            <!-- Second  -->

                                            <div
                                                class="title-values-container title-values-margin"
                                                *ngIf="
                                                    row[column.field][1].value
                                                "
                                            >
                                                <div class="title-compact-text">
                                                    {{
                                                        row[column.field][1]
                                                            .title
                                                    }}
                                                </div>
                                                <div
                                                    class="values-compact-text"
                                                >
                                                    {{
                                                        row[column.field][1]
                                                            .value
                                                    }}
                                                </div>
                                            </div>

                                            <!-- Third  -->

                                            <div
                                                class="title-values-container"
                                                *ngIf="
                                                    row[column.field][2].value
                                                "
                                            >
                                                <div class="title-compact-text">
                                                    {{
                                                        row[column.field][2]
                                                            .title
                                                    }}
                                                </div>
                                                <div
                                                    class="values-compact-text"
                                                >
                                                    {{
                                                        row[column.field][2]
                                                            .value
                                                    }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SERVICE COLUMN-->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'service'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <div
                                                class="d-flex align-items-center service-container"
                                            >
                                                <ng-container
                                                    *ngFor="
                                                        let service of row[
                                                            column.field
                                                        ];
                                                        trackBy: trackByIdentity
                                                    "
                                                >
                                                    <svg-icon
                                                        class="service-icon"
                                                        [ngClass]="{
                                                            active: service?.active,
                                                        }"
                                                        [src]="
                                                            tableBodySvgRoutes.repairServicesRoute +
                                                            service?.logoName
                                                        "
                                                        [svgStyle]="{
                                                            'width.px': 18,
                                                            'height.px': 18,
                                                        }"
                                                    ></svg-icon>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'ppg'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <ng-container
                                                *ngIf="row[column.field]"
                                            >
                                                <div
                                                    class="d-flex align-items-center justify-content-end w-100 ppg-container"
                                                >
                                                    <svg-icon
                                                        class="ppg-status-icon"
                                                        [svgStyle]="{
                                                            'width.px': 10,
                                                            'height.px': 10,
                                                        }"
                                                        [src]="
                                                            tableBodySvgRoutes.circleRoute
                                                        "
                                                    >
                                                    </svg-icon>

                                                    <span
                                                        class="table-text"
                                                        [ngClass]="{
                                                            'align-end':
                                                                column.isJustifyEnd,
                                                        }"
                                                        >{{
                                                            '$' +
                                                                row[
                                                                    column.field
                                                                ]
                                                        }}</span
                                                    >
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- URL COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'url'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <a
                                            class="table-url"
                                            href="{{ row[column.field] }}"
                                            target="blank"
                                            [innerHtml]="
                                                row[column.field]
                                                    ? row[column.field]
                                                    : ''
                                            "
                                        ></a>
                                    </div>

                                    <!-- PASSWORD COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'password'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        ngbTooltip
                                    >
                                        <div
                                            (click)="
                                                onShowPassword(row, column)
                                            "
                                            *ngIf="
                                                !row[column.field]
                                                    .apiCallStarted
                                            "
                                            class="password-icon"
                                            [ngClass]="{
                                                'password-hidden':
                                                    row[column.field].hiden,
                                                'password-showing':
                                                    !row[column.field].hiden,
                                            }"
                                            #op="ngbPopover"
                                            [ngbPopover]="optionsPopover"
                                            [placement]="'bottom-right'"
                                            [autoClose]="'outside'"
                                            popoverClass="toolbar-options-popover"
                                            triggers="manual"
                                            (hidden)="optionsPopupOpen = false"
                                            [mainTooltip]="
                                                !row.isSelected
                                                    ? 'Select'
                                                    : 'Clear'
                                            "
                                            [tooltipBackground]="'#424242'"
                                            [tooltipColor]="'#ffff'"
                                            position="bottom"
                                        ></div>

                                        <svg-icon
                                            class="password-spiner"
                                            *ngIf="
                                                row[column.field].apiCallStarted
                                            "
                                            src="/assets/svg/truckassist-table/loading-spinner.svg"
                                        ></svg-icon>

                                        <div
                                            class="password-text-crypted"
                                            [ngStyle]="{
                                                width: column.width - 22 + 'px',
                                            }"
                                            *ngIf="
                                                row[column.field].hiden &&
                                                !row[column.field]
                                                    .apiCallStarted
                                            "
                                            [innerHtml]="
                                                row[column.field]
                                                    .hidemCharacters
                                            "
                                        ></div>

                                        <div
                                            class="password-text-showing"
                                            [ngStyle]="{
                                                width: column.width - 22 + 'px',
                                            }"
                                            *ngIf="
                                                !row[column.field].hiden &&
                                                !row[column.field]
                                                    .apiCallStarted
                                            "
                                        >
                                            {{ row[column.field].password }}
                                        </div>
                                    </div>

                                    <!-- RAITING COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'rating'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="raiting-container">
                                            <!-- Like -->

                                            <div
                                                class="raiting-icon"
                                                (click)="
                                                    onLikeDislike(
                                                        row[column.field]
                                                            ?.hasLiked,
                                                        row
                                                    )
                                                "
                                                [ngClass]="{
                                                    'did-like-icon':
                                                        row[column.field]
                                                            ?.hasLiked,
                                                    'like-icon':
                                                        !row[column.field]
                                                            ?.hasLiked,
                                                }"
                                            ></div>
                                            <!-- Raiting Count -->
                                            <div
                                                class="raiting-counter-container"
                                            >
                                                <div
                                                    class="raiting-counter like-counter"
                                                >
                                                    {{
                                                        row[column.field]
                                                            ?.likeCount
                                                    }}
                                                </div>

                                                <div
                                                    class="raiting-counter dislike-counter"
                                                >
                                                    {{
                                                        row[column.field]
                                                            ?.dislikeCount
                                                    }}
                                                </div>
                                            </div>

                                            <!-- Dislike -->

                                            <div
                                                class="raiting-icon"
                                                (click)="
                                                    onLikeDislike(
                                                        !row[column.field]
                                                            ?.hasLiked,
                                                        row
                                                    )
                                                "
                                                [ngClass]="{
                                                    'did-dislike-icon':
                                                        row[column.field]
                                                            ?.hasDislike,
                                                    'dislike-icon':
                                                        !row[column.field]
                                                            ?.hasDislike,
                                                }"
                                            ></div>
                                        </div>
                                    </div>

                                    <!-- LABEL COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'label'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <ng-container *ngIf="row[column.field]">
                                            <app-ta-input-dropdown-label
                                                [formControl]="
                                                    dropdownSelectionArray
                                                        .controls[i]
                                                "
                                                [inputConfig]="{
                                                    name: 'Input Dropdown Label',
                                                    type: 'text',
                                                    placeholderIcon:
                                                        'ic_dynamic_label',
                                                    dropdownLabel: true,
                                                    dropdownWidthClass:
                                                        'w-col-' + column.width,
                                                    textTransform: 'lowercase',
                                                    minLength: 1,
                                                    blackInput: true,
                                                    hideClear: true,
                                                    multiselectDropdown: true,
                                                    maxLength: 12,
                                                    showCount: false,
                                                    customClass:
                                                        'input-dropdown-table',
                                                    commands: {
                                                        active: false,
                                                        type: 'confirm-cancel',
                                                        firstCommand: {
                                                            popup: {
                                                                name: 'Confirm',
                                                                backgroundColor:
                                                                    '#3074d3',
                                                            },
                                                            name: 'confirm',
                                                            svg: 'assets/svg/ic_spec-confirm.svg',
                                                        },
                                                        secondCommand: {
                                                            popup: {
                                                                name: 'Cancel',
                                                                backgroundColor:
                                                                    '#2f2f2f',
                                                            },
                                                            name: 'cancel',
                                                            svg: 'assets/svg/ic_x.svg',
                                                        },
                                                    },
                                                }"
                                                [colors]="row['colorRes']"
                                                [options]="row['colorLabels']"
                                                [selectedLabel]="
                                                    selectedContactLabel[i]
                                                "
                                                [selectedLabelColor]="
                                                    selectedContactColor
                                                "
                                                (pickExistLabel)="
                                                    onPickExistLabel($event, i)
                                                "
                                                (pickColorLabel)="
                                                    onSelectColorLabel(
                                                        $event,
                                                        i
                                                    )
                                                "
                                                (saveLabel)="
                                                    onSaveLabel($event, i)
                                                "
                                            >
                                            </app-ta-input-dropdown-label>
                                        </ng-container>
                                    </div>

                                    <!-- TEXT COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'text'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <ng-container
                                            *ngIf="
                                                row[column.field] ===
                                                'Hazardous'
                                            "
                                        >
                                            <svg-icon
                                                class="d-flex align-items-center"
                                                [ngStyle]="{
                                                    'margin-right': '4px',
                                                }"
                                                src="assets/svg/common/ic_hazardous.svg"
                                            >
                                            </svg-icon>
                                        </ng-container>

                                        <svg-icon
                                            *ngIf="
                                                tableData[0].title ===
                                                'Contacts'
                                            "
                                            class="phone-email-icon"
                                            [src]="
                                                ''
                                                    | setPhoneEmailIcon
                                                        : column
                                                        : row
                                            "
                                            [svgStyle]="{
                                                'width.px': 18,
                                                'height.px': 18,
                                            }"
                                        ></svg-icon>

                                        <span
                                            class="table-text"
                                            [ngClass]="{
                                                'ta-font-semi-bold':
                                                    column.isTextBold ||
                                                    row[column.field] ===
                                                        'Unlimited',
                                                'align-end':
                                                    column.isJustifyEnd,
                                            }"
                                            [innerHtml]="
                                                row[column.field]
                                                    ? (row[column.field]
                                                      | tableHighlightSearchText
                                                          : this
                                                                .chipsForHighlight)
                                                    : ''
                                            "
                                        ></span>
                                    </div>

                                    <!-- SEMI BOLD TEXT COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'semi-bold-text'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <span class="semi-bold-table-text">{{
                                            row[column.field]
                                                ? row[column.field]
                                                : ''
                                        }}</span>
                                    </div>

                                    <!-- COLOR COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'color'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        ngbTooltip
                                    >
                                        <div
                                            *ngIf="row[column.field]"
                                            class="color-name"
                                            [style.background-color]="
                                                row[column.field]
                                            "
                                            #op="ngbPopover"
                                            [ngbPopover]="optionsPopover"
                                            [placement]="'bottom-right'"
                                            [autoClose]="'outside'"
                                            popoverClass="toolbar-options-popover"
                                            triggers="manual"
                                            (hidden)="optionsPopupOpen = false"
                                            [mainTooltip]="row.colorName"
                                            [tooltipBackground]="
                                                row[column.field]
                                            "
                                            [tooltipColor]="'#ffff'"
                                            position="bottom"
                                        ></div>
                                    </div>

                                    <!-- SVG COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'svg'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            class="truckassist-icon"
                                            ngbTooltip
                                            mainContent
                                            [mainTooltip]="
                                                row[column.tooltipTitle]
                                            "
                                            position="bottom"
                                            [tooltipBackground]="
                                                row[column.tooltipColor]
                                            "
                                            tooltipColor="#ffff"
                                            tooltipTextAlign="center"
                                        >
                                            <svg-icon
                                                [class]="row[column.classField]"
                                                [src]="
                                                    column.svgUrl +
                                                    row[column.field]
                                                "
                                                [svgStyle]="{
                                                    'width.px':
                                                        column.svgDimensions
                                                            .width,
                                                    'height.px':
                                                        column.svgDimensions
                                                            .height,
                                                }"
                                            ></svg-icon>
                                        </div>
                                    </div>

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'text-assigned'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <div
                                                ngbTooltip
                                                class="table-text"
                                                [ngClass]="
                                                    row[column.field].text
                                                "
                                                mainContent
                                                [mainTooltip]="
                                                    row[column.field].type
                                                "
                                                position="bottom"
                                                [tooltipBackground]="
                                                    row[column.field].color
                                                "
                                                tooltipColor="#ffff"
                                                tooltipTextAlign="center"
                                            >
                                                <div
                                                    (mouseenter)="
                                                        row[
                                                            column.field
                                                        ].hover = true
                                                    "
                                                    (mouseleave)="
                                                        row[
                                                            column.field
                                                        ].hover = false
                                                    "
                                                    [ngStyle]="{
                                                        color: row[column.field]
                                                            .hover
                                                            ? row[column.field]
                                                                  .color
                                                            : '#2f2f2f',
                                                    }"
                                                >
                                                    {{ row[column.field].text }}
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'features'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <ng-container
                                                *ngFor="
                                                    let features of row[
                                                        column.field
                                                    ]
                                                "
                                            >
                                                <div
                                                    ngbTooltip
                                                    class="features-icon"
                                                    mainContent
                                                    [mainTooltip]="
                                                        features.name
                                                    "
                                                    position="bottom"
                                                    tooltipBackground="#424242"
                                                    tooltipColor="#ffff"
                                                    tooltipTextAlign="center"
                                                >
                                                    <svg-icon
                                                        [class]="
                                                            row[
                                                                column
                                                                    .classField
                                                            ]
                                                        "
                                                        [src]="
                                                            column.svgUrl +
                                                            features.image
                                                        "
                                                        [svgStyle]="{
                                                            'width.px':
                                                                column
                                                                    .svgDimensions
                                                                    .width,
                                                            'height.px':
                                                                column
                                                                    .svgDimensions
                                                                    .height,
                                                        }"
                                                    ></svg-icon>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- STATE TEXT COLUMN -->

                                    <div
                                        *ngIf="
                                            column.ngTemplate === 'textState'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        class="td-content"
                                    >
                                        <ng-container *ngIf="row[column.field]">
                                            <app-ta-state-image-text
                                                [stateAbbreviation]="
                                                    row[column.field]
                                                "
                                            >
                                            </app-ta-state-image-text>
                                        </ng-container>
                                    </div>

                                    <!-- PROGRESS COLUMN -->

                                    <div
                                        class="td-content"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        *ngIf="column.ngTemplate === 'progress'"
                                    >
                                        <div
                                            class="table-progress-container"
                                            *ngIf="
                                                row[column.field]
                                                    ?.expirationDays !== null &&
                                                row[column.field].percentage !==
                                                    null
                                            "
                                        >
                                            <!-- Progres Bar  -->

                                            <div
                                                class="table-progress-bar-container"
                                                [ngClass]="{
                                                    'bg-expired-container':
                                                        !row[column.field]
                                                            .percentage,
                                                    'bg-sliver-container':
                                                        row[column.field]
                                                            .percentage >= 50 &&
                                                        row[column.field]
                                                            .percentage < 100,
                                                    'bg-orange-container':
                                                        row[column.field]
                                                            .percentage >= 20 &&
                                                        row[column.field]
                                                            .percentage < 50,
                                                    'bg-danger-container':
                                                        row[column.field]
                                                            .percentage > 0 &&
                                                        row[column.field]
                                                            .percentage < 20,
                                                    'bg-inactive-container':
                                                        row[column.field]
                                                            .percentage === 100,
                                                }"
                                            >
                                                <div
                                                    [ngClass]="{
                                                        'bg-progress-sliver':
                                                            row[column.field]
                                                                .percentage >=
                                                                50 &&
                                                            row[column.field]
                                                                .percentage <
                                                                100,
                                                        'bg-progress-orange':
                                                            row[column.field]
                                                                .percentage >=
                                                                20 &&
                                                            row[column.field]
                                                                .percentage <
                                                                50,
                                                        'bg-progress-danger':
                                                            row[column.field]
                                                                .percentage >
                                                                0 &&
                                                            row[column.field]
                                                                .percentage <
                                                                20,
                                                    }"
                                                    class="table-progress-bar"
                                                    *ngIf="
                                                        row[column.field]
                                                            .percentage > 0 &&
                                                        row[column.field]
                                                            .percentage < 100
                                                    "
                                                ></div>
                                            </div>

                                            <!-- Progres Text -->

                                            <div
                                                class="table-progress-text"
                                                [ngStyle]="{
                                                    width:
                                                        column.width -
                                                        30 +
                                                        'px',
                                                }"
                                                *ngIf="
                                                    row[column.field]
                                                        .percentage > 0 &&
                                                    row[column.field]
                                                        .percentage < 100
                                                "
                                                [innerHtml]="
                                                    row[column.field]
                                                        .expirationDays > 0
                                                        ? ('in ' +
                                                              row[column.field]
                                                                  .expirationDaysText +
                                                              ' days'
                                                          | tableHighlightSearchText
                                                              : chipsForHighlight)
                                                        : ('Expires today'
                                                          | tableHighlightSearchText
                                                              : chipsForHighlight)
                                                "
                                            ></div>

                                            <!-- Progres Text Expired-->

                                            <div
                                                class="table-progress-text"
                                                [ngStyle]="{
                                                    width:
                                                        column.width -
                                                        30 +
                                                        'px',
                                                }"
                                                *ngIf="
                                                    !row[column.field]
                                                        .percentage
                                                "
                                                [innerHtml]="
                                                    row[column.field]
                                                        .expirationDays > 0
                                                        ? (row[column.field]
                                                              .expirationDaysText +
                                                              ' days ago'
                                                          | tableHighlightSearchText
                                                              : chipsForHighlight)
                                                        : ('Expired today'
                                                          | tableHighlightSearchText
                                                              : chipsForHighlight)
                                                "
                                            ></div>
                                        </div>
                                    </div>

                                    <!-- CREDIT PROGRESS COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'progressCredit'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column?.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <ng-container
                                                *ngIf="
                                                    row[column.field]
                                                        ?.expirationCreditText
                                                "
                                            >
                                                <div
                                                    class="credit-progress-bar-container"
                                                    ngbTooltip
                                                    [mainTooltip]="
                                                        'View Credit'
                                                    "
                                                    tooltipBackground="#424242"
                                                    position="bottom"
                                                >
                                                    <app-ta-progres-bar
                                                        [percents]="
                                                            row[column.field]
                                                                .percentage
                                                        "
                                                        [text]="
                                                            row[column.field]
                                                                .expirationCreditText
                                                        "
                                                        [data]="row"
                                                        [columnField]="
                                                            column.field
                                                        "
                                                        [hasPopover]="true"
                                                        [isTable]="true"
                                                        [type]="'credit'"
                                                    ></app-ta-progres-bar>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- APPLICANT PROGRESS COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'applicant-progress'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <ng-container
                                                *ngFor="
                                                    let applicantProgress of row[
                                                        column.field
                                                    ];
                                                    trackBy: trackTableNotPinedColumns
                                                "
                                            >
                                                <div
                                                    class="d-flex align-items-center justify-content-center applicant-progress-container"
                                                >
                                                    <p class="m-0 ta-font-bold">
                                                        {{
                                                            applicantProgress?.title
                                                        }}
                                                    </p>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- APPLICANT REVIEW COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'applicant-review'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="applicant-review-container">
                                            <div
                                                class="review-icon"
                                                [ngClass]="{
                                                    reviewed:
                                                        row[column.field]
                                                            .title ===
                                                        'Reviewed',
                                                    finished:
                                                        row[column.field]
                                                            .title ===
                                                        'Finished',
                                                    incomplete:
                                                        row[column.field]
                                                            .title ===
                                                        'Incomplete',
                                                    ready:
                                                        row[column.field]
                                                            .title === 'Ready',
                                                }"
                                            >
                                                <svg-icon
                                                    [src]="
                                                        row[column.field]
                                                            .iconLink
                                                    "
                                                    [svgStyle]="{
                                                        'width.px': '16',
                                                        'height.px': '16',
                                                    }"
                                                ></svg-icon>
                                            </div>
                                            <div
                                                class="review-title"
                                                [ngStyle]="{
                                                    width:
                                                        column.width -
                                                        26 +
                                                        'px',
                                                }"
                                            >
                                                {{ row[column.field].title }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SW TW TOTAL COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="
                                            column.ngTemplate === 'sw-tw-total'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="sw-tw-total-container">
                                            <div class="border"></div>
                                            <div class="regular-count">0</div>
                                            <div class="border"></div>
                                            <div class="regular-count">0</div>
                                            <div class="border"></div>
                                            <div class="bold-count">0</div>
                                            <div class="border"></div>
                                        </div>
                                    </div>

                                    <!-- CITATION COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="column.ngTemplate === 'citation'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="citation-container">
                                            <div class="citation-item cop-item">
                                                0
                                            </div>
                                            <div class="citation-item oss-item">
                                                0
                                            </div>
                                            <div
                                                class="citation-item money-item"
                                            >
                                                0
                                            </div>
                                        </div>
                                    </div>

                                    <!-- ACCIDENT CITATION TYPE COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'accident-citation'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div
                                            class="accident-citation-container"
                                        >
                                            <div
                                                class="accident-citation-item item-has-margin grey-item"
                                            >
                                                0
                                            </div>
                                            <div
                                                class="accident-citation-item item-has-margin yellow-item"
                                            >
                                                0
                                            </div>
                                            <div
                                                class="accident-citation-item item-has-margin red-item"
                                            >
                                                0
                                            </div>
                                            <div
                                                class="accident-citation-item item-has-margin blue-item"
                                            >
                                                N
                                            </div>
                                            <div
                                                class="accident-citation-item blue-item"
                                            >
                                                N
                                            </div>
                                        </div>
                                    </div>

                                    <!-- PASSWORD ACCOUNT COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'password-account'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <app-ta-password-account-hidden-characters
                                                [passwordOrAccount]="
                                                    row[column.field]
                                                "
                                            ></app-ta-password-account-hidden-characters>
                                        </div>
                                    </ng-container>

                                    <!-- SHIPPER LOAD COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate === 'shipper-load'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <div
                                                class="align-items-center shipper-load-container"
                                            >
                                                <div
                                                    class="d-flex align-items-center shipper-load-container-box"
                                                >
                                                    <svg-icon
                                                        class="icon"
                                                        [src]="
                                                            tableBodySvgRoutes.loadsRoute
                                                        "
                                                        [svgStyle]="{
                                                            'width.px': '18',
                                                            'height.px': '18',
                                                        }"
                                                    ></svg-icon>

                                                    <p
                                                        class="m-0 ta-font-semi-bold"
                                                    >
                                                        {{
                                                            row[column.field]
                                                                .loads
                                                        }}
                                                    </p>
                                                </div>

                                                <div
                                                    class="d-flex align-items-center shipper-load-container-box"
                                                >
                                                    <svg-icon
                                                        class="icon"
                                                        [src]="
                                                            tableBodySvgRoutes.pickupRoute
                                                        "
                                                        [svgStyle]="{
                                                            'width.px': '18',
                                                            'height.px': '18',
                                                        }"
                                                    ></svg-icon>

                                                    <p
                                                        class="m-0 ta-font-semi-bold"
                                                    >
                                                        {{
                                                            row[column.field]
                                                                .pickups
                                                        }}
                                                    </p>
                                                </div>

                                                <div
                                                    class="d-flex align-items-center shipper-load-container-box"
                                                >
                                                    <svg-icon
                                                        class="icon"
                                                        [src]="
                                                            tableBodySvgRoutes.deliveryRoute
                                                        "
                                                        [svgStyle]="{
                                                            'width.px': '18',
                                                            'height.px': '18',
                                                        }"
                                                    ></svg-icon>

                                                    <p
                                                        class="m-0 ta-font-semi-bold"
                                                    >
                                                        {{
                                                            row[column.field]
                                                                .deliveries
                                                        }}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- OPEN HOURS COLUMN -->

                                    @if (column.ngTemplate === 'open-hours') {
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <app-ta-open-hours-dropdown
                                                [dropdownConfig]="{
                                                    rowId: row?.id,
                                                    width: column?.width,
                                                    openHours:
                                                        row[column.field]
                                                            ?.openHours,
                                                    openHoursToday:
                                                        row[column.field]
                                                            ?.openHoursToday,
                                                }"
                                            ></app-ta-open-hours-dropdown>
                                        </div>
                                    }

                                    <!-- PROGRESS RANGE COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column?.ngTemplate ===
                                            taTableBodyConstants.NG_TEMPLATE_PROGRESS_RANGE
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <app-ca-progress-range
                                                [data]="{
                                                    startRange:
                                                        row[column.field]
                                                            ?.startRange,
                                                    endRange:
                                                        row[column.field]
                                                            ?.endRange,
                                                    value: row[column.field]
                                                        ?.value,
                                                    unit: row[column.field]
                                                        ?.unit,
                                                    lastUsed:
                                                        row[column.field]
                                                            ?.lastUsed,
                                                }"
                                            ></app-ca-progress-range>
                                        </div>
                                    </ng-container>
                                </td>
                            </ng-container>
                        </div>

                        <!-- Border -->

                        <div class="table-border-scroll-section-container">
                            <div
                                class="table-border-scroll-section table-border-left"
                                [ngClass]="{
                                    'table-border-left-show':
                                        showScrollSectionBorder,
                                    hidden: !isLeftScrollLineShown,
                                }"
                            ></div>
                        </div>

                        <!-- NOT PINED -->

                        <div
                            class="not-pined-columns"
                            id="table-not-pined-scroll-container"
                            [ngStyle]="{ 'max-width.px': notPinedMaxWidth }"
                        >
                            <ng-container
                                *ngFor="
                                    let column of notPinedColumns;
                                    let notPinedColumnIndex = index;
                                    trackBy: trackTableNotPinedColumns
                                "
                            >
                                <td
                                    class="not-pined-td"
                                    [ngClass]="{
                                        'space-left': notPinedColumnIndex === 0,
                                    }"
                                    [ngStyle]="{
                                        'margin-right':
                                            column.ngTemplate ===
                                                'description' ||
                                            column.ngTemplate === 'gallon' ||
                                            column.ngTemplate === 'ppg'
                                                ? 0
                                                : column.ngTemplate === 'total'
                                                  ? '7px'
                                                  : '',
                                    }"
                                >
                                    <!-- NO TEMPLATE -->

                                    <div
                                        *ngIf="column.ngTemplate === ''"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        class="td-content"
                                    >
                                        <div class="no-template">
                                            NO TEMPLATE
                                        </div>
                                    </div>

                                    <!-- VIN COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'vin'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div class="vin-container">
                                            {{ row[column.field].regularText }}
                                            <span class="vin-bold">
                                                {{ row[column.field].boldText }}
                                            </span>
                                        </div>
                                    </div>

                                    <!-- MILES HALF PERCENT COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'halfPercentage'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div class="halfPercentage">
                                            <span class="table-text">{{
                                                row[column.field]
                                            }}</span>
                                            <span class="perc-span">
                                                {{
                                                    row[column.fieldPercentage]
                                                }}</span
                                            >
                                        </div>
                                    </div>

                                    <!-- DISPECHER AVATAR COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'dispatcher-avatar'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <ng-container
                                            *ngIf="row[column.field].name"
                                        >
                                            <img
                                                [src]="
                                                    row[column.field]?.avatar
                                                        ? row[column.field]
                                                              .avatar
                                                        : 'assets/svg/truckassist-table/user-avatar-no-profile.svg'
                                                "
                                                alt=""
                                                class="dispecher-img"
                                            />

                                            <div
                                                class="dispatcher-name"
                                                [ngStyle]="{
                                                    width:
                                                        column.width -
                                                        24 +
                                                        'px',
                                                }"
                                            >
                                                {{ row[column.field].name }}
                                            </div>
                                        </ng-container>
                                    </div>

                                    <!-- STATUS COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'status'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        #ngbStatus="ngbPopover"
                                        [autoClose]="true"
                                        [ngbPopover]="statusPopover"
                                        [placement]="'bottom top'"
                                        container="body"
                                        popoverClass="table-status-popover"
                                        triggers="manual"
                                    >
                                        <div
                                            ngbTooltip
                                            mainContent
                                            [mainTooltip]="'Change Status'"
                                            position="bottom"
                                            [tooltipBackground]="'#424242'"
                                            tooltipColor="'#ffff'"
                                            tooltipTextAlign="center"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                            class="status-containers"
                                            (click)="
                                                toggleStatusDropdown(
                                                    ngbStatus,
                                                    row
                                                )
                                            "
                                        >
                                            <div class="status">
                                                <app-load-status-string
                                                    [status]="{
                                                        name: row.status
                                                            .statusString,
                                                        valueForRequest:
                                                            row.status
                                                                .statusValue
                                                                .name,
                                                    }"
                                                    [justifyStart]="true"
                                                ></app-load-status-string>
                                            </div>
                                            <div
                                                class="status-time ta-font-medium"
                                            >
                                                {{ row[column.field].time }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- FLEET COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'fleet'"
                                    >
                                        <div
                                            class="td-content set-left"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                                margin: '0px 4px 0px -4px',
                                            }"
                                        >
                                            <app-ta-input-dropdown-table
                                                [data]="row"
                                                [type]="'owner'"
                                            ></app-ta-input-dropdown-table>
                                        </div>
                                    </ng-container>

                                    <!-- TEXT COLOR COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate === 'text-color'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            class="text-color"
                                            [ngStyle]="{
                                                color: row[column.field].color,
                                                'margin-left':
                                                    column.margin + 'px',
                                                'padding-left':
                                                    column.padding + 'px',
                                            }"
                                        >
                                            {{ row[column.field].number }}
                                        </div>
                                    </div>

                                    <!-- PICKUP AND DELIVERY COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'pickup'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width * 2 + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth * 2
                                                    : 'unset',
                                            }"
                                            #ngbStatus="ngbPopover"
                                            [autoClose]="true"
                                            [ngbPopover]="stopsPopover"
                                            [placement]="'bottom-left'"
                                            container="body"
                                            popoverClass="table-stops-popover"
                                            triggers="manual"
                                            (click)="
                                                toggleStopsDropdown(
                                                    ngbStatus,
                                                    column.width * 2,
                                                    row
                                                )
                                            "
                                        >
                                            <div
                                                ngbTooltip
                                                [mainTooltip]="'Show Stops'"
                                                tooltipBackground="#424242"
                                                position="bottom"
                                                class="d-flex align-items-center"
                                            >
                                                <ng-container
                                                    *ngFor="
                                                        let rowField of row[
                                                            column.field
                                                        ];
                                                        let i = index
                                                    "
                                                >
                                                    <div
                                                        class="d-flex align-items-center"
                                                        [ngStyle]="{
                                                            'margin-right': !i
                                                                ? '10px'
                                                                : '0',
                                                        }"
                                                    >
                                                        <div
                                                            class="pickup-delivery-counter"
                                                            [ngClass]="{
                                                                'pickup-count':
                                                                    !rowField.delivery &&
                                                                    row.count !==
                                                                        'S',
                                                                'delivery-count':
                                                                    rowField.delivery &&
                                                                    rowField.count !==
                                                                        'S',
                                                                'special-count':
                                                                    rowField.count ===
                                                                    'S',
                                                            }"
                                                        >
                                                            {{ rowField.count }}
                                                        </div>

                                                        <div
                                                            class="pickup-delivery-location-container"
                                                        >
                                                            <div
                                                                class="location"
                                                                [ngStyle]="{
                                                                    width:
                                                                        column.width -
                                                                        28 +
                                                                        'px',
                                                                }"
                                                            >
                                                                {{
                                                                    rowField.location
                                                                }}
                                                            </div>
                                                            <ng-container
                                                                *ngIf="
                                                                    rowField.date ||
                                                                    rowField.time
                                                                "
                                                            >
                                                                <div
                                                                    class="date-time-container"
                                                                    [ngStyle]="{
                                                                        width:
                                                                            column.width -
                                                                            30 +
                                                                            'px',
                                                                    }"
                                                                >
                                                                    <div
                                                                        class="date"
                                                                    >
                                                                        {{
                                                                            rowField.date
                                                                        }}
                                                                    </div>
                                                                    <div
                                                                        class="time"
                                                                    >
                                                                        {{
                                                                            rowField.time
                                                                        }}
                                                                    </div>
                                                                </div>
                                                            </ng-container>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- LOAD TOTAL COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate === 'load-total'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div class="load-totla-container">
                                            <div
                                                class="main-total"
                                                [ngStyle]="{
                                                    width: column.width + 'px',
                                                }"
                                            >
                                                {{ row[column.field].total }}
                                            </div>
                                            <div
                                                *ngIf="
                                                    row[column.field].subTotal
                                                "
                                                [ngStyle]="{
                                                    width: column.width + 'px',
                                                }"
                                                class="sub-total"
                                            >
                                                {{ row[column.field].subTotal }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- CUSTOMER NAME COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'customer-name'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <svg-icon
                                            *ngIf="row[column.field].hasBanDnu"
                                            class="customer-icon"
                                            [src]="
                                                row[column.field].isDnu
                                                    ? 'assets/svg/truckassist-table/dnu-icon.svg'
                                                    : 'assets/svg/truckassist-table/ban-icon.svg'
                                            "
                                            [svgStyle]="{
                                                'width.px': '18',
                                                'height.px': '18',
                                            }"
                                        ></svg-icon>

                                        <div
                                            class="customer-name"
                                            [ngStyle]="{
                                                width: row[column.field]
                                                    .hasBanDnu
                                                    ? column.width - 22 + 'px'
                                                    : column.width + 'px',
                                            }"
                                            [ngClass]="{
                                                'customer-name-ban':
                                                    !row[column.field].isDnu &&
                                                    row[column.field].hasBanDnu,
                                            }"
                                        >
                                            {{ row[column.field].name }}
                                        </div>
                                    </div>

                                    <!-- AVATAR COLUMN -->

                                    <div
                                        *ngIf="column.ngTemplate === 'avatar'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px':
                                                column?.minWidth ?? 'unset',
                                        }"
                                        class="td-content"
                                    >
                                        @if (
                                            row.isIncompleteFuelTransaction &&
                                            column.name === 'Driver' &&
                                            !row.driver
                                        ) {
                                            <div
                                                mainTooltip="Driver not Linked"
                                                mainContent
                                                ngbTooltip
                                                tooltipBackground="#424242"
                                                tooltipColor="#FFFFFF"
                                                position="bottom"
                                                tooltipTextAlign="center"
                                            >
                                                <svg-icon
                                                    class="lh-1 mr-1 column-text-svg-transaction-incomplete"
                                                    [src]="
                                                        tableBodySvgRoutes.fuelIncompleteTransactionSvgRoute
                                                    "
                                                ></svg-icon>
                                            </div>
                                        } @else {
                                            <div
                                                class="avatar-container"
                                                [ngClass]="{
                                                    'avatar-is-owner':
                                                        row.isOwner,
                                                }"
                                            >
                                                <ng-container
                                                    [ngTemplateOutlet]="
                                                        avatarColumn
                                                    "
                                                    [ngTemplateOutletContext]="{
                                                        row: row,
                                                        column: column,
                                                    }"
                                                ></ng-container>

                                                <img
                                                    class="avatar-owner"
                                                    alt="avatar"
                                                    *ngIf="row.isOwner"
                                                    src="assets/svg/truckassist-table/owner-badge.svg"
                                                />
                                            </div>
                                        }

                                        @if (
                                            row.isIncompleteFuelTransaction &&
                                            column.name === 'Driver' &&
                                            !row.driver
                                        ) {
                                            <span
                                                class="table-text column-text-red"
                                                [ngClass]="{
                                                    'ta-font-semi-bold':
                                                        column.isTextBold ||
                                                        row[column.field] ===
                                                            'Unlimited',
                                                    'align-end':
                                                        column.isJustifyEnd,
                                                }"
                                                [innerHtml]="
                                                    row[column.field]
                                                        ? (row[column.field]
                                                          | tableHighlightSearchText
                                                              : this
                                                                    .chipsForHighlight)
                                                        : ''
                                                "
                                            ></span>
                                        } @else {
                                            <span
                                                (click)="
                                                    goToDetails(column, row)
                                                "
                                                [ngClass]="{
                                                    'has-details-page':
                                                        !column.link
                                                            ?.doesNotHaveRout,
                                                }"
                                                class="table-avatar-name"
                                                [innerHtml]="
                                                    row[column.field]
                                                        ? (row[column.field]
                                                          | tableHighlightSearchText
                                                              : this
                                                                    .chipsForHighlight)
                                                        : ''
                                                "
                                            ></span>
                                        }
                                    </div>

                                    <div
                                        *ngIf="
                                            column.ngTemplate ===
                                            'avatar-assign'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px':
                                                column?.minWidth ?? 'unset',
                                        }"
                                        class="td-content"
                                    >
                                        <div
                                            class="avatar-assign-container d-flex justify-content-center align-items-center"
                                        >
                                            <ng-container *ngIf="row.avatarImg">
                                                <div class="avatar-assign-img">
                                                    <img
                                                        alt="avatar"
                                                        [src]="row.avatarImg"
                                                    />
                                                </div>
                                            </ng-container>

                                            <div
                                                class="avatar-assign-text"
                                                [ngStyle]="{
                                                    'background-color':
                                                        row?.avatarColor
                                                            ?.background ??
                                                        'unset',
                                                    color:
                                                        row?.avatarColor
                                                            ?.color ?? 'unset',
                                                }"
                                            >
                                                {{ row.tableDriver }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- USER STATUS COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate === 'user-status'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            class="user-status-container ta-font-bold"
                                            [ngStyle]="{
                                                color:
                                                    row[column.field].status ===
                                                    'Owner'
                                                        ? '#259F94'
                                                        : row[column.field]
                                                                .status ===
                                                            'Admin'
                                                          ? '#3B73ED'
                                                          : row[column.field]
                                                                  .status ===
                                                              'User'
                                                            ? '#6C6C6C'
                                                            : '#AAAAAA',
                                            }"
                                        >
                                            {{ row[column.field].status }}
                                        </div>
                                    </div>

                                    <!-- USER ACTIVITY COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'user-activity'
                                        "
                                    >
                                        <div
                                            class="td-content set-center"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <div
                                                class="user-activity-container d-flex gap-1 align-items-center table-text"
                                                [class.ta-font-semi-bold]="
                                                    row[column.field] ===
                                                    'Online'
                                                "
                                            >
                                                <ng-cotainer
                                                    *ngIf="
                                                        row[column.field] ===
                                                        'Online'
                                                    "
                                                >
                                                    <div
                                                        class="online-icon"
                                                    ></div>
                                                </ng-cotainer>
                                                {{ row[column.field] }}
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- NAME LINK COLUMN -->

                                    @if (column.ngTemplate === 'nameLink') {
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                            ngbTooltip
                                        >
                                            @if (column.link?.doesNotHaveRout) {
                                                <div
                                                    [ngStyle]="{
                                                        width:
                                                            column.width + 'px',
                                                    }"
                                                    class="table-name-link"
                                                    [ngClass]="{
                                                        'has-details-page':
                                                            !column.link
                                                                ?.doesNotHaveRout,
                                                    }"
                                                    (click)="
                                                        goToDetails(column, row)
                                                    "
                                                >
                                                    @if (
                                                        row?.tableFuelStopIsClosed
                                                    ) {
                                                        <svg-icon
                                                            [src]="
                                                                tableBodySvgRoutes.brokerClosedRoute
                                                            "
                                                        ></svg-icon>
                                                    }

                                                    {{ row[column.field] }}
                                                </div>
                                            } @else {
                                                <div
                                                    [ngStyle]="{
                                                        width:
                                                            column.width + 'px',
                                                    }"
                                                    class="table-name-link"
                                                    [ngClass]="{
                                                        'has-details-page':
                                                            !column.link
                                                                ?.doesNotHaveRout,
                                                    }"
                                                    (click)="
                                                        goToDetails(column, row)
                                                    "
                                                    #op="ngbPopover"
                                                    [ngbPopover]="
                                                        optionsPopover
                                                    "
                                                    [placement]="'bottom-right'"
                                                    [autoClose]="'outside'"
                                                    popoverClass="toolbar-options-popover"
                                                    triggers="manual"
                                                    (hidden)="
                                                        otionsPopupOppen = false
                                                    "
                                                    mainTooltip="View Detail"
                                                    [tooltipBackground]="
                                                        '#424242'
                                                    "
                                                    [tooltipColor]="'#ffff'"
                                                    position="bottom"
                                                >
                                                    @if (
                                                        row?.tableFuelStopIsClosed
                                                    ) {
                                                        <svg-icon
                                                            [src]="
                                                                tableBodySvgRoutes.brokerClosedRoute
                                                            "
                                                        ></svg-icon>
                                                    }

                                                    @if (
                                                        row.isIntegratedFuelTransaction
                                                    ) {
                                                        <svg-icon
                                                            class="mr-3 lh-0 integrated-fuel-transaction"
                                                            [src]="
                                                                tableBodySvgRoutes.circleRoute
                                                            "
                                                        ></svg-icon>
                                                    } @else if (
                                                        !row.isIntegratedFuelTransaction &&
                                                        activeTableData?.gridNameTitle ===
                                                            'FUEL'
                                                    ) {
                                                        <svg-icon
                                                            class="mr-3 lh-0 manual-fuel-transaction"
                                                            [src]="
                                                                tableBodySvgRoutes.circleRoute
                                                            "
                                                        ></svg-icon>
                                                    }

                                                    {{ row[column.field] }}
                                                </div>
                                            }
                                        </div>
                                    }

                                    <!-- OOS COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="column.ngTemplate === 'oos'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div class="oos-container">
                                            <div
                                                [ngClass]="{
                                                    'oos-active':
                                                        row.oos[0].active,
                                                }"
                                            >
                                                {{ row.oos[0].value }}
                                            </div>
                                            <div
                                                [ngClass]="{
                                                    'oos-active':
                                                        row.oos[1].active,
                                                }"
                                            >
                                                {{ row.oos[1].value }}
                                            </div>
                                            <div
                                                [ngClass]="{
                                                    'oos-active':
                                                        row.oos[2].active,
                                                }"
                                            >
                                                {{ row.oos[2].value }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- VIOLATION STATE COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'violation-state'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="violation-state-container">
                                            {{ row[column.field] }}
                                        </div>
                                    </div>

                                    <!-- INV. AGING COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate === 'inv-aging'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                            }"
                                            #invoicePopover="ngbPopover"
                                            [ngbPopover]="invoiceAgingPopover"
                                            container="body"
                                            [placement]="'bottom-left'"
                                            popoverClass="table-invoice-aging-popover"
                                            triggers="manual"
                                            [autoClose]="'outside'"
                                            (hidden)="
                                                invoiceDropdownActive ===
                                                    row.id &&
                                                invoiceDropdownType ===
                                                    column.field
                                                    ? (invoiceDropdownActive =
                                                          -1)
                                                    : {}
                                            "
                                            (click)="
                                                row[column.field]
                                                    ?.tablePayTerm &&
                                                    !!row[column.field]
                                                        ?.invoiceAgeingGroupOne &&
                                                    onShowInvoiceAgingDropdown(
                                                        invoicePopover,
                                                        row,
                                                        column
                                                    )
                                            "
                                        >
                                            <div
                                                class="inv-aging-container d-flex align-items-center"
                                                [ngClass]="{
                                                    'invoice-popover-open':
                                                        invoiceDropdownActive ===
                                                            row.id &&
                                                        invoiceDropdownType ===
                                                            column.field,
                                                    'disable-hover':
                                                        !row[column.field]
                                                            ?.tablePayTerm ||
                                                        !row[column.field]
                                                            ?.invoiceAgeingGroupOne,
                                                }"
                                                ngbTooltip
                                                [mainTooltip]="
                                                    column.field ===
                                                    'tablePaidInvAging'
                                                        ? 'Paid Invoice Aging'
                                                        : 'Unpaid Invoice Aging'
                                                "
                                                [tooltipBackground]="'#424242'"
                                                [tooltipColor]="'#ffff'"
                                                position="bottom"
                                                [disableTooltip]="
                                                    !row[column.field]
                                                        ?.tablePayTerm
                                                "
                                            >
                                                <div
                                                    class="inv-aging-group main-group ta-font-semi-bold d-flex align-items-center justify-content-center"
                                                >
                                                    {{
                                                        row[column.field]
                                                            ?.invoiceAgeingGroup
                                                            ?.countInvoice
                                                            | thousandToShortFormatPipe
                                                    }}
                                                </div>

                                                <div
                                                    class="inv-aging-group-border mx-1"
                                                ></div>

                                                <ng-container
                                                    *ngIf="
                                                        row[column.field]
                                                            ?.tablePayTerm;
                                                        else noPayTermTemplate
                                                    "
                                                >
                                                    <div
                                                        class="inv-aging-group group-1 ta-font-semi-bold d-flex align-items-center justify-content-center"
                                                    >
                                                        {{
                                                            column.field ===
                                                            'tableUnpaidInvAging'
                                                                ? (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupOne
                                                                      ?.countInvoice
                                                                  | thousandToShortFormatPipe)
                                                                : (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupOne
                                                                      ?.percentage ??
                                                                      0) + '%'
                                                        }}
                                                    </div>

                                                    <div
                                                        class="inv-aging-group group-2 ta-font-semi-bold d-flex align-items-center justify-content-center"
                                                    >
                                                        {{
                                                            column.field ===
                                                            'tableUnpaidInvAging'
                                                                ? (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupTwo
                                                                      ?.countInvoice
                                                                  | thousandToShortFormatPipe)
                                                                : (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupTwo
                                                                      ?.percentage ??
                                                                      0) + '%'
                                                        }}
                                                    </div>

                                                    <div
                                                        class="inv-aging-group group-3 ta-font-semi-bold d-flex align-items-center justify-content-center"
                                                    >
                                                        {{
                                                            column.field ===
                                                            'tableUnpaidInvAging'
                                                                ? (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupThree
                                                                      ?.countInvoice
                                                                  | thousandToShortFormatPipe)
                                                                : (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupThree
                                                                      ?.percentage ??
                                                                      0) + '%'
                                                        }}
                                                    </div>

                                                    <div
                                                        class="inv-aging-group group-4 ta-font-semi-bold d-flex align-items-center justify-content-center"
                                                    >
                                                        {{
                                                            column.field ===
                                                            'tableUnpaidInvAging'
                                                                ? (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupFour
                                                                      ?.countInvoice
                                                                  | thousandToShortFormatPipe)
                                                                : (row[
                                                                      column
                                                                          .field
                                                                  ]
                                                                      ?.invoiceAgeingGroupFour
                                                                      ?.percentage ??
                                                                      0) + '%'
                                                        }}
                                                    </div>
                                                </ng-container>

                                                <ng-template #noPayTermTemplate>
                                                    <div
                                                        class="d-flex align-items-center inv-aging-text"
                                                    >
                                                        <div
                                                            class="d-flex align-items-center justify-content-center inv-aging-group group-5 ta-font-medium"
                                                        >
                                                            {{
                                                                row[
                                                                    column.field
                                                                ]
                                                                    ?.invoiceAgeingGroup
                                                                    ?.averageDays ??
                                                                    0
                                                            }}
                                                        </div>

                                                        <p
                                                            class="m-0 text-color-black-2"
                                                        >
                                                            days average
                                                        </p>
                                                    </div>
                                                </ng-template>

                                                <div
                                                    class="inv-aging-group-border mx-1"
                                                ></div>

                                                <div
                                                    class="inv-aging-text total-amount-text"
                                                    [ngClass]="{
                                                        'ta-font-semi-bold text-color-white':
                                                            invoiceDropdownActive ===
                                                                row.id &&
                                                            invoiceDropdownType ===
                                                                column.field,
                                                        'text-color-black-2':
                                                            invoiceDropdownActive ===
                                                            -1,
                                                    }"
                                                    [ngStyle]="{
                                                        'margin-left':
                                                            invoiceDropdownActive ===
                                                                row.id &&
                                                            invoiceDropdownType ===
                                                                column.field
                                                                ? '4px'
                                                                : '',
                                                    }"
                                                >
                                                    {{
                                                        row[column.field]
                                                            ?.totalPaid
                                                            ? (row[column.field]
                                                                  .totalPaid
                                                              | formatCurrency)
                                                            : row[column.field]
                                                                    ?.totalDebt
                                                              ? (row[
                                                                    column.field
                                                                ].totalDebt
                                                                | formatCurrency)
                                                              : (0
                                                                | formatCurrency)
                                                    }}
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- CONTACT COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'contact'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                            }"
                                        >
                                            <ng-container
                                                *ngIf="row?.[column?.field]"
                                            >
                                                <div class="contacts-container">
                                                    <app-ta-input-dropdown-contacts
                                                        [contactsData]="
                                                            row[column.field]
                                                        "
                                                        (onAddButton)="
                                                            onAddContact(row)
                                                        "
                                                        (onEditButton)="
                                                            onEditContact(row)
                                                        "
                                                        (onDeleteButton)="
                                                            onDeleteContact(row)
                                                        "
                                                    ></app-ta-input-dropdown-contacts>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- WORK HOUR COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate === 'work-hour'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                            }"
                                        >
                                            <ng-container
                                                *ngIf="row[column.field]"
                                            >
                                                <div
                                                    class="d-flex align-items-center work-hour-container"
                                                >
                                                    <div
                                                        ngbTooltip
                                                        [mainTooltip]="
                                                            (column?.title ===
                                                                'Shipping' &&
                                                                row?.shippingAppointment) ||
                                                            (column?.title ===
                                                                'Receiving' &&
                                                                row?.receivingAppointment)
                                                                ? 'Appointment'
                                                                : 'Open Hours'
                                                        "
                                                        tooltipBackground="#424242"
                                                        position="bottom"
                                                    >
                                                        <svg-icon
                                                            class="work-hour-icon"
                                                            [ngClass]="{
                                                                appointment:
                                                                    column?.title ===
                                                                    'Shipping'
                                                                        ? row?.shippingAppointment
                                                                        : row.receivingAppointment,
                                                            }"
                                                            [src]="
                                                                tableBodySvgRoutes.workHourRoute
                                                            "
                                                            [svgStyle]="{
                                                                'width.px': 14,
                                                                'height.px': 14,
                                                            }"
                                                        ></svg-icon>
                                                    </div>

                                                    <p class="m-0">
                                                        {{ row[column.field] }}
                                                    </p>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- DESCRIPTION COLUMN (GALLON, PPG, TOTAL)-->

                                    <ng-container
                                        *ngIf="
                                            [
                                                'description',
                                                'total',
                                                'gallon',
                                                'ppg',
                                            ].includes(column.ngTemplate)
                                        "
                                    >
                                        <div
                                            class="td-content description-items-container"
                                            [ngClass]="{
                                                'order-cost-container':
                                                    column.ngTemplate ===
                                                        'total' &&
                                                    row?.isRepairOrder,
                                                'order-items-active':
                                                    descriptionOrderActiveIndex ===
                                                    i,
                                                hovered:
                                                    descriptionCostHoverIndex ===
                                                        i &&
                                                    !row?.isRepairOrder,
                                                'd-flex justify-content-end':
                                                    column.ngTemplate ===
                                                    'gallon',
                                            }"
                                            [ngStyle]="{
                                                width:
                                                    (column.ngTemplate ===
                                                        'ppg' ||
                                                    column.ngTemplate ===
                                                        'total'
                                                        ? column.width + 6
                                                        : column.width) + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                            #t1="ngbPopover"
                                            container="body"
                                            placement="bottom-left"
                                            triggers="manual"
                                            popoverClass="table-description-popover"
                                            [ngbPopover]="descriptionPopover"
                                            (click)="
                                                (column.ngTemplate ===
                                                    'description' ||
                                                    column.ngTemplate ===
                                                        'total') &&
                                                    onShowDescriptionDropdown(
                                                        t1,
                                                        tableData[0]
                                                            ?.gridNameTitle,
                                                        column?.width,
                                                        row
                                                    )
                                            "
                                            (mouseenter)="
                                                descriptionCostHoverIndex = i
                                            "
                                            (mouseleave)="
                                                descriptionCostHoverIndex = -1
                                            "
                                            (shown)="
                                                descriptionOrderActiveIndex = i
                                            "
                                            (hidden)="
                                                descriptionOrderActiveIndex = -1
                                            "
                                        >
                                            <ng-container
                                                [ngSwitch]="column.ngTemplate"
                                            >
                                                <!-- DESCRIPTION COLUMN -->

                                                <ng-container
                                                    *ngSwitchCase="
                                                        'description'
                                                    "
                                                >
                                                    <div
                                                        class="w-100"
                                                        ngbTooltip
                                                        tooltipBackground="#424242"
                                                        position="bottom"
                                                        [mainTooltip]="
                                                            column.field ===
                                                            'tableDescription'
                                                                ? 'Show Items'
                                                                : ''
                                                        "
                                                        [appDescriptionItemsTextCount]="
                                                            row[column.field]
                                                        "
                                                        [itemSpecialStylesIndexArray]="
                                                            row.tableDescriptionSpecialStylesIndexArray
                                                        "
                                                        [containerWidth]="
                                                            column.width
                                                        "
                                                    ></div>
                                                </ng-container>

                                                <!-- TOTAL COLUMN -->

                                                <ng-container
                                                    *ngSwitchCase="'total'"
                                                >
                                                    <div
                                                        class="d-flex align-items-center justify-content-end w-100"
                                                    >
                                                        <ng-container
                                                            *ngIf="
                                                                !row.isRepairOrder;
                                                                else repairOrder
                                                            "
                                                        >
                                                            <span
                                                                class="ta-font-semi-bold text-size-14 text-color-black"
                                                                [innerHtml]="
                                                                    row[
                                                                        column
                                                                            .field
                                                                    ]
                                                                        ? row[
                                                                              column
                                                                                  .field
                                                                          ]
                                                                        : ''
                                                                "
                                                            ></span>
                                                        </ng-container>

                                                        <ng-template
                                                            #repairOrder
                                                        >
                                                            <div
                                                                class="d-flex justify-content-center align-items-center ta-font-bold text-size-11 text-color-blue-18 finish-order-action"
                                                                (click)="
                                                                    onFinishOrder(
                                                                        row
                                                                    )
                                                                "
                                                            >
                                                                FINISH ORDER
                                                            </div>
                                                        </ng-template>
                                                    </div>
                                                </ng-container>

                                                <!-- GALLON COLUMN -->

                                                <ng-container
                                                    *ngIf="
                                                        column.ngTemplate ===
                                                        'gallon'
                                                    "
                                                >
                                                    <div
                                                        class="d-flex justify-content-end gallon-container"
                                                    >
                                                        <span
                                                            class="table-text"
                                                            [innerHtml]="
                                                                row[
                                                                    column.field
                                                                ]
                                                                    ? (row[
                                                                          column
                                                                              .field
                                                                      ]
                                                                      | tableHighlightSearchText
                                                                          : chipsForHighlight)
                                                                    : ''
                                                            "
                                                        ></span>
                                                    </div>
                                                </ng-container>

                                                <!-- PPG COLUMN -->

                                                <ng-container
                                                    *ngSwitchCase="'ppg'"
                                                >
                                                    <ng-container
                                                        *ngIf="
                                                            row[column.field]
                                                        "
                                                    >
                                                        <div
                                                            class="d-flex align-items-center justify-content-end w-100 ppg-container"
                                                        >
                                                            <svg-icon
                                                                class="ppg-status-icon"
                                                                [svgStyle]="{
                                                                    'width.px': 10,
                                                                    'height.px': 10,
                                                                }"
                                                                [src]="
                                                                    tableBodySvgRoutes.circleRoute
                                                                "
                                                            >
                                                            </svg-icon>

                                                            <span
                                                                class="table-text"
                                                                [ngClass]="{
                                                                    'align-end':
                                                                        column.isJustifyEnd,
                                                                }"
                                                                >{{
                                                                    '$' +
                                                                        row[
                                                                            column
                                                                                .field
                                                                        ]
                                                                }}</span
                                                            >
                                                        </div>
                                                    </ng-container>
                                                </ng-container>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- DESCRIPTION COLUMN DRIVER (OFFDUTY LOCATION, RESTRICTION, ENDORSEMENT) -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'description-driver'
                                        "
                                    >
                                        <div
                                            class="td-content description-items-driver-container"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                            [ngClass]="{
                                                'has-value':
                                                    row[column.field]?.length,
                                            }"
                                            #t3="ngbPopover"
                                            container="body"
                                            placement="bottom-left"
                                            triggers="manual"
                                            popoverClass="table-description-popover"
                                            [ngbPopover]="descriptionPopover"
                                            (click)="
                                                row[column.field]?.length &&
                                                    onShowDescriptionDropdown(
                                                        t3,
                                                        tableData[0]
                                                            ?.gridNameTitle,
                                                        column?.width,
                                                        row,
                                                        column.field
                                                    )
                                            "
                                        >
                                            <div
                                                ngbTooltip
                                                tooltipBackground="#424242"
                                                position="bottom"
                                                [mainTooltip]="
                                                    column.name.includes('Duty')
                                                        ? 'View Off Duty locations'
                                                        : column.name ===
                                                            'Restriction'
                                                          ? 'View Restrictions'
                                                          : 'View Endorsements'
                                                "
                                                [appDescriptionItemsTextCount]="
                                                    row[column.field]
                                                "
                                                [containerWidth]="column.width"
                                            ></div>
                                        </div>
                                    </ng-container>

                                    <!-- SHARED COLUMN-->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'shared'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div
                                            class="d-flex align-items-center shared-container"
                                        >
                                            <app-ta-input-dropdown-table
                                                *ngIf="
                                                    row.departmentContacts
                                                        .length
                                                "
                                                [type]="'contacts'"
                                                [data]="row.departmentContacts"
                                            ></app-ta-input-dropdown-table>

                                            <ng-container
                                                *ngIf="
                                                    !row.departmentContacts
                                                        .length
                                                "
                                            >
                                                <p class="m-0">Only You</p>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <!-- RAITING COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'rating'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div
                                            class="d-flex align-items-center raiting-container"
                                        >
                                            <!-- Like -->
                                            <div
                                                class="raiting-icon"
                                                (click)="
                                                    onLikeDislike(
                                                        row[column.field]
                                                            ?.hasLiked,
                                                        row
                                                    )
                                                "
                                                [ngClass]="{
                                                    'did-like-icon':
                                                        row[column.field]
                                                            ?.hasLiked,
                                                    'like-icon':
                                                        !row[column.field]
                                                            ?.hasLiked,
                                                }"
                                            ></div>
                                            <!-- Raiting Count -->
                                            <div
                                                class="raiting-counter-container"
                                            >
                                                <div
                                                    class="raiting-counter like-counter"
                                                >
                                                    {{
                                                        row[column.field]
                                                            ?.likeCount
                                                    }}
                                                </div>
                                                <div
                                                    class="raiting-counter dislike-counter"
                                                >
                                                    {{
                                                        row[column.field]
                                                            ?.dislikeCount
                                                    }}
                                                </div>
                                            </div>
                                            <!-- Dislike -->
                                            <div
                                                class="raiting-icon"
                                                (click)="
                                                    onLikeDislike(
                                                        !row[column.field]
                                                            ?.hasLiked,
                                                        row
                                                    )
                                                "
                                                [ngClass]="{
                                                    'did-dislike-icon':
                                                        row[column.field]
                                                            ?.hasDislike,
                                                    'dislike-icon':
                                                        !row[column.field]
                                                            ?.hasDislike,
                                                }"
                                            ></div>
                                        </div>
                                    </div>

                                    <!-- LVL COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="column.ngTemplate === 'lvl'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="lvl-container">
                                            {{ row[column.field] }}
                                        </div>
                                    </div>

                                    <!-- COMPACT TEXT -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate === 'compact-text'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div
                                            class="compact-text-container"
                                            *ngIf="
                                                row[column.field][0].value ||
                                                row[column.field][1].value ||
                                                row[column.field][2].value
                                            "
                                        >
                                            <!-- First -->
                                            <div
                                                class="title-values-container title-values-margin"
                                                *ngIf="
                                                    row[column.field][0].value
                                                "
                                            >
                                                <div class="title-compact-text">
                                                    {{
                                                        row[column.field][0]
                                                            .title
                                                    }}
                                                </div>
                                                <div
                                                    class="values-compact-text"
                                                >
                                                    {{
                                                        row[column.field][0]
                                                            .value
                                                    }}
                                                </div>
                                            </div>

                                            <!-- Second  -->
                                            <div
                                                class="title-values-container title-values-margin"
                                                *ngIf="
                                                    row[column.field][1].value
                                                "
                                            >
                                                <div class="title-compact-text">
                                                    {{
                                                        row[column.field][1]
                                                            .title
                                                    }}
                                                </div>
                                                <div
                                                    class="values-compact-text"
                                                >
                                                    {{
                                                        row[column.field][1]
                                                            .value
                                                    }}
                                                </div>
                                            </div>

                                            <!-- Third  -->
                                            <div
                                                class="title-values-container"
                                                *ngIf="
                                                    row[column.field][2].value
                                                "
                                            >
                                                <div class="title-compact-text">
                                                    {{
                                                        row[column.field][2]
                                                            .title
                                                    }}
                                                </div>
                                                <div
                                                    class="values-compact-text"
                                                >
                                                    {{
                                                        row[column.field][2]
                                                            .value
                                                    }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- VL COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'violation-count'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div
                                            [ngClass]="{
                                                'active-vl-count':
                                                    row[column.field] > 0,
                                                'zero-vl-count':
                                                    !row[column.field],
                                            }"
                                        >
                                            {{
                                                row[column.field]
                                                    ? row[column.field]
                                                    : '0'
                                            }}
                                        </div>
                                    </div>

                                    <!-- SERVICE COLUMN-->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'service'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <div
                                                class="d-flex align-items-center service-container"
                                            >
                                                <ng-container
                                                    *ngFor="
                                                        let service of row[
                                                            column.field
                                                        ];
                                                        trackBy: trackByIdentity
                                                    "
                                                >
                                                    <svg-icon
                                                        class="service-icon"
                                                        [ngClass]="{
                                                            active: service?.active,
                                                        }"
                                                        [src]="
                                                            tableBodySvgRoutes.repairServicesRoute +
                                                            service?.logoName
                                                        "
                                                        [svgStyle]="{
                                                            'width.px': 18,
                                                            'height.px': 18,
                                                        }"
                                                    ></svg-icon>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- URL COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'url'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <a
                                            class="table-url"
                                            href="{{ row[column.field] }}"
                                            target="blank"
                                            [innerHtml]="
                                                row[column.field]
                                                    ? row[column.field]
                                                    : ''
                                            "
                                        ></a>
                                    </div>

                                    <!-- PASSWORD COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'password'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            (click)="
                                                onShowPassword(row, column)
                                            "
                                            *ngIf="
                                                !row[column.field]
                                                    .apiCallStarted
                                            "
                                            class="password-icon"
                                            [ngClass]="{
                                                'password-hidden':
                                                    row[column.field].hiden,
                                                'password-showing':
                                                    !row[column.field].hiden,
                                            }"
                                            ngbTooltip
                                        >
                                            <div
                                                #op="ngbPopover"
                                                [ngbPopover]="optionsPopover"
                                                [placement]="'bottom-right'"
                                                [autoClose]="'outside'"
                                                popoverClass="toolbar-options-popover"
                                                triggers="manual"
                                                (hidden)="
                                                    optionsPopupOpen = false
                                                "
                                                [mainTooltip]="
                                                    !row[column.field].hiden
                                                        ? 'Hide Password'
                                                        : 'Show Password'
                                                "
                                                [tooltipBackground]="'#424242'"
                                                [tooltipColor]="'#ffff'"
                                                position="bottom"
                                            ></div>
                                        </div>

                                        <svg-icon
                                            class="password-spiner"
                                            *ngIf="
                                                row[column.field].apiCallStarted
                                            "
                                            src="/assets/svg/truckassist-table/loading-spinner.svg"
                                        ></svg-icon>

                                        <div
                                            class="password-text-crypted"
                                            [ngStyle]="{
                                                width: column.width - 22 + 'px',
                                            }"
                                            *ngIf="
                                                row[column.field].hiden &&
                                                !row[column.field]
                                                    .apiCallStarted
                                            "
                                            [innerHtml]="
                                                row[column.field]
                                                    .hidemCharacters
                                            "
                                        ></div>

                                        <div
                                            class="password-text-showing"
                                            [ngStyle]="{
                                                width: column.width - 22 + 'px',
                                            }"
                                            *ngIf="
                                                !row[column.field].hiden &&
                                                !row[column.field]
                                                    .apiCallStarted
                                            "
                                        >
                                            {{ row[column.field].password }}
                                        </div>
                                    </div>

                                    <!-- LABEL COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'label'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            class="lable-container"
                                            ngbTooltip
                                            mainTooltip="Change Label"
                                            [tooltipBackground]="'#2F2F2F'"
                                            position="bottom"
                                        >
                                            <ng-container
                                                *ngIf="row[column.field]"
                                            >
                                                <app-ta-input-dropdown-label
                                                    [formControl]="
                                                        dropdownSelectionArray
                                                            .controls[i]
                                                    "
                                                    [inputConfig]="{
                                                        name: 'Input Dropdown Label',
                                                        type: 'text',
                                                        placeholderIcon:
                                                            'ic_dynamic_label',
                                                        dropdownLabel: true,
                                                        dropdownWidthClass:
                                                            'w-col-' +
                                                            column.width,
                                                        textTransform:
                                                            'lowercase',
                                                        minLength: 1,
                                                        blackInput: true,
                                                        hideClear: true,
                                                        multiselectDropdown: true,
                                                        maxLength: 12,
                                                        showCount: false,
                                                        customClass:
                                                            'input-dropdown-table',
                                                        commands: {
                                                            active: false,
                                                            type: 'confirm-cancel',
                                                            firstCommand: {
                                                                popup: {
                                                                    name: 'Confirm',
                                                                    backgroundColor:
                                                                        '#3074d3',
                                                                },
                                                                name: 'confirm',
                                                                svg: 'assets/svg/ic_spec-confirm.svg',
                                                            },
                                                            secondCommand: {
                                                                popup: {
                                                                    name: 'Cancel',
                                                                    backgroundColor:
                                                                        '#2f2f2f',
                                                                },
                                                                name: 'cancel',
                                                                svg: 'assets/svg/ic_x.svg',
                                                            },
                                                        },
                                                    }"
                                                    [colors]="row['colorRes']"
                                                    [options]="
                                                        row['colorLabels']
                                                    "
                                                    [selectedLabel]="
                                                        selectedContactLabel[i]
                                                    "
                                                    [selectedLabelColor]="
                                                        selectedContactColor
                                                    "
                                                    (pickExistLabel)="
                                                        onPickExistLabel(
                                                            $event,
                                                            i
                                                        )
                                                    "
                                                    (pickColorLabel)="
                                                        onSelectColorLabel(
                                                            $event,
                                                            i
                                                        )
                                                    "
                                                    (saveLabel)="
                                                        onSaveLabel($event, i)
                                                    "
                                                >
                                                </app-ta-input-dropdown-label>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <!-- TEXT COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate === 'text' &&
                                            column.title !== 'Endorsement' &&
                                            column.title !== 'Restriction'
                                        "
                                    >
                                        <div
                                            class="d-flex align-items-center td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >

                                            @if (
                                                row.isIncompleteFuelTransaction &&
                                                column.title === 'Truck' &&
                                                !row.truck
                                            ) {
                                                <div
                                                    mainTooltip="
                                                        Truck not Linked
                                                    "
                                                    mainContent
                                                    ngbTooltip
                                                    tooltipBackground="#424242"
                                                    tooltipColor="#FFFFFF"
                                                    position="bottom"
                                                    tooltipTextAlign="center"
                                                >
                                                    <svg-icon
                                                        class="lh-1 mr-1 column-text-svg-transaction-incomplete"
                                                        [src]="
                                                            tableBodySvgRoutes.fuelIncompleteTransactionSvgRoute
                                                        "
                                                    ></svg-icon>
                                                </div>
                                            }

                                            @if (
                                                row[column.field] ===
                                                'Hazardous'
                                            ) {
                                                <svg-icon
                                                    class="d-flex align-items-center"
                                                    [ngStyle]="{
                                                        'margin-right': '4px',
                                                    }"
                                                    src="assets/svg/common/ic_hazardous.svg"
                                                >
                                                </svg-icon>
                                            }

                                            <svg-icon
                                                *ngIf="
                                                    tableData[0].title ===
                                                    'Contacts'
                                                "
                                                class="phone-email-icon"
                                                [src]="
                                                    ''
                                                        | setPhoneEmailIcon
                                                            : column
                                                            : row
                                                "
                                                [svgStyle]="{
                                                    'width.px': 18,
                                                    'height.px': 18,
                                                }"
                                            ></svg-icon>

                                            <span
                                                class="table-text"
                                                [ngClass]="{
                                                    'ta-font-semi-bold':
                                                        column.isTextBold ||
                                                        row[column.field] ===
                                                            'Unlimited',
                                                    'align-end':
                                                        column.isJustifyEnd,
                                                    'column-text-red':
                                                        (row.isIncompleteFuelTransaction &&
                                                            column.title ===
                                                                'Truck' &&
                                                            !row.truck) ||
                                                        (row.isIncompleteFuelTransaction &&
                                                            column.title ===
                                                                'Driver' &&
                                                            !row.driver),
                                                }"
                                                [innerHtml]="
                                                    row[column.field]
                                                        ? (row[column.field]
                                                          | tableHighlightSearchText
                                                              : this
                                                                    .chipsForHighlight)
                                                        : ''
                                                "
                                            ></span>
                                        </div>
                                    </ng-container>

                                    <div
                                        class="d-flex flex-column td-content"
                                        *ngIf="
                                            column.ngTemplate === 'text-paid'
                                        "
                                        [ngStyle]="{
                                            padding: 0,
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <span
                                            class="table-text-rate"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                                color:
                                                    row[column.field].status
                                                    | tableLoadStatusPipe
                                                        : 'title',
                                            }"
                                            [innerHtml]="
                                                row[column.field].paid
                                                    ? (row[column.field].paid
                                                      | tableHighlightSearchText
                                                          : this
                                                                .chipsForHighlight)
                                                    : ''
                                            "
                                        ></span>

                                        <ng-container
                                            *ngIf="row[column.field].paidDue"
                                        >
                                            <span
                                                class="table-text-subtitle"
                                                [ngStyle]="{
                                                    width: column.width + 'px',
                                                    'min-width.px':
                                                        column?.minWidth
                                                            ? column.minWidth
                                                            : 'unset',
                                                    color:
                                                        row[column.field].status
                                                        | tableLoadStatusPipe
                                                            : 'subtitle',
                                                    'text-decoration':
                                                        row[column.field].status
                                                        | tableLoadStatusPipe
                                                            : 'decoration',
                                                }"
                                                [innerHtml]="
                                                    row[column.field].paidDue
                                                        ? (row[column.field]
                                                              .paidDue
                                                          | tableHighlightSearchText
                                                              : this
                                                                    .chipsForHighlight)
                                                        : ''
                                                "
                                            ></span>
                                        </ng-container>
                                    </div>

                                    <!-- SEMI BOLD TEXT COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'semi-bold-text'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <span class="semi-bold-table-text">{{
                                            row[column.field]
                                                ? row[column.field]
                                                : ''
                                        }}</span>
                                    </div>

                                    <!-- COLOR COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'color'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        ngbTooltip
                                    >
                                        <div
                                            *ngIf="row[column.field]"
                                            class="color-name"
                                            [style.background-color]="
                                                row[column.field]
                                            "
                                            #op="ngbPopover"
                                            [ngbPopover]="optionsPopover"
                                            [placement]="'bottom-right'"
                                            [autoClose]="'outside'"
                                            popoverClass="toolbar-options-popover"
                                            triggers="manual"
                                            (hidden)="optionsPopupOpen = false"
                                            [mainTooltip]="row.colorName"
                                            [tooltipBackground]="
                                                row[column.field]
                                            "
                                            [tooltipColor]="'#ffff'"
                                            position="bottom"
                                        ></div>
                                    </div>

                                    <!-- SVG COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="column.ngTemplate === 'svg'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <ng-container *ngIf="row[column.field]">
                                            <div
                                                ngbTooltip
                                                class="truckassist-icon"
                                                mainContent
                                                [mainTooltip]="
                                                    row[column.tooltipTitle]
                                                "
                                                position="bottom"
                                                [tooltipBackground]="
                                                    row[column.tooltipColor]
                                                "
                                                tooltipColor="#ffff"
                                                tooltipTextAlign="center"
                                            >
                                                <svg-icon
                                                    [class]="
                                                        row[column.classField]
                                                    "
                                                    [src]="
                                                        column.svgUrl +
                                                        row[column.field]
                                                    "
                                                    [svgStyle]="{
                                                        'width.px':
                                                            column.svgDimensions
                                                                .width,
                                                        'height.px':
                                                            column.svgDimensions
                                                                .height,
                                                    }"
                                                ></svg-icon>
                                            </div>
                                        </ng-container>
                                    </div>

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'text-assigned'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <div
                                                ngbTooltip
                                                class="table-text"
                                                [ngClass]="
                                                    row[column.field].text
                                                "
                                                mainContent
                                                [mainTooltip]="
                                                    row[column.field].type
                                                "
                                                position="bottom"
                                                [tooltipBackground]="
                                                    row[column.field].color
                                                "
                                                tooltipColor="#ffff"
                                                tooltipTextAlign="center"
                                            >
                                                <div
                                                    (mouseenter)="
                                                        row[
                                                            column.field
                                                        ].hover = true
                                                    "
                                                    (mouseleave)="
                                                        row[
                                                            column.field
                                                        ].hover = false
                                                    "
                                                    [ngStyle]="{
                                                        color: row[column.field]
                                                            .hover
                                                            ? row[column.field]
                                                                  .color
                                                            : '#2f2f2f',
                                                        cursor: 'default',
                                                    }"
                                                >
                                                    {{ row[column.field].text }}
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- SVG COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'features'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <ng-container
                                                *ngFor="
                                                    let features of row[
                                                        column.field
                                                    ]
                                                "
                                            >
                                                <div
                                                    ngbTooltip
                                                    class="features-icon"
                                                    [mainTooltip]="
                                                        features.name
                                                    "
                                                    position="bottom"
                                                    tooltipBackground="#424242"
                                                    tooltipColor="#ffff"
                                                    tooltipTextAlign="center"
                                                >
                                                    <svg-icon
                                                        [class]="
                                                            row[
                                                                column
                                                                    .classField
                                                            ]
                                                        "
                                                        [src]="
                                                            column.svgUrl +
                                                            features.image
                                                        "
                                                        [svgStyle]="{
                                                            'width.px':
                                                                column
                                                                    .svgDimensions
                                                                    .width,
                                                            'height.px':
                                                                column
                                                                    .svgDimensions
                                                                    .height,
                                                        }"
                                                    ></svg-icon>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- STATE TEXT COLUMN -->

                                    <div
                                        *ngIf="
                                            column.ngTemplate === 'textState'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                        class="td-content"
                                    >
                                        <ng-container *ngIf="row[column.field]">
                                            <app-ta-state-image-text
                                                [stateAbbreviation]="
                                                    row[column.field]
                                                "
                                            >
                                            </app-ta-state-image-text>
                                        </ng-container>
                                    </div>

                                    <!-- PROGRESS COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'progress'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <ng-container
                                                *ngIf="
                                                    (activeTableData?.gridNameTitle ===
                                                        'PM' &&
                                                        column.field !==
                                                            'reeferUnit') ||
                                                    (column.field ===
                                                        'reeferUnit' &&
                                                        row.tableTrailerName ===
                                                            'Reefer') ||
                                                    (activeTableData?.gridNameTitle !==
                                                        'PM' &&
                                                        row[column.field]
                                                            ?.expirationDaysText)
                                                "
                                            >
                                                <ng-container
                                                    *ngIf="
                                                        row[column.field]
                                                            ?.expirationDaysText
                                                    "
                                                >
                                                    <span
                                                        class="checkbox-tooltip"
                                                        type="button"
                                                        ngbTooltip
                                                        [mainTooltip]="
                                                            activeTableData?.gridNameTitle ===
                                                            'PM'
                                                                ? 'View PM'
                                                                : column.title
                                                        "
                                                        tooltipBackground="#424242"
                                                        position="bottom"
                                                    >
                                                        <app-ta-progres-bar
                                                            [percents]="
                                                                row[
                                                                    column.field
                                                                ].percentage
                                                            "
                                                            [text]="
                                                                row[
                                                                    column.field
                                                                ]
                                                                    .expirationDaysText
                                                            "
                                                            [data]="row"
                                                            [columnField]="
                                                                column.field
                                                            "
                                                            [hasPopover]="true"
                                                            [isTable]="true"
                                                            [type]="'days'"
                                                        ></app-ta-progres-bar>
                                                    </span>
                                                </ng-container>

                                                <ng-container
                                                    *ngIf="
                                                        !row[column.field]
                                                            ?.expirationDaysText
                                                    "
                                                    [ngTemplateOutlet]="addPm"
                                                    [ngTemplateOutletContext]="{
                                                        row: row,
                                                    }"
                                                ></ng-container>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- MILES PROGRESS COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'progressMiles'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <ng-container
                                                *ngIf="
                                                    row[column.field]
                                                        ?.expirationMilesText
                                                "
                                            >
                                                <span
                                                    class="checkbox-tooltip"
                                                    type="button"
                                                    ngbTooltip
                                                    [mainTooltip]="'View PM'"
                                                    tooltipBackground="#424242"
                                                    position="bottom"
                                                >
                                                    <app-ta-progres-bar
                                                        [percents]="
                                                            row[column.field]
                                                                .percentage
                                                        "
                                                        [text]="
                                                            row[column.field]
                                                                .expirationMiles
                                                        "
                                                        [data]="row"
                                                        [columnField]="
                                                            column.field
                                                        "
                                                        [hasPopover]="true"
                                                        [isTable]="true"
                                                        [type]="'miles'"
                                                    ></app-ta-progres-bar>
                                                </span>
                                            </ng-container>

                                            <ng-container
                                                *ngIf="
                                                    !row[column.field]
                                                        ?.expirationMilesText
                                                "
                                                [ngTemplateOutlet]="addPm"
                                                [ngTemplateOutletContext]="{
                                                    row: row,
                                                }"
                                            ></ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- CREDIT PROGRESS COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'progressCredit'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column?.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <ng-container
                                                *ngIf="
                                                    row[column.field]
                                                        ?.expirationCreditText
                                                "
                                            >
                                                <div
                                                    class="credit-progress-bar-container"
                                                    ngbTooltip
                                                    [mainTooltip]="
                                                        'View Credit'
                                                    "
                                                    tooltipBackground="#424242"
                                                    position="bottom"
                                                >
                                                    <app-ta-progres-bar
                                                        [percents]="
                                                            row[column.field]
                                                                .percentage
                                                        "
                                                        [text]="
                                                            row[column.field]
                                                                .expirationCreditText
                                                        "
                                                        [data]="row"
                                                        [columnField]="
                                                            column.field
                                                        "
                                                        [hasPopover]="true"
                                                        [isTable]="true"
                                                        [type]="'credit'"
                                                    ></app-ta-progres-bar>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- APPLICANT PROGRESS COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'applicant-progress'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <ng-container
                                                *ngFor="
                                                    let applicantProgress of row[
                                                        column.field
                                                    ];
                                                    trackBy: trackTableNotPinedColumns
                                                "
                                            >
                                                <div
                                                    class="d-flex align-items-center justify-content-center applicant-progress-container"
                                                >
                                                    <p class="m-0 ta-font-bold">
                                                        {{
                                                            applicantProgress?.title
                                                        }}
                                                    </p>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!-- APPLICANT REVIEW COLUMN -->

                                    <div
                                        class="td-content"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'applicant-review'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="applicant-review-container">
                                            <div
                                                class="review-icon"
                                                [ngClass]="{
                                                    reviewed:
                                                        row[column.field]
                                                            .title ===
                                                        'Reviewed',
                                                    finished:
                                                        row[column.field]
                                                            .title ===
                                                        'Finished',
                                                    incomplete:
                                                        row[column.field]
                                                            .title ===
                                                        'Incomplete',
                                                    ready:
                                                        row[column.field]
                                                            .title === 'Ready',
                                                }"
                                            >
                                                <svg-icon
                                                    [src]="
                                                        row[column.field]
                                                            .iconLink
                                                    "
                                                    [svgStyle]="{
                                                        'width.px': '16',
                                                        'height.px': '16',
                                                    }"
                                                ></svg-icon>
                                            </div>
                                            <div
                                                class="review-title"
                                                [ngStyle]="{
                                                    width:
                                                        column.width -
                                                        26 +
                                                        'px',
                                                }"
                                            >
                                                {{ row[column.field].title }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SW TW TOTAL COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="
                                            column.ngTemplate === 'sw-tw-total'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="sw-tw-total-container">
                                            <div class="border"></div>
                                            <div class="regular-count">0</div>
                                            <div class="border"></div>
                                            <div class="regular-count">0</div>
                                            <div class="border"></div>
                                            <div class="bold-count">0</div>
                                            <div class="border"></div>
                                        </div>
                                    </div>

                                    <!-- CITATION COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="column.ngTemplate === 'citation'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div class="citation-container">
                                            <div class="citation-item cop-item">
                                                0
                                            </div>
                                            <div class="citation-item oss-item">
                                                0
                                            </div>
                                            <div
                                                class="citation-item money-item"
                                            >
                                                0
                                            </div>
                                        </div>
                                    </div>

                                    <!-- ACCIDENT CITATION TYPE COLUMN -->

                                    <div
                                        class="td-content set-center"
                                        *ngIf="
                                            column.ngTemplate ===
                                            'accident-citation'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                        }"
                                    >
                                        <div
                                            class="accident-citation-container"
                                        >
                                            <div
                                                class="accident-citation-item item-has-margin grey-item"
                                            >
                                                0
                                            </div>
                                            <div
                                                class="accident-citation-item item-has-margin yellow-item"
                                            >
                                                0
                                            </div>
                                            <div
                                                class="accident-citation-item item-has-margin red-item"
                                            >
                                                0
                                            </div>
                                            <div
                                                class="accident-citation-item item-has-margin blue-item"
                                            >
                                                N
                                            </div>
                                            <div
                                                class="accident-citation-item blue-item"
                                            >
                                                N
                                            </div>
                                        </div>
                                    </div>

                                    <!-- PASSWORD ACCOUNT COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate ===
                                            'password-account'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <app-ta-password-account-hidden-characters
                                                [passwordOrAccount]="
                                                    row[column.field]
                                                "
                                            ></app-ta-password-account-hidden-characters>
                                        </div>
                                    </ng-container>

                                    <!-- SHIPPER LOAD COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column.ngTemplate === 'shipper-load'
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px': column?.minWidth
                                                    ? column.minWidth
                                                    : 'unset',
                                            }"
                                        >
                                            <div
                                                class="align-items-center shipper-load-container"
                                            >
                                                <div
                                                    class="d-flex align-items-center shipper-load-container-box"
                                                >
                                                    <svg-icon
                                                        class="icon"
                                                        [src]="
                                                            tableBodySvgRoutes.loadsRoute
                                                        "
                                                        [svgStyle]="{
                                                            'width.px': '18',
                                                            'height.px': '18',
                                                        }"
                                                    ></svg-icon>

                                                    <p
                                                        class="m-0 ta-font-semi-bold"
                                                    >
                                                        {{
                                                            row[column.field]
                                                                .loads
                                                        }}
                                                    </p>
                                                </div>

                                                <div
                                                    class="d-flex align-items-center shipper-load-container-box"
                                                >
                                                    <svg-icon
                                                        class="icon"
                                                        [src]="
                                                            tableBodySvgRoutes.pickupRoute
                                                        "
                                                        [svgStyle]="{
                                                            'width.px': '18',
                                                            'height.px': '18',
                                                        }"
                                                    ></svg-icon>

                                                    <p
                                                        class="m-0 ta-font-semi-bold"
                                                    >
                                                        {{
                                                            row[column.field]
                                                                .pickups
                                                        }}
                                                    </p>
                                                </div>

                                                <div
                                                    class="d-flex align-items-center shipper-load-container-box"
                                                >
                                                    <svg-icon
                                                        class="icon"
                                                        [src]="
                                                            tableBodySvgRoutes.deliveryRoute
                                                        "
                                                        [svgStyle]="{
                                                            'width.px': '18',
                                                            'height.px': '18',
                                                        }"
                                                    ></svg-icon>

                                                    <p
                                                        class="m-0 ta-font-semi-bold"
                                                    >
                                                        {{
                                                            row[column.field]
                                                                .deliveries
                                                        }}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- OPEN HOURS COLUMN -->

                                    @if (column.ngTemplate === 'open-hours') {
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <app-ta-open-hours-dropdown
                                                [dropdownConfig]="{
                                                    rowId: row?.id,
                                                    width: column?.width,
                                                    openHours:
                                                        row[column.field]
                                                            ?.openHours,
                                                    openHoursToday:
                                                        row[column.field]
                                                            ?.openHoursToday,
                                                }"
                                            ></app-ta-open-hours-dropdown>
                                        </div>
                                    }

                                    <!-- PROGRESS RANGE COLUMN -->

                                    <ng-container
                                        *ngIf="
                                            column?.ngTemplate ===
                                            taTableBodyConstants.NG_TEMPLATE_PROGRESS_RANGE
                                        "
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <app-ca-progress-range
                                                [data]="{
                                                    startRange:
                                                        row[column.field]
                                                            ?.startRange,
                                                    endRange:
                                                        row[column.field]
                                                            ?.endRange,
                                                    value: row[column.field]
                                                        ?.value,
                                                    unit: row[column.field]
                                                        ?.unit,
                                                    lastUsed:
                                                        row[column.field]
                                                            ?.lastUsed,
                                                }"
                                            ></app-ca-progress-range>
                                        </div>
                                    </ng-container>
                                </td>
                            </ng-container>
                        </div>

                        <!-- Border -->

                        <div
                            class="table-border-scroll-section-container table-border-scroll-section-container-right"
                        >
                            <div
                                class="table-border-scroll-section table-border-right"
                                [ngClass]="{
                                    'table-border-right-show':
                                        showScrollSectionBorder,
                                    hidden: !isRightScrollLineShown,
                                }"
                            ></div>
                        </div>

                        <!-- ACTIONS -->

                        <div
                            class="actions-columns"
                            *ngIf="actionsColumns.length"
                        >
                            <ng-container
                                *ngFor="
                                    let column of actionsColumns;
                                    trackBy: trackTableActionsColumns
                                "
                            >
                                <td class="action-td">
                                    <!-- ATTACHMENTS COLUMN -->
                                    <div
                                        class="td-content set-right"
                                        *ngIf="
                                            column.ngTemplate === 'attachments'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            *ngIf="row.fileCount"
                                            (click)="onShowAttachments(row)"
                                            [ngClass]="{
                                                'action-active':
                                                    activeAttachment ===
                                                        row.id &&
                                                    row.tableAttachments
                                                        ?.length,
                                            }"
                                            class="attachments-icon-container"
                                        >
                                            <svg-icon
                                                [src]="
                                                    '/assets/svg/truckassist-table/attachment-icon.svg'
                                                "
                                                [svgStyle]="{
                                                    'width.px': '18',
                                                    'height.px': '18',
                                                }"
                                            ></svg-icon>
                                            <div class="file_count">
                                                {{ row.fileCount }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- MEDIA COLUMN -->
                                    <div
                                        class="td-content set-right"
                                        *ngIf="column.ngTemplate === 'media'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            class="media-icon-container"
                                            (click)="onShowMedia(row)"
                                            [ngClass]="{
                                                'action-active':
                                                    activeMedia === row.id,
                                            }"
                                        >
                                            <svg-icon
                                                [src]="
                                                    '/assets/svg/truckassist-table/media-icon.svg'
                                                "
                                                [svgStyle]="{
                                                    'width.px': '18',
                                                    'height.px': '18',
                                                }"
                                            ></svg-icon>
                                        </div>
                                    </div>

                                    <!-- INSURANCE COLUMN -->
                                    <div
                                        class="td-content set-right"
                                        *ngIf="
                                            column.ngTemplate === 'insurance'
                                        "
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            class="inspection-icon-container"
                                            (click)="onShowInsurance(row)"
                                            [ngClass]="{
                                                'action-active':
                                                    activeInsurance === row.id,
                                            }"
                                        >
                                            <svg-icon
                                                [src]="
                                                    'assets/svg/truckassist-table/insurance-icon.svg'
                                                "
                                                [svgStyle]="{
                                                    'width.px': '18',
                                                    'height.px': '18',
                                                }"
                                            ></svg-icon>
                                        </div>
                                    </div>

                                    <!-- COMMENT COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'comment'"
                                    >
                                        <div
                                            class="td-content"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <div class="comment-container">
                                                <app-ta-input-dropdown-table
                                                    [data]="row"
                                                    [type]="'comment'"
                                                    [searchPlaceholder]="
                                                        'Find Title'
                                                    "
                                                    [svg]="
                                                        'assets/svg/detail-cards/comment - count.svg'
                                                    "
                                                ></app-ta-input-dropdown-table>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- HIRE COLUMN -->
                                    <div
                                        class="td-content set-right"
                                        *ngIf="column.ngTemplate === 'hire'"
                                        [ngStyle]="{
                                            width: column.width + 'px',
                                            'min-width.px': column?.minWidth
                                                ? column.minWidth
                                                : 'unset',
                                        }"
                                    >
                                        <div
                                            class="hire-icon"
                                            (click)="onHire(row)"
                                            *ngIf="row[column.field]"
                                        ></div>
                                    </div>

                                    <!-- FAVORITE COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'favorite'"
                                    >
                                        <div
                                            class="td-content set-right"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                            ngbTooltip
                                        >
                                            <div
                                                [mainTooltip]="
                                                    row.isFavoriteDisabled
                                                        ? ''
                                                        : !row[column.field]
                                                          ? 'Mark as Favorite'
                                                          : 'Unmark Favorite'
                                                "
                                                tooltipBackground="#424242"
                                                tooltipColor="#FFFFFF"
                                                position="bottom"
                                                (click)="
                                                    onFavorite(
                                                        row.id,
                                                        row[column.field],
                                                        row.isFavoriteDisabled
                                                    )
                                                "
                                            >
                                                <svg-icon
                                                    class="favorite-icon"
                                                    [ngClass]="{
                                                        'is-favorite':
                                                            row[column.field],
                                                        disabled:
                                                            row.isFavoriteDisabled,
                                                    }"
                                                    [src]="
                                                        tableBodySvgRoutes.favoriteRoute
                                                    "
                                                    [svgStyle]="{
                                                        'width.px': 18,
                                                        'height.px': 18,
                                                    }"
                                                ></svg-icon>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <!-- NOTE COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'note'"
                                    >
                                        <div
                                            class="td-content set-right"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                        >
                                            <app-ta-note
                                                [note]="row.note"
                                                [mainData]="row"
                                                [entityId]="
                                                    activeTableData.gridNameTitle ===
                                                    'PM'
                                                        ? row.pmId
                                                        : row.id
                                                "
                                                [entityType]="
                                                    activeTableData.gridNameTitle ===
                                                        'load' &&
                                                    selectedTab === 'template'
                                                        ? 'LoadTemplate'
                                                        : activeTableData?.gridNameTitle ===
                                                                'Customer' &&
                                                            selectedTab ===
                                                                'inactive'
                                                          ? 'Shipper'
                                                          : activeTableData?.gridNameTitle ===
                                                                  'PM' &&
                                                              selectedTab ===
                                                                  'active'
                                                            ? 'PmTruckUnit'
                                                            : activeTableData?.gridNameTitle ===
                                                                    'PM' &&
                                                                selectedTab ===
                                                                    'inactive'
                                                              ? 'PmTrailerUnit'
                                                              : activeTableData?.gridNameTitle !==
                                                                  'Repair'
                                                                ? activeTableData?.gridNameTitle
                                                                : activeTableData?.gridNameTitle ===
                                                                        'Repair' &&
                                                                    selectedTab ===
                                                                        'repair-shop'
                                                                  ? 'RepairShop'
                                                                  : 'Repair'
                                                "
                                                [openedAll]="false"
                                                [parking]="false"
                                                (saveNoteValue)="
                                                    saveValueNote.emit({
                                                        value: $event,
                                                        id: row.id,
                                                    })
                                                "
                                            >
                                            </app-ta-note>
                                        </div>
                                    </ng-container>

                                    <!-- ACTIONS COLUMN -->

                                    <ng-container
                                        *ngIf="column.ngTemplate === 'actions'"
                                    >
                                        <ca-dropdown-menu
                                            [type]="'dots-menu-type'"
                                            [placement]="'right-top'"
                                            [options]="row.tableDropdownContent"
                                            (dropdownOptionEmitter)="
                                                handleToggleDropdownMenuActions(
                                                    $event,
                                                    row
                                                )
                                            "
                                        >
                                        </ca-dropdown-menu>

                                        <!-- <div
                                            class="td-content set-right"
                                            [ngStyle]="{
                                                width: column.width + 'px',
                                                'min-width.px':
                                                    column?.minWidth ?? 'unset',
                                            }"
                                            ngbTooltip
                                            mainTooltip="More"
                                            [tooltipBackground]="'#424242'"
                                            [tooltipColor]="'#ffff'"
                                            position="bottom"
                                        >
                                            <div
                                                #t2="ngbPopover"
                                                (click)="
                                                    toggleDropdown(t2, row)
                                                "
                                                [autoClose]="'outside'"
                                                [ngbPopover]="dropdownPopover"
                                                [placement]="
                                                    isDropdownPositionBottom
                                                        ? 'bottom-right'
                                                        : 'right-top'
                                                "
                                                class="table-dropdown-container"
                                                [ngClass]="{
                                                    'active-drop':
                                                        dropDownActive ===
                                                            row.id &&
                                                        t2.isOpen(),
                                                }"
                                                container="body"
                                                popoverClass="table-dropdown-popover"
                                                triggers="manual"
                                                (hidden)="
                                                    onRemoveClickEventListener()
                                                "
                                            >
                                                <svg-icon
                                                    [src]="
                                                        'assets/svg/truckassist-table/dropdown/dropdown.svg'
                                                    "
                                                    [svgStyle]="{
                                                        'width.px': '18',
                                                        'height.px': '18',
                                                    }"
                                                ></svg-icon>
                                            </div>
                                        </div> -->
                                    </ng-container>
                                </td>
                            </ng-container>
                        </div>
                    </div>

                    <!-- Attachment Dropdown -->
                    <div
                        class="attachemnt-dropdown"
                        [ngClass]="{
                            'attachemnt-dropdown-active':
                                activeAttachment === row.id,
                        }"
                    >
                        <div class="attachemnt-dropdown-content">
                            <!-- Border -->
                            <div
                                class="dropdown-border-container"
                                *ngIf="options?.attachmentConfig?.hasViolation"
                            >
                                <div class="dropdown-border"></div>
                            </div>

                            <!-- Violation Inspection -->
                            <div
                                class="violation-inspection-container"
                                *ngIf="options?.attachmentConfig?.hasViolation"
                            >
                                <!-- Title -->
                                <div class="inspection-title">
                                    <div class="violation-title title">
                                        VIOLATION
                                    </div>
                                    <div class="description-title title">
                                        DESCRIPTION
                                    </div>
                                    <div class="sw-title title">SW</div>
                                </div>
                                <!-- Items -->
                                <div class="violations-items">
                                    <svg-icon
                                        class="violation-icon"
                                        [src]="
                                            'assets/svg/truckassist-table/driver-violation.svg'
                                        "
                                        [svgStyle]="{
                                            'width.px': '18',
                                            'height.px': '18',
                                        }"
                                    ></svg-icon>

                                    <div class="violation-code">395.5380</div>

                                    <svg-icon
                                        *ngIf="!showInspectinDescriptionEdit"
                                        class="oss-icon"
                                        [src]="
                                            'assets/svg/truckassist-table/violation-oss-icon.svg'
                                        "
                                        [svgStyle]="{
                                            'width.px': '18',
                                            'height.px': '18',
                                        }"
                                    ></svg-icon>

                                    <div
                                        class="inspection-decription"
                                        *ngIf="!showInspectinDescriptionEdit"
                                    >
                                        CMV manufactured after 10/19/94 has an
                                        automatic airbrake adjustment system
                                    </div>

                                    <div
                                        class="edit-description"
                                        *ngIf="showInspectinDescriptionEdit"
                                    >
                                        <input
                                            id="inspectin-description-input"
                                            type="text"
                                            autofocus
                                            [(ngModel)]="
                                                editInspectinDescriptionText
                                            "
                                        />
                                    </div>

                                    <div class="sw-count">
                                        1
                                        <div class="oss-count">+2</div>
                                    </div>

                                    <svg-icon
                                        (click)="
                                            showInspectinDescriptionEdit =
                                                !showInspectinDescriptionEdit
                                        "
                                        class="edit-icon"
                                        [src]="
                                            'assets/svg/truckassist-table/edit-icon.svg'
                                        "
                                        [svgStyle]="{
                                            'width.px': '18',
                                            'height.px': '18',
                                        }"
                                    ></svg-icon>
                                </div>
                            </div>

                            <!-- Border -->
                            <div
                                class="dropdown-border-container"
                                *ngIf="options?.attachmentConfig?.hasCitation"
                            >
                                <div class="dropdown-border"></div>
                            </div>

                            <!-- Citation Inspection -->
                            <div
                                class="citation-inspection-container"
                                *ngIf="options?.attachmentConfig?.hasCitation"
                            >
                                <!-- Title -->
                                <div class="inspection-title">
                                    <div class="citation-title title">
                                        CITATION #
                                    </div>
                                    <div class="description-title title">
                                        DESCRIPTION
                                    </div>
                                    <div class="due-date-title title">
                                        Due Date
                                    </div>
                                    <div class="paid-title title">PAID</div>
                                    <div class="cost-title title">Cost</div>
                                    <div class="actions-title title"></div>
                                </div>
                                <!-- Items -->
                                <div class="citation-items">
                                    <div class="citation-code">OH-5545042</div>

                                    <div class="citation-description">
                                        CMV manufactured after 10/19/94 has an
                                        automatic airbrake adjustment system
                                    </div>

                                    <div class="due-date">
                                        <div
                                            class="table-progress-container"
                                            *ngIf="
                                                row['tableDropdownProgress']
                                                    ?.expirationDays
                                            "
                                        >
                                            <!-- Progres Bar  -->
                                            <div
                                                class="table-progress-bar-container"
                                                [ngClass]="{
                                                    'bg-expired-container':
                                                        !row[
                                                            'tableDropdownProgress'
                                                        ].percentage,
                                                    'bg-sliver-container':
                                                        row[
                                                            'tableDropdownProgress'
                                                        ].percentage >= 50 &&
                                                        row[
                                                            'tableDropdownProgress'
                                                        ].percentage < 100,
                                                    'bg-orange-container':
                                                        row[
                                                            'tableDropdownProgress'
                                                        ].percentage >= 20 &&
                                                        row[
                                                            'tableDropdownProgress'
                                                        ].percentage < 50,
                                                    'bg-danger-container':
                                                        row[
                                                            'tableDropdownProgress'
                                                        ].percentage > 0 &&
                                                        row[
                                                            'tableDropdownProgress'
                                                        ].percentage < 20,
                                                    'bg-inactive-container':
                                                        row[
                                                            'tableDropdownProgress'
                                                        ].percentage === 100,
                                                }"
                                            >
                                                <div
                                                    [ngClass]="{
                                                        'bg-progress-sliver':
                                                            row[
                                                                'tableDropdownProgress'
                                                            ].percentage >=
                                                                50 &&
                                                            row[
                                                                'tableDropdownProgress'
                                                            ].percentage < 100,
                                                        'bg-progress-orange':
                                                            row[
                                                                'tableDropdownProgress'
                                                            ].percentage >=
                                                                20 &&
                                                            row[
                                                                'tableDropdownProgress'
                                                            ].percentage < 50,
                                                        'bg-progress-danger':
                                                            row[
                                                                'tableDropdownProgress'
                                                            ].percentage > 0 &&
                                                            row[
                                                                'tableDropdownProgress'
                                                            ].percentage < 20,
                                                    }"
                                                    class="table-progress-bar"
                                                    *ngIf="
                                                        row[
                                                            'tableDropdownProgress'
                                                        ].percentage > 0 &&
                                                        row[
                                                            'tableDropdownProgress'
                                                        ].percentage < 100
                                                    "
                                                ></div>
                                            </div>

                                            <!-- Progres Text -->
                                            <div
                                                class="table-progress-text"
                                                [ngStyle]="{
                                                    width: 172 - 30 + 'px',
                                                }"
                                                *ngIf="
                                                    row['tableDropdownProgress']
                                                        .percentage > 0 &&
                                                    row['tableDropdownProgress']
                                                        .percentage < 100
                                                "
                                            >
                                                in
                                                {{
                                                    row['tableDropdownProgress']
                                                        .expirationDays
                                                }}
                                                days
                                            </div>

                                            <!-- Progres Text Expired-->
                                            <div
                                                class="table-progress-text"
                                                [ngStyle]="{
                                                    width:
                                                        column.width -
                                                        30 +
                                                        'px',
                                                }"
                                                *ngIf="
                                                    !row[
                                                        'tableDropdownProgress'
                                                    ].percentage
                                                "
                                            >
                                                {{
                                                    row['tableDropdownProgress']
                                                        .expirationDays
                                                }}
                                                days ago
                                            </div>
                                        </div>
                                    </div>

                                    <div class="paid-item">
                                        <svg-icon
                                            class="paid-icon"
                                            [src]="
                                                'assets/svg/truckassist-table/applicant-wrong-icon.svg'
                                            "
                                            [svgStyle]="{
                                                'width.px': '18',
                                                'height.px': '18',
                                            }"
                                        ></svg-icon>
                                    </div>

                                    <div class="cost-item">$1,240.00</div>

                                    <div class="actions">
                                        <svg-icon
                                            class="attachment-icon"
                                            [src]="
                                                'assets/svg/truckassist-table/attachment/attachemnt-regular-svgIcon.svg'
                                            "
                                            [svgStyle]="{
                                                'width.px': '18',
                                                'height.px': '18',
                                            }"
                                        ></svg-icon>

                                        <div class="note-container">
                                            <app-ta-note
                                                [note]="''"
                                                [openedAll]="false"
                                                [parking]="false"
                                            >
                                            </app-ta-note>
                                        </div>

                                        <!-- <svg-icon
                                            #t2="ngbPopover"
                                            (click)="toggleDropdown(t2, row)"
                                            [autoClose]="true"
                                            [ngbPopover]="dropdownPopover"
                                            [placement]="
                                                isDropdownPositionBottom
                                                    ? 'bottom-right'
                                                    : 'right-top'
                                            "
                                            container="body"
                                            popoverClass="table-dropdown-popover"
                                            triggers="manual"
                                            [src]="
                                                'assets/svg/truckassist-table/dropdown/dropdown.svg'
                                            "
                                            [svgStyle]="{
                                                'width.px': '18',
                                                'height.px': '18',
                                            }"
                                        ></svg-icon> -->
                                    </div>
                                </div>
                            </div>

                            <!-- Border -->
                            <div class="dropdown-border-container">
                                <div class="dropdown-border"></div>
                            </div>

                            <!-- Documents -->
                            <div class="document-container">
                                <!-- Title -->
                                <div class="document-title">
                                    <div class="download-document-btn">
                                        <svg-icon
                                            class="paid-icon"
                                            [src]="
                                                'assets/svg/truckassist-table/download-icon.svg'
                                            "
                                            [svgStyle]="{
                                                'width.px': '18',
                                                'height.px': '18',
                                            }"
                                        ></svg-icon>

                                        <div
                                            class="title"
                                            (click)="
                                                tableFiles?.downloadAllFiles()
                                            "
                                        >
                                            Download All
                                        </div>
                                    </div>
                                </div>

                                <!-- Attachments -->
                                <div class="attacment-container">
                                    <app-ta-upload-files
                                        #tableFiles
                                        [customClassName]="'table-details'"
                                        [files]="
                                            row?.tableAttachments
                                                ? row.tableAttachments
                                                : []
                                        "
                                        [size]="'extralarge'"
                                        [reviewMode]="'REVIEW_MODE'"
                                        [slideWidth]="209"
                                    ></app-ta-upload-files>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Media Dropdown -->
                    <div
                        class="media-dropdown"
                        [ngClass]="{
                            'media-dropdown-active': activeMedia === row.id,
                        }"
                    >
                        <div class="media-dropdown-content">
                            <!-- Border -->
                            <div class="dropdown-border-container">
                                <div class="dropdown-border"></div>
                            </div>

                            <!-- Media -->
                            <div class="media-wrapper">
                                <!-- Title -->
                                <div class="media-title">
                                    <div class="media-count-title">
                                        13 Media
                                    </div>
                                    <svg-icon
                                        class="paid-icon"
                                        [src]="
                                            'assets/svg/truckassist-table/download-icon.svg'
                                        "
                                        [svgStyle]="{
                                            'width.px': '18',
                                            'height.px': '18',
                                        }"
                                    ></svg-icon>
                                </div>

                                <!-- Media Content -->
                                <div class="media-container"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Insurance Dropdown -->
                    <div
                        class="insurance-dropdown"
                        [ngClass]="{
                            'insurance-dropdown-active':
                                activeInsurance === row.id,
                        }"
                    >
                        <div class="insurance-dropdown-content">
                            <!-- Border -->
                            <div class="dropdown-border-container">
                                <div class="dropdown-border"></div>
                            </div>

                            <!-- Insurance -->
                            <div class="insurance-container">
                                <div class="insurance-title">
                                    <div class="title-item insurance-type">
                                        Insurance Type
                                    </div>
                                    <div class="title-item claim">
                                        Claim No.
                                    </div>
                                    <div class="title-item insurance-adjuster">
                                        INSURANCE ADJUSTER
                                    </div>
                                    <div class="title-item phone">PHONE</div>
                                    <div class="title-item email">EMAIL</div>
                                </div>

                                <div class="insurance-item-container">
                                    <div class="insurance-type">
                                        Automobile Liability
                                    </div>
                                    <div class="claim">55784CC7F597</div>
                                    <div class="insurance-adjuster">
                                        Aleksandar Djordjevic
                                    </div>
                                    <div class="phone">(482) 120-8701</div>
                                    <div class="email">
                                        betty-blackapolon_freight.com
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </tr>
            </ng-container>

            <!-- Show More -->
            <div
                class="show-more-container"
                [ngStyle]="{ 'width.px': tableWidth }"
                *ngIf="viewData.length"
            >
                <div class="showing">
                    {{ viewData.length }} OF
                    {{ activeTableData.length }}
                </div>
                <div
                    class="show-more"
                    (click)="handleShowMoreClick()"
                    *ngIf="viewData.length < activeTableData.length"
                >
                    SHOW MORE
                </div>
            </div>
        </app-ta-custom-scrollbar>
    </tbody>
</table>

<!-- DROPDOWN POPOVER -->

<ng-template #dropdownPopover let-data="data">
    <div
        class="table-list-dropdown"
        [ngClass]="{ 'position-right': !isDropdownPositionBottom }"
    >
        <div
            class="table-list-dropdown-content-container"
            [ngClass]="{
                'table-list-dropdown-inner-dropdown-active':
                    action?.isInnerDropActive,
            }"
            *ngFor="let action of data.data"
        >
            <!-- Action -->
            <div
                class="table-list-dropdown-content"
                appPreventMultipleclicks
                [cooldownDuration]="500"
                (cooldownComplete)="
                    !action?.isDropdown
                        ? onDropAction(action)
                        : onShowInnerDropdown(action)
                "
                [ngClass]="{
                    'table-list-dropdown-content-dropdown': action?.isDropdown,
                    'table-list-dropdown-content-dropdown-active':
                        action?.isInnerDropActive,
                    'table-list-dropdown-content-dropdown-disabled':
                        action.isDisabled ||
                        (action.title === 'Delete' &&
                            tableData[0].title === 'Contacts' &&
                            companyUser.companyUserId !== data.companyUserId),
                }"
                [ngStyle]="action.tableListDropdownContentStyle"
            >
                <div class="table-list-dropdown-content-text">
                    {{ action.title }}
                </div>

                <svg-icon
                    *ngIf="action.svgUrl"
                    [class]="action.svgClass"
                    class="table-list-dropdown-content-icon"
                    [ngClass]="{
                        'inner-dropdown-open': action?.isInnerDropActive,
                    }"
                    [src]="action.svgUrl"
                    [svgStyle]="{
                        'width.px': action.svgStyle.width,
                        'height.px': action.svgStyle.height,
                    }"
                ></svg-icon>
            </div>

            <!-- Inner Dropdown -->
            <div
                class="table-list-inner-dropdown"
                [ngClass]="{
                    'table-list-inner-dropdown-active':
                        action?.isInnerDropActive,
                }"
                [innerHtml]="
                    action?.innerDropElement ? action.innerDropElement : null
                "
            ></div>

            <!-- Border -->
            <div
                class="table-list-dropdown-border-container"
                *ngIf="action.hasBorder"
            >
                <div class="table-list-dropdown-border"></div>
            </div>
        </div>
    </div>
</ng-template>

<!-- DESCRIPTION POPOVER-->

<ng-template #descriptionPopover let-data="data">
    <div
        class="description-dropdown-container"
        [ngClass]="
            data.isFuelDescription
                ? 'description-item-fuel'
                : data.isDriverDescription
                  ? 'description-item-driver'
                  : data.isRepairOrder
                    ? 'description-item-repair-order'
                    : 'description-item-repair-bill'
        "
        [ngStyle]="{
            width: widthPopover + 'px',
        }"
    >
        <!-- Header -->

        <div class="align-items-center description-titles">
            <ng-container
                *ngIf="
                    data.isDriverDescription;
                    else notDriverDescriptionHeader
                "
            >
                <div class="d-flex align-items-center justify-content-center">
                    <p
                        class="m-0 ta-font-bold text-size-11 text-color-light-grey-6"
                    >
                        #
                    </p>
                </div>

                <p
                    class="m-0 ta-font-bold text-size-11 text-color-light-grey-6"
                >
                    {{
                        data.isOffDutyLocations
                            ? 'NAME  ADDRESS, CITY, STATE'
                            : data.isRestrictions
                              ? 'RESTRICTION'
                              : 'ENDORSEMENT'
                    }}
                </p>
            </ng-container>

            <ng-template #notDriverDescriptionHeader>
                <ng-container
                    *ngFor="
                        let descriptionPopoverHeaderItem of data.isRepairOrder
                            ? (descriptionPopoverHeaderItems | slice: 0 : 3)
                            : descriptionPopoverHeaderItems;
                        let descriptionPopoverHeaderItemIndex = index;
                        trackBy: trackByDescriptionIdentity
                    "
                >
                    <div
                        class="d-flex align-items-center"
                        [ngStyle]="{
                            'margin-left':
                                descriptionPopoverHeaderItemIndex === 1 &&
                                '-4px',
                        }"
                        [ngClass]="{
                            'justify-content-center':
                                descriptionPopoverHeaderItemIndex === 0 ||
                                (data.isRepairOrder &&
                                    descriptionPopoverHeaderItemIndex === 2),
                            'justify-content-end':
                                descriptionPopoverHeaderItemIndex === 2 ||
                                descriptionPopoverHeaderItemIndex === 3,
                        }"
                    >
                        <p
                            class="m-0 ta-font-bold text-size-11 text-color-light-grey-6"
                        >
                            {{ descriptionPopoverHeaderItem.title }}
                        </p>
                    </div>
                </ng-container>

                <div class="d-flex align-items-center justify-content-end">
                    <p
                        class="m-0 ta-font-semi-bold text-size-14 text-color-white"
                    >
                        {{ data.totalCost }}
                    </p>
                </div>
            </ng-template>
        </div>

        <!-- Dropdown -->

        <div
            class="d-flex flex-column description-items"
            [ngClass]="{
                'dropdown-scroll': data.descriptionItems.length >= 8,
            }"
            [ngStyle]="{
                width: data.isDriverDescription
                    ? data.isOffDutyLocations
                        ? '320px'
                        : '233px'
                    : '100%',
            }"
        >
            <ng-container
                *ngFor="
                    let descriptionPopoverItem of data.descriptionItems;
                    let descriptionPopoverItemIndex = index;
                    trackBy: trackByIdentity
                "
            >
                <div
                    class="align-items-center description-items-item"
                    [ngClass]="{
                        'pm-item':
                            descriptionPopoverItem?.pmTruck ||
                            descriptionPopoverItem?.pmTrailer,
                    }"
                >
                    <!-- # -->

                    <div
                        class="d-flex align-items-center justify-content-center"
                    >
                        <span
                            class="m-0 text-size-14"
                            [ngClass]="{
                                'text-color-grey':
                                    !data.isDriverDescription ||
                                    data.isOffDutyLocations,
                                'text-color-white ta-font-semi-bold':
                                    data.isDriverDescription &&
                                    !data.isOffDutyLocations,
                            }"
                        >
                            {{
                                !data.isDriverDescription ||
                                data.isOffDutyLocations
                                    ? descriptionPopoverItemIndex + 1
                                    : descriptionPopoverItem.code
                            }}
                        </span>
                    </div>

                    <!-- Description -->

                    <ng-container
                        *ngIf="
                            data.isDriverDescription;
                            else notDriverDescription
                        "
                    >
                        <ng-container
                            *ngIf="
                                data.isOffDutyLocations;
                                else restrictionEndorsement
                            "
                        >
                            <div class="d-flex flex-column">
                                <p
                                    class="m-0 ta-font-medium text-size-11 text-color-white"
                                >
                                    {{ descriptionPopoverItem?.nickname }}
                                </p>

                                <p class="m-0 text-size-11 text-color-grey">
                                    {{
                                        descriptionPopoverItem?.address.address
                                    }}
                                </p>
                            </div>
                        </ng-container>

                        <ng-template #restrictionEndorsement>
                            <div class="d-flex align-items-center">
                                <p class="m-0 text-size-11 text-color-white">
                                    -
                                </p>

                                <p
                                    class="m-0 text-size-11 text-color-white description-text"
                                >
                                    {{ descriptionPopoverItem?.description }}
                                </p>
                            </div>
                        </ng-template>
                    </ng-container>

                    <ng-template #notDriverDescription>
                        <div class="d-flex align-items-center description-box">
                            <p class="m-0 text-size-14 text-color-white">
                                {{ descriptionPopoverItem?.description }}
                            </p>

                            <svg-icon
                                *ngIf="
                                    descriptionPopoverItem?.pmTruck ||
                                    descriptionPopoverItem?.pmTrailer
                                "
                                class="pm-icon"
                                [src]="
                                    descriptionPopoverItem?.pmTruck?.logoName ||
                                    descriptionPopoverItem?.pmTrailer.logoName
                                "
                                [svgStyle]="{
                                    'width.px': 14,
                                    'height.px': 14,
                                }"
                            ></svg-icon>
                        </div>
                    </ng-template>

                    <ng-container *ngIf="!data.isDriverDescription">
                        <!-- Quantity -->

                        <div
                            class="d-flex align-items-center"
                            [ngClass]="
                                data.isRepairOrder
                                    ? 'justify-content-center'
                                    : 'justify-content-end'
                            "
                        >
                            <p class="m-0 text-size-14 text-color-white">
                                {{ descriptionPopoverItem?.quantity }}
                            </p>
                        </div>

                        <ng-container *ngIf="!data.isRepairOrder">
                            <!-- Price -->

                            <div
                                class="d-flex align-items-center justify-content-end"
                            >
                                <p class="m-0 text-size-14 text-color-white">
                                    {{
                                        descriptionPopoverItem?.descriptionPrice
                                    }}
                                </p>
                            </div>

                            <!-- Cost -->

                            <div
                                class="d-flex align-items-center justify-content-end"
                            >
                                <p
                                    class="m-0 ta-font-medium text-size-14 text-color-white"
                                >
                                    {{
                                        descriptionPopoverItem?.descriptionTotalPrice
                                    }}
                                </p>
                            </div>
                        </ng-container>
                    </ng-container>
                </div>
            </ng-container>
        </div>
    </div>
</ng-template>

<!-- Add PM -->

<ng-template #addPm let-row="row">
    <div
        class="add-pm-container d-flex align-items-center gap-1"
        (click)="addPmItem(row)"
    >
        <div class="add-pm-icon"></div>
        <div class="add-pm-text text-color-black text-size-14">Add PM Item</div>
    </div>
</ng-template>

<!-- STATUS POPOVER-->

<ng-template #statusPopover>
    <app-ta-status-component [statusId]="loadId"> </app-ta-status-component>
</ng-template>

<!-- STOPS POPOVER -->

<ng-template #stopsPopover>
    <div
        class="stops-titles"
        [ngStyle]="{
            width: widthPopover + 'px',
        }"
    >
        <div class="number-container">#</div>
        <div class="details">STOP DETAILS</div>
        <div class="mileage">LEG mi</div>
    </div>
    <div
        class="stops-container"
        [ngStyle]="{
            width: widthPopover + 'px',
        }"
    >
        <ng-container *ngIf="isLoading; else stopsList">
            <div class="spinner"></div>
        </ng-container>
        <ng-template #stopsList>
            <div class="items-container scrolling">
                <ng-container
                    *ngFor="
                        let stop of stops.loadStops;
                        let i = index;
                        trackBy: trackStops
                    "
                >
                    <div
                        class="item d-flex justify-content-center align-items-center"
                        [ngClass]="{ 'wait-time': i === 1 }"
                    >
                        <div class="number-container d-flex align-items-center">
                            <div
                                class="number"
                                [class.delivery]="
                                    stop.stopType.name === 'Delivery'
                                "
                                [class.deadhead-number]="
                                    stop.stopType.name === 'DeadHead'
                                "
                            >
                                {{ stop.stopLoadOrder }}
                            </div>
                            <ng-container
                                *ngIf="i < stops.loadStops.length - 1"
                            >
                                <div class="line"></div>
                            </ng-container>
                        </div>
                        <div class="details">
                            <div
                                class="location"
                                [class.delivery]="
                                    stop.stopType.name === 'Delivery'
                                "
                                [class.deadhead]="
                                    stop.stopType.name === 'DeadHead'
                                "
                            >
                                {{ stop.shipper.address.city }},
                                {{ stop.shipper.address.stateShortName }}
                            </div>
                            <ng-container
                                *ngIf="
                                    stop.stopType.name === 'DeadHead';
                                    else noDeadhead
                                "
                            >
                                <div>Deadhead</div>
                            </ng-container>
                            <ng-template #noDeadhead>
                                <div class="time">
                                    {{ stop.dateFrom | date: 'dd/MM/yy' }} |
                                    {{ stop.timeFrom }} -
                                    {{ stop.timeTo || 'Open' }}
                                </div>
                                <div>{{ stop.shipper.businessName }}</div>
                            </ng-template>
                        </div>
                        <ng-container *ngIf="stop.legMiles">
                            <div class="mileage">+{{ stop.legMiles }}</div>
                        </ng-container>
                    </div>
                </ng-container>
            </div>

            <div
                class="total d-flex justify-content-between align-items-center"
            >
                <div class="pick-up d-flex flex-column">
                    <span>First pickup in</span>
                    <span
                        ><strong>{{ stops.firstPickup }}</strong></span
                    >
                </div>
                <div class="total-miles d-flex flex-column">
                    <span>Total</span>
                    <span
                        ><strong>{{ stops.totalMiles }} mi</strong></span
                    >
                </div>
            </div>
        </ng-template>
    </div>
</ng-template>

<!-- INVOICE AGING POPOVER -->

<ng-template #invoiceAgingPopover let-data="data">
    <div class="invoice-aging-dropdown">
        <div class="invoice-aging-dropdown-content d-flex flex-column">
            <ng-container
                *ngFor="
                    let invoiceAgingGroup of invoiceDropdownData.invAgingGroups;
                    let i = index;
                    trackBy: trackByIdentity
                "
            >
                <div
                    class="invoice-aging-dropdown-content-item d-flex flex-column"
                    [ngClass]="{
                        'has-value': !!iinvoiceAgingGroup?.totalSum,
                    }"
                >
                    <div
                        class="invoice-aging-item-header align-items-center w-100"
                    >
                        <div
                            class="days-count"
                            [ngClass]="{
                                'text-color-muted':
                                    !invoiceAgingGroup?.totalSum,
                                'text-color-white':
                                    !!invoiceAgingGroup?.totalSum,
                            }"
                        >
                            {{ invoiceAgingGroup?.periodOfDays }}

                            <span class="text-color-muted">d.</span>
                        </div>

                        <div class="invoice-count text-color-light-grey-2">
                            {{
                                invoiceDropdownData?.isUnPaidAging
                                    ? invoiceAgingGroup?.countInvoice + '  Inv.'
                                    : invoiceAgingGroup?.percentage + '%'
                            }}
                        </div>

                        <div
                            class="total-amount"
                            [ngClass]="{
                                'text-color-muted':
                                    !invoiceAgingGroup?.totalSum,
                                'text-color-white':
                                    !!invoiceAgingGroup?.totalSum,
                            }"
                        >
                            {{ invoiceAgingGroup?.totalSum | formatCurrency }}
                        </div>
                    </div>

                    <div class="invoice-aging-item-progress-bar-container">
                        <div
                            class="progress-bar"
                            [ngClass]="'group-' + (i + 1)"
                            [ngStyle]="{
                                width: invoiceAgingGroup?.percentage + '%',
                            }"
                        ></div>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>
</ng-template>

<ng-template #avatarColumn let-row="row" let-column="column">
    <app-ca-profile-image
        [avatarImg]="row?.avatarImg"
        [avatarColor]="row?.avatarColor ?? {}"
        [textShortName]="row?.textDriverShortName ?? row?.textShortName"
        [size]="row?.avatarSize"
        [fontSize]="row?.avatarFontSize"
        [isHoverEffect]="row?.avatarIsHoverEffect"
        [isRound]="column.isRound"
    ></app-ca-profile-image>
</ng-template>
