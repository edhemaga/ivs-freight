<div
    class="details-header-wrapper"
    [class.details-header-wrapper-repair-shop]="repairHeader"
>
    <div class="details-header-wrapper-switcher">
        <div class="inactive-icon-input">
            <div
                *ngIf="!selectedDropdown"
                class="current-active-item"
                [ngClass]="{
                    'single-data': options.length === 1,
                    closed: searchName.includes('Closed')
                }"
                (click)="onPickItem()"
                [ngbTooltip]="showDropdownTooltip"
                [mainTooltip]="options.length > 1 ? searchInputName : ''"
                position="top"
                [tooltipBackground]="options.length > 1 ? '#424242' : '#eeeeee'"
            >
                <!-- header name new -->
                <ng-container *ngIf="deactivate">
                    <div
                        ngbTooltip
                        class="current-active-dropdown-image d-flex"
                        [mainTooltip]="'Deactivated'"
                        position="bottom"
                        tooltipBackground="#424242"
                    >
                        <svg-icon
                            (mouseenter)="showTooltip(false)"
                            (mouseleave)="showTooltip(true)"
                            src="assets/svg/common/confirmation/ic_confirmation_activate.svg"
                        ></svg-icon>
                    </div>
                </ng-container>
                <p class="ta-font-bold text-color-black current-active-name">
                    {{ currentName }}
                </p>
                <ng-container *ngIf="owner">
                    <div
                        ngbTooltip
                        class="current-active-dropdown-owner"
                        [mainTooltip]="'Owned by ' + ownerName"
                        position="bottom"
                        tooltipBackground="#424242"
                    >
                        <svg-icon
                            (mouseenter)="showTooltip(false)"
                            (mouseleave)="showTooltip(true)"
                            src="assets/svg/common/blue_rounded_circle_white_inside.svg"
                        ></svg-icon>
                    </div>
                </ng-container>

                <ng-container *ngIf="haveDropSVG">
                    <span
                        ngbTooltip
                        [mainTooltip]="searchName"
                        position="bottom"
                        [tooltipBackground]="searchName ? '#424242' : ''"
                        [tooltipMarginTop]="'8px'"
                        class="owner-tooltip"
                    >
                        <svg-icon
                            class="current-active-owner"
                            [ngClass]="{
                                'company-owned': searchName === 'Company Owned',
                                closed: searchName.includes('Closed')
                            }"
                            src="{{
                                customPinnedSvg
                                    ? customPinnedSvg
                                    : (options | detailActiveItem).svg
                            }}"
                        ></svg-icon>
                    </span>
                </ng-container>
            </div>
            <!-- Input dropdown -->

            <app-ta-input-dropdown
                *ngIf="selectedDropdown && options.length > 1"
                [template]="'details-template'"
                class="dropInput"
                [formControl]="inputFormControl"
                [inputConfig]="{
                    name: 'Input Dropdown',
                    type: 'text',
                    isDropdown: true,
                    dropdownWidthClass: 'w-col-366',
                    textTransform: 'capitalize',
                    blackInput: true,
                    customClass: 'input-32-font-20 details-pages'
                }"
                [options]="options"
                [activeItem]="activeItem ?? options[0]"
                [sort]="sortOptions"
                [isDetailsPages]="selectedDropdown"
                [canAddNew]="true"
                [canOpenModal]="true"
                (selectedItem)="onSelecItem($event)"
            >
            </app-ta-input-dropdown>
        </div>
        <div *ngIf="!hasArrow && options.length > 1" class="arrows">
            <span
                ngbTooltip
                [mainTooltip]="tooltipPrevious"
                position="bottom"
                [tooltipBackground]="
                    !tooltipPrevious ? 'rgba(0,0,0,0)' : '#424242'
                "
                [tooltipMarginTop]="'8px'"
                class="d-flex justify-content-center align-items-center previousArrow"
                (click)="onAction('previous')"
            >
                <svg-icon
                    class="arrow-left"
                    src="assets/svg/common/arrow-left.svg"
                >
                </svg-icon>
            </span>
            <span
                ngbTooltip
                [mainTooltip]="tooltipNext"
                [tooltipBackground]="!tooltipNext ? 'rgba(0,0,0,0)' : '#424242'"
                [tooltipMarginTop]="'8px'"
                position="bottom"
                class="d-flex justify-content-center align-items-center nextArrow"
                (click)="onAction('next')"
            >
                <svg-icon
                    class="arrow-right"
                    src="assets/svg/common/arrow-left.svg"
                ></svg-icon>
            </span>
        </div>
        <div *ngIf="hasArrow" class="vertical-dots-header">
            <app-ta-details-dropdown
                [options]="optionsDrop.actions"
                [id]="optionsId"
                [placement]="'bottom-right'"
                (dropDownActions)="dropAct($event)"
            >
            </app-ta-details-dropdown>
        </div>
    </div>

    <!-- Second Input -->
    <div *ngIf="haveTwoInput" class="details-header-wrapper-switcher">
        <div class="inactive-icon-input">
            <div
                *ngIf="!selectedDropdownSecond"
                class="current-active-item"
                [ngClass]="{ 'single-data': optionsSecondInput.length == 1 }"
                (click)="onPickSecondInput()"
                ngbTooltip
                [mainTooltip]="'Search Store'"
                position="top"
                tooltipBackground="#6C6C6C"
            >
                >
                <p class="ta-font-bold text-color-black current-active-name">
                    {{ (optionsSecondInput | detailActiveItem).name }}
                </p>
                <span
                    ngbTooltip
                    [mainTooltip]="'Pinned'"
                    position="top"
                    [tooltipBackground]="'#6C6C6C'"
                >
                    <svg-icon
                        class="current-active-owner"
                        src="{{ (optionsSecondInput | detailActiveItem).svg }}"
                    ></svg-icon>
                </span>
            </div>
            <app-ta-input-dropdown
                class="dropInput"
                *ngIf="selectedDropdownSecond && optionsSecondInput.length > 1"
                [formControl]="inputFormControl"
                [inputConfig]="{
                    name: 'Input Dropdown',
                    type: 'text',
                    isDropdown: true,
                    dropdownWidthClass: 'w-col-366',
                    textTransform: 'capitalize',
                    customClass: 'input-32-font-20 details-pages'
                }"
                [options]="optionsSecondInput"
                [template]="'details-template'"
                [isDetailsPages]="selectedDropdownSecond"
                (selectedItem)="onSelectItem($event)"
            >
            </app-ta-input-dropdown>
        </div>
        <div class="arrows" *ngIf="optionsSecondInput.length > 1">
            <span
                ngbTooltip
                [mainTooltip]="tooltipPrevious"
                position="top"
                tooltipBackground="#6C6C6C"
            >
                <svg-icon
                    class="arrow-left"
                    src="assets/svg/common/arrow-left.svg"
                >
                </svg-icon>
            </span>
            <span
                tooltipBackground="#6C6C6C"
                ngbTooltip
                [mainTooltip]="tooltipNext"
                position="top"
            >
                <svg-icon
                    class="arrow-right"
                    src="assets/svg/common/arrow-left.svg"
                ></svg-icon>
            </span>
        </div>
    </div>
    <div class="details-header-wrapper-container">
        <div class="details-header-wrapper">
            <ng-content></ng-content>
        </div>

        <div class="border-line"></div>
        <div class="details-header-wrapper-data">
            <span>
                <div
                    class="details-header-wrapper-data-item bottom"
                    tooltipBackground="#424242"
                    [tooltipMarginTop]="'6px'"
                    ngbTooltip
                    mainTooltip="Date Added"
                    position="bottom"
                >
                    <svg-icon
                        class="date-add"
                        src="assets/svg/common/date.svg"
                    ></svg-icon>
                    <p class="vin-text">{{ cardDetailsDate }}</p>
                </div>
            </span>
            <span
                style="margin-left: 130px"
                *ngIf="statusInactive == 0"
                tooltipBackground="#424242"
                ngbTooltip
                mainTooltip="Terminated"
                [tooltipMarginTop]="'6px'"
                position="bottom"
            >
                <div class="details-header-wrapper-data-item bottom">
                    <svg-icon
                        class="date-terminated"
                        src="assets/svg/common/ic_terminated.svg"
                    ></svg-icon>
                    <p class="vin-text">{{ cardDetailsDateTerminated }}</p>
                </div>
            </span>
            <ng-container *ngIf="deactivate">
                <span
                    style="margin-left: 130px"
                    tooltipBackground="#424242"
                    ngbTooltip
                    [tooltipMarginTop]="'6px'"
                    mainTooltip="Deactivated"
                    position="bottom"
                >
                    <div class="details-header-wrapper-data-item bottom">
                        <svg-icon
                            class="date-terminated"
                            src="assets/svg/common/ic_terminated.svg"
                        ></svg-icon>
                        <p class="vin-text">{{ cardDetailsDateTerminated }}</p>
                    </div>
                </span>
            </ng-container>

            <ng-container *ngIf="dateChecked || dateClosed">
                <span style="margin-left: 130px">
                    <div
                        class="details-header-wrapper-data-item bottom"
                        tooltipBackground="#424242"
                        ngbTooltip
                        [tooltipMarginTop]="'6px'"
                        [mainTooltip]="
                            dateChecked ? 'Last Used' : 'Date Closed'
                        "
                        position="bottom"
                    >
                        <svg-icon
                            class="date-terminated"
                            src="assets/svg/common/ic_date_checked.svg"
                        ></svg-icon>
                        <p class="vin-text">{{ dateChecked || dateClosed }}</p>
                    </div>
                </span>
            </ng-container>

            <span
                style="margin-left: 130px"
                *ngIf="lastEdit"
                tooltipBackground="#6C6C6C"
                ngbTooltip
                mainTooltip="Last Used"
                [tooltipMarginTop]="'6px'"
                position="bottom"
            >
                <div
                    *ngIf="lastEdit"
                    class="details-header-wrapper-data-item bottom"
                >
                    <svg-icon
                        class="date-terminated"
                        src="assets/svg/common/ic_violation_last-edit.svg"
                    ></svg-icon>
                    <span class="vin-text">{{ lastEdit }}</span>
                </div>
            </span>
        </div>
    </div>
</div>
