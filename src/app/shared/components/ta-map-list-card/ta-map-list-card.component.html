<div
    class="map-list-card-container"
    [ngClass]="{ 'map-list-card-selected': isSelected }"
    [attr.data-id]="'map-list-card-' + item.id"
    (click)="selectCard()"
>
    <div class="map-list-card-info">
        <div class="title-container">
            <div
                class="marker-info-text marker-bold-text uppercase text-ellipsis"
                [ngClass]="{
                    'permanently-closed-text': status == 0 || item.isClosed
                }"
            >
                <span *ngIf="status == 0 || item.isClosed">
                    <svg-icon
                        class="permanently-closed-svg"
                        src="assets/svg/common/ic_permanently_closed.svg"
                        [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
                    ></svg-icon>
                </span>
                <span class="title-text"
                    >{{ title }}
                    <ng-container *ngIf="type == 'fuelStop'"
                        >- {{ item.store }}</ng-container
                    ></span
                >
            </div>
            <div class="d-flex">
                <svg-icon
                    class="favorite-svg"
                    [ngClass]="{ active: item?.favourite }"
                    src="assets/svg/detail-cards/favorite.svg"
                    [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
                    *ngIf="
                        sortCategory.name == 'Favorites' ||
                        sortCategory.name == 'Fuel Price' ||
                        item?.favourite
                    "
                ></svg-icon>
                <div
                    class="show-more"
                    [ngClass]="
                        item?.isSelected
                            ? 'table-dropdown-container active-drop'
                            : 'table-dropdown-container'
                    "
                    (click)="showMoreOptions()"
                >
                    <app-ta-details-dropdown
                        #detailsDropdown
                        [options]="dropdownActions"
                        [placement]="'right-top'"
                        [hasVericalDots]="true"
                        [id]="item?.id"
                        [data]="item"
                        [leftIcon]="true"
                        [customClassDropDown]="'map-list-card-dropdown'"
                        (dropDownActions)="callBodyAction($event)"
                    ></app-ta-details-dropdown>
                </div>
            </div>
        </div>
        <div class="marker-rating-container mg-top-2">
            <div
                *ngIf="
                    (sortCategory.name == 'Business Name' ||
                        sortCategory.name == 'Rating' ||
                        sortCategory.name == 'Favorites') &&
                    type != 'fuelStop'
                "
            >
                <span class="marker-rating">
                    <svg-icon
                        class="marker-rating-svg"
                        src="assets/svg/common/ic_like.svg"
                        [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                        [ngClass]="{
                            'has-liked-icon': rating?.hasLiked
                        }"
                        (click)="onLike($event)"
                    ></svg-icon>
                    <span class="marker-like-text marker-bold-text">{{
                        rating?.likeCount
                    }}</span>
                </span>
                <span class="marker-rating">
                    <svg-icon
                        class="marker-rating-svg"
                        src="assets/svg/common/ic_dislike.svg"
                        [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                        [ngClass]="{
                            'has-disliked-icon': rating?.hasDislike
                        }"
                        (click)="onDislike($event)"
                    ></svg-icon>
                    <span class="marker-like-text marker-bold-text">{{
                        rating?.dislikeCount
                    }}</span>
                </span>
            </div>
            <div
                *ngIf="
                    type == 'fuelStop' &&
                    (sortCategory.name == 'Business Name' ||
                        sortCategory.name == 'Favorites' ||
                        sortCategory.name == 'Fuel Price')
                "
            >
                <span>
                    <svg-icon
                        class="marker-fuel-svg"
                        src="assets/svg/common/ic_circle_light_blue.svg"
                        [svgStyle]="{ 'width.px': 10, 'height.px': 10 }"
                    ></svg-icon>
                </span>
                <span class="marker-like-text marker-medium-text"
                    ><span class="marker-bold-text"
                        >${{
                            item.pricePerGallon ? item.pricePerGallon : '3.31'
                        }}</span
                    >
                    - 4 days ago</span
                >
            </div>
            <div *ngIf="sortCategory.name == 'Date Added'">
                <div class="marker-like-text marker-medium-text">
                    Added
                    <span class="marker-bold-text">{{
                        item.createdAt | formatDateP
                    }}</span>
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Last Used Date'">
                <div class="marker-like-text marker-medium-text">
                    Last Used
                    <span class="marker-bold-text">{{
                        item?.lastUsed != null
                            ? (item?.lastUsed | formatDateP)
                            : item?.lastVisited != null
                            ? (item.lastVisited | formatDateP)
                            : item?.updatedAt != null
                            ? (item.updatedAt | formatDateP)
                            : '&nbsp;'
                    }}</span>
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Pickups'">
                <div class="marker-like-text marker-medium-text">
                    <span class="marker-bold-text">{{
                        item.pickups != null ? item.pickups : '73'
                    }}</span>
                    Pickups
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Deliveries'">
                <div class="marker-like-text marker-medium-text">
                    <span class="marker-bold-text">{{
                        item.deliveries != null ? item.deliveries : '246'
                    }}</span>
                    Deliveries
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Avg. Pickup Time'">
                <div class="marker-like-text marker-medium-text">
                    Avg. Pickup<span class="marker-bold-text">
                        {{
                            item.avgPickupTime != null
                                ? item.avgPickupTime
                                : '0m'
                        }}</span
                    >
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Avg. Delivery Time'">
                <div class="marker-like-text marker-medium-text">
                    Avg. Delivery<span class="marker-bold-text">
                        {{
                            item.avgDeliveryTime != null
                                ? item.avgDeliveryTime
                                : '0m'
                        }}</span
                    >
                </div>
            </div>
            <div
                *ngIf="sortCategory.name == 'Location' && item.distanceBetween"
            >
                <div class="marker-like-text">
                    <span class="marker-bold-text"
                        >{{ item.distanceBetween }} mi</span
                    >
                    away
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Available'">
                <div class="marker-like-text">
                    Open Until <span class="marker-bold-text">8:00 PM</span>
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Orders'">
                <div class="marker-like-text">
                    <span class="marker-bold-text">{{ item.order }}</span>
                    Orders
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Transaction'">
                <div class="marker-like-text">
                    <span class="marker-bold-text">{{
                        item.fuelTransactions
                            ? item.fuelTransactions.length
                            : '2,473'
                    }}</span>
                    Transaction
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Total Cost'">
                <div class="marker-like-text">
                    Total Cost
                    <span class="marker-bold-text"
                        >${{
                            item.totalCost != null && item.totalCost > 0
                                ? (item.totalCost | thousandSeparator)
                                : item.cost != null && item.cost > 0
                                ? (item.cost | thousandSeparator)
                                : '0'
                        }}</span
                    >
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Date & Time'">
                <div class="marker-like-text">
                    Issued
                    <span class="marker-bold-text">10/09/21 3:47 PM</span>
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Inspection Level'">
                <div class="marker-like-text">
                    Insp. lvl
                    <span class="marker-bold-text">III - Driver Only</span>
                </div>
            </div>
            <div
                class="driver-name-container"
                *ngIf="sortCategory.name == 'Drivers Name'"
            >
                <app-ta-profile-images
                    [indx]="0"
                    [size]="'small'"
                    [name]="item.driverFullName"
                    [type]="'driver'"
                ></app-ta-profile-images>
                <div class="marker-like-text marker-bold-text mg-left-4">
                    {{ item?.driverFullName }}
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Inspection Weights'">
                <div class="marker-like-text">
                    <span>Severity </span>
                    <span class="marker-bold-text">2</span>
                    <span class="vertical-divider"></span>
                    <span>Time </span> <span class="marker-bold-text">3</span>
                    <span class="vertical-divider"></span>
                    <span>Total </span> <span class="marker-bold-text">6</span>
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Truck Unit'">
                <div class="marker-like-text">
                    Truck Unit
                    <span class="marker-bold-text">{{
                        item?.truckNumber
                    }}</span>
                    <span>
                        <svg-icon
                            class="truck-svg"
                            src="assets/svg/common/ic_driver-truck.svg"
                            [svgStyle]="{ 'width.px': 33, 'height.px': 12 }"
                        ></svg-icon>
                    </span>
                </div>
            </div>
            <div *ngIf="sortCategory.name == 'Trailer Unit'">
                <div class="marker-like-text">
                    Trailer Unit
                    <span class="marker-bold-text">{{
                        item?.trailerNumber
                    }}</span>
                    <span>
                        <svg-icon
                            class="truck-svg"
                            src="assets/svg/common/trailers/ic_trailer_conestoga.svg"
                            [svgStyle]="{ 'width.px': 33, 'height.px': 12 }"
                        ></svg-icon>
                    </span>
                </div>
            </div>
            <div
                class="w-100"
                *ngIf="
                    sortCategory.name == 'Report Number' ||
                    sortCategory.name == 'Inspection Results'
                "
            >
                <div
                    class="accident-report-container"
                    *ngIf="type == 'accident'"
                >
                    <div
                        class="accident-svg-container vehicles-number"
                        [ngClass]="{ inactive: item?.vehicles == 0 }"
                    >
                        <svg-icon
                            class="accident-report-svg"
                            src="assets/svg/common/ic_crash_vehicle.svg"
                            [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                        ></svg-icon>
                        <div class="marker-like-text">
                            <span class="marker-bold-text">{{
                                item?.vehicles
                            }}</span>
                            Veh.
                        </div>
                    </div>
                    <div
                        class="accident-svg-container injury-number"
                        [ngClass]="{ inactive: item?.injuries == 0 }"
                    >
                        <svg-icon
                            class="accident-report-svg"
                            src="assets/svg/common/ic_injury.svg"
                            [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                        ></svg-icon>
                        <div class="marker-like-text">
                            <span class="marker-bold-text">{{
                                item?.injuries
                            }}</span>
                            Inj.
                        </div>
                    </div>
                    <div
                        class="accident-svg-container fatality-number"
                        [ngClass]="{ inactive: item?.fatality == 0 }"
                    >
                        <svg-icon
                            class="accident-report-svg"
                            src="assets/svg/common/ic_fatality.svg"
                            [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                        ></svg-icon>
                        <div class="marker-like-text">
                            <span class="marker-bold-text">{{
                                item?.fatality
                            }}</span>
                            Fat.
                        </div>
                    </div>
                    <div
                        class="accident-svg-container towing"
                        [ngClass]="{ inactive: item?.towing == 'No' }"
                    >
                        <svg-icon
                            class="accident-report-svg"
                            src="assets/svg/common/ic_towing.svg"
                            [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                        ></svg-icon>
                        <div class="marker-like-text">Tow.</div>
                    </div>
                    <div
                        class="accident-svg-container hazard"
                        [ngClass]="{ inactive: item?.hm == 'No' }"
                    >
                        <svg-icon
                            class="accident-report-svg"
                            src="assets/svg/common/ic_hazmat.svg"
                            [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                        ></svg-icon>
                        <div class="marker-like-text">HM</div>
                    </div>
                </div>
                <div
                    class="accident-report-container inspection-container"
                    *ngIf="type == 'inspection'"
                >
                    <div
                        class="accident-svg-container violation-number"
                        [ngClass]="{ inactive: item?.vehicles == 0 }"
                    >
                        <svg-icon
                            class="accident-report-svg"
                            src="assets/svg/common/ic_inpsection_violation.svg"
                            [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                        ></svg-icon>
                        <div class="marker-like-text">
                            <span class="marker-bold-text">{{
                                item?.vehicles
                            }}</span>
                            Viol.
                        </div>
                    </div>
                    <div
                        class="accident-svg-container injury-number"
                        [ngClass]="{ inactive: item?.injuries == 0 }"
                    >
                        <svg-icon
                            class="accident-report-svg"
                            src="assets/svg/common/ic_inspection_oss.svg"
                            [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                        ></svg-icon>
                        <div class="marker-like-text">
                            <span class="marker-bold-text">{{
                                item?.injuries
                            }}</span>
                            OOS
                        </div>
                    </div>
                    <div
                        class="accident-svg-container fatality-number"
                        [ngClass]="{ inactive: item?.fatality == 0 }"
                    >
                        <svg-icon
                            class="accident-report-svg"
                            src="assets/svg/common/ic_inspection_citation.svg"
                            [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                        ></svg-icon>
                        <div class="marker-like-text">
                            <span class="marker-bold-text">{{
                                item?.fatality
                            }}</span>
                            Citat.
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="map-list-card-address mg-top-2" *ngIf="address">
            <span
                class="marker-bold-text"
                *ngIf="sortCategory.name != 'Location' && locationFilterOn"
                >{{ item.distanceBetween }} mi -
            </span>
            <span class="address-text">
                {{ address.city ? address.city : address.county }},
                {{ address.stateShortName }}
                {{ address.zipCode }},
                {{ address.country }}
            </span>
        </div>
    </div>
</div>
