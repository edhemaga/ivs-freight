<div
    [ngStyle]="{ 'width.px': dropdownConfig?.width ?? '100%' }"
    #openHoursPop="ngbPopover"
    [ngbPopover]="openHoursPopover"
    container="body"
    [placement]="'bottom-left'"
    popoverClass="table-open-hours-popover"
    triggers="manual"
    [autoClose]="'outside'"
    (hidden)="
        openHoursDropdownActiveId === dropdownConfig?.rowId
            ? (openHoursDropdownActiveId = -1)
            : {}
    "
    (click)="onShowOpenHoursDropdown(openHoursPop)"
>
    <div
        class="d-flex align-items-center open-hours-container"
        [ngClass]="{
            active: openHoursDropdownActiveId === dropdownConfig?.rowId,
        }"
        ngbTooltip
        mainTooltip="Open Hours"
        tooltipBackground="#424242"
        tooltipColor="#ffff"
        tooltipMarginTop="-6px"
        position="bottom"
    >
        @if (
            dropdownConfig?.openHoursToday?.status !==
            openHoursDropdownStringEnum.CLOSED
        ) {
            <svg-icon
                class="open-hours-icon"
                [ngClass]="{
                    closing:
                        dropdownConfig?.openHoursToday?.status ===
                        openHoursDropdownStringEnum.CLOSING_SOON,
                }"
                [src]="openHoursDropdownSvgRoutes.circleRoute"
                [svgStyle]="{
                    'width.px': 10,
                    'height.px': 10,
                }"
            ></svg-icon>
        }

        <p
            class="m-0 text-color-black text-size-14"
            [ngClass]="{
                'ta-font-semi-bold':
                    dropdownConfig?.openHoursToday?.status !==
                    openHoursDropdownStringEnum.CLOSED,
            }"
        >
            {{
                dropdownConfig?.openHoursToday?.status !==
                openHoursDropdownStringEnum.CLOSED
                    ? dropdownConfig?.openHoursToday?.status
                    : dropdownConfig?.openHoursToday?.info
            }}

            <!--  {{ // w8 for back
                dropdownConfig?.openHoursToday?.status ===
                openHoursDropdownStringEnum.CLOSING_SOON
                    ? dropdownConfig?.openHoursToday?.info
                    : ''
            }} -->
        </p>
    </div>
</div>

<ng-template #openHoursPopover let-data="data">
    <div class="d-flex flex-column open-hours-dropdown">
        @for (workingHourItem of data; track workingHourItem?.workingDays) {
            <div class="d-flex flex-column open-hours-dropdown-item">
                <p class="m-0 ta-font-bold text-color-white-4 text-size-11">
                    {{ workingHourItem?.workingDays }}
                </p>

                <span class="text-color-white text-size-14">
                    {{ workingHourItem?.workingHours }}
                </span>
            </div>
        }
    </div>
</ng-template>
