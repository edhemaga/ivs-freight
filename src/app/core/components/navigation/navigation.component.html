<!-- (mouseenter)="onHoveredNavigation(true)"
(mouseleave)="onHoveredNavigation(false)" -->
<div

    class="navigation"
    (mouseleave)="onHoveredNavigation(false)"
>
    <div class="nav-holder"
    [ngClass]="{'dark-nav': isNavigationHovered || isNavigationOpenend}"
    >

    <div class="navigation-top">
        <app-navigation-header
        (mouseenter)="onHoveredNavigation(true)"
            [isNavigationHovered]="isNavigationHovered || isNavigationOpenend"
        ></app-navigation-header>

        <app-navigation-modals
            [isNavigationHoveredAndPanelOpen]="
            isModalPanelOpen && isNavigationHovered
            "
        ></app-navigation-modals>
    </div>

    <div class="navigation-middle">
        <div
            class="navigation-routes-container"
           
        >
            <div
                class="navigation-routes"
                *ngFor="
                    let item of navigation;
                    let ind = index;
                    trackBy: identity
                "
                [ngClass]="{
                    'new-magic-line-selected':
                        item.isRouteActive ||
                        item.isSubrouteActive ||
                        isActiveRouteOnReload(item.route)
                }"
            >
                <app-navigation-route
                    *ngIf="!item.arrow && !item.messages"
                    [route]="item"
                    [isNavigationHovered]="isNavigationHovered || isNavigationOpenend"
                    [isActiveSubroute]="isActiveSubroute"
                    (onRouteEvent)="onRouteEvent($event)"
                    (mouseleave)="onHoveredNavigation(false)"
                >
                </app-navigation-route>
                <!-- Messages -->
                <app-navigation-route
                *ngIf="item.messages"
                [route]="item"
                [message]="item.messages"
                [isNavigationHovered]="isNavigationHovered || isNavigationOpenend"
                [isActiveSubroute]="isActiveSubroute"
                (onRouteEvent)="onRouteEvent($event)"
                (mouseleave)="onHoveredNavigation(false)"
            ></app-navigation-route>
                <!-- If route has subroutes -->
                <app-navigation-subroute-card
                    *ngIf="item.arrow"
                    [isNavigationCardActive]="
                        item.isRouteActive &&
                        isNavigationHovered  &&
                        !isModalPanelOpen &&
                        !isUserPanelOpen &&
                        !isUserCompanyDetailsOpen
                    "
                    (mouseenter)="onHoveredNavigation(true)"
                    [contentHeight]="item.route.length"
                >   

                    <app-navigation-route
                        [route]="item"
                        (mouseenter)="onHoveredNavigation(true)"
                        [isNavigationHovered]="isNavigationHovered || isNavigationOpenend"
                        [isActiveSubroute]="isActiveSubroute"
                        (onRouteEvent)="onRouteEvent($event)"
                    >
                    </app-navigation-route>

                    <app-navigation-subroute
                        *ngIf="
                            isNavigationHovered &&
                            item.isRouteActive &&
                            !isModalPanelOpen &&
                            !isUserPanelOpen &&
                            !isUserCompanyDetailsOpen
                        "
                        [subroute]="item"
                        [isActiveSubroute]="isActiveSubroute"
                        [isNavigationHovered]="isNavigationHovered || isNavigationOpenend"
                        (onSubrouteActiveEvent)="onRouteEvent($event)"
                    >
                    </app-navigation-subroute>
                    
                </app-navigation-subroute-card>
            </div>
            <div
                [@showHideDetails]="
                    isNavigationHovered || isNavigationOpenend &&
                    !isActiveSubroute &&
                    !isActiveFooterRoute &&
                    isActiveMagicLine
                        ? 'true'
                        : 'false'
                "
                class="new-magic-line"
            ></div>
        </div>
    </div>
    <!-- Open nav on click -->
    <div class="open-navigation" 
        (click)="isNavigationOpenend = !isNavigationOpenend"
    ></div>
    <div
        class="navigation-bottom"
        (mouseenter)="onHoveredRoutesContainer(false)"
        (mouseenter)="onHoveredNavigation(true)"
        
    >
        <app-navigation-footer
            [isNavigationHovered]="
                isNavigationHovered || isNavigationOpenend || isNavigationOpenend  && !isUserCompanyDetailsOpen
            "
            (onActivateFooterRoutes)="onActivateFooterRoute($event)"
        ></app-navigation-footer>
        <app-navigation-user-profile
            [isNavigationHovered]="
                isNavigationHovered || isNavigationOpenend && !isUserCompanyDetailsOpen
            "
            [isUserPanelOpen]="isUserPanelOpen"
        >
        </app-navigation-user-profile>

        <app-navigation-user-company
            [isNavigationHoveredAndPanelOpen]="
                isUserCompanyDetailsOpen && isNavigationHovered
            "
        ></app-navigation-user-company>
    </div>
</div>

</div>
