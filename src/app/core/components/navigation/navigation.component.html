<div
  class="navigation"
  (mouseenter)="onHoveredNavigation(true)"
  (mouseleave)="onHoveredNavigation(false)"
>
  <div class="navigation-top">
    <app-navigation-header
      [isNavigationHovered]="isNavigationHovered"
      (onModalPanelOpenEvent)="onPanelEvent($event)"
    ></app-navigation-header>

    <app-navigation-modals
      *ngIf="isModalPanelOpen && isNavigationHovered"
      (onModalPanelCloseEvent)="onPanelEvent($event)"
    ></app-navigation-modals>
    <div
      class="wrapper-container"
      [ngClass]="{ 'wrapper-container-nohover': !isNavigationHovered }"
    >
      <div
        class="navigation-routes-container"
        (mouseenter)="onHoveredRoutesContainer(true)"
        (mouseleave)="onHoveredRoutesContainer(false)"
      >
        <div
          class="navigation-routes"
          *ngFor="let item of navigation; let ind = index; trackBy: identify"
          [ngClass]="{
            'new-magic-line-selected':
              item.isRouteActive ||
              item.isSubrouteActive ||
              isActiveRouteOnReload(item.route)
          }"
        >
          <app-navigation-route
            *ngIf="!item.arrow"
            [route]="item"
            [isNavigationHovered]="isNavigationHovered"
            [isActiveSubroute]="isActiveSubroute"
            (onRouteEvent)="onRouteEvent($event)"
          >
          </app-navigation-route>

          <app-navigation-subroute-card
            *ngIf="item.arrow"
            [isRouteActive]="item.isRouteActive"
            [isNavigationHovered]="isNavigationHovered"
            [contentHeight]="item.route.length"
          >
            <app-navigation-route
              [route]="item"
              [isNavigationHovered]="isNavigationHovered"
              [isActiveSubroute]="isActiveSubroute"
              (onRouteEvent)="onRouteEvent($event)"
            >
            </app-navigation-route>

            <app-navigation-subroute
              *ngIf="isNavigationHovered && item.isRouteActive"
              [subroute]="item"
              [isActiveSubroute]="isActiveSubroute"
              (onSubrouteActiveEvent)="onRouteEvent($event)"
            >
            </app-navigation-subroute>
          </app-navigation-subroute-card>
        </div>
        <div
          *ngIf="
            isNavigationHovered &&
            !isActiveSubroute &&
            !isActiveFooterRoute &&
            isActiveMagicLine
          "
          [ngClass]="isNavigationHovered ? 'show' : 'hide'"
          class="new-magic-line"
        ></div>
      </div>
    </div>
    <hr *ngIf="isNavigationHovered && isActiveSubroute" class="wrapper-line" />
  </div>

  <div class="navigation-bottom" (mouseenter)="onHoveredRoutesContainer(false)">
    <app-navigation-footer
      *ngIf="!isUserCompanyDetailsOpen"
      [isNavigationHovered]="isNavigationHovered"
      (onUserPanelOpenEvent)="onPanelEvent($event)"
      (onActivateFooterRoutes)="onActivateFooterRoute($event)"
    ></app-navigation-footer>

    <app-navigation-user-profile
      *ngIf="!isUserCompanyDetailsOpen"
      [isNavigationHovered]="isNavigationHovered"
      [isUserPanelOpen]="isUserPanelOpen"
      (onUserPanelCloseEvent)="onPanelEvent($event)"
      (onUserCompanyDetailsOpen)="onPanelEvent($event)"
    >
    </app-navigation-user-profile>

    <app-navigation-user-company
      *ngIf="isUserCompanyDetailsOpen && isNavigationHovered"
      (onUserCompanyDetailsClose)="onPanelEvent($event)"
    ></app-navigation-user-company>
  </div>
</div>
