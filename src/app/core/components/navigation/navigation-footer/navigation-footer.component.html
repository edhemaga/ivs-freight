<div class="nav-footer" [ngClass]="{ 'nav-footer-width': isNavigationHovered }">
    <div
        class="settings-footer"
        [ngClass]="{
            'activated-footer-route': settingsRouteActivated
        }"
    >
        <app-navigation-settings
            (activatedSettingsRoute)="settingsRouteClicked($event)"
            [isNavigationHovered]="isNavigationHovered"
            [isUserPanelOpen]="isUserPanelOpen"
            [isSettingsPanelOpen]="isSettingsPanelOpen"
            [settingsRouteActivated]="settingsRouteActivated"
            [mouseOverMiddleNav]="mouseOverMiddleNav"
            [mouseOverFooter]="mouseOverFooter"
            [selectedRoute]="selectedRoute"
            [selectedSubRoute]="selectedSubRoute"
            [subrouteContainerOpened]="subrouteContainerOpened"
        ></app-navigation-settings>
    </div>
    <div
        *ngFor="let item of footerData; trackBy: identity; let ind = index"
        class="nav-footer-item close"
        [ngClass]="{
            'nav-footer-item-scaleWidth': !isNavigationHovered,
            show: isNavigationHovered,
            'activated-footer-route': notificationsActive && item.notification,
            'notification-item': item.notification
        }"
        (click)="
            onAction(ind, 'Open User Panel');
            item.notification &&
                settingsRouteClicked({
                    value: true,
                    id: item.id
                })
        "
        [routerLink]="item.route"
        routerLinkActive="{{ ind !== 2 ? 'nav-footer-item-active' : '' }}"
        (mouseenter)="showToolTip = true"
        (mouseleave)="showToolTip = false"
    >
        <div
            class="tooltip-right"
            [ngClass]="{ 'hide-tooltip': isNavigationHovered }"
            *ngIf="item.notification"
        >
            <app-tooltip-slide
                [show]="showToolTip"
                [name]="'Notifications'"
            ></app-tooltip-slide>
        </div>
        <div
            *ngIf="
                !mouseOverMiddleNav &&
                !mouseOverFooter &&
                notificationsActive &&
                item.notification &&
                !subrouteContainerOpened &&
                !isSettingsPanelOpen
            "
            class="nav-item-active-box"
            [ngClass]="{
                'nav-item-active-box-active': isNavigationHovered,
                'animate-magic-line': isNavigationHovered
            }"
        ></div>

        <!-- <div
            class="tooltipholder"
            *ngIf="item.notification && !isNavigationHovered"
        >
            <span class="tooltiptext"> Notifications</span>
        </div> -->
        <div
            [ngClass]="{
                'hide-user': isUserPanelOpen === true && ind === 2,
                'user-profile': ind === 2
            }"
        >
            <div
                [ngClass]="{
                    'hide-user': isUserCompanyDetailsOpen && ind === 2
                }"
            >
                <div
                    [ngClass]="{
                        notification: item.notification,
                        'nav-width': isNavigationHovered
                    }"
                >
                    <div *ngIf="item.text !== ''" class="wrapper">
                        <div
                            class="nav-footer-hover"
                            [ngClass]="{
                                'nav-footer-hover-user': ind === 2
                            }"
                        ></div>
                        <div
                            class="status-marker-container-notification-1 close"
                        >
                            <svg-icon
                                *ngIf="
                                    item.notification && !isNavigationHovered
                                "
                                class="notification-svg"
                                src="../../../../../assets/svg/applicant/notification-light.svg"
                            >
                            </svg-icon>
                            <svg-icon
                                *ngIf="item.notification && isNavigationHovered"
                                class="notification-svg"
                                src="../../../../../assets/svg/applicant/notification.svg"
                            >
                            </svg-icon>
                        </div>
                        <svg-icon
                            *ngIf="item.notification"
                            class="notification-svg"
                            src="{{ item.image }}"
                            [ngClass]="{
                                'active-img': notificationsActive,
                                close: item.notification,
                                'route-closed-nav-svg-not-active':
                                    item.construction == true &&
                                    !isNavigationHovered,

                                'route-not-active-svg':
                                    item.construction == true &&
                                    isNavigationHovered
                            }"
                        >
                        </svg-icon>
                        <img
                            class="nav-footer-image"
                            [ngClass]="{
                                'nav-footer-image-user': ind === 2
                            }"
                            *ngIf="!item.notification"
                            [src]="item.image"
                            [alt]="item.text.userName"
                        />

                        <div
                            class="nav-footer-rightSide"
                            [@showHideDetails]="
                                isNavigationHovered ? 'true' : 'false'
                            "
                            [ngClass]="{ close: item.notification }"
                        >
                            <p
                                class="nav-footer-text ta-font-regular"
                                *ngIf="
                                    !(item.text | userData) &&
                                    isNavigationHovered
                                "
                                [ngClass]="{
                                    'active-route': notificationsActive,
                                    'route-not-active': item.construction
                                }"
                            >
                                {{ item.text }}
                            </p>
                            <div
                                [@showHideDetails]="
                                    isNavigationHovered ? 'true' : 'false'
                                "
                                *ngIf="item.notification"
                                class="notification-message"
                            >
                                <span>
                                    {{ item.notification }}
                                </span>
                            </div>
                            <div
                                class="nav-footer-user"
                                *ngIf="
                                    (item.text | userData) &&
                                    isNavigationHovered
                                "
                            >
                                <p class="nav-footer-user-company">
                                    {{ item.text.companyName }}
                                </p>
                                <p class="nav-footer-user-name">
                                    {{ item.text.userName }}
                                </p>
                            </div>
                        </div>
                        <div
                            *ngIf="currentUserStatus && (item.text | userData)"
                            class="status-marker-container"
                            (mouseenter)="showToolTip = false"
                        >
                            <div
                                [ngClass]="{
                                    'status-active':
                                        currentUserStatus === 'active',
                                    'status-online':
                                        currentUserStatus === 'online',
                                    'status-away': currentUserStatus === 'away',
                                    'status-busy': currentUserStatus === 'busy',
                                    'status-offline':
                                        currentUserStatus === 'offline'
                                }"
                                class="status-marker"
                            >
                                <svg-icon
                                    src="../../../../../assets/svg/applicant/user-active.svg"
                                >
                                </svg-icon>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div
        *ngIf="
            !mouseOverMiddleNav &&
            !isActiveSubroute &&
            !isUserPanelOpen &&
            !isSettingsPanelOpen &&
            !isUserCompanyDetailsOpen &&
            !showHideLineIfSettingsActive &&
            mouseOverFooter
        "
        [@showHideDetailsMagicLine]="
            showMagicLine &&
            !isUserPanelOpen &&
            !isSettingsPanelOpen &&
            !isModalPanelOpen
        "
        class="magic-line-footer"
        [ngClass]="{
            'magic-line-not-hovered': !isNavigationHovered,
            'animate-magic-line': isNavigationHovered
        }"
    ></div>
</div>
