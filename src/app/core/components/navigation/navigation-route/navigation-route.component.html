<div
    *ngIf="isNavItemHovered && isActiveSubroute && !route.isRouteActive"
    class="nav-item-hover"
    [ngClass]="{ 'route-hover': isNavigationHovered }"
></div>
<div
    class="{{ class }}"
    class="nav-item"
    [ngClass]="{
        'nav-width': isNavigationHovered
    }"
    (mouseenter)="onNavItemHover(true)"
    (mouseleave)="onNavItemHover(false)"
    (click)="onRouteAction()"
>
    <div
        *ngIf="!isNavigationHovered"
        class="tooltip"
        ngbTooltip
        [openTooltipDelay]="100"
        mainTooltip="{{ route.name }}"
        tooltipBackground="#2F2F2F"
        position="right"
    ></div>
    <div
        [ngClass]="{
            'nav-item-active-box':
                ((route.isRouteActive && footerRouteActive) ||
                    route.isSubrouteActive) &&
                !isNavigationHovered &&
                !isSettingsPanelOpen &&
                !isUserPanelOpen &&
                footerRouteActive
        }"
    ></div>

    <svg-icon
        class="{{ class }}"
        class="nav-item-img nav-item-img-active"
        src="{{ route.image }}"
        [ngClass]="{
            'route-clicked-svg':
                route.isRouteActive &&
                route.arrow &&
                closeDropdownOnNavClose &&
                !isSettingsPanelOpen &&
                !isUserPanelOpen,
            'nav-item-svg-active':
                ((route.isRouteActive && footerRouteActive) ||
                    route.isSubrouteActive) &&
                !isSettingsPanelOpen &&
                !settingsPage &&
                !isUserPanelOpen &&
                footerRouteActive
        }"
    ></svg-icon>

    <div *ngIf="message > 0" class="message-container">
        <svg-icon
            class="{{ class }}"
            *ngIf="!isNavigationHovered"
            class="notification-img"
            src="../../../../../assets/svg/applicant/notification-light.svg"
        ></svg-icon>
        <svg-icon
            class="{{ class }}"
            *ngIf="isNavigationHovered"
            class="notification-img"
            src="../../../../../assets/svg/applicant/notification.svg"
        ></svg-icon>
    </div>

    <div
        class="{{ class }}"
        class="nav-item-rightSide"
        [@showHideDetails]="isNavigationHovered ? 'true' : 'false'"
    >
        <p
            *ngIf="isNavigationHovered"
            class="nav-item-name"
            [ngClass]="{
                'nav-item-name-active':
                    ((route.isRouteActive && footerRouteActive) ||
                        route.isSubrouteActive) &&
                    !isSettingsPanelOpen &&
                    !isUserPanelOpen &&
                    footerRouteActive,

                'active-text':
                    route.isRouteActive &&
                    route.arrow &&
                    closeDropdownOnNavClose &&
                    !isSettingsPanelOpen &&
                    !isUserPanelOpen &&
                    !settingsPage
            }"
        >
            {{ route.name }}
            <span
                class="subroute"
                *ngIf="route.id === activeRouteIdFromLocalStorage"
            >
                [{{ activeRouteName | titlecase }}]
            </span>
        </p>
        <div
            class="message"
            *ngIf="message"
            [@showHideDetails]="isNavigationHovered ? 'true' : 'false'"
        >
            <span>
                {{ message }}
            </span>
        </div>
        <div
            *ngIf="files"
            class="files"
            [@showHideDetails]="isNavigationHovered ? 'true' : 'false'"
        >
            <span>{{ files }}% full</span>
            <svg-icon src="assets/svg/common/ic_danger_white.svg"></svg-icon>
        </div>
        <svg-icon
            class="nav-item-arrow nav-item-arrow-active"
            [ngClass]="{
                'nav-item-arrow-rotate':
                    route.isRouteActive &&
                    !route.isSubrouteActive &&
                    closeDropdownOnNavClose &&
                    !isSettingsPanelOpen &&
                    !isUserPanelOpen,

                'nav-item-arrow-first': route.id === 3
            }"
            *ngIf="route.arrow && isNavigationHovered"
            src="{{ route.arrow }}"
        ></svg-icon>
        <svg-icon
            *ngIf="isNavigationHovered && !route.arrow && !message && !files"
            class="nav-item-arrow_top"
            src="assets/svg/common/arrow_top_right.svg"
            (click)="openLinkInNewWindow(route.route)"
            (mouseenter)="hoveredArrow(true)"
            (mouseleave)="hoveredArrow(false)"
            [ngClass]="{ 'hovered-arrow': arrowHovered }"
        ></svg-icon>
    </div>
</div>
