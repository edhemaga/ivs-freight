<div class="d-flex dispatchboard-main-container">
  <div
    class="kendo-table-container p-0 mt-3 dispacher-table"
    [class.parking_opened]="dispatcherStoreService.parkingOpened"
  >
    <div class="row">
      <div class="grid-wrapper col-12">
        <div class="kendo_top_grid">
          <div class="k-grid" [ngClass]="isBoardLocked ? 'locked' : 'unlocked'">
            <div class="k-grid-toolbar k-toolbar">
              <div class="toolbar-container main_top_container">
                <div class="d-flex top_toolbar_cont">
                  <div class="dispatchboard-title">Dispatch Board</div>
                  <div class="dispatch-action-container">
                    <div class="dispatcher-left-hold">
                      <div class="dispatcher-drpdwn-wrap">
                        <app-dispatcher-dropdown
                          [items]="dispatcherItems"
                          [selectValue]="selectedDispatcher"
                          (changeVal)="changeDisparcher($event)"
                        ></app-dispatcher-dropdown>
                      </div>
                      <div class="border-spacer"></div>
                      <button
                        (click)="openDispatchHistory()"
                        mainTooltip="Truck Type Legend"
                        ngbTooltip
                        class="btn-transparent open_load history_board"
                        position="bottom"
                      >
                        <app-filter
                          [type]="'truckTypeFilter'"
                          [filterTitle]="'Truck Type Legend'"
                          [defFilterHolder]="true"
                          [icon]="'truck'"
                          [leftSideIcon]="true"
                          [largeLeftIcon]="true"
                          [svgCustom]="true" 
                          [legendView]="true"
                        >
                        </app-filter>
                      </button>
                      <div class="border-spacer"></div>
                      <button
                        (click)="openDispatchHistory()"
                        mainTooltip="Trailer Type Legend"
                        ngbTooltip
                        class="btn-transparent open_load history_board"
                        position="bottom"
                      >
                      <app-filter
                        [type]="'trailerTypeFilter'"
                        [filterTitle]="'Trailer Type Legend'"
                        [defFilterHolder]="true"
                        [icon]="'trailer'"
                        [leftSideIcon]="true"
                        [largeLeftIcon]="true"
                        [svgCustom]="true" 
                        [legendView]="true"
                      >
                      </app-filter>
                      </button>
                      <div class="border-spacer"></div>
                      <button
                        (click)="openDispatchHistory()"
                        mainTooltip="History"
                        ngbTooltip
                        class="btn-transparent open_load history_board"
                        position="bottom"
                      >
                        <svg-icon
                          [svgStyle]="{ 'width.px': 18, 'height.px': 16 }"
                          class="icon-hover-blue-28 m-0 blue_icon"
                          src="assets/svg/common/ic_search.svg"
                        >
                        </svg-icon>
                      </button>
                    </div>
                    <div class="dispatch-board-buttons-holder">
                      <button
                        (click)="lockUnlockBoardAndStartTimer()"
                        *ngIf="!manualLock || dispatcher != -1"
                        [mainTooltip]="
                          isBoardLocked ? 'Unlock table' : 'Lock table'
                        "
                        ngbTooltip
                        [class.lockedBoardFromOtherUser]=""
                        class="open_load btn-transparent lock-unlock cursor-pointer history_board"
                        position="bottom"
                      >
                        <svg-icon
                          *ngIf="isBoardLocked"
                          [src]="'assets/svg/common/ic_lock.svg'"
                          [svgStyle]="{
                            'width.px': '15.75',
                            'height.px': '18'
                          }"
                        ></svg-icon>
                        <svg-icon
                          *ngIf="!isBoardLocked"
                          [src]="'assets/svg/common/ic_unlock.svg'"
                          [svgStyle]="{ 'width.px': '20', 'height.px': '18' }"
                        ></svg-icon>
                      </button>
                      <div class="border-spacer"></div>
                      <button
                        (click)="openSideNav()"
                        mainTooltip="Vehicle Legend"
                        ngbTooltip
                        class="open_load btn-transparent cursor-pointer history_board"
                        position="bottom"
                      >
                        <svg-icon
                          [ngClass]="{ active: legendActive }"
                          [svgStyle]="{ 'width.px': 18, 'height.px': 17 }"
                          src="assets/svg/common/ic_info_thin.svg"
                        >
                        </svg-icon>
                      </button>
                      <div class="border-spacer"></div>
                      <button
                        (mouseenter)="loteEnter()"
                        (mouseleave)="loteLeave()"
                        *ngIf="dispatcher == -1"
                        mainTooltip="Live"
                        ngbTooltip
                        class="btn-transparent open_load live_board"
                        position="bottom"
                      >
                        <!-- <svg-icon
                        class="m-0"
                        src="assets/img/svgs/live_board.svg"
                        [svgStyle]="{ 'width.px': 22, 'height.px': 18 }"
                      >
                      </svg-icon> -->
                        <ng-lottie [options]="lottieConfig"> </ng-lottie>
                      </button>
                      <div class="border-spacer" *ngIf="dispatcher == -1"></div>
                      <button
                        (click)="openDispatchHistory()"
                        mainTooltip="History"
                        ngbTooltip
                        class="btn-transparent open_load history_board"
                        position="bottom"
                      >
                        <svg-icon
                          [svgStyle]="{ 'width.px': 18, 'height.px': 16 }"
                          class="icon-hover-blue-28 m-0 blue_icon"
                          src="assets/svg/common/ic_shuffle.svg"
                        >
                        </svg-icon>
                      </button>
                      <div class="border-spacer"></div>
                      <button
                        (click)="openDispatchHistory()"
                        mainTooltip="History"
                        ngbTooltip
                        class="btn-transparent open_load history_board"
                        position="bottom"
                      >
                        <svg-icon
                          [svgStyle]="{ 'width.px': 16, 'height.px': 16 }"
                          class="icon-hover-blue-28 m-0 blue_icon"
                          src="assets/svg/common/ic_half_time.svg"
                        >
                        </svg-icon>
                      </button>
                      <div class="border-spacer"></div>
                      <button
                        (click)="addLoad()"
                        mainTooltip="Add Dispatch"
                        ngbTooltip
                        class="btn-transparent open_load history_board"
                        position="bottom"
                      >
                        <svg-icon
                          [svgStyle]="{ 'width.px': 16, 'height.px': 16 }"
                          class="icon-hover-blue-28 blue_icon"
                          src="assets/svg/common/ic_plus.svg"
                        >
                        </svg-icon>
                      </button>
                      <div class="border-spacer"></div>
                      <button
                        (click)="openParking()"
                        mainTooltip="Add Dispatch"
                        ngbTooltip
                        class="btn-transparent open_load history_board"
                        position="bottom"
                      >
                        <svg-icon
                          [svgStyle]="{ 'width.px': 16, 'height.px': 16 }"
                          class="icon-hover-blue-28 blue_icon"
                          src="assets/svg/dispatchboard/parking.svg"
                        >
                        </svg-icon>
                      </button>
                      <div class="border-spacer"></div>
                      <button
                        (click)="addLoad()"
                        mainTooltip="Add Dispatch"
                        ngbTooltip
                        class="btn-transparent open_load history_board m-0"
                        position="bottom"
                      >
                        <svg-icon
                          [svgStyle]="{ 'width.px': 16, 'height.px': 16 }"
                          class="icon-hover-blue-28 blue_icon"
                          src="assets/svg/dispatchboard/vacation.svg"
                        >
                        </svg-icon>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Toolbar -->
          </div>
        </div>
        <div class="dispatcher_table_list_holder">
          <!-- <div
            *ngFor="let dispatcher of selectedDispatchers; let ind = index"
            class="dipsatch_groups"
          >
            <app-app-dispatcher-table-new
              (hoverPhoneEmail)="hoverPhoneEmail()"
              (updateUsersData)="updateUsersData()"
              [dispatcherInfo]="dispatcher"
              [dispatcher]="dispatcher.id"
              [gridIndex]="ind"
              [isBoardLocked]="isBoardLocked"
              [loadDrivers]="loadDrivers"
              [loadTrailers]="loadTrailers"
              [loadTrucks]="loadTrucks"
              [phoneEmailToggle]="phoneEmailToggle"
            >
            </app-app-dispatcher-table-new>
          </div> -->

          <div
            class="dipsatch_groups"
            *ngFor="let item of dispatchTableList | async; let indx = index"
          >
            <app-dispatchboard-tables
              [_dData]="item"
              [isBoardLocked]="isBoardLocked"
              [dDataIndx]="indx"
              [smallList]="dispatchBoardSmallList | async"
            ></app-dispatchboard-tables>
          </div>
        </div>
      </div>
    </div>
  </div>
  <app-dispatcher-parking></app-dispatcher-parking>
</div>
