<div cdkDrag class="modal-container">
  <div cdkDragHandle class="modal-header">
    <h5 class="modal-title">{{ modalTitle }}</h5>
    <svg-icon
      (click)="activeModal.dismiss('Modal close')"
      [svgStyle]="{ 'width.px': 16, 'height.px': 16 }"
      class="modal-close-btn cursor-pointer"
      src="assets/img/svgs/table/close.svg"
    ></svg-icon>
  </div>
  <div class="modal-body">
    <app-tab-switcher
      (switchClicked)="tabChange($event)"
      [tabs]="tabs"
    ></app-tab-switcher>
    <form
      (keydown)="saveFormOnKeyboardEnter($event)"
      [formGroup]="companyForm"
      class="form-container has-tabs tabs-3{{ ' tab-' + selectedTab }}"
    >
      <div class="single-tab-container">
        <div class="row">
          <div class="col-12">
            <div
              class="form-label-group input-icon input-holder {{
                manageInputValidation(this.companyForm.get('name'))
              }}"
            >
              <input
                id="name"
                class="form-control input-control"
                style="text-transform: uppercase"
                formControlName="name"
                placeholder="Company name"
                maxlength="30"
                appAutoFocus
                appInputFocus
                (keypress)="keyPress($event, 'name', 'text')"
                (paste)="onPaste($event, 'name')"
              />
              <label for="name">Company name</label>
              <p
                *ngIf="
                  companyForm.get('name').errors &&
                  companyForm.get('name').touched
                "
                class="m-0 required-notice invalid-length"
              >
                {{ companyForm.get("name").errors | inputError }}
              </p>

              <svg-icon
                class="valid-icon"
                src="assets/img/form-validation/check-icon-light-blue.svg"
              >
              </svg-icon>

              <svg-icon
                class="x-invalid-icon"
                src="assets/img/form-validation/x-icon-light-red.svg"
              >
              </svg-icon>

              <svg-icon
                (click)="clearInput('name')"
                class="clear-icon"
                ngbTooltip="Clear"
                placement="bottom-left"
                src="assets/img/form-validation/x-icon-cut.svg"
              ></svg-icon>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <div
              class="form-label-group input-icon input-holder {{
                manageInputValidation(this.companyForm.controls.usdot)
              }}"
            >
              <input
                id="usdot"
                class="form-control input-control"
                formControlName="usdot"
                placeholder="USDOT"
                maxlength="8"
                appInputFocus
                (keypress)="keyPress($event, 'usdot', 'number')"
                (paste)="onPaste($event, 'usdot', 9)"
              />
              <label for="usdot">USDOT</label>
              <p
                *ngIf="
                  companyForm.get('usdot').errors &&
                  companyForm.get('usdot').touched
                "
                class="m-0 required-notice invalid-length"
              >
                {{ companyForm.get("usdot").errors | inputError }}
              </p>

              <svg-icon
                class="valid-icon"
                src="assets/img/form-validation/check-icon-light-blue.svg"
              >
              </svg-icon>

              <svg-icon
                class="x-invalid-icon"
                src="assets/img/form-validation/x-icon-light-red.svg"
              >
              </svg-icon>

              <svg-icon
                (click)="clearInput('usdot')"
                class="clear-icon"
                ngbTooltip="Clear"
                placement="bottom-left"
                src="assets/img/form-validation/x-icon-cut.svg"
              ></svg-icon>
            </div>
          </div>

          <div class="col-4">
            <div
              class="form-label-group input-icon input-holder {{
                manageInputValidation(this.companyForm.controls.ein)
              }}"
            >
              <input
                id="ein"
                class="form-control input-control"
                formControlName="ein"
                placeholder="EIN"
                mask="00-0000000"
                appInputFocus
                (keypress)="keyPress($event, 'ein', 'number')"
                (paste)="onPaste($event, 'ein', 10)"
              />
              <label for="ein">EIN</label>
              <p
                *ngIf="
                  companyForm.get('ein').errors &&
                  companyForm.get('ein').touched
                "
                class="m-0 required-notice invalid-length"
              >
                {{ companyForm.get("ein").errors | inputError }}
              </p>

              <svg-icon
                class="valid-icon"
                src="assets/img/form-validation/check-icon-light-blue.svg"
              >
              </svg-icon>

              <svg-icon
                class="x-invalid-icon"
                src="assets/img/form-validation/x-icon-light-red.svg"
              >
              </svg-icon>

              <svg-icon
                (click)="clearInput('ein')"
                class="clear-icon"
                ngbTooltip="Clear"
                placement="bottom-left"
                src="assets/img/form-validation/x-icon-cut.svg"
              ></svg-icon>
            </div>
          </div>

          <div class="col-4">
            <div
              class="form-label-group input-icon input-holder {{
                manageInputValidation(this.companyForm.controls.mc)
              }}"
            >
              <input
                id="mc"
                class="form-control input-control"
                formControlName="mc"
                placeholder="MC"
                maxlength="8"
                appInputFocus
                (keypress)="keyPress($event, 'mc', 'number')"
                (paste)="onPaste($event, 'mc', 8)"
              />
              <label for="mc">MC</label>

              <p
                *ngIf="
                  companyForm.get('mc').errors && companyForm.get('mc').touched
                "
                class="m-0 required-notice invalid-length"
              >
                {{ companyForm.get("mc").errors | inputError }}
              </p>

              <svg-icon
                class="valid-icon"
                src="assets/img/form-validation/check-icon-light-blue.svg"
              >
              </svg-icon>

              <svg-icon
                class="x-invalid-icon"
                src="assets/img/form-validation/x-icon-light-red.svg"
              >
              </svg-icon>

              <svg-icon
                (click)="clearInput('mc')"
                class="clear-icon"
                ngbTooltip="Clear"
                placement="bottom-left"
                src="assets/img/form-validation/x-icon-cut.svg"
              ></svg-icon>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <div
              class="form-label-group input-icon input-holder phone-field-wrapper {{
                manageInputValidation(companyForm.controls.phone)
              }}"
            >
              <input
                id="phone"
                class="form-control input-control phone-input"
                formControlName="phone"
                placeholder="Phone"
                mask="(000) 000-0000"
                appInputFocus
                (keypress)="keyPress($event, 'phone', 'number')"
              />
              <label for="phone">Phone</label>
              <p
                *ngIf="
                  companyForm.get('phone').errors &&
                  companyForm.get('phone').touched
                "
                class="m-0 required-notice invalid-length"
              >
                {{ companyForm.get("phone").errors | inputError }}
              </p>

              <svg-icon
                class="valid-icon"
                src="assets/img/form-validation/check-icon-light-blue.svg"
              >
              </svg-icon>

              <svg-icon
                class="x-invalid-icon"
                src="assets/img/form-validation/x-icon-light-red.svg"
              >
              </svg-icon>

              <svg-icon
                (click)="clearInput('phone')"
                class="clear-icon"
                ngbTooltip="Clear"
                placement="bottom-left"
                src="assets/img/form-validation/x-icon-cut.svg"
              ></svg-icon>
            </div>
          </div>
          <div class="col-8">
            <div
              class="form-label-group input-icon input-holder email-field-wrapper {{
                manageInputValidation(companyForm.controls.email)
              }}"
            >
              <input
                id="email"
                class="form-control input-control email-input"
                formControlName="email"
                placeholder="Email"
                appInputFocus
                (keypress)="onEmailTyping($event)"
                (paste)="onPaste($event, 'email')"
                oninput="this.value = this.value.replace(/[ ]|^ /g,'')"
              />
              <label for="email">Email</label>
              <p
                *ngIf="
                  companyForm.get('email').errors &&
                  companyForm.get('email').touched
                "
                class="m-0 required-notice invalid-length"
              >
                {{ companyForm.get("email").errors | inputError }}
              </p>

              <svg-icon
                class="valid-icon"
                src="assets/img/form-validation/check-icon-light-blue.svg"
              >
              </svg-icon>

              <svg-icon
                class="x-invalid-icon"
                src="assets/img/form-validation/x-icon-light-red.svg"
              >
              </svg-icon>

              <svg-icon
                (click)="clearInput('email')"
                class="clear-icon"
                ngbTooltip="Clear"
                placement="bottom-left"
                src="assets/img/form-validation/x-icon-cut.svg"
              ></svg-icon>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <div
              class="form-label-group input-icon input-holder phone-field-wrapper {{
                manageInputValidation(companyForm.controls.fax)
              }}"
            >
              <input
                id="fax"
                class="form-control input-control"
                formControlName="fax"
                placeholder="Fax"
                mask="(000) 000-0000"
                appInputFocus
              />
              <label for="fax">Fax</label>
              <p
                *ngIf="
                  companyForm.get('fax').errors &&
                  companyForm.get('fax').touched
                "
                class="m-0 required-notice invalid-length"
              >
                {{ companyForm.get("fax").errors | inputError }}
              </p>

              <svg-icon
                class="valid-icon"
                src="assets/img/form-validation/check-icon-light-blue.svg"
              >
              </svg-icon>

              <svg-icon
                class="x-invalid-icon"
                src="assets/img/form-validation/x-icon-light-red.svg"
              >
              </svg-icon>

              <svg-icon
                (click)="clearInput('fax')"
                class="clear-icon"
                ngbTooltip="Clear"
                placement="bottom-left"
                src="assets/img/form-validation/x-icon-cut.svg"
              ></svg-icon>
            </div>
          </div>
          <div class="col-8">
            <div
              class="form-label-group input-icon input-holder {{
                manageInputValidation(companyForm.controls.webUrl)
              }}"
            >
              <input
                id="webUrl"
                class="form-control input-control"
                formControlName="webUrl"
                placeholder="Web url"
                appInputFocus
              />
              <label for="webUrl">Web url</label>
              <p
                *ngIf="
                  companyForm.get('fax').errors &&
                  companyForm.get('fax').touched
                "
                class="m-0 required-notice invalid-length"
              >
                {{ companyForm.get("fax").errors | inputError }}
              </p>

              <svg-icon
                class="valid-icon"
                src="assets/img/form-validation/check-icon-light-blue.svg"
              >
              </svg-icon>

              <svg-icon
                class="x-invalid-icon"
                src="assets/img/form-validation/x-icon-light-red.svg"
              >
              </svg-icon>

              <svg-icon
                (click)="clearInput('fax')"
                class="clear-icon"
                ngbTooltip="Clear"
                placement="bottom-left"
                src="assets/img/form-validation/x-icon-cut.svg"
              ></svg-icon>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-8">
            <div class="form-label-group">
              <ng-select
                [items]="timeZones"
                appendTo="body"
                bindLabel="name"
                formControlName="timeZone"
                placeholder="Time zone"
              >
                <ng-template
                  let-item="item"
                  let-search="searchTerm"
                  ng-option-tmp
                >
                  <span [ngOptionHighlight]="search">{{ item.name }}</span>
                </ng-template>
              </ng-select>
            </div>
          </div>
          <div class="col-4">
            <div class="form-label-group">
              <ng-select
                [items]="currencies"
                appendTo="body"
                bindLabel="name"
                formControlName="currency"
                placeholder="Currency"
              >
                <ng-template
                  let-item="item"
                  let-search="searchTerm"
                  ng-option-tmp
                >
                  <span [ngOptionHighlight]="search">{{ item.name }}</span>
                </ng-template>
              </ng-select>
            </div>
          </div>
        </div>
        <div class="row">
          <div
            class="col-12 dropzone-wrapper {{
              showDropZone ? ' visible-dropzone' : ' hidden-dropzone'
            }}"
          >
            <div (click)="openDropZone()" class="dropzone-label-wrapper">
              <span>Logo</span>
              <svg-icon
                class="down-icon"
                src="assets/img/svgs/down-arrow.svg"
              ></svg-icon>
            </div>
            <div
              class=" {{
                showDropZone ? ' dropzone-visible' : ' dropzone-hidden'
              }}"
            >
              <!-- Drop Zone -->
              <!-- <div
                *ngIf="!isLogoFileUpload"
                #dropZone
                (onDropBackground)="onDropBackground($event)"
                (onDropFile)="onDropFile($event)"
                appDragDropFile
              >
                <p class="drop-zone-text">Drop file here or click to add</p>
              </div> -->
              <!-- Logo Upload -->
              <!-- <div
                class="upload-logo-wrapper d-flex flex-row"
              >
                <app-logo-change
                  (cancel)="cancelEditLogo($event)"
                  (saveAvatar)="saveLogoCompany($event)"
                  [src]="
                    avatar?.value?.src && editLogoActive
                      ? avatar?.value?.src
                      : ''
                  "
                ></app-logo-change>
              </div> -->
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button
      (click)="activeModal.dismiss('Modal close')"
      class="cancel-btn"
      type="button"
    >
      Cancel
    </button>
    <button (click)="saveCompany()" class="save-btn" ngbAutofocus type="button">
      Save
    </button>
  </div>
</div>
