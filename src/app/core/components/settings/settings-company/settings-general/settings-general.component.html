<div class="settings-general">
  <div class="settings-header">
    <div
      *ngIf="!toggleSelect && optionsCompany"
      class="current-active-item-company"
      (click)="onPickItem($event)"
    >
      <div class="division-name-wrapper">
        <div class="current-active-name">
          {{ (optionsCompany | detailActiveItem).name }}
        </div>
        <span *ngIf="companyDivision" class="division-company"
          >Division Co.</span
        >
      </div>

      <svg-icon
        *ngIf="hasArrow"
        class="arrow-down"
        src="assets/svg/common/calendar/arrow-right.svg"
      ></svg-icon>
    </div>
    <!-- Input dropdown -->
    <app-ta-input-dropdown
      class="dropInputCompany"
      *ngIf="toggleSelect"
      [formControl]="inputFormControl"
      [inputConfig]="{
        name: 'Input Dropdown',
        type: 'text',
        isDropdown: true,
        dropdownWidthClass: 'w-col-details-template-big-company',
        textTransform: 'capitalize',
        customClass: 'input-32 input-32-font-20 details-pages'
      }"
      [isDetailsActive]="toggleSelect"
      (selectedItem)="onSelectItem($event)"
      [options]="optionsCompany"
      [template]="'details-template'"
    >
    </app-ta-input-dropdown>
    <div class="settings-header-buttons">
      <div class="settings-header-button">
        <svg-icon
          src="assets/svg/common/ic_pen.svg"
          class="settings-edit-button"
          (click)="
            onAction({
              modalName: 'basic',
              type: companyData?.divisions.length
                ? 'edit-company'
                : 'edit-division',
              company: companyData
            })
          "
        ></svg-icon>
      </div>
      <div class="settings-header-button">
        <div class="border-left"></div>
        <svg-icon
          src="assets/svg/common/ic_plus.svg"
          class="settings-plus-button"
          (click)="
            onAction({
              modalName: 'basic',
              type: 'new-division',
              company: null
            })
          "
        ></svg-icon>
      </div>
    </div>
  </div>

  <div class="settings-body">
    <div class="basic-details">
      <!-- Header -->
      <div class="basic-header">
        <div class="basic-header-logo-top">
          <div class="basic-logo-text">This logo will be used on invoices</div>
          <svg-icon
            class="basic-logo-edit"
            src="assets/svg/common/ic_pen.svg"
          ></svg-icon>
        </div>
        <svg-icon
          class="basic-logo"
          src="assets/svg/common/ic_company_logo_dummy.svg"
        ></svg-icon>
      </div>
      <!-- Middle -->
      <div class="basic-middle">
        <div class="basic-data">
          <svg-icon
            class="basic-data-svg"
            src="assets/svg/common/ic_address.svg"
          ></svg-icon>
          <p class="basic-data-value">{{ companyData?.address?.address }}</p>
        </div>
        <div class="basic-data">
          <svg-icon
            class="basic-data-svg"
            src="assets/svg/common/ic_phone.svg"
          ></svg-icon>
          <p class="basic-data-value">
            {{ companyData?.phone | formatPhoneP }}
          </p>
        </div>

        <div class="basic-data">
          <svg-icon
            class="basic-data-svg"
            src="assets/svg/common/ic_email.svg"
          ></svg-icon>
          <p class="basic-data-value">{{ companyData?.email }}</p>
        </div>

        <div class="basic-data">
          <svg-icon
            class="basic-data-svg"
            src="assets/svg/common/ic_fax.svg"
          ></svg-icon>
          <p class="basic-data-value">{{ companyData?.fax | formatPhoneP }}</p>
        </div>
        <div class="basic-data">
          <svg-icon
            class="basic-data-svg"
            src="assets/svg/common/ic_web.svg"
          ></svg-icon>
          <p class="basic-data-value">{{ companyData?.webURL }}</p>
        </div>
      </div>
      <!-- Bottom -->
      <div class="basic-bottom">
        <div class="basic-bottom-card">
          <p class="bottom-card-left">USDOT</p>
          <p class="bottom-card-right">{{ companyData?.usdot }}</p>
        </div>
        <div class="basic-bottom-card">
          <p class="bottom-card-left">EIN</p>
          <p class="bottom-card-right">{{ companyData?.ein }}</p>
        </div>
        <div class="basic-bottom-card">
          <p class="bottom-card-left">MC</p>
          <p class="bottom-card-right">{{ companyData?.mc }}</p>
        </div>
      </div>
    </div>
    <div class="cards-custom">
      <app-ta-custom-card
        [cardName]="'Additional Details'"
        [bodyTemplate]="'card'"
        [isCardOpen]="true"
        [animationsDisabled]="false"
      >
        <div class="additional-template-data">
          <div class="additional-template-item">
            <p class="additional-template-value-name">IFTA</p>
            <p class="additional-template-value">{{ companyData?.ifta }}</p>
          </div>
          <div class="additional-template-item">
            <p class="additional-template-value-name">IRP</p>
            <p class="additional-template-value">{{ companyData?.irp }}</p>
          </div>
          <div class="additional-template-item">
            <p class="additional-template-value-name">Toll</p>
            <p class="additional-template-value">{{ companyData?.toll }}</p>
          </div>
          <div class="additional-template-item">
            <p class="additional-template-value-name">SCAC</p>
            <p class="additional-template-value">{{ companyData?.scac }}</p>
          </div>
          <div class="additional-template-item">
            <p class="additional-template-value-name">Time Zone</p>
            <p
              *ngIf="companyData?.timeZone?.name"
              class="additional-template-value"
            >
              {{ timeZoneName }}
            </p>
          </div>
          <div class="additional-template-item">
            <p class="additional-template-value-name">Currency</p>
            <p
              *ngIf="companyData?.currency?.name"
              class="additional-template-value"
            >
              {{
                companyData?.currency?.name.includes("US")
                  ? "USD ($)"
                  : "CAD ($)"
              }}
            </p>
          </div>
        </div>
      </app-ta-custom-card>
      <app-ta-custom-card
        [cardName]="'Department Contact'"
        [bodyTemplate]="'card'"
        [isCardOpen]="true"
        [animationsDisabled]="false"
        [textBottomPossiton]="'-1px'"
        *ngIf="companyData?.departmentContacts.length"
        [hasCounter]="companyData.departmentContacts.length"
      >
        <div class="department-template-data">
          <div class="department-template-item">
            <span class="department-header-name">Department</span>
          </div>
          <div class="department-template-item">
            <span class="department-header-name">Phone</span>
          </div>
          <div class="department-template-item">
            <span class="department-header-name">Ext.</span>
          </div>
          <div class="department-template-item">
            <span class="department-header-name">Email</span>
          </div>
        </div>
        <div
          class="department-template-body"
          *ngFor="
            let department of companyData?.departmentContacts;
            trackBy: identity
          "
        >
          <span class="body-value-department">Department</span>
          <span class="body-value">{{ department.phone | formatPhoneP }}</span>
          <span class="body-value">{{ department.extensionPhone }}</span>
          <span class="body-value-email">{{ department.email }}</span>
        </div>
      </app-ta-custom-card>
      <app-ta-custom-card
        [cardName]="'Bank Account'"
        [bodyTemplate]="'card'"
        [isCardOpen]="true"
        [animationsDisabled]="false"
        *ngIf="companyData?.bankAccounts.length"
      >
        <div
          class="additional-template-data"
          *ngFor="let bank of companyData?.bankAccounts; trackBy: identity"
        >
          <div class="additional-template-item">
            <p class="additional-template-value-name">Bank Name</p>
            <svg-icon
              class="additional-template-value bank-logo-settings"
              src="{{ 'assets/svg/common/banks/' + bank.bank.logoName }}"
            ></svg-icon>
          </div>
          <div class="additional-template-item">
            <p class="additional-template-value-name">Routing</p>

            <p class="additional-template-value">
              <span> {{ bank?.routing }}</span>
            </p>
          </div>
          <div class="additional-template-item">
            <p class="additional-template-value-name">Account</p>
            <div class="show-hide">
              <p class="additional-template-value">
                <span>
                  {{
                    bank?.account | hidePassword: "account":isAccountVisible
                  }}</span
                >
              </p>
              <span
                tooltipBackground="#6c6c6c"
                ngbTooltip
                [mainTooltip]="
                  isAccountVisible
                    ? 'Hide Account Number'
                    : 'Show Account Number'
                "
                position="top"
                (click)="isAccountVisible = !isAccountVisible"
              >
                <svg-icon
                  class="hidden-svg-eye"
                  src="{{
                    isAccountVisible
                      ? 'assets/svg/common/ic_eye-visible.svg'
                      : 'assets/svg/common/ic_eye-hidden.svg'
                  }}"
                ></svg-icon>
              </span>
            </div>
          </div>
        </div>
      </app-ta-custom-card>
      <app-ta-custom-card
        [cardName]="'Bank Card'"
        [bodyTemplate]="'card'"
        [hasCounter]="companyData?.bankCards?.length"
        [isCardOpen]="true"
        *ngIf="companyData?.bankCards.length"
        [animationsDisabled]="false"
        [textBottomPossiton]="'-1px'"
      >
        <div class="bank-card-template-data">
          <div class="bank-card-template-item">
            <p class="bank-card-name-header">Nickname</p>
          </div>
          <div class="bank-card-template-item">
            <p class="bank-card-name-header">Card #</p>
          </div>
          <div class="bank-card-template-item">
            <p class="bank-card-name-header">CVC</p>
          </div>
          <div class="bank-card-template-item">
            <p class="bank-card-name-header">Exp.</p>
          </div>
        </div>
        <div
          class="bank-card-template-data-body"
          *ngFor="let bankC of companyData?.bankCards; trackBy: identity"
        >
          <div class="bank-card-template-item-body">
            <p class="item-body-nick-name">{{ bankC.nickname }}</p>
            <div class="item-body-icon-text">
              <svg-icon
                class="svg-bank"
                src="assets/svg/common/ic_visa.svg"
              ></svg-icon>

              <p class="item-body-cvc">
                {{ bankC.card | hidePassword: "card" }}
              </p>
            </div>

            <p class="item-body-cvc">{{ bankC.cvc | hidePassword: "cvc" }}</p>
            <p class="item-body-nick-name">
              {{ bankC.expireDate | formatDateP: "short-format" }}
            </p>
          </div>
        </div>
      </app-ta-custom-card>
      <app-ta-custom-card
        [cardName]="'Load Format & Customer Billing'"
        [bodyTemplate]="'card'"
        [isCardOpen]="true"
        [animationsDisabled]="false"
      >
        <div class="additional-template-data">
          <div class="additional-template-item">
            <p class="additional-template-value-name">Load Format</p>
            <p class="additional-template-value">
              {{ companyData?.additionalInfo.prefix }}
              {{ companyData?.additionalInfo.starting }}
              {{ companyData?.additionalInfo.sufix }}
            </p>
          </div>

          <div class="additional-template-item">
            <p class="additional-template-value-name">Pref. Load Type</p>
            <p class="additional-template-value">
              {{
                companyData?.additionalInfo.preferredLoadType == 0
                  ? "FTL"
                  : "LTL"
              }}
            </p>
          </div>

          <div class="additional-template-item">
            <p class="additional-template-value-name">Auto Invoicing</p>
            <p class="additional-template-value">
              {{ companyData?.additionalInfo.autoInvoicing ? "On" : "Off" }}
            </p>
          </div>

          <div class="additional-template-item">
            <p class="additional-template-value-name">Customer Pay Term</p>
            <p class="additional-template-value">
              {{ companyData?.additionalInfo.customerPayTerm }} days
            </p>
          </div>

          <div class="additional-template-item">
            <p class="additional-template-value-name">Customer Credit</p>
            <p class="additional-template-value">
              ${{ companyData?.additionalInfo.customerCredit }}
            </p>
          </div>

          <div class="additional-template-item">
            <p class="additional-template-value-name">Factory by Default</p>
            <p class="additional-template-value">
              {{ companyData?.additionalInfo.factorByDefault ? "On" : "Off" }}
            </p>
          </div>
        </div>
      </app-ta-custom-card>
      <app-ta-custom-card
        [cardName]="'Expiration'"
        [bodyTemplate]="'card'"
        [isCardOpen]="true"
        [animationsDisabled]="false"
      >
        <div class="additional-template-data">
          <div class="additional-template-item">
            <p class="additional-template-value-name">MVR</p>
            <p class="additional-template-value">
              {{ companyData?.additionalInfo.mvrMonths }}
              {{
                companyData?.additionalInfo.mvrMonths > 1 ? "months" : "month"
              }}
            </p>
          </div>
          <div class="additional-template-item">
            <p class="additional-template-value-name">Truck Inspection</p>
            <p class="additional-template-value">
              {{ companyData?.additionalInfo.truckInspectionMonths }}
              {{
                companyData?.additionalInfo.truckInspectionMonths > 1
                  ? "months"
                  : "month"
              }}
            </p>
          </div>
          <div class="additional-template-item">
            <p class="additional-template-value-name">Trailer Inspection</p>
            <p class="additional-template-value">
              {{ companyData?.additionalInfo.trailerInspectionMonths }}
              {{
                companyData?.additionalInfo.trailerInspectionMonths > 1
                  ? "months"
                  : "month"
              }}
            </p>
          </div>
        </div>
      </app-ta-custom-card>
    </div>
  </div>
</div>
