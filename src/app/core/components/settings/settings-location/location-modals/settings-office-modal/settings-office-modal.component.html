<app-ta-modal
  [modalTitle]="editData?.type !== 'edit' ? 'Add Office' : 'Edit Office'"
  [editData]="editData"
  [editName]="officeName"
  [isModalValid]="officeForm.valid"
  (action)="onModalAction($event)"
>
  <app-ta-tab-switch
    [tabs]="tabs"
    (switchClicked)="tabChange($event)"
    [type]="'type1-modal-popup'"
  >
  </app-ta-tab-switch>

  <form
    [formGroup]="officeForm"
    class="form-container"
    [ngClass]="
      selectedTab === 1
        ? 'form-container-mt-12'
        : 'row-settings-location-additional'
    "
  >
    <div class="animation-two-tabs" [@animationTabsModal]="animationObject">
      <!-------------------------------- Basic Tab -------------------------------->
      <div class="m-tab" *ngIf="selectedTab === 1">
        <!-- Company owned -->
        <div class="custom-checkbox-card">
          <div class="divider"></div>
          <div
            class="checkbox-card-header"
            [ngClass]="{ pointer: officeForm.get('isOwner').value }"
          >
            <app-ta-checkbox
              formControlName="isOwner"
              [label]="'Company Owned'"
            ></app-ta-checkbox>
          </div>
          <div class="checkbox-card-body active-20">
            <div class="row">
              <div class="col-12">
                <app-ta-input
                  formControlName="name"
                  [inputConfig]="{
                    name: 'Office Name',
                    type: 'text',
                    label: 'Office Name',
                    isRequired: true,
                    textTransform: 'capitalize',
                    autoFocus: editData?.type !== 'edit' ? true : false
                  }"
                ></app-ta-input>
              </div>
            </div>
            <div class="row">
              <div class="col-10">
                <app-ta-input-address
                  formControlName="address"
                  [inputConfig]="{
                    name: 'Address',
                    type: 'text',
                    label: 'Address, City, State Zip',
                    isRequired: true,
                    placeholderIcon: 'address',
                    minLength: 12,
                    maxLength: 256,
                    textTransform: 'capitalize'
                  }"
                  [activeAddress]="selectedAddress"
                  (selectedAddress)="onHandleAddress($event)"
                ></app-ta-input-address>
              </div>
              <div class="col-2">
                <app-ta-input
                  formControlName="addressUnit"
                  [inputConfig]="{
                    name: 'Address Unit',
                    type: 'text',
                    label: 'Unit #',
                    maxLength: 6
                  }"
                ></app-ta-input>
              </div>
            </div>
            <div
              class="phone-ext-email-small-modal last-row"
              [ngClass]="{ 'active-phone-ext': isPhoneExtExist }"
            >
              <div class="phone-extension">
                <div class="phone-field">
                  <app-ta-input
                    formControlName="phone"
                    [inputConfig]="{
                      name: 'Phone',
                      type: 'text',
                      label: 'Phone',
                      isRequired: true,
                      placeholderIcon: 'phone',
                      mask: '(000) 000-0000'
                    }"
                  ></app-ta-input>
                </div>
                <div
                  class="extension-field"
                  *ngIf="!isPhoneExtExist"
                  (click)="isPhoneExtExist = !isPhoneExtExist"
                  ngbTooltip
                  mainTooltip="Add Extension"
                  position="top"
                  tooltipBackground="#6c6c6c"
                >
                  <svg-icon src="assets/svg/common/ic_plus.svg"></svg-icon>
                </div>
                <app-ta-input
                  *ngIf="isPhoneExtExist"
                  formControlName="extensionPhone"
                  [inputConfig]="{
                    name: 'phone-extension',
                    type: 'text',
                    label: 'Ext.',
                    minLength: 1,
                    maxLength: 8,
                    placeholderIcon: 'phone-extension'
                  }"
                ></app-ta-input>
              </div>
              <div class="email-field">
                <app-ta-input
                  formControlName="email"
                  [inputConfig]="{
                    name: 'Email',
                    type: 'text',
                    label: 'Email',
                    placeholderIcon: 'email',
                    minLength: 5,
                    maxLength: 64,
                    textTransform: 'lowercase'
                  }"
                ></app-ta-input>
              </div>
            </div>
          </div>
        </div>
        <!-- Department Contacts -->
        <app-ta-custom-card
          [hasCounter]="
            departmentContacts.length ? departmentContacts.length : '0'
          "
          [cardName]="'Department Contact'"
          [hasActionSvg]="'assets/svg/common/ic_plus.svg'"
          [hasArrow]="true"
          [hasBodyData]="departmentContacts.length"
          [isCardOpen]="departmentContacts.length"
          [hasScrollBody]="departmentContacts.length > 10"
          (onActionEvent)="addDepartmentContacts($event)"
        >
          <div
            formArrayName="departmentContacts"
            class="common-fake-table-modal"
            (scroll)="onScrollingDepartmentContacts($event)"
            *ngIf="departmentContacts.length"
          >
            <div class="common-fake-table-label">
              <p>DEPARTMENT <span>*</span></p>
              <p>PHONE <span>*</span></p>
              <p>EXT</p>
              <p>EMAIL <span>*</span></p>
            </div>
            <div
              *ngFor="
                let departmentContact of departmentContacts.controls;
                let ind = index
              "
            >
              <div [formGroupName]="ind" class="common-fake-table-card">
                <app-ta-input-dropdown
                  formControlName="departmentId"
                  [inputConfig]="{
                    name: 'Input Dropdown',
                    type: 'text',
                    isDropdown: true,
                    dropdownWidthClass: 'w-col-120'
                  }"
                  [options]="departments"
                  [activeItem]="selectedDepartmentFormArray[ind]"
                  (selectedItem)="onSelectContactDepartment($event, ind)"
                ></app-ta-input-dropdown>
                <app-ta-input
                  formControlName="phone"
                  [inputConfig]="{
                    name: 'Phone',
                    type: 'text',
                    mask: '(000) 000-0000'
                  }"
                ></app-ta-input>
                <app-ta-input
                  formControlName="extensionPhone"
                  [inputConfig]="{
                    name: 'phone-extension',
                    type: 'text',
                    minLength: 1,
                    maxLength: 8,
                    placeholderIcon: 'phone-extension'
                  }"
                ></app-ta-input>
                <app-ta-input
                  formControlName="email"
                  [inputConfig]="{
                    name: 'Email',
                    type: 'text',
                    minLength: 5,
                    maxLength: 64,
                    textTransform: 'lowercase'
                  }"
                ></app-ta-input>
                <div
                  ngbTooltip
                  mainTooltip="Delete"
                  tooltipBackground="#EF5350"
                  position="top"
                  class="common-fake-table-delete"
                  [ngClass]="{
                    'new-position':
                      isContactCardsScrolling &&
                      departmentContact.get('email').value,
                    'new-position-without-email':
                      isContactCardsScrolling &&
                      !departmentContact.get('email').value
                  }"
                  (click)="removeDepartmentContacts(ind)"
                >
                  <svg-icon src="assets/svg/common/ic_trash.svg"></svg-icon>
                </div>
              </div>
            </div>
          </div>
        </app-ta-custom-card>
      </div>
      <!-------------------------------- Additional Tab -------------------------------->
      <div class="m-tab" *ngIf="selectedTab === 2">
        <div class="row row-no-m">
          <div class="col-4">
            <app-ta-input
              formControlName="rent"
              [inputConfig]="{
                name: 'Dollar',
                type: 'text',
                label: 'Rent',
                placeholderIcon: 'dollar',
                customClass: 'dollar-placeholderIcon',
                thousandSeparator: true
              }"
            ></app-ta-input>
          </div>
          <div class="col-4">
            <app-ta-input-dropdown
              formControlName="payPeriod"
              [inputConfig]="{
                name: 'Input Dropdown',
                type: 'text',
                label: 'Pay Period',
                isDropdown: true,
                dropdownWidthClass: 'w-col-148'
              }"
              [options]="payPeriods"
              [activeItem]="selectedPayPeriod"
              (selectedItem)="onSelectDropdown($event, 'pay-period')"
            ></app-ta-input-dropdown>
          </div>
          <div class="col-4 no-p-left">
            <app-ta-input-dropdown
              formControlName="monthlyDay"
              [inputConfig]="{
                name: 'Input Dropdown',
                type: 'text',
                label: 'Day',
                isDropdown: true,
                isDisabled: !officeForm.get('payPeriod').value,
                dropdownWidthClass: 'w-col-148'
              }"
              [options]="
                selectedDay?.name === 'Weekly' ? weeklyDays : monthlyDays
              "
              [activeItem]="selectedDay"
              (selectedItem)="onSelectDropdown($event, 'day')"
            ></app-ta-input-dropdown>
          </div>
        </div>
      </div>
    </div>
  </form>
</app-ta-modal>
