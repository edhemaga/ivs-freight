<div class="table-container">
    <app-truckassist-table-toolbar
        (toolBarAction)="onToolBarAction($event)"
        [options]="tableOptions"
        [tableData]="tableData"
        [selectedTab]="selectedTab"
        [columns]="columns"
    ></app-truckassist-table-toolbar>

    <ng-container *ngIf="activeViewMode === 'List'">
        <app-truckassist-table-head
            [options]="tableOptions"
            [viewData]="viewData"
            [columns]="columns"
            [tableData]="tableData"
            (headActions)="onTableHeadActions($event)"
        ></app-truckassist-table-head>

        <app-truckassist-table-body
            [viewData]="viewData"
            [columns]="columns"
            [options]="tableOptions"
            [selectedTab]="selectedTab"
            (bodyActions)="onTableBodyActions($event)"
            [tableData]="tableData"
        ></app-truckassist-table-body>
    </ng-container>
    <div
        *ngIf="activeViewMode === 'Card' && selectedTab === 'active'"
        class="cards-container d-flex flex-wrap"
    >
        <ng-container
            *ngFor="let data of viewData; let i = index; trackBy: trackCard"
        >
            <app-truckassist-cards
                [viewData]="viewData"
                [cardIndex]="[i]"
                [card]="data"
                [cardHeader]="{
                    cardTitle: data?.businessName
                }"
                [firstLabel]="{
                    title: 'Phone',
                    value: {
                        firstValue: data?.phone
                    }
                }"
                [seccondLabel]="{
                    title: 'Email',
                    value: { firstValue: data?.brokerContacts[0]?.email }
                }"
                [thirdLabel]="{
                    title: 'Available Credit',
                    value: {
                        firstValue: data?.tablePaymentDetailCreditLimit
                    }
                }"
                [fourthLabel]="{
                    title: 'Unpaid Inv. Ageing'
                }"
                [firstLabelBack]="{
                    title: 'Contact',
                    value: {
                        firstValue: data?.brokerContacts[0]?.department?.name
                    }
                }"
                [seccondLabelBack]="{
                    title: 'Rating & Review',
                    value: {
                        firstValue: data?.tableRaiting?.likeCount,
                        firstValueSvg: 'assets/svg/common/ic_like.svg',
                        firstValueStyle:
                            'font-weight: 600; font-size: 11px; margin-right:4px; top: 1px; position: relative;',
                        seccondValue: data?.tableRaiting?.dislikeCount,
                        seccondValueSvg: 'assets/svg/common/ic_dislike.svg',
                        seccValueStyle:
                            'font-weight: 600; font-size: 11px; margin-right:4px; top: 1px; position: relative;'
                    }
                }"
                [thirdLabelBack]="{
                    title: 'Loads'
                }"
                [fourthLabelBack]="{
                    title: 'Revenue',
                    value: {
                        firstValue: data?.tableRevenue
                    }
                }"
            ></app-truckassist-cards>
        </ng-container>
    </div>
    <div
        *ngIf="activeViewMode === 'Card' && selectedTab === 'inactive'"
        class="cards-container"
    >
        <ng-container
            *ngFor="let data of viewData; let i = index; trackBy: trackCard"
        >
            <app-truckassist-cards
                [viewData]="viewData"
                [cardIndex]="[i]"
                [card]="data"
                [cardHeader]="{
                    cardTitle: data?.businessName
                }"
                [firstLabel]="{
                    title: 'Phone',
                    value: {
                        firstValue: data?.phone
                    }
                }"
                [seccondLabel]="{
                    title: 'Email'
                }"
                [thirdLabel]="{
                    title: 'Address',
                    value: {
                        firstValue: data?.tableAddress
                    }
                }"
                [fourthLabel]="{
                    title: 'Rating & Review',
                    value: {
                        firstValue: data?.tableRaiting?.likeCount,
                        firstValueSvg: 'assets/svg/common/ic_like.svg',
                        firstValueStyle:
                            'font-weight: 600; font-size: 11px; margin-right:4px; top: 1px; position: relative;',
                        seccondValue: data?.tableRaiting?.dislikeCount,
                        seccondValueSvg: 'assets/svg/common/ic_dislike.svg',
                        seccValueStyle:
                            'font-weight: 600; font-size: 11px; margin-right:4px; top: 1px; position: relative;'
                    }
                }"
                [firstLabelBack]="{
                    title: 'Shipping Hours'
                }"
                [seccondLabelBack]="{
                    title: 'Receiving Hours'
                }"
                [thirdLabelBack]="{
                    title: 'Avg. Pickup Time'
                }"
                [fourthLabelBack]="{
                    title: 'Avg. Delivery Time'
                }"
            ></app-truckassist-cards>
        </ng-container>
    </div>
    <div class="customer-map-container" *ngIf="activeViewMode == 'Map'">
        <app-map-list
            [type]="'shipper'"
            [columns]="columns"
            [mapListContent]="mapListData"
            (headActions)="onTableHeadActions($event)"
        >
            <app-map-list-card
                *ngFor="let latlong of mapListData; let i = index"
                #listCard
                [title]="latlong?.businessName"
                [isSelected]="latlong?.isSelected"
                [status]="latlong?.status"
                [item]="latlong"
                [index]="i"
                [address]="latlong.address"
                [rating]="latlong?.raiting"
                [type]="'shipper'"
                (bodyActions)="onTableBodyActions($event)"
                (clickedMarker)="selectItem($event)"
                [ngStyle]="{
                    display:
                        locationFilterOn && latlong?.isShown == false
                            ? 'none'
                            : 'flex',
                    'justify-content': 'center'
                }"
            ></app-map-list-card>
        </app-map-list>

        <app-maps
            #mapsComponent
            [_viewData]="viewData"
            [mapType]="'shipper'"
            (callDropDownAction)="onTableBodyActions($event)"
            (updateMapList)="updateMapList($event)"
            (selectMarker)="selectItem($event)"
        ></app-maps>
    </div>
</div>
