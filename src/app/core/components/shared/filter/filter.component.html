<div
class="user-icon"
#t2="ngbPopover"
[ngbPopover]="filterPopover"
[placement]="['bottom-left']"
[popoverClass]="'filterpopovermain'"
autoClose="outside"
[container]="'body'"
[ngClass]="{ 'active-options': t2?.isOpen() }"
>
    <!-- <svg-icon src="assets/svg/common/ic_user.svg"></svg-icon> -->
    <svg-icon [src]=" icon | taSvg: 'common'"></svg-icon>
</div>

<ng-template #filterPopover>
    <div *ngIf="type == 'userFilter'" class="filter-holder">
        <div class="filter-header">
            <div class="user-filter-box">{{selectedUser.length}}</div>
            <div class="user-title-text">User Filter</div>
            <div class="close" (click)="t2.close()">
                <svg-icon src="assets/svg/truckassist-table/x.svg"></svg-icon>
            </div>
        </div>
        <div class="border-filter"></div>
        <div class="search-holder">
            <input (keyup)="filterUser($event)" class="search-user-holder" type="text" placeholder="Search User"/>
            <div class="search-icons">
                <svg-icon src="assets/svg/common/ic_search.svg"></svg-icon>
            </div>
        </div>
        <div class="border-filter"></div>
        <div class="selected-user-holder">
            <div *ngFor="let item of selectedUser; let indx=index" class="selected-user-frame">{{item.name}}
                <div class="selected-icon">
                    <svg-icon src="assets/svg/common/ic_confirm.svg"></svg-icon>
                </div>
                <div 
                    ngbTooltip
                    mainTooltip="Remove User"
                    position="top"
                    tooltipBackground="#6C6C6C"
                    (click)="removeFromSelectedUser(item, indx)" 
                    class="icon-delete">
                    <svg-icon src="assets/svg/truckassist-table/x.svg"></svg-icon>
                </div>
            </div>
        </div>
        <div *ngIf="selectedUser.length > 0" class="border-filter"></div>
        <div class="user-holder">
            <div *ngFor="let item of unselectedUser; let indx=index" class="user-frame-holder">
                <div *ngIf="!item.hidden" (click)="addToSelectedUser(item, indx)" class="user-frame">{{item.name}}</div>
            </div>
            
        </div>
        <div class="border-filter"></div>
        <div class="buttons-holder">
            <div (click)="clearAll()" class="button-clear" [class.active]="selectedUser.length > 0">Clear All</div>
            <div class="button-set" [class.active]="selectedUser.length > 0">Set</div>
        </div>
    </div>
    <div *ngIf="type == 'timeFilter'" class="time-filter-holder">
        <div class="time-header">Time Filter
            <div class="close" (click)="t2.close()">
                <svg-icon src="assets/svg/truckassist-table/x.svg"></svg-icon>
            </div>
        </div>
        <div class="border-filter"></div>
        <div class="time-items-holder">
            <div class="time-items">Today</div>
            <div class="time-items">Yesterday</div>
        </div>
        <div class="border-filter"></div>
        <div class="time-items-holder">
            <div class="time-items">This week</div>
            <div class="time-items">Last week</div>
            <div class="time-items">1 week</div>
        </div>
        <div class="border-filter"></div>
        <div class="time-items-holder">
            <div class="time-items">This month</div>
            <div class="time-items">Last month</div>
            <div class="time-items">1 month</div>
            <div class="time-items">3 months</div>
        </div>
        <div class="border-filter"></div>
        <div class="time-items-holder">
            <div class="time-items">This quarter</div>
            <div class="time-items">Last quarter </div>
        </div>
        <div class="border-filter"></div>
        <div class="time-items-holder">
            <div class="time-items">This year</div>
            <div class="time-items">1 year</div>
            <div class="time-items">2020</div>
            <div class="time-items">2019</div>
        </div>
        <div class="border-filter"></div>
        <div class="time-items-holder">
            <div class="time-items">Custom</div>
        </div>
    </div>
    <div *ngIf="type == 'dispatcherFilter'" class="dispatcher-holder">
        <div class="dispatcher-header">
            <div class="dispatcher-filter-box">{{selectedDispatcher.length}}</div>
            <div class="dispatcher-title-text">Dispatcher Filter</div>
            <div class="dispatcher-close" (click)="t2.close()">
                <svg-icon src="assets/svg/truckassist-table/x.svg"></svg-icon>
            </div>
        </div>
        <div class="dispatcher-border-filter"></div>
        <div class="dispatcher-search-holder">
            <div class="search-icons">
                <svg-icon src="assets/svg/common/ic_search.svg"></svg-icon>
            </div>
            <div class="border-search"></div>
            <input (keyup)="filterDispatcher($event)" class="dispatcher-search-user-holder" type="text" placeholder="Search Dispatcher"/>
        </div>
        <div class="dispatcher-border-filter"></div>
        <div class="dispatcher-selected-user-holder">
            <div *ngFor="let item of selectedDispatcher; let indx=index" class="dispatcher-selected-user-frame">
                <div class="dispatcher-initials">
                    <app-profile-images
                    [indx]="indx"
                    [size]="'small'"
                    [type]="'user'"
                    [name]="item.name"
                    ></app-profile-images>
                </div>    
                <div class="dispatcher-selected">{{item.name}}</div>
                <div class="selected-icon">
                    <svg-icon src="assets/svg/common/ic_confirm.svg"></svg-icon>
                </div>
                <div 
                ngbTooltip
                mainTooltip="Remove User"
                position="top"
                tooltipBackground="#6C6C6C"
                (click)="removeFromSelectedDispatcher(item, indx)" 
                class="icon-delete">
                <svg-icon src="assets/svg/truckassist-table/x.svg"></svg-icon>
            </div>
            </div>
        </div>
        <div *ngIf="selectedDispatcher.length > 0" class="dispatcher-border-filter"></div>
        <div class="dispatcher-user-holder" [ngStyle]="{'padding': unselectedDispatcher.length > 7 ? '2px 0px 0px 12px' : '2px 12px 0px 12px'}">
            <div *ngFor="let item of unselectedDispatcher; let indx=index" class="dispatcher-user-frame-holder">
                <div *ngIf="!item.hidden" (click)="addToSelectedDispatcher(indx, item)" class="dispatcher-user-frame">
                    <div class="dispatcher-initials">
                        <app-profile-images
                        [indx]="indx"
                        [size]="'small'"
                        [type]="'user'"
                        [name]="item.name"
                        ></app-profile-images>
                    </div>
                    <div class="unselecter-dispatcher">{{item.name}}</div>
                </div>
            </div>
        </div>
        <div class="dispatcher-border-filter"></div>
        <div class="filter-buttons-holder">
            <div (click)="clearAllDispatcher()" class="filter-button-clear" [class.active]="selectedDispatcher.length > 0">Clear All</div>
            <div class="filter-button-set" [class.active]="selectedDispatcher.length > 0">Set</div>
        </div>
    </div>
</ng-template>