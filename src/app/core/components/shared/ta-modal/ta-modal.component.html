<div cdkDrag class="modal-container {{ customClass }}" ngBAutofocus>
  <div [ngClass]="{ 'load-modal-content': customClass?.includes('load') }">
    <!-- Modal Header -->
    <div cdkDragHandle class="modal-header">
      <div
        class="modal-header-leftside"
        [ngClass]="{ 'confirmation-modal': confirmationData }"
      >
        <!-- Haeder tabs -->
        <div
          *ngIf="tabChange"
          class="modal-header-tab-change"
          [ngClass]="{
            'modal-header-tab-change-reorder': tabChangePosition === 'right'
          }"
        >
          <app-ta-tab-switch
            [tabs]="tabChange"
            (switchClicked)="onTabChange($event)"
            [type]="'type2-modal-popup'"
          ></app-ta-tab-switch>
        </div>
        <!-- Header svg -->
        <svg-icon
          *ngIf="headerSvg"
          src="assets/svg/common/confirmation/ic_confirmation_{{
            headerSvg
          }}.svg"
          class="modal-header-svg"
        ></svg-icon>
        <!-- Header title -->
        <h5 class="modal-title">{{ modalTitle }}</h5>
        <!-- Header name -->
        <h5
          class="edit-name"
          *ngIf="
            (editData?.type?.includes('edit') || specificCaseModalName) &&
            editName
          "
        >
          {{ editName }}
        </h5>
      </div>
      <!-- Header close -->
      <svg-icon
        class="modal-close"
        src="assets/svg/common/ic_x.svg"
        (click)="onAction('close')"
      ></svg-icon>
    </div>
    <!-- Divider top -->
    <div *ngIf="topDivider" class="divider"></div>
    <!-- Modal body -->
    <div class="modal-body">
      <!-- Modal content -->
      <ng-content></ng-content>
      <!-- Divider bottom -->
      <div *ngIf="bottomDivider" class="divider"></div>
    </div>
    <!-- Modal footer Normal -->
    <div
      *ngIf="!disableFooter && !confirmationData"
      class="modal-footer"
      [ngClass]="{ 'mutliple-buttons': editData?.type?.includes('edit') }"
    >
      <!-- Footer Left Side -->
      <div
        class="ta-modal-footer-left-side"
        *ngIf="editData?.type?.includes('edit')"
      >
        <!-- Delete -->
        <button
          *ngIf="!disableDelete && !resendEmail"
          (click)="onAction('delete')"
          class="modal-delete-btn"
          type="button"
        >
          Delete
        </button>

        <!-- Resend Email -->
        <button
          *ngIf="resendEmail"
          (click)="onAction('resend email')"
          class="modal-resend-email-btn"
          type="button"
        >
          {{
            resendEmailSpinnerVisibility
              ? "Sending"
              : "Resend Application
          Email"
          }}
          <div *ngIf="resendEmailSpinnerVisibility" class="modal-spinner">
            <app-ta-spinner [size]="'small'" [color]="'white'"></app-ta-spinner>
          </div>
        </button>

        <!-- Deactivated -->
        <button
          *ngIf="editData?.disableButton"
          (click)="onAction('deactivate')"
          class="modal-deactivate-btn"
          type="button"
        >
          {{ isDeactivated ? "Activate" : "Deactivate" }}
        </button>

        <!-- DNU -->
        <button
          *ngIf="editData?.dnuButton"
          (click)="onAction('dnu')"
          class="modal-deactivate-btn"
          type="button"
          ngbTooltip
          mainTooltip="Do Not Use List"
          tooltipBackground="#6c6c6c"
          position="top"
        >
          {{ isDNU ? "Remove from DNU" : "Move to DNU" }}
        </button>

        <!-- BFB -->
        <button
          *ngIf="editData?.bfbButton"
          (click)="onAction('bfb')"
          class="modal-deactivate-btn"
          type="button"
          ngbTooltip
          mainTooltip="Banned from Broker List"
          tooltipBackground="#6c6c6c"
          position="top"
        >
          {{ isBFB ? "Remove from BFB" : "Move to BFB" }}
        </button>
      </div>

      <!-- Footer right side -->
      <div class="ta-modal-footer-right-side">
        <!-- Save and Add New button -->
        <button
          *ngIf="saveAndAddNew"
          (click)="onAction('save and add new')"
          class="modal-save-btn modal-save-btn-add-new"
          [ngClass]="{ valid: isModalValid }"
          type="button"
        >
          {{ saveAddNewSpinnerVisibility ? "Saving" : "Save and Add New" }}
          <div *ngIf="saveAddNewSpinnerVisibility" class="modal-spinner">
            <app-ta-spinner [size]="'small'" [color]="'white'"></app-ta-spinner>
          </div>
        </button>

        <!-- Save button -->
        <button
          (click)="onAction('save')"
          class="modal-save-btn"
          [ngClass]="{ valid: isModalValid }"
          type="button"
        >
          {{
            saveSpinnerVisibility
              ? "Saving"
              : editData?.type?.includes("edit")
              ? editData?.type?.includes("fo")
                ? "Save"
                : "Save Changes"
              : "Save"
          }}
          <div *ngIf="saveSpinnerVisibility" class="modal-spinner">
            <app-ta-spinner [size]="'small'" [color]="'white'"></app-ta-spinner>
          </div>
        </button>
      </div>
    </div>

    <!-- Modal Footer Confirmation Modal -->
    <div *ngIf="confirmationData" class="modal-footer mutliple-buttons">
      <!-- Cancel -->
      <button
        (click)="onAction('close')"
        class="modal-cancel-btn"
        type="button"
      >
        Cancel
      </button>
      <!-- Delete -->
      <button
        *ngIf="confirmationData?.type === 'delete'"
        (click)="onAction('delete')"
        class="modal-delete-btn modal-red-btn modal-confirmation-btn"
        type="button"
      >
        Delete
      </button>
      <!-- Activate -->
      <button
        *ngIf="confirmationData?.type === 'activate'"
        (click)="onAction('activate')"
        class="modal-save-btn valid modal-confirmation-btn"
        type="button"
      >
        Activate
        {{
          confirmationData?.template.substring(0, 1).toUpperCase() +
            confirmationData?.template.substring(1)
        }}
      </button>
      <!-- Deactivate -->
      <button
        *ngIf="confirmationData?.type === 'deactivate'"
        (click)="onAction('deactivate')"
        class="modal-deactivate-btn modal-gray-btn modal-confirmation-btn"
        type="button"
      >
        Deactivate
        {{ confirmationData?.template }}
      </button>
      <!-- Hire -->
      <button
        *ngIf="confirmationData?.type === 'hire'"
        (click)="onAction('hire')"
        class="modal-save-btn active valid modal-confirmation-btn"
        type="button"
      >
        Hire
      </button>
      <!-- Archive -->
      <button
        *ngIf="confirmationData?.subType === 'archive'"
        (click)="onAction('archive')"
        class="modal-deactivate-btn modal-gray-btn modal-confirmation-btn"
        type="button"
      >
        {{
          confirmationData?.subTypeStatus
            ? "Remove from archive"
            : "Archive" + " " + confirmationData?.template
        }}
      </button>
      <!-- DNU -->
      <button
        *ngIf="confirmationData?.subType === 'dnu'"
        (click)="onAction('dnu')"
        class="modal-deactivate-btn modal-gray-btn modal-confirmation-btn"
        type="button"
      >
        {{
          confirmationData?.subTypeStatus?.substring(0, 1).toUpperCase() +
            confirmationData?.subTypeStatus?.substring(1)
        }}
        {{ confirmationData?.subTypeStatus === "move" ? "to" : "from" }} DNU
      </button>
      <!-- DNU -->
      <button
        *ngIf="confirmationData?.subType === 'ban list'"
        (click)="onAction('bfb')"
        class="modal-deactivate-btn modal-gray-btn modal-confirmation-btn"
        type="button"
      >
        {{
          confirmationData?.subTypeStatus?.substring(0, 1).toUpperCase() +
            confirmationData?.subTypeStatus?.substring(1)
        }}
        {{ confirmationData?.subTypeStatus === "move" ? "to" : "from" }} Ban
        List
      </button>
    </div>

    <!-- Modal DropZone -->
    <div
      class="drop-zone-active"
      [class.drop-zone-active-hovered]="hoverZone"
      [hidden]="!isDropZoneVisible"
      [@widthGrow]="isDropZoneVisible ? 'open' : 'closed'"
    >
      <h5 class="drop-zone-title">{{ modalTitle }}</h5>
      <app-ta-upload-dropzone
        [dropZoneConfig]="dropZoneConfig"
        [disableUnsupportedPreview]="true"
        (onFileEvent)="onFilesEvent($event)"
        (onDropBackground)="onDropBackground($event)"
      ></app-ta-upload-dropzone>
    </div>
  </div>
  <!-- Modal Map -->
  <div
    *ngIf="map"
    [ngClass]="{ 'load-modal-map': customClass?.includes('load') }"
  >
    MAPA
  </div>
</div>
