
<div class="marker-tool-tip">
    <div class="marker-info-container-all">
      <div class="title-container">
        <div class="marker-business-name">{{ title }}</div>
        <!-- <div class="show-more">
          <app-table-dropdown
            [options]="tableOptions.actions"
            [placement]="'bottom-left'"
            [id]="latlong.id"
            (dropDownActions)="onTableBodyActions($event)"
          >
          </app-table-dropdown>
        </div> -->
        <ng-content></ng-content>
      </div>
      <div class="marker-info-text marker-bold-text uppercase red-text mg-bottom-2 mg-top-4" *ngIf="item.status == 2">
        Permanently Closed
      </div>
      <div class="marker-distance-left" [ngClass]="{ 'mg-top-4': item.status == 2 }" *ngIf="locationFilterOn && item.distanceBetween">
        <span class="marker-title">{{ item.distanceBetween }} mi </span>
        <span class="marker-info-text">away </span>
        <span class="marker-time-left-text">
          <span class="marker-bold-text">- 1 hour 27 minutes</span> est.
        </span>
      </div>
      <div class="marker-rating-container mg-top-4">
        <span class="marker-rating">
          <svg-icon
              class="marker-rating-svg"
              src="assets/svg/common/ic_like.svg"
              [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
          ></svg-icon>
          <span class="marker-like-text marker-bold-text">{{ item?.upRatingCount }}</span>
        </span>
        <span class="marker-rating">
          <svg-icon
              class="marker-rating-svg"
              src="assets/svg/common/ic_dislike.svg"
              [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
          ></svg-icon>
          <span class="marker-like-text marker-bold-text">{{ item?.downRatingCount }}</span>
        </span>
      </div>
    </div>
    <div *ngIf="type == 'Repair'">
      <div class="marker-divider"></div>
      <div class="marker-info-container-all">
        <div class="marker-repair-icons-container">
          <svg-icon
            *ngFor="let service of item?.serviceTypes; let i = index;"
            class="marker-repair-svg"
            src="assets/svg/common/repair-services/repair-serivces-details/{{service.logoName}}"
            [ngClass]="{ 'active': service.active }"
            [svgStyle]="{ 'width.px': 24, 'height.px': 24 }"
          ></svg-icon>
        </div>  
      </div>
    </div>
    <div class="marker-divider"></div>
    <div class="marker-info-container-all">
      <div class="marker-info-container" [ngClass]="{ copied: copiedPhone }">
        <svg-icon
            class="marker-info-svg"
            src="assets/svg/common/ic_phone.svg"
            [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
        ></svg-icon>
        <span class="marker-info-text">{{ item?.phone }}</span>
        <span
            [tooltipBackground]="copiedPhone ? '#536BC2' : '#6c6c6c'"
            ngbTooltip
            [mainTooltip]="copiedPhone ? 'Copied' : 'Copy'"
            position="top"
            class="tooltip-copy"
            (click)="copyText(item?.phone, 'phone')"
          >
          <svg-icon
            class="copy-icon"
            src="assets/svg/common/ic_copy.svg"
            (click)="copyText(item?.phone, 'phone')"
          ></svg-icon>
        </span>
      </div>
      <div class="marker-info-container" *ngIf="item.email" [ngClass]="{ copied: copiedEmail }">
        <svg-icon
            class="marker-info-svg"
            src="assets/svg/common/ic_email.svg"
            [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
        ></svg-icon>
        <span class="marker-info-text">{{ item?.email }}</span>
        <span
            [tooltipBackground]="copiedEmail ? '#536BC2' : '#6c6c6c'"
            ngbTooltip
            [mainTooltip]="copiedEmail ? 'Copied' : 'Copy'"
            position="top"
            class="tooltip-copy"
            (click)="copyText(item?.email, 'email')"
          >
          <svg-icon
            class="copy-icon"
            src="assets/svg/common/ic_copy.svg"
            (click)="copyText(item?.email, 'email')"
          ></svg-icon>
        </span>
      </div>
      <div class="marker-info-container" [ngClass]="{ copied: copiedAddress }">
        <div>
          <svg-icon
            class="marker-info-svg"
            src="assets/svg/common/ic_address.svg"
            [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
          ></svg-icon>
        </div>
        <div class="marker-info-text">
          <div *ngIf="item?.address">
            <div *ngIf="item?.address.street">
              {{ item?.address.streetNumber ? item?.address.streetNumber : '' }} 
              {{ item?.address.street }}
              {{ item?.address.addressUnit ? item?.address.addressUnit : '' }}
            </div>
            <div>
              {{ item?.address.city }}, 
              {{ item?.address.state }}<span *ngIf="item?.address.zipCode"> {{ item?.address.zipCode }}</span>,
              {{ item?.address.country }}
            </div>
          </div>
        </div>
        <span
            [tooltipBackground]="copiedAddress ? '#536BC2' : '#6c6c6c'"
            ngbTooltip
            [mainTooltip]="copiedAddress ? 'Copied' : 'Copy'"
            position="top"
            class="tooltip-copy"
            (click)="copyText(item?.address.address, 'address')"
          >
            <svg-icon
              class="copy-icon"
              src="assets/svg/common/ic_copy.svg"
              (click)="copyText(item?.address.address, 'address')"
            ></svg-icon>
          </span>
      </div>
    </div>
    <div class="marker-expanded-view unopened" 
    [class.unopened]="item?.isExpanded === undefined"
    [@showHideDrop]="item?.isExpanded">
      <div class="marker-divider"></div>
      <div *ngIf="type == 'Shipper' && (item?.shippingFrom && item?.shippingTo) || (item?.receivingFrom && item?.receivingTo)">
        <div class="marker-info-container-all">
          <div class="marker-title">Available Hours</div>
          <div class="marker-expanded-info-container">
            <div class="marker-dual-info-container mg-bottom-8" *ngIf="item?.shippingFrom && item?.shippingTo">
              <div class="marker-like-text marker-bold-text mg-bottom-4">Shipping</div>
              <div class="marker-info-text">{{ item?.shippingFrom }} - {{ item?.shippingTo }}</div>
            </div>
            <div class="marker-dual-info-container mg-bottom-8" *ngIf="item?.receivingFrom && item?.receivingTo">
              <div class="marker-like-text marker-bold-text mg-bottom-4">Receiving</div>
              <div class="marker-info-text">{{ item?.receivingFrom }} - {{ item?.receivingTo }}</div>
            </div>
          </div>
        </div>
        <div class="marker-divider"></div>
      </div>
      <div *ngIf="type == 'Repair' && item?.openHours">
        <div class="marker-info-container-all">
          <div class="marker-title">Working Hours</div>
          <div class="marker-expanded-info-container">
            <div class="marker-dual-info-container mg-bottom-8" *ngIf="!showAllDays">
              <div class="marker-like-text marker-bold-text mg-bottom-4">{{ item?.openHoursToday == 'Closed' ? 'Today' : 'Open Now' }}</div>
              <div class="marker-info-text">{{ item?.openHoursToday }}</div>
            </div>
            <div class="marker-dual-info-container mg-bottom-8" *ngIf="showAllDays">
              <div class="marker-like-text marker-bold-text mg-bottom-4">Monday - Friday</div>
              <div class="marker-info-text" *ngIf="item.openHours[1].startTime">{{ item.openHours[1].startTime }} - {{ item.openHours[1].endTime }}</div>
              <div class="marker-info-text" *ngIf="!item.openHours[1].startTime">Closed</div>
            </div>
            <div class="marker-dual-info-container mg-bottom-8" *ngIf="showAllDays">
              <div class="marker-like-text marker-bold-text mg-bottom-4">Saturday</div>
              <div class="marker-info-text" *ngIf="item.openHours[6].startTime">{{ item.openHours[6].startTime }} - {{ item.openHours[6].endTime }}</div>
              <div class="marker-info-text" *ngIf="!item.openHours[6].startTime">Closed</div>
            </div>
            <div class="marker-dual-info-container mg-bottom-8" *ngIf="showAllDays">
              <div class="marker-like-text marker-bold-text mg-bottom-4">Sunday</div>
              <div class="marker-info-text" *ngIf="item.openHours[0].startTime">{{ item.openHours[0].startTime }} - {{ item.openHours[0].endTime }}</div>
              <div class="marker-info-text" *ngIf="!item.openHours[0].startTime">Closed</div>
            </div>
            <div class="marker-dual-info-container mg-bottom-8">
              <div class="marker-like-text marker-bold-text mg-bottom-4"></div>
              <div class="marker-date-holder" (click)="toggleWorkingHours()">
                <svg-icon
                  src="assets/svg/common/ic_date.svg"
                  class="date-svg"
                  [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
                ></svg-icon>
                <div class="marker-info-text">{{ showAllDays ? 'Show today' : 'Show all days' }}</div>
              </div>
            </div>
          </div>
        </div>
        <div class="marker-divider"></div>
      </div>
      <div class="marker-info-container-all">
        <div class="marker-title">
          <div class="marker-dual-info-container p-0">
            <span class="data-count">{{ type == 'Shipper' ? '769' : type == 'Repair' ? item.order : '' }}</span>
            {{ type == 'Shipper' ? 'Load' : type == 'Repair' ? 'Order' : '' }}
          </div>
          <div class="marker-dual-info-container" *ngIf="type == 'Repair'">
            <span class="marker-bold-text blue-text">${{ item.cost }}K </span><span class="font-weight-normal">Cost</span>
          </div>
        </div>
        <div class="marker-expanded-info-container" *ngIf="type == 'Shipper'">
          <div class="marker-dual-info-container mg-bottom-8">
            <div class="marker-info-text mg-bottom-4"><span class="marker-bold-text">632</span> Picked Up</div>
            <div class="marker-like-text">Avg. Loading <span class="marker-bold-text">22m 37s</span></div>
          </div>
          <div class="marker-dual-info-container mg-bottom-8">
            <div class="marker-info-text mg-bottom-4"><span class="marker-bold-text">127</span> Delivered</div>
            <div class="marker-like-text">Avg. Offloading <span class="marker-bold-text">19m 08s</span></div>
          </div>
        </div>
      </div>
      <div class="marker-divider"></div>
      <div class="marker-info-container-all">
        <div class="marker-expanded-info-container">
          <div class="marker-dual-info-container mg-bottom-4">
            <div class="marker-like-text marker-bold-text mg-bottom-4">Date Added</div>
            <div class="marker-info-text">{{ item?.createdAt | formatDateP }}</div>
          </div>
          <div class="marker-dual-info-container mg-bottom-4">
            <div class="marker-like-text marker-bold-text mg-bottom-4">{{ item?.status == 2 ? 'Perm. Closed' : 'Last Used' }}</div>
            <div class="marker-info-text">137 days ago</div>
          </div>
        </div>
      </div>
    </div>
    <div class="marker-container-expand" (click)="expandInfo()">
      <svg-icon
        src="assets/svg/common/resize-arrow.svg"
        class="marker-expand-svg"
        [ngClass]="{ 'rotate': item?.isExpanded}"
        [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
      ></svg-icon>
    </div>
</div>