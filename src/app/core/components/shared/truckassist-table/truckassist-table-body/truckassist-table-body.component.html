<table>
  <tbody *ngIf="viewData.length">
    <!-- Pined -->
    <div class="pined-tr">
      <tr
        [ngStyle]="{ 'margin-top': i > 0 ? '2px' : '0px' }"
        *ngFor="let row of viewData; let i = index; trackBy: trackByFn"
        [ngClass]="{
          'regular-columns-hover':
            hoverActive === i && !row.actionAnimation && !row.isRepairOrder,
          'regular-row': !row.isSelected,
          'selected-row': row.isSelected,
          'muted-row':
            !row.active && !row['status'] && !options.disabledMutedStyle,
          'delete-animation': row.actionAnimation === 'delete',
          'add-animation': row.actionAnimation === 'add',
          'update-animation': row.actionAnimation === 'update',
          'row-repair-order': row.isRepairOrder && !row.actionAnimation
        }"
        class="pined-tr-container"
      >
        <div
          class="columns-container"
          (mouseenter)="hoverActive = !row.isSelected ? i : -1"
          (mouseleave)="hoverActive = -1"
        >
          <td *ngFor="let column of columns">
            <!-- NO TEMPLATE -->
            <div
              *ngIf="
                !column.hidden && column.ngTemplate === '' && column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content"
            >
              <div class="no-template">NO TEMPLATE</div>
            </div>

            <!-- CHECKBOX TEMPLATE -->
            <div
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'checkbox' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content set-center"
            >
              <input
                (change)="onSelectItem(row, i)"
                [checked]="row.isSelected"
                class="table-checkbox"
                id="checkbox{{ i }}"
                type="checkbox"
              />
              <label class="table-checkbox-label" for="checkbox{{ i }}"></label>
            </div>

            <!-- USER CHECKBOX TEMPLATE -->
            <div
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'user-checkbox' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content set-center"
            >
              <!-- IF USER IS OWNER -->
              <svg-icon
                *ngIf="row.userType === 'Owner'"
                [src]="'assets/svg/truckassist-table/user-owner-icon.svg'"
                [svgStyle]="{ 'width.px': '14', 'height.px': '14' }"
              ></svg-icon>

              <!-- IF USER IS NOT OWNER -->
              <input
                *ngIf="row.userType !== 'Owner'"
                (change)="onSelectItem(row, i)"
                [checked]="row.isSelected"
                class="table-checkbox"
                id="checkbox{{ i }}"
                type="checkbox"
              />
              <label
                *ngIf="row.userType !== 'Owner'"
                class="table-checkbox-label"
                for="checkbox{{ i }}"
              ></label>
            </div>

            <!-- AVATAR COLUMN -->
            <div
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'avatar' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content"
            >
              <div class="avatar-container">
                <div class="avatar-img" *ngIf="row.avatarImg">
                  <img alt="avatar" [src]="row.avatarImg" />
                </div>

                <div
                  class="avatar-no-img"
                  *ngIf="!row.avatarImg"
                  [ngStyle]="{
                    'background-color': row.avatarColor?.background
                      ? row.avatarColor.background
                      : 'unset',
                    color: row.avatarColor?.color
                      ? row.avatarColor.color
                      : 'unset'
                  }"
                >
                  {{ row.textDriverShortName }}
                </div>

                <img
                  class="avatar-owner"
                  alt="avatar"
                  *ngIf="row.isOwner"
                  src="../../../../../../assets/svg/truckassist-table/owner-badge.svg"
                />
              </div>
              <span
                (click)="goToDetails(column, row)"
                class="table-avatar-name"
                >{{ row[column.field] }}</span
              >
            </div>

            <!-- USER AVATAR COLUMN -->
            <div
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'user-avatar' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content"
            >
              <div class="user-avatar-container">
                <img
                  alt="avatar"
                  [src]="
                    row?.avatar?.src
                      ? row?.avatar?.src
                      : 'assets/svg/truckassist-table/user-avatar-no-profile.svg'
                  "
                  class="avatar"
                />
              </div>
              <span class="table-avatar-name">{{ row.userFullName }}</span>
            </div>

            <!-- USER STATUS COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'user-status' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="user-status-container">{{ row[column.field] }}</div>
            </div>

            <!-- NAME LINK COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'nameLink' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <span
                [ngStyle]="{
                  width: column.width + 'px'
                }"
                class="table-name-link"
                (click)="goToDetails(column, row)"
                >{{ row[column.field] }}</span
              >
            </div>

            <!-- OOS COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden && column.ngTemplate === 'oos' && column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="oos-container">
                <div [ngClass]="{ 'oos-active': row.oos[0].active }">
                  {{ row.oos[0].value }}
                </div>
                <div [ngClass]="{ 'oos-active': row.oos[1].active }">
                  {{ row.oos[1].value }}
                </div>
                <div [ngClass]="{ 'oos-active': row.oos[2].active }">
                  {{ row.oos[2].value }}
                </div>
              </div>
            </div>

            <!-- VIOLATION STATE COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'violation-state' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px'
              }"
            >
              <div class="violation-state-container">
                {{ row[column.field] }}
              </div>
            </div>

            <!-- LVL COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden && column.ngTemplate === 'lvl' && column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px'
              }"
            >
              <div class="lvl-container">{{ row[column.field] }}</div>
            </div>

            <!-- CITATION COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'citation' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px'
              }"
            >
              <div
                class="citation-table"
                [ngClass]="{ 'citation-table-active': row.citation > 0 }"
              >
                {{ row.citation ? row.citation : "0" }}
              </div>
            </div>

            <!-- VL COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'violation-count' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px'
              }"
            >
              <div
                [ngClass]="{
                  'active-vl-count': row[column.field] > 0,
                  'zero-vl-count': !row[column.field]
                }"
              >
                {{ row[column.field] ? row[column.field] : "0" }}
              </div>
            </div>

            <!-- CUSTOMER NAME COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'customer-name' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="customer-name-container">
                <svg-icon
                  *ngIf="row.ban && !row.dnu"
                  [src]="
                    'assets/svg/truckassist-table/customer/banner-icon.svg'
                  "
                  [svgStyle]="{ 'width.px': '18', 'height.px': '18' }"
                ></svg-icon>
                <svg-icon
                  *ngIf="!row.ban && row.dnu"
                  [src]="
                    'assets/svg/truckassist-table/customer/do-not-use-icon.svg'
                  "
                  [svgStyle]="{ 'width.px': '18', 'height.px': '18' }"
                ></svg-icon>
                <span class="customer-name">{{ row[column.field] }}</span>
              </div>
            </div>

            <!-- RATING  COLUMN-->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'rating' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <!-- Ovde je komponenta -->
              <!-- <app-truckassist-reveiw [data]="row"></app-truckassist-reveiw> -->
            </div>

            <!-- ITEM DROP COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'item-drop' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              (click)="onShowItemDrop(i)"
            >
              <!-- [innerHtml]="row[column.field] | taHighlight: highlightingWords" -->
              <span class="table-item" [innerHtml]="row[column.field]"></span>

              <div class="item-drop-container" *ngIf="showItemDrop === i">
                <div class="item-title">
                  <span class="count">#</span>
                  <span class="item-name">Item</span>
                  <span class="qty">Qty</span>
                  <span class="price">Price</span>
                  <span class="total">$4,866.23</span>
                </div>
                <div class="items-container">
                  <div
                    class="item-container"
                    *ngFor="let item of row.fuelItems; let k = index"
                  >
                    <span class="count">{{ k + 1 }}</span>
                    <span class="item-name">{{ item.category }}</span>
                    <span class="qty">{{ item.qty }} gal.</span>
                    <span class="price">${{ item.price }}</span>
                    <span class="total">${{ item.subtotal }}</span>
                    <div class="total-item-background"></div>
                  </div>
                  <div class="total-background"></div>
                </div>
              </div>
            </div>

            <!-- TOTAL  COLUMN-->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'total' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <!-- [innerHtml]=" row[column.field] ? (row[column.field] | taHighlight:
            highlightingWords) : '' " -->
              <span
                *ngIf="!row.isRepairOrder"
                class="table-total"
                [innerHtml]="row[column.field] ? row[column.field] : ''"
              ></span>

              <div
                class="finish-order-action"
                (click)="onFinishOrder(row)"
                *ngIf="row.isRepairOrder"
              >
                Finish Order
              </div>
            </div>

            <!-- COMPACT TEXT -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'compact-text' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px'
              }"
            >
              <div
                class="compact-text-container"
                *ngIf="
                  row[column.field][0].value ||
                  row[column.field][1].value ||
                  row[column.field][2].value
                "
              >
                <!-- First -->
                <div
                  class="title-values-container title-values-margin"
                  *ngIf="row[column.field][0].value"
                >
                  <div class="title-compact-text">
                    {{ row[column.field][0].title }}
                  </div>
                  <div class="values-compact-text">
                    {{ row[column.field][0].value }}
                  </div>
                </div>

                <!-- Second  -->
                <div
                  class="title-values-container title-values-margin"
                  *ngIf="row[column.field][1].value"
                >
                  <div class="title-compact-text">
                    {{ row[column.field][1].title }}
                  </div>
                  <div class="values-compact-text">
                    {{ row[column.field][1].value }}
                  </div>
                </div>

                <!-- Third  -->
                <div
                  class="title-values-container"
                  *ngIf="row[column.field][2].value"
                >
                  <div class="title-compact-text">
                    {{ row[column.field][2].title }}
                  </div>
                  <div class="values-compact-text">
                    {{ row[column.field][2].value }}
                  </div>
                </div>
              </div>
            </div>

            <!-- SERVICE COLUMN-->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'service' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="service-container set-center" *ngIf="row.doc">
                <div
                  class="img-style img-margin"
                  [class]="row.doc.types[0].checked ? 'truck-active' : 'truck'"
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="
                    row.doc.types[1].checked ? 'trailer-active' : 'trailer'
                  "
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="
                    row.doc.types[2].checked ? 'mobile-active' : 'mobile'
                  "
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="row.doc.types[3].checked ? 'shop-active' : 'shop'"
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="
                    row.doc.types[4].checked ? 'towing-active' : 'towing'
                  "
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="row.doc.types[5].checked ? 'parts-active' : 'parts'"
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="row.doc.types[6].checked ? 'tire-active' : 'tire'"
                ></div>
                <div
                  class="img-style"
                  [class]="
                    row.doc.types[7].checked ? 'dealer-active' : 'dealer'
                  "
                ></div>
              </div>
            </div>

            <!-- PPG COLUMN-->
            <div
              class="td-content"
              *ngIf="
                !column.hidden && column.ngTemplate === 'ppg' && column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <!-- [innerHtml]="'$0' | taHighlight: highlightingWords" -->
              <span class="table-text" [innerHtml]="'$0'"></span>
            </div>

            <!-- URL COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden && column.ngTemplate === 'url' && column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <a
                class="table-url"
                href="{{ row[column.field] }}"
                [innerHtml]="row[column.field] ? row[column.field] : ''"
              ></a>
            </div>

            <!-- PASSWORD COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'password' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <svg-icon
                class="table-password-icon"
                [ngClass]="{
                  'table-active-password': showPassword[i]
                }"
                (click)="onShowPassword(i)"
                src="/assets/svg/truckassist-table/password-icon.svg"
              ></svg-icon>

              <span
                *ngIf="loadingPassword !== i"
                [ngClass]="{
                  'crypted-password': !showPassword[i],
                  'decrypted-password': showPassword[i]
                }"
                >{{ showPassword[i] ? decryptedPassword[i] : "∗∗∗∗∗" }}</span
              >

              <svg-icon
                class="password-spiner"
                *ngIf="loadingPassword === i"
                src="/assets/svg/truckassist-table/loading-spinner.svg"
              ></svg-icon>
            </div>

            <!-- LABLE COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'label' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div
                class="table-lable"
                [ngStyle]="{
                  background: row[column.field]?.color
                    ? row[column.field].color
                    : 'unset'
                }"
              ></div>
              <span
                class="table-lable-text"
                [innerHtml]="
                  row[column.field]?.name ? row[column.field].name : ''
                "
              ></span>
            </div>

            <!-- TEXT COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden && column.ngTemplate === 'text' && column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <span class="table-text">{{
                row[column.field] ? row[column.field] : ""
              }}</span>
            </div>

            <!-- SEMI BOLD TEXT COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'semi-bold-text' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <span class="semi-bold-table-text">{{
                row[column.field] ? row[column.field] : ""
              }}</span>
            </div>

            <!-- COLOR COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'color' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 11.638 16.2"
              >
                <path
                  d="M16,16.365c0-2.42,3.382-7.593,4.989-9.912a1,1,0,0,1,1.66,0c1.607,2.319,4.989,7.492,4.989,9.912a5.819,5.819,0,1,1-11.638,0Zm3.174,0a.529.529,0,0,0-1.058,0,3.708,3.708,0,0,0,3.7,3.733.529.529,0,1,0,0-1.058A2.651,2.651,0,0,1,19.174,16.365Z"
                  transform="translate(-16 -6.014)"
                  [ngStyle]="{ fill: row[column.field] }"
                />
              </svg>

              <div
                [ngStyle]="{
                  width: column.width - 18 + 'px'
                }"
                class="color-name"
              >
                {{ row.colorName }}
              </div>
            </div>

            <!-- SVG COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden && column.ngTemplate === 'svg' && column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="truckassist-icon">
                <svg-icon
                  [class]="row[column.classField]"
                  [src]="column.svgUrl + row[column.field]"
                  [svgStyle]="{
                    'width.px': column.svgDimensions.width,
                    'height.px': column.svgDimensions.height
                  }"
                ></svg-icon>
              </div>
            </div>

            <!-- PICKUP COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'pickup' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="pickup-and-delivery-container">
                <div class="picup-count">{{ row.pickupCount }}</div>
                <div class="loaction">{{ row[column.field] }}</div>
              </div>
            </div>

            <!-- PICKUP COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'delivery' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="pickup-and-delivery-container">
                <div class="delivery-count">{{ row.deliveryCount }}</div>
                <div class="loaction">{{ row[column.field] }}</div>
              </div>
            </div>

            <!-- APPLICANT DONE CHECKBOX COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'applicantDoneCheckbox' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="table-done-checkbox">
                <div
                  class="checkbox-content"
                  [ngClass]="{ done: row[column.field] >= 11 }"
                >
                  {{ row[column.field] < 11 ? row[column.field] : "" }}
                </div>
              </div>
            </div>

            <!-- APPLICANT REVIEW COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'applicantReview' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="table-applicant-review">
                <div
                  class="review"
                  [ngClass]="{
                    'review-ok': row[column.field],
                    'review-bad': !row[column.field]
                  }"
                ></div>
              </div>
            </div>

            <!-- STATE TEXT COLUMN -->
            <div
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'textState' &&
                column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content"
            >
              <div class="table-state">
                {{ row[column.field] ? row[column.field] : "" }}
              </div>
            </div>

            <!-- PROGRESS COLUMN TEMPLATE -->
            <div
              class="td-content"
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'progress' &&
                column.isPined
              "
            >
              <div
                class="table-progress-cotnainer"
                *ngIf="row[column.field]?.expirationDays"
              >
                <!-- Progres Bar  -->
                <div
                  class="table-progress-bar-container"
                  [ngClass]="{
                    'bg-expired-container':
                      row[column.field].percentage === 100,
                    'bg-sliver-container':
                      row[column.field].percentage >= 25 &&
                      row[column.field].percentage < 100,
                    'bg-orange-container':
                      row[column.field].percentage >= 5 &&
                      row[column.field].percentage < 25,
                    'bg-danger-container':
                      row[column.field].percentage > 0 &&
                      row[column.field].percentage < 5,
                    'bg-inactive-container': !row[column.field].percentage
                  }"
                >
                  <div
                    [ngClass]="{
                      'bg-progress-sliver':
                        row[column.field].percentage >= 25 &&
                        row[column.field].percentage < 50,
                      'bg-progress-orange':
                        row[column.field].percentage >= 5 &&
                        row[column.field].percentage < 25,
                      'bg-progress-danger':
                        row[column.field].percentage > 0 &&
                        row[column.field].percentage < 5
                    }"
                    [ngStyle]="{ width: row[column.field].percentage + '%' }"
                    class="table-progress-bar"
                    *ngIf="
                      row[column.field].percentage > 0 &&
                      row[column.field].percentage < 100
                    "
                  ></div>
                </div>

                <!-- Progres Text -->
                <div
                  class="table-progress-text"
                  [ngStyle]="{
                    width: column.width - 30 + 'px'
                  }"
                  *ngIf="
                    row[column.field].percentage > 0 &&
                    row[column.field].percentage < 100
                  "
                >
                  in {{ row[column.field].expirationDays }} days
                </div>

                <!-- Progres Text Expired-->
                <div
                  class="table-progress-text"
                  [ngStyle]="{
                    width: column.width - 30 + 'px'
                  }"
                  *ngIf="row[column.field].percentage === 100"
                >
                  {{ row[column.field].expirationDays }} days ago
                </div>
              </div>
            </div>
          </td>
        </div>
      </tr>
    </div>

    <!-- Border For Not Pined -->
    <div
      class="not-pined-border-left table-select-border"
      *ngIf="showScrollSectionBorder"
      [ngStyle]="{
        height: viewData.length * 32 + 2 * viewData.length - 1 - 1 + 'px'
      }"
    ></div>

    <!-- Not Pined -->
    <div
      class="not-pined-tr"
      id="scroll-container"
      (scroll)="onScroll($event)"
      [ngStyle]="{ 'max-width.px': notPinedMaxWidth }"
    >
      <tr
        [ngStyle]="{ 'margin-top': i > 0 ? '2px' : '0px' }"
        *ngFor="let row of viewData; let i = index; trackBy: trackByFn"
        [ngClass]="{
          'regular-columns-hover':
            hoverActive === i && !row.actionAnimation && !row.isRepairOrder,
          'regular-row': !row.isSelected,
          'selected-row': row.isSelected,
          'muted-row':
            !row.active && !row['status'] && !options.disabledMutedStyle,
          'delete-animation': row.actionAnimation === 'delete',
          'add-animation': row.actionAnimation === 'add',
          'update-animation': row.actionAnimation === 'update',
          'row-repair-order': row.isRepairOrder && !row.actionAnimation
        }"
        class="not-pined-tr-container"
      >
        <div
          class="columns-container"
          (mouseenter)="hoverActive = !row.isSelected ? i : -1"
          (mouseleave)="hoverActive = -1"
          [ngClass]="{
            'border-inactive': !showScrollSectionBorder
          }"
        >
          <td *ngFor="let column of columns">
            <!-- NO TEMPLATE -->
            <div
              *ngIf="
                !column.hidden && column.ngTemplate === '' && !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content"
            >
              <div class="no-template">NO TEMPLATE</div>
            </div>

            <!-- AVATAR COLUMN -->
            <div
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'avatar' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content"
            >
              <div class="avatar-container">
                <div class="avatar-img" *ngIf="row.avatarImg">
                  <img alt="avatar" [src]="row.avatarImg" />
                </div>

                <div
                  class="avatar-no-img"
                  *ngIf="!row.avatarImg"
                  [ngStyle]="{
                    'background-color': row.avatarColor?.background
                      ? row.avatarColor.background
                      : 'unset',
                    color: row.avatarColor?.color
                      ? row.avatarColor.color
                      : 'unset'
                  }"
                >
                  {{ row.textDriverShortName }}
                </div>

                <img
                  class="avatar-owner"
                  alt="avatar"
                  *ngIf="row.isOwner"
                  src="../../../../../../assets/svg/truckassist-table/owner-badge.svg"
                />
              </div>
              <span
                (click)="goToDetails(column, row)"
                class="table-avatar-name"
                >{{ row[column.field] }}</span
              >
            </div>

            <!-- USER AVATAR COLUMN -->
            <div
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'user-avatar' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content"
            >
              <div class="user-avatar-container">
                <img
                  alt="avatar"
                  [src]="
                    row?.avatar?.src
                      ? row?.avatar?.src
                      : 'assets/svg/truckassist-table/user-avatar-no-profile.svg'
                  "
                  class="avatar"
                />
              </div>
              <span class="table-avatar-name">{{ row.userFullName }}</span>
            </div>

            <!-- USER STATUS COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'user-status' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="user-status-container">{{ row[column.field] }}</div>
            </div>

            <!-- NAME LINK COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'nameLink' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <span
                [ngStyle]="{
                  width: column.width + 'px'
                }"
                class="table-name-link"
                (click)="goToDetails(column, row)"
                >{{ row[column.field] }}</span
              >
            </div>

            <!-- OOS COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden && column.ngTemplate === 'oos' && !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="oos-container">
                <div [ngClass]="{ 'oos-active': row.oos[0].active }">
                  {{ row.oos[0].value }}
                </div>
                <div [ngClass]="{ 'oos-active': row.oos[1].active }">
                  {{ row.oos[1].value }}
                </div>
                <div [ngClass]="{ 'oos-active': row.oos[2].active }">
                  {{ row.oos[2].value }}
                </div>
              </div>
            </div>

            <!-- VIOLATION STATE COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'violation-state' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px'
              }"
            >
              <div class="violation-state-container">
                {{ row[column.field] }}
              </div>
            </div>

            <!-- LVL COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden && column.ngTemplate === 'lvl' && !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px'
              }"
            >
              <div class="lvl-container">{{ row[column.field] }}</div>
            </div>

            <!-- COMPACT TEXT -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'compact-text' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px'
              }"
            >
              <div
                class="compact-text-container"
                *ngIf="
                  row[column.field][0].value ||
                  row[column.field][1].value ||
                  row[column.field][2].value
                "
              >
                <!-- First -->
                <div
                  class="title-values-container title-values-margin"
                  *ngIf="row[column.field][0].value"
                >
                  <div class="title-compact-text">
                    {{ row[column.field][0].title }}
                  </div>
                  <div class="values-compact-text">
                    {{ row[column.field][0].value }}
                  </div>
                </div>

                <!-- Second  -->
                <div
                  class="title-values-container title-values-margin"
                  *ngIf="row[column.field][1].value"
                >
                  <div class="title-compact-text">
                    {{ row[column.field][1].title }}
                  </div>
                  <div class="values-compact-text">
                    {{ row[column.field][1].value }}
                  </div>
                </div>

                <!-- Third  -->
                <div
                  class="title-values-container"
                  *ngIf="row[column.field][2].value"
                >
                  <div class="title-compact-text">
                    {{ row[column.field][2].title }}
                  </div>
                  <div class="values-compact-text">
                    {{ row[column.field][2].value }}
                  </div>
                </div>
              </div>
            </div>

            <!-- CITATION COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'citation' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px'
              }"
            >
              <div
                class="citation-table"
                [ngClass]="{ 'citation-table-active': row.citation > 0 }"
              >
                {{ row.citation ? row.citation : "0" }}
              </div>
            </div>

            <!-- VL COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'violation-count' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px'
              }"
            >
              <div
                [ngClass]="{
                  'active-vl-count': row[column.field] > 0,
                  'zero-vl-count': !row[column.field]
                }"
              >
                {{ row[column.field] ? row[column.field] : "0" }}
              </div>
            </div>

            <!-- CUSTOMER NAME COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'customer-name' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="customer-name-container">
                <svg-icon
                  *ngIf="row.ban && !row.dnu"
                  [src]="
                    'assets/svg/truckassist-table/customer/banner-icon.svg'
                  "
                  [svgStyle]="{ 'width.px': '18', 'height.px': '18' }"
                ></svg-icon>
                <svg-icon
                  *ngIf="!row.ban && row.dnu"
                  [src]="
                    'assets/svg/truckassist-table/customer/do-not-use-icon.svg'
                  "
                  [svgStyle]="{ 'width.px': '18', 'height.px': '18' }"
                ></svg-icon>
                <span class="customer-name">{{ row[column.field] }}</span>
              </div>
            </div>

            <!-- RATING  COLUMN-->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'rating' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <!-- Ovde je komponenta -->
              <!-- <app-truckassist-reveiw [data]="row"></app-truckassist-reveiw> -->
            </div>

            <!-- ITEM DROP COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'item-drop' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              (click)="onShowItemDrop(i)"
            >
              <!-- [innerHtml]="row[column.field] | taHighlight: highlightingWords" -->
              <span class="table-item" [innerHtml]="row[column.field]"></span>

              <div class="item-drop-container" *ngIf="showItemDrop === i">
                <div class="item-title">
                  <span class="count">#</span>
                  <span class="item-name">Item</span>
                  <span class="qty">Qty</span>
                  <span class="price">Price</span>
                  <span class="total">$4,866.23</span>
                </div>
                <div class="items-container">
                  <div
                    class="item-container"
                    *ngFor="let item of row.fuelItems; let k = index"
                  >
                    <span class="count">{{ k + 1 }}</span>
                    <span class="item-name">{{ item.category }}</span>
                    <span class="qty">{{ item.qty }} gal.</span>
                    <span class="price">${{ item.price }}</span>
                    <span class="total">${{ item.subtotal }}</span>
                    <div class="total-item-background"></div>
                  </div>
                  <div class="total-background"></div>
                </div>
              </div>
            </div>

            <!-- TOTAL  COLUMN-->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'total' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <!-- [innerHtml]=" row[column.field] ? (row[column.field] | taHighlight:
            highlightingWords) : '' " -->
              <span
                *ngIf="!row.isRepairOrder"
                class="table-total"
                [innerHtml]="row[column.field] ? row[column.field] : ''"
              ></span>

              <div
                class="finish-order-action"
                (click)="onFinishOrder(row)"
                *ngIf="row.isRepairOrder"
              >
                Finish Order
              </div>
            </div>

            <!-- SERVICE COLUMN-->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'service' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="service-container set-center" *ngIf="row.doc">
                <div
                  class="img-style img-margin"
                  [class]="row.doc.types[0].checked ? 'truck-active' : 'truck'"
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="
                    row.doc.types[1].checked ? 'trailer-active' : 'trailer'
                  "
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="
                    row.doc.types[2].checked ? 'mobile-active' : 'mobile'
                  "
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="row.doc.types[3].checked ? 'shop-active' : 'shop'"
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="
                    row.doc.types[4].checked ? 'towing-active' : 'towing'
                  "
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="row.doc.types[5].checked ? 'parts-active' : 'parts'"
                ></div>
                <div
                  class="img-style img-margin"
                  [class]="row.doc.types[6].checked ? 'tire-active' : 'tire'"
                ></div>
                <div
                  class="img-style"
                  [class]="
                    row.doc.types[7].checked ? 'dealer-active' : 'dealer'
                  "
                ></div>
              </div>
            </div>

            <!-- PPG COLUMN-->
            <div
              class="td-content"
              *ngIf="
                !column.hidden && column.ngTemplate === 'ppg' && !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <!-- [innerHtml]="'$0' | taHighlight: highlightingWords" -->
              <span class="table-text" [innerHtml]="'$0'"></span>
            </div>

            <!-- URL COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden && column.ngTemplate === 'url' && !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <a
                class="table-url"
                href="{{ row[column.field] }}"
                [innerHtml]="row[column.field] ? row[column.field] : ''"
              ></a>
            </div>

            <!-- PASSWORD COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'password' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <svg-icon
                class="table-password-icon"
                [ngClass]="{
                  'table-active-password': showPassword[i]
                }"
                (click)="onShowPassword(i)"
                src="/assets/svg/truckassist-table/password-icon.svg"
              ></svg-icon>

              <span
                *ngIf="loadingPassword !== i"
                [ngClass]="{
                  'crypted-password': !showPassword[i],
                  'decrypted-password': showPassword[i]
                }"
                >{{ showPassword[i] ? decryptedPassword[i] : "∗∗∗∗∗" }}</span
              >

              <svg-icon
                class="password-spiner"
                *ngIf="loadingPassword === i"
                src="/assets/svg/truckassist-table/loading-spinner.svg"
              ></svg-icon>
            </div>

            <!-- LABLE COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'label' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div
                class="table-lable"
                [ngStyle]="{
                  background: row[column.field]?.color
                    ? row[column.field].color
                    : 'unset'
                }"
              ></div>
              <span
                class="table-lable-text"
                [innerHtml]="
                  row[column.field]?.name ? row[column.field].name : ''
                "
              ></span>
            </div>

            <!-- TEXT COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'text' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <span class="table-text">{{
                row[column.field] ? row[column.field] : ""
              }}</span>
            </div>

            <!-- SEMI BOLD TEXT COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'semi-bold-text' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <span class="semi-bold-table-text">{{
                row[column.field] ? row[column.field] : ""
              }}</span>
            </div>

            <!-- COLOR COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'color' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 11.638 16.2"
              >
                <path
                  d="M16,16.365c0-2.42,3.382-7.593,4.989-9.912a1,1,0,0,1,1.66,0c1.607,2.319,4.989,7.492,4.989,9.912a5.819,5.819,0,1,1-11.638,0Zm3.174,0a.529.529,0,0,0-1.058,0,3.708,3.708,0,0,0,3.7,3.733.529.529,0,1,0,0-1.058A2.651,2.651,0,0,1,19.174,16.365Z"
                  transform="translate(-16 -6.014)"
                  [ngStyle]="{ fill: row[column.field] }"
                />
              </svg>
              <div
                [ngStyle]="{
                  width: column.width - 18 + 'px'
                }"
                class="color-name"
              >
                {{ row.colorName }}
              </div>
            </div>

            <!-- SVG COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden && column.ngTemplate === 'svg' && !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="truckassist-icon">
                <svg-icon
                  [class]="row[column.classField]"
                  [src]="column.svgUrl + row[column.field]"
                  [svgStyle]="{
                    'width.px': column.svgDimensions.width,
                    'height.px': column.svgDimensions.height
                  }"
                ></svg-icon>
              </div>
            </div>

            <!-- PICKUP COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'pickup' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="pickup-and-delivery-container">
                <div class="picup-count">{{ row.pickupCount }}</div>
                <div class="loaction">{{ row[column.field] }}</div>
              </div>
            </div>

            <!-- DELIVERY COLUMN -->
            <div
              class="td-content"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'delivery' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="pickup-and-delivery-container">
                <div class="delivery-count">{{ row.deliveryCount }}</div>
                <div class="loaction">{{ row[column.field] }}</div>
              </div>
            </div>

            <!-- APPLICANT DONE CHECKBOX COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'applicantDoneCheckbox' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="table-done-checkbox">
                <div
                  class="checkbox-content"
                  [ngClass]="{ done: row[column.field] >= 11 }"
                >
                  {{ row[column.field] < 11 ? row[column.field] : "" }}
                </div>
              </div>
            </div>

            <!-- APPLICANT REVIEW COLUMN -->
            <div
              class="td-content set-center"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'applicantReview' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div class="table-applicant-review">
                <div
                  class="review"
                  [ngClass]="{
                    'review-ok': row[column.field],
                    'review-bad': !row[column.field]
                  }"
                ></div>
              </div>
            </div>

            <!-- STATE TEXT COLUMN -->
            <div
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'textState' &&
                !column.isPined
              "
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content"
            >
              <div class="table-state">
                {{ row[column.field] ? row[column.field] : "" }}
              </div>
            </div>

            <!-- PROGRESS COLUMN TEMPLATE -->
            <div
              class="td-content"
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              *ngIf="
                !column.hidden &&
                column.ngTemplate === 'progress' &&
                !column.isPined
              "
            >
              <div
                class="table-progress-cotnainer"
                *ngIf="row[column.field]?.expirationDays"
              >
                <!-- Progres Bar  -->
                <div
                  class="table-progress-bar-container"
                  [ngClass]="{
                    'bg-expired-container':
                      row[column.field].percentage === 100,
                    'bg-sliver-container':
                      row[column.field].percentage >= 25 &&
                      row[column.field].percentage < 100,
                    'bg-orange-container':
                      row[column.field].percentage >= 5 &&
                      row[column.field].percentage < 25,
                    'bg-danger-container':
                      row[column.field].percentage > 0 &&
                      row[column.field].percentage < 5,
                    'bg-inactive-container': !row[column.field].percentage
                  }"
                >
                  <div
                    [ngClass]="{
                      'bg-progress-sliver':
                        row[column.field].percentage >= 25 &&
                        row[column.field].percentage < 50,
                      'bg-progress-orange':
                        row[column.field].percentage >= 5 &&
                        row[column.field].percentage < 25,
                      'bg-progress-danger':
                        row[column.field].percentage > 0 &&
                        row[column.field].percentage < 5
                    }"
                    [ngStyle]="{ width: row[column.field].percentage + '%' }"
                    class="table-progress-bar"
                    *ngIf="
                      row[column.field].percentage > 0 &&
                      row[column.field].percentage < 100
                    "
                  ></div>
                </div>

                <!-- Progres Text -->
                <div
                  class="table-progress-text"
                  [ngStyle]="{
                    width: column.width - 30 + 'px'
                  }"
                  *ngIf="
                    row[column.field].percentage > 0 &&
                    row[column.field].percentage < 100
                  "
                >
                  in {{ row[column.field].expirationDays }} days
                </div>

                <!-- Progres Text Expired-->
                <div
                  class="table-progress-text"
                  [ngStyle]="{
                    width: column.width - 30 + 'px'
                  }"
                  *ngIf="row[column.field].percentage === 100"
                >
                  {{ row[column.field].expirationDays }} days ago
                </div>
              </div>
            </div>
          </td>
        </div>
      </tr>
    </div>

    <!-- Border For Not Pined -->
    <div
      class="not-pined-border-right table-select-border"
      *ngIf="showScrollSectionBorder"
      [ngStyle]="{
        height: viewData.length * 32 + 2 * viewData.length - 1 - 1 + 'px'
      }"
    ></div>

    <!-- Actions -->
    <div class="actions" [ngStyle]="{ 'min-width': actionsMinWidth + 'px' }">
      <tr
        [ngStyle]="{ 'margin-top': i > 0 ? '2px' : '0px' }"
        *ngFor="let row of viewData; let i = index; trackBy: trackByFn"
        [ngClass]="{
          'regular-columns-hover':
            hoverActive === i && !row.actionAnimation && !row.isRepairOrder,
          'regular-row': !row.isSelected,
          'selected-row': row.isSelected,
          'muted-row':
            !row.active && !row['status'] && !options.disabledMutedStyle,
          'delete-animation': row.actionAnimation === 'delete',
          'add-animation': row.actionAnimation === 'add',
          'update-animation': row.actionAnimation === 'update',
          'row-repair-order': row.isRepairOrder && !row.actionAnimation
        }"
        class="actions-tr-container"
      >
        <div
          class="columns-container"
          (mouseenter)="hoverActive = !row.isSelected ? i : -1"
          (mouseleave)="hoverActive = -1"
        >
          <td *ngFor="let column of columns">
            <!-- ATTACHMENTS COLUMN TEMPLATE -->
            <div
              *ngIf="!column.hidden && column.ngTemplate === 'attachments'"
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content"
            >
              <div (click)="onShowAttachments(row)" class="attachments-btn">
                <div class="attachments-svg"></div>
              </div>
            </div>

            <!-- NOTE COLUMN TEMPLATE -->
            <div
              *ngIf="!column.hidden && column.ngTemplate === 'note'"
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
              class="td-content set-center"
            >
              <!-- Ovde je komponenta -->
              <!-- <app-app-note
                [note]="row?.note ? row.note : ''"
                [note_expanded]="false"
                [rowIndex]="i"
              ></app-app-note> -->
            </div>

            <!-- ACTIONS COLUMN TEMPLATE -->
            <div
              class="td-content set-center"
              *ngIf="!column.hidden && column.ngTemplate === 'actions'"
              [ngStyle]="{
                width: column.width + 'px',
                'min-width.px': column?.minWidth ? column.minWidth : 'unset'
              }"
            >
              <div
                #t2="ngbPopover"
                (click)="toggleDropdown(t2, row)"
                [autoClose]="true"
                [ngbPopover]="dropdownPopover"
                [placement]="'bottom-right'"
                class="table-dropdown-container"
                [ngClass]="{
                  'active-drop': dropDownActive === row.id && t2.isOpen()
                }"
                popoverClass="table-dropdown-popover"
                triggers="manual"
              ></div>
            </div>
          </td>
        </div>
      </tr>
    </div>
  </tbody>
</table>

<div
  class="show-more-container"
  *ngIf="viewData.length"
  [ngStyle]="{ 'width.px': showMoreContainerWidth }"
>
  <div class="showing">
    {{ viewData.length }} OF {{ activeTableData.length }} SHOWING
  </div>
  <div
    class="show-more"
    (clcik)="onShowMore()"
    *ngIf="viewData.length < activeTableData.length"
  >
    SHOW MORE
  </div>
</div>

<!-- DROPDOWN -->
<ng-template #dropdownPopover let-data="data">
  <div class="table-dropdown">
    <div
      (click)="onDropAction(action)"
      *ngFor="let action of data"
      class="table-dropdown-content"
      [class]="action.class"
    >
      <div class="dropdown-content-icon">
        <div [class]="action.contentType"></div>
      </div>
      <div class="dropdown-content-text">{{ action.title }}</div>
    </div>
  </div>
</ng-template>
