<div class="toolbar-container">
  <!-- LIST NAME -->
  <div
    class="list-name"
    *ngIf="listName && !options.toolbarActions.hideListName"
  >
    {{ listName }}
  </div>

  <!-- TABS -->
  <div
    *ngFor="let data of tableData"
    class="tab-container"
    [ngClass]="{
      'tab-inactive': selectedTab !== data.field,
      'tab-active': selectedTab === data.field
    }"
    (click)="onSelectTab(data)"
  >
    <div class="tab">
      <div class="data-count">{{ data.length }}</div>
      <div class="tab-title">{{ data.title }}</div>
    </div>
  </div>

  <!-- VIEW MODE SELECT -->
  <div class="view-mode-container" *ngIf="!options.toolbarActions.hideViewMode">
    <div
      class="mode"
      [ngClass]="{
        'mode-active': options.toolbarActions.viewModeActive == 'List'
      }"
      (click)="changeModeView('List')"
    >
      List
    </div>
    <div
      class="mode"
      [ngClass]="{
        'mode-active': options.toolbarActions.viewModeActive == 'Card'
      }"
      (click)="changeModeView('Card')"
    >
      Card
    </div>
    <div
      class="mode"
      [ngClass]="{
        'mode-active': options.toolbarActions.viewModeActive == 'Map'
      }"
      (click)="changeModeView('Map')"
    >
      Map
    </div>
  </div>

  <!-- PM AND REGULAR SWITCH -->
  <!-- <app-truckassist-table-toolbar-switch
    [switchOptions]="options.pmSwitch"
    *ngIf="options.toolbarActions.showPmSwitch"
  ></app-truckassist-table-toolbar-switch> -->

  <!-- SEARCH -->
  <app-truckassist-search></app-truckassist-search>

  <!-- LOCATION FILTER -->
  <div
    class="location-filter-container"
    *ngIf="!options.toolbarActions.hideLocationFilter"
  >
    <svg-icon
      [svgStyle]="{ 'width.px': 17, 'height.px': 20 }"
      [src]="'assets/svg/truckassist-table/location-icon.svg'"
    ></svg-icon>
  </div>

  <!-- TABLE ACTIONS -->
  <div class="table-actions">
    <div class="actions-container">
      <!-- Activation -->
      <div *ngIf="tableRowsSelected.length">
        <svg-icon
          [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
          [src]="'assets/svg/truckassist-table/activation-icon.svg'"
        ></svg-icon>
      </div>

      <!-- Delete -->
      <div *ngIf="tableRowsSelected.length" (click)="deleteSelectedRows()">
        <svg-icon
          [svgStyle]="{ 'width.px': 16, 'height.px': 18 }"
          [src]="'assets/svg/truckassist-table/trash-icon.svg'"
        ></svg-icon>
      </div>

      <!-- Print -->
      <div *ngIf="tableRowsSelected.length">
        <svg-icon
          [svgStyle]="{ 'width.px': 18, 'height.px': 17 }"
          [src]="'assets/svg/truckassist-table/print-icon.svg'"
        ></svg-icon>
      </div>

      <!-- Options -->
      <div
        #op="ngbPopover"
        (click)="onShowOptions(op)"
        [autoClose]="true"
        [ngbPopover]="optionsPopover"
        [placement]="'bottom-right'"
        [autoClose]="'outside'"
        popoverClass="options-popover"
        [ngClass]="{ 'active-options': optionsPopup?.isOpen() }"
        triggers="manual"
      >
        <svg-icon
          [svgStyle]="{ 'width.px': 18, 'height.px': 17 }"
          [src]="'assets/svg/truckassist-table/burger-icon.svg'"
        ></svg-icon>
      </div>
    </div>
  </div>

  <!-- OPEN GENERAL PM BUTTON -->
  <div
    class="general-pm-open-container"
    *ngIf="options.toolbarActions.showGeneralPmBtn"
    (click)="onToolBarAction('open-general-pm')"
  >
    <svg-icon
      [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
      [src]="'assets/svg/common/repair-pm/ic_default_pm.svg'"
    ></svg-icon>
  </div>

  <!-- OPEN MODAL BUTTON -->
  <div class="modal-open-container" (click)="onToolBarAction('open-modal')">
    <svg-icon
      [svgStyle]="{ 'width.px': 16, 'height.px': 16 }"
      [src]="'assets/svg/truckassist-table/plus-icon.svg'"
    ></svg-icon>
  </div>
</div>

<ng-template #optionsPopover let-data="data" data-toggle="popover">
  <div class="options-container">
    <div
      (click)="onOptions(option)"
      [ngClass]="{ 'active-option': option.active }"
      *ngFor="let option of optionsPopupContent"
      class="options"
    >
      <div class="icon">
        <svg-icon
          [svgStyle]="{ 'width.px': option.width, 'height.px': option.height }"
          [src]="option.svgPath"
        ></svg-icon>
      </div>

      <div class="text">{{ option.text }}</div>

      <div
        class="additional-drop-icon"
        *ngIf="option.additionalDropIcon && option.active"
      >
        <svg-icon
          [svgStyle]="{
            'width.px': option.additionalDropIcon.width,
            'height.px': option.additionalDropIcon.height
          }"
          [src]="option.additionalDropIcon.path"
        ></svg-icon>
      </div>
    </div>

    <div class="columns-options" *ngIf="optionsPopupContent[4].active">
      <div class="column" *ngFor="let column of columns; let i = index">
        <div class="checkbox" *ngIf="!column.isPined && i > 1">
          <input
            (click)="onToaggleColumn(column, i)"
            [checked]="!column.hidden"
            class="columns-options-checkbox"
            id="checkbox{{ i }}"
            type="checkbox"
          />
          <label class="columns-options-label" for="checkbox{{ i }}"></label>
        </div>

        <div class="not-allowed-action" *ngIf="column.isPined || i < 2">
          <svg-icon
            [svgStyle]="{
              'width.px': 14,
              'height.px': 14
            }"
            [src]="'assets/svg/truckassist-table/user-owner-icon.svg'"
          ></svg-icon>
        </div>
        <div class="column-text">
          {{ column.name !== "" ? column.name : column.title }}
        </div>
      </div>
    </div>
  </div>
</ng-template>
