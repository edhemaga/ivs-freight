<div
  class="toolbar-container"
  [ngStyle]="{ width: toolbarWidth, 'max-width.px': maxToolbarWidth }"
>
  <!-- LIST NAME -->
  <div
    class="list-name"
    *ngIf="listName && !options.toolbarActions.hideListName"
  >
    {{ listName }}
  </div>

  <!-- ONE TAB -->
  <div class="one-tab-container" *ngIf="tableData.length === 1">
    {{ tableData[0].length }}
  </div>

  <!-- TABS -->
  <div class="tab-wrapper" *ngIf="tableData.length > 1">
    <div
      *ngFor="let data of tableData; let i = index"
      class="tab-container"
      [ngClass]="{
        'tab-inactive': selectedTab !== data.field,
        'tab-active': selectedTab === data.field,
        'tab-margin': i !== tableData.length - 1
      }"
      (click)="onSelectTab(data)"
    >
      <div class="tab">
        <div class="data-count" *ngIf="!data.hideDataCount">
          {{ data.length }}
        </div>
        <svg-icon
          *ngIf="data.iconLink"
          [svgStyle]="{ 'width.px': 20, 'height.px': 20 }"
          [src]="data.iconLink"
        ></svg-icon>
        <div class="tab-title">{{ data.title }}</div>
      </div>
    </div>
  </div>

  <!-- TABLE FILTERS AND OTHER -->
  <div class="table-filter-and-other-container">
    <!-- TOTAL MONEY COUNT -->
    <div
      class="money-count-container"
      *ngIf="options.toolbarActions.showMoneyCount"
    >
      Nije Povezano
    </div>

    <!-- VIEW MODE SELECT -->
    <div
      class="view-mode-container"
      *ngIf="options?.toolbarActions?.viewModeOptions?.length"
    >
      <div
        *ngFor="let viewMode of options.toolbarActions.viewModeOptions"
        class="mode"
        [ngClass]="{
          'mode-active': viewMode.active
        }"
        (click)="changeModeView(viewMode.name)"
      >
        {{ viewMode.name }}
      </div>
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options?.toolbarActions?.viewModeOptions?.length"
    >
      <div class="border"></div>
    </div>

    <!-- SEARCH -->
    <app-truckassist-search
      [searchType]="'tabel'"
      [selectedTabData]="activeTableData"
    ></app-truckassist-search>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showLocationFilter"
    >
      <div class="border"></div>
    </div>

    <!-- LOCATION FILTER -->
    <app-filter
      *ngIf="options.toolbarActions.showLocationFilter"
      [type]="'locationFilter'"
      [icon]="'address'"
      [filterTitle]="'Location Filter'"
      [locationDefType]="true"
    >
    </app-filter>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showFuelStopFilter"
    >
      <div class="border"></div>
    </div>

    <!-- FUEL STOP FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showFuelStopFilter">
      Fuel Stop Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showDriverFilter"
    >
      <div class="border"></div>
    </div>

    <!-- DRIVER FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showDriverFilter">
      Driver Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showStateFilter"
    >
      <div class="border"></div>
    </div>

    <!-- STATE FILTER -->
    <app-filter
      *ngIf="options.toolbarActions.showStateFilter"
      [type]="'stateFilter'"
      [icon]="'state'"
      [filterTitle]="'State / Province Filter'"
      [defFilterHolder]="true"
      [leftSideIcon]="true"
    >
    </app-filter>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showArhiveFilter"
    >
      <div class="border"></div>
    </div>

    <!-- ARHIVE FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showArhiveFilter">
      Arhive Filter
    </div>

    <!-- BORDER -->
    <div class="border-container" *ngIf="options.toolbarActions.showTimeFilter">
      <div class="border"></div>
    </div>

    <!-- TIME FILTER -->
    <app-filter
      *ngIf="options.toolbarActions.showTimeFilter"
      [type]="'timeFilter'"
      [icon]="'pending'"
    >
    </app-filter>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showTruckFilter"
    >
      <div class="border"></div>
    </div>

    <!-- TRUCK FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showTruckFilter">
      Truck Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showTrailerFilter"
    >
      <div class="border"></div>
    </div>

    <!-- TRAILER FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showTrailerFilter">
      Trailer Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showInjuryFilter"
    >
      <div class="border"></div>
    </div>

    <!-- INJURY FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showInjuryFilter">
      Injury Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showTowingFilter"
    >
      <div class="border"></div>
    </div>

    <!-- TOWING FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showTowingFilter">
      Towing Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showHazmatFilter"
    >
      <div class="border"></div>
    </div>

    <!-- HAZMAT FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showHazmatFilter">
      Hazmat Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showRepairOrderFilter"
    >
      <div class="border"></div>
    </div>

    <!-- REPAIR ORDER FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showRepairOrderFilter">
      Repair Order Filter
    </div>

    <!-- BORDER -->
    <div class="border-container" *ngIf="options.toolbarActions.showPMFilter">
      <div class="border"></div>
    </div>

    <!-- PM FILTER -->
    <app-filter
      *ngIf="options.toolbarActions.showPMFilter"
      [type]="'pmFilter'"
      [icon]="'default_pm'"
      [filterTitle]="'PM Filter'"
      [defFilterHolder]="true"
      [noLeftIcon]="false"
      [leftSideIcon]="true"
    >
    </app-filter>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showCategoryFilter"
    >
      <div class="border"></div>
    </div>

    <!-- CATEGORY FILTER -->
    <app-filter
      *ngIf="options.toolbarActions.showCategoryFilter"
      [type]="'categoryRepairFilter'"
      [icon]="'ic_key-repair'"
      [filterTitle]="'Category Repair Filter'"
      [defFilterHolder]="true"
      [noLeftIcon]="false"
      [leftSideIcon]="true"
    >
    </app-filter>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showDispatcherFilter"
    >
      <div class="border"></div>
    </div>

    <!-- DISPECHER FILTER -->
    <app-filter
      *ngIf="options.toolbarActions.showDispatcherFilter"
      [type]="'userFilter'"
      [searchState]="true"
      [filterTitle]="'Dispatcher Filter'"
      [defFilterHolder]="true"
    >
    </app-filter>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showStatusFilter"
    >
      <div class="border"></div>
    </div>

    <!-- STATUS FILTER -->
    <app-filter
      *ngIf="options.toolbarActions.showStatusFilter"
      [type]="'statusFilter'"
      [icon]="'broker-half-circle'"
      [filterTitle]="'Status Filter'"
      [defFilterHolder]="true"
      [noLeftIcon]="false"
    >
    </app-filter>

    <!-- BORDER -->
    <div class="border-container" *ngIf="options.toolbarActions.showLtlFilter">
      <div class="border"></div>
    </div>

    <!-- LTL FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showLtlFilter">
      LTL Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showTruckTypeFilter"
    >
      <div class="border"></div>
    </div>

    <!-- TRUCK TYPE FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showTruckTypeFilter">
      Truck Type Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showTrailerTypeFilter"
    >
      <div class="border"></div>
    </div>

    <!-- TRAILER TYPE FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showTrailerTypeFilter">
      Trailer Type Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showLabelFilter"
    >
      <div class="border"></div>
    </div>

    <!-- LABEL FILTER -->
    <div class="no-filter" *ngIf="options.toolbarActions.showLabelFilter">
      Label Filter
    </div>

    <!-- BORDER -->
    <div
      class="border-container"
      *ngIf="options.toolbarActions.showMoneyFilter"
    >
      <div class="border"></div>
    </div>

    <!-- MONEY FILTER -->
    <app-filter
      *ngIf="options.toolbarActions.showMoneyFilter"
      [type]="'moneyFilter'"
      [icon]="'dollar'"
      [filterTitle]="'Money Filter'"
      [subType]="'all'"
      [moneyFilter]="true"
    >
    </app-filter>
  </div>

  <!-- TABLE ACTIONS -->
  <div class="table-actions">
    <div class="actions-container">
      <!-- Activation -->
      <div *ngIf="tableRowsSelected.length" class="action-div">
        <svg-icon
          [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
          [src]="'assets/svg/truckassist-table/activation-icon.svg'"
        ></svg-icon>
      </div>

      <!-- BORDER -->
      <div class="border-container" *ngIf="tableRowsSelected.length">
        <div class="border"></div>
      </div>

      <!-- Delete -->
      <div
        *ngIf="tableRowsSelected.length"
        (click)="deleteSelectedRows()"
        class="action-div"
      >
        <svg-icon
          [svgStyle]="{ 'width.px': 16, 'height.px': 18 }"
          [src]="'assets/svg/truckassist-table/trash-icon.svg'"
        ></svg-icon>
      </div>

      <!-- BORDER -->
      <div class="border-container" *ngIf="tableRowsSelected.length">
        <div class="border"></div>
      </div>

      <!-- Print -->
      <div *ngIf="tableRowsSelected.length" class="action-div">
        <svg-icon
          [svgStyle]="{ 'width.px': 18, 'height.px': 17 }"
          [src]="'assets/svg/truckassist-table/print-icon.svg'"
        ></svg-icon>
      </div>

      <!-- BORDER -->
      <div class="border-container" *ngIf="tableRowsSelected.length">
        <div class="border"></div>
      </div>

      <!-- Options -->
      <div
        #op="ngbPopover"
        (click)="onShowOptions(op)"
        [autoClose]="true"
        [ngbPopover]="optionsPopover"
        [placement]="'bottom-right'"
        [autoClose]="'outside'"
        popoverClass="toolbar-options-popover"
        [ngClass]="{ 'active-options': optionsPopupOpen }"
        triggers="manual"
        (hidden)="optionsPopupOpen = false"
        class="action-div"
      >
        <svg-icon
          [svgStyle]="{ 'width.px': 18, 'height.px': 17 }"
          [src]="'assets/svg/truckassist-table/burger-icon.svg'"
        ></svg-icon>
      </div>
    </div>
  </div>

  <!-- OPEN GENERAL PM BUTTON -->
  <div
    class="general-pm-open-container"
    *ngIf="options.toolbarActions.showGeneralPmBtn"
    (click)="onToolBarAction('open-general-pm')"
  >
    <svg-icon
      [svgStyle]="{ 'width.px': 18, 'height.px': 18 }"
      [src]="'assets/svg/common/repair-pm/ic_custom_pm.svg'"
    ></svg-icon>
  </div>

  <!-- OPEN MODAL BUTTON -->
  <div class="modal-open-container" (click)="onToolBarAction('open-modal')">
    <svg-icon
      [svgStyle]="{ 'width.px': 16, 'height.px': 16 }"
      [src]="'assets/svg/truckassist-table/plus-icon.svg'"
    ></svg-icon>
  </div>
</div>

<ng-template #optionsPopover let-data="data" data-toggle="popover">
  <div class="options-container">
    <div
      (click)="onOptions(option)"
      [ngClass]="{ 'active-option': option.active }"
      *ngFor="let option of optionsPopupContent"
      class="options"
    >
      <div class="icon">
        <svg-icon
          [svgStyle]="{ 'width.px': option.width, 'height.px': option.height }"
          [src]="option.svgPath"
        ></svg-icon>
      </div>

      <div class="text">{{ option.text }}</div>

      <div
        class="additional-drop-icon"
        *ngIf="option.additionalDropIcon && option.active"
      >
        <svg-icon
          [svgStyle]="{
            'width.px': option.additionalDropIcon.width,
            'height.px': option.additionalDropIcon.height
          }"
          [src]="option.additionalDropIcon.path"
        ></svg-icon>
      </div>
    </div>

    <div class="columns-options" *ngIf="optionsPopupContent[4].active">
      <div
        (click)="onToaggleColumn(column, i)"
        class="column"
        *ngFor="let column of columnsOptions; let i = index"
      >
        <div class="checkbox" *ngIf="!column.isPined">
          <input
            [checked]="!column.hidden"
            class="columns-options-checkbox"
            id="checkbox{{ i }}"
            type="checkbox"
          />
          <label class="columns-options-label" for="checkbox{{ i }}"></label>
        </div>

        <div class="not-allowed-action" *ngIf="column.isPined">
          <svg-icon
            [svgStyle]="{
              'width.px': 14,
              'height.px': 14
            }"
            [src]="'assets/svg/truckassist-table/user-owner-icon.svg'"
          ></svg-icon>
        </div>

        <div
          class="column-text"
          [ngClass]="{ 'selectable-text': !column.isPined }"
        >
          {{ column.name !== "" ? column.name : column.title }}
        </div>
      </div>
    </div>
  </div>
</ng-template>
