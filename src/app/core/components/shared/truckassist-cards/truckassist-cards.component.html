<div class="cards-container">
    <ng-container
        *ngFor="let card of viewData; let i = index; trackBy: trackCard"
    >
        <div class="custom-card">
            <!-- Card splited on left and right side -->

            <div
                class="card-body d-flex justify-content-between"
                [ngClass]="{
                    'body-active': isCardFlipped.includes(i),
                    'body-checked': isCardChecked.includes(i)
                }"
            >
                <!-- Left side of the card -->

                <div class="card-body-left p-1">
                    <!-- Head of the card -->

                    <div class="card-header d-flex align-items-center">
                        <div class="checkbox-holder d-flex align-items-center">
                            <!-- Checkbox -->

                            <span
                                class="checkbox-tooltip"
                                type="button"
                                ngbTooltip
                                mainTooltip="{{
                                    isCheckboxCheckedArray.includes(i)
                                        ? 'Clear'
                                        : 'Select'
                                }}"
                                tooltipBackground="#424242"
                                position="bottom"
                                [ngClass]="{
                                    'rotate-svg': isCardFlipped.includes(i),
                                    'svg-position': !isCardFlipped.includes(i)
                                }"
                            >
                                <input
                                    class="table-checkbox"
                                    type="checkbox"
                                    id="checkbox{{ i }}"
                                    (change)="onCheckboxSelect(i, card)"
                                />
                                <label
                                    class="table-checkbox-label"
                                    for="checkbox{{ i }}"
                                ></label>
                            </span>
                        </div>

                        <!-- Card Title -->

                        <div class="name d-flex ta-font-bold">
                            <!-- If Load Page -->

                            <ng-container *ngIf="page === 'Load'">
                                <div class="d-flex title-load">
                                    <svg-icon
                                        [src]="
                                            card?.type?.name === 'LTL'
                                                ? 'assets/svg/detail-cards/left-arrows.svg'
                                                : 'assets/svg/detail-cards/shuffle.svg'
                                        "
                                    ></svg-icon>

                                    <span class="title">
                                        <ng-container
                                            *ngIf="cardTitle !== 'name'"
                                        >
                                            INV-{{
                                                getValueByStringPath(
                                                    card,
                                                    cardTitle
                                                )
                                            }}
                                        </ng-container>

                                        <ng-container
                                            *ngIf="cardTitle === 'name'"
                                        >
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    cardTitle
                                                )
                                            }}
                                        </ng-container>
                                    </span>
                                </div>
                            </ng-container>

                            <!-- If Driver page -->

                            <ng-container
                                *ngIf="
                                    page === 'Driver' &&
                                    selectedTab !== 'applicant'
                                "
                            >
                                <!-- If driver has image -->

                                <ng-container *ngIf="card.avatarImg">
                                    <div class="image-holder">
                                        <img
                                            class="image-hover"
                                            [src]="card.avatarImg"
                                        />
                                        <ng-container
                                            *ngIf="card.owner !== null"
                                        >
                                            <svg-icon
                                                class="is-owner"
                                                [src]="
                                                    'assets/svg/common/ic_owner-status.svg'
                                                "
                                            >
                                            </svg-icon>
                                        </ng-container>
                                    </div>
                                </ng-container>
                                <!-- If driver doesen't have image -->

                                <ng-container *ngIf="!card.avatarImg">
                                    <div class="image-holder">
                                        <span
                                            class="image-hover d-flex align-items-center justify-content-center ta-font-extra-bold"
                                            [style.background]="
                                                card.avatarColor.background
                                            "
                                            [style.color]="
                                                card.avatarColor.color
                                            "
                                        >
                                            {{ card.textShortName }}</span
                                        >
                                        <ng-container
                                            *ngIf="card.owner !== null"
                                        >
                                            <svg-icon
                                                class="is-owner"
                                                [src]="
                                                    'assets/svg/common/ic_owner-status.svg'
                                                "
                                            >
                                            </svg-icon>
                                        </ng-container>
                                    </div>
                                </ng-container>
                                <span class="title">
                                    {{ getValueByStringPath(card, cardTitle) }}
                                </span>
                            </ng-container>

                            <!-- If Repair Page -->
                            <ng-container *ngIf="page === 'Repair'">
                                <div
                                    class="finish-order-holder d-flex justify-content-between"
                                >
                                    <span class="title">{{
                                        getValueByStringPath(card, cardTitle)
                                    }}</span>

                                    <ng-container *ngIf="card.isRepairOrder">
                                        <span
                                            class="finish-order-action ta-font-bold d-flex align-items-center"
                                            (click)="onFinishOrder(card)"
                                        >
                                            Finish Order
                                        </span>
                                    </ng-container>
                                </div>
                            </ng-container>
                            <!-- Rest of the pages -->

                            <ng-container
                                *ngIf="
                                    page !== 'Load' &&
                                    page !== 'Driver' &&
                                    page !== 'Repair'
                                "
                            >
                                <span class="title">
                                    {{ getValueByStringPath(card, cardTitle) }}
                                </span>
                            </ng-container>
                        </div>

                        <!-- Card Title End-->
                    </div>

                    <!-- Card body front-->

                    <div
                        class="flipped"
                        [ngClass]="{
                            'card-body-content': !isCardFlipped.includes(i)
                        }"
                    >
                        <!-- Card body item -->

                        <ng-container
                            *ngFor="
                                let rowsFront of displayRowsFront;
                                trackBy: trackCard
                            "
                        >
                            <div class="item-body">
                                <div class="top-item-body">
                                    <!-- For repair page title -->

                                    <ng-container
                                        *ngIf="
                                            rowsFront.title === 'Repair Shop'
                                        "
                                    >
                                        <ng-container
                                            *ngIf="card.isRepairOrder"
                                        >
                                            Repair Shop
                                        </ng-container>
                                        <ng-container
                                            *ngIf="!card.isRepairOrder"
                                        >
                                            Cost
                                        </ng-container>
                                    </ng-container>
                                    <!-- For rest of the pages title -->

                                    <ng-container
                                        *ngIf="
                                            rowsFront.title !== 'Repair Shop'
                                        "
                                    >
                                        {{ rowsFront.title }}
                                    </ng-container>
                                </div>

                                <div
                                    #parentElement
                                    class="bottom-item-body d-flex align-items-center"
                                    [ngClass]="{
                                        gap: rowsFront.title !== 'VIN No.'
                                    }"
                                >
                                    <!-- Load page body -->

                                    <ng-container *ngIf="page === 'Load'">
                                        <ng-container
                                            *ngIf="
                                                getValueByStringPath(
                                                    card,
                                                    rowsFront.endpoint
                                                ) === 'Hazardous'
                                            "
                                        >
                                            <svg-icon
                                                [src]="
                                                    'assets/svg/common/load/ic_hazardous_triangle.svg'
                                                "
                                            >
                                            </svg-icon>
                                            <span>
                                                {{
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.endpoint
                                                    )
                                                }}</span
                                            >
                                        </ng-container>

                                        <!-- If STATUS title this will be aplied in body -->

                                        <ng-container
                                            *ngIf="rowsFront.title === 'Status'"
                                        >
                                            <span
                                                class="ta-font-black status"
                                                [ngClass]="{
                                                    assigned:
                                                        getValueByStringPath(
                                                            card,
                                                            rowsFront.endpoint
                                                        ) === 'Assigned',
                                                    dispatched:
                                                        getValueByStringPath(
                                                            card,
                                                            rowsFront.endpoint
                                                        ) === 'Dispatched',
                                                    loaded:
                                                        getValueByStringPath(
                                                            card,
                                                            rowsFront.endpoint
                                                        ) === 'Loaded'
                                                }"
                                            >
                                                {{
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.endpoint
                                                    ) | uppercase
                                                }}</span
                                            >
                                        </ng-container>

                                        <!-- If not STATUS title this will be in body -->

                                        <ng-container
                                            *ngIf="
                                                rowsFront.title !== 'Status' &&
                                                getValueByStringPath(
                                                    card,
                                                    rowsFront.endpoint
                                                ) !== 'Hazardous'
                                            "
                                        >
                                            <span
                                                class="d-flex justify-content-center align-items-center"
                                                [ngClass]="
                                                    rowsFront.endpoint ===
                                                    'loadPickup.count'
                                                        ? 'load-span pickup ta-font-bold'
                                                        : '' ||
                                                          rowsFront.endpoint ===
                                                              'loadDelivery.count'
                                                        ? 'load-span delivery ta-font-bold'
                                                        : ''
                                                "
                                            >
                                                {{
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.endpoint
                                                    )
                                                }}
                                            </span>
                                        </ng-container>

                                        <!-- If there is seccond endpoint  -->

                                        <ng-container
                                            *ngIf="rowsFront.secondEndpoint"
                                        >
                                            <span>
                                                {{
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.secondEndpoint
                                                    )
                                                }}
                                            </span>
                                        </ng-container>

                                        <!-- If there is third endpoint -->

                                        <ng-container
                                            *ngIf="rowsFront.thirdEndpoint"
                                        >
                                            <span class="muted">
                                                {{
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.thirdEndpoint
                                                    )
                                                }}
                                            </span>
                                        </ng-container>
                                    </ng-container>

                                    <!-- Customer page body -->

                                    <ng-container *ngIf="page === 'Customer'">
                                        <ng-container
                                            *ngIf="
                                                rowsFront.endpoint !==
                                                    'tableRaiting.likeCount' &&
                                                rowsFront.endpoint !==
                                                    'availableCredit'
                                            "
                                        >
                                            <span>
                                                {{
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.endpoint
                                                    )
                                                }}
                                            </span>
                                        </ng-container>

                                        <!-- Available Credit -->

                                        <ng-container
                                            *ngIf="
                                                rowsFront.endpoint ===
                                                'availableCredit'
                                            "
                                        >
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    rowsFront.endpoint
                                                )
                                            }}
                                        </ng-container>

                                        <!-- Rating & Review -->

                                        <ng-container
                                            *ngIf="
                                                rowsFront.endpoint ===
                                                'tableRaiting.likeCount'
                                            "
                                        >
                                            <div class="rating-holder d-flex">
                                                <span
                                                    class="rating ta-font-semi-bold d-flex align-items-center"
                                                >
                                                    <svg-icon
                                                        class="svg-like"
                                                        [src]="
                                                            'assets/svg/common/ic_like.svg'
                                                        "
                                                    ></svg-icon>
                                                    <span>
                                                        {{
                                                            getValueByStringPath(
                                                                card,
                                                                rowsFront.endpoint
                                                            )
                                                        }}
                                                    </span>
                                                </span>
                                                <span
                                                    class="rating ta-font-semi-bold d-flex align-items-center"
                                                >
                                                    <svg-icon
                                                        class="svg-dislike"
                                                        [src]="
                                                            'assets/svg/common/ic_dislike.svg'
                                                        "
                                                    ></svg-icon>
                                                    <span>
                                                        {{
                                                            getValueByStringPath(
                                                                card,
                                                                rowsFront.secondEndpoint
                                                            )
                                                        }}
                                                    </span>
                                                </span>
                                            </div>
                                        </ng-container>
                                    </ng-container>

                                    <!-- Driver page body -->

                                    <ng-container *ngIf="page === 'Driver'">
                                        {{
                                            getValueByStringPath(
                                                card,
                                                rowsFront.endpoint
                                            )
                                        }}
                                    </ng-container>

                                    <!-- Truck and Trailer page body -->

                                    <ng-container
                                        *ngIf="
                                            page === 'Truck' ||
                                            page === 'Trailer'
                                        "
                                    >
                                        <ng-container
                                            *ngIf="
                                                rowsFront.title === 'VIN No.'
                                            "
                                        >
                                            <span>
                                                {{
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.endpoint
                                                    )
                                                }}
                                            </span>
                                            <span class="ta-font-semi-bold">
                                                {{
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.secondEndpoint
                                                    )
                                                }}
                                            </span>
                                        </ng-container>

                                        <ng-container
                                            *ngIf="
                                                rowsFront.title === 'Mileage'
                                            "
                                        >
                                            <span>
                                                {{
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.endpoint
                                                    )
                                                }}
                                            </span>
                                            <ng-container
                                                *ngIf="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.endpoint
                                                    ) !== '/'
                                                "
                                            >
                                                <span class="muted">mi</span>
                                            </ng-container>
                                        </ng-container>

                                        <!-- Rest of the elements inside truck card -->
                                        <ng-container
                                            *ngIf="
                                                rowsFront.title !== 'VIN No.' &&
                                                rowsFront.title !== 'Mileage'
                                            "
                                        >
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    rowsFront.endpoint
                                                )
                                            }}
                                        </ng-container>
                                    </ng-container>

                                    <!-- Repair page body  -->
                                    <ng-container *ngIf="page === 'Repair'">
                                        <ng-container
                                            *ngIf="rowsFront.title === 'Item'"
                                        >
                                            <div
                                                class="items-container-body d-flex align-items-center"
                                            >
                                                <span
                                                    class="checkbox-tooltip d-flex"
                                                    type="button"
                                                    ngbTooltip
                                                    mainTooltip="View Items"
                                                    tooltipBackground="#424242"
                                                    position="bottom"
                                                >
                                                    <div
                                                        #description="ngbPopover"
                                                        class="description-container d-flex align-items-center"
                                                        (click)="
                                                            onShowDescriptionDropdown(
                                                                description,
                                                                card
                                                            )
                                                        "
                                                        [ngbPopover]="
                                                            descriptionCardsPopover
                                                        "
                                                        container="body"
                                                        [placement]="
                                                            'bottom-left'
                                                        "
                                                        popoverClass="table-description-popover"
                                                        [style.width.px]="
                                                            elementWidth
                                                        "
                                                        triggers="manual"
                                                    ></div>
                                                    <div
                                                        #itemsRepair
                                                        class="items-container"
                                                        [innerHTML]="
                                                            objectsWithDropDown(
                                                                card,
                                                                rowsFront.endpoint
                                                            )
                                                        "
                                                    ></div>
                                                </span>
                                            </div>
                                        </ng-container>

                                        <!-- If finished or not -->
                                        <ng-container
                                            *ngIf="
                                                rowsFront.title ===
                                                'Repair Shop'
                                            "
                                        >
                                            <ng-container
                                                *ngIf="card.isRepairOrder"
                                            >
                                                {{ card?.repairShop?.name }}
                                            </ng-container>

                                            <ng-container
                                                *ngIf="!card.isRepairOrder"
                                            >
                                                {{
                                                    card?.tabelDescriptionDropTotal
                                                }}
                                            </ng-container>
                                        </ng-container>

                                        <!-- Repair Shop -->
                                        <ng-container
                                            *ngIf="
                                                rowsFront.title === 'Services'
                                            "
                                        >
                                            <ng-container
                                                *ngFor="
                                                    let item of card.serviceTypes
                                                "
                                            >
                                                <svg-icon
                                                    class="service-svg"
                                                    [src]="
                                                        '/assets/svg/common/repair-services/' +
                                                        item.logoName
                                                    "
                                                    [ngClass]="{
                                                        'active-svg':
                                                            item.active
                                                    }"
                                                ></svg-icon>
                                            </ng-container>
                                        </ng-container>

                                        <!-- Rest of body items -->

                                        <ng-container
                                            *ngIf="
                                                rowsFront.title !== 'Item' &&
                                                rowsFront.title !==
                                                    'Repair Shop' &&
                                                rowsFront.title !== 'Services'
                                            "
                                        >
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    rowsFront.endpoint
                                                )
                                            }}
                                        </ng-container>
                                    </ng-container>

                                    <!-- PM page body -->
                                    <ng-container *ngIf="page === 'PM'">
                                        <div
                                            class="progresbar-pm d-flex align-items-center"
                                        >
                                            <span
                                                class="checkbox-tooltip"
                                                type="button"
                                                ngbTooltip
                                                mainTooltip="View PM"
                                                tooltipBackground="#424242"
                                                position="bottom"
                                            >
                                                <app-progres-bar
                                                    [percents]="
                                                        getValueByStringPath(
                                                            card,
                                                            rowsFront.secondEndpoint
                                                        )
                                                    "
                                                    [text]="
                                                        getValueByStringPath(
                                                            card,
                                                            rowsFront.endpoint
                                                        )
                                                    "
                                                ></app-progres-bar>
                                            </span>
                                        </div>
                                    </ng-container>

                                    <!-- Owner page body -->
                                    <ng-container *ngIf="page === 'Owner'">
                                        <!-- Fleet -->
                                        <ng-container
                                            *ngIf="rowsFront.title === 'Fleet'"
                                        >
                                            <div class="fleet-holder d-flex">
                                                <div
                                                    class="ta-font-semi-bold d-flex fleet align-items-center"
                                                >
                                                    <svg-icon
                                                        class="d-flex justify-content-center svg-holder"
                                                        [src]="
                                                            'assets/svg/common/dropdown-truck.svg'
                                                        "
                                                        [ngClass]="{
                                                            'no-count':
                                                                card.truckCount ===
                                                                0
                                                        }"
                                                    ></svg-icon>

                                                    <span
                                                        [ngClass]="{
                                                            'no-count-text':
                                                                card.truckCount ===
                                                                0
                                                        }"
                                                    >
                                                        {{ card.truckCount }}
                                                    </span>
                                                </div>

                                                <div
                                                    class="ta-font-semi-bold d-flex fleet align-items-center"
                                                >
                                                    <svg-icon
                                                        class="d-flex justify-content-center svg-holder"
                                                        [src]="
                                                            'assets/svg/common/dropdown-trailer.svg'
                                                        "
                                                        [ngClass]="{
                                                            'no-count':
                                                                card.trailerCount ===
                                                                0
                                                        }"
                                                    ></svg-icon>

                                                    <span
                                                        [ngClass]="{
                                                            'no-count-text':
                                                                card.trailerCount ===
                                                                0
                                                        }"
                                                    >
                                                        {{ card.trailerCount }}
                                                    </span>
                                                </div>
                                            </div>
                                        </ng-container>

                                        <ng-container
                                            *ngIf="rowsFront.title !== 'Fleet'"
                                        >
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    rowsFront.endpoint
                                                )
                                            }}
                                        </ng-container>
                                    </ng-container>

                                    <!-- Account page body -->
                                    <ng-container *ngIf="page === 'Account'">
                                        <ng-container
                                            *ngIf="
                                                rowsFront.title !== 'Label' &&
                                                rowsFront.title !== 'Password'
                                            "
                                        >
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    rowsFront.endpoint
                                                )
                                            }}
                                        </ng-container>

                                        <ng-container
                                            *ngIf="
                                                rowsFront.title === 'Password'
                                            "
                                        >
                                            <div
                                                appTextToggle="{{
                                                    getValueByStringPath(
                                                        card,
                                                        rowsFront.endpoint
                                                    )
                                                }}"
                                            ></div>
                                        </ng-container>

                                        <ng-container
                                            *ngIf="rowsFront.title === 'Label'"
                                        >
                                            <div
                                                [style.width.px]="elementWidth"
                                            >
                                                <app-ta-input-dropdown-label
                                                    [formControl]="
                                                        dropdownSelectionArray
                                                            .controls[i]
                                                    "
                                                    [inputConfig]="{
                                                        name: 'Input Dropdown Label',
                                                        type: 'text',
                                                        placeholderIcon:
                                                            'ic_dynamic_label',
                                                        dropdownLabel: true,
                                                        dropdownWidthClass:
                                                            'w-col-' +
                                                            elementWidth,
                                                        textTransform:
                                                            'lowercase',
                                                        minLength: 1,
                                                        blackInput: true,
                                                        hideClear: true,
                                                        hideDropdownArrow: true,
                                                        multiselectDropdown: true,
                                                        maxLength: 12,
                                                        showCount: false,
                                                        customClass:
                                                            'input-dropdown-table',
                                                        commands: {
                                                            active: false,
                                                            type: 'confirm-cancel',
                                                            firstCommand: {
                                                                popup: {
                                                                    name: 'Confirm',
                                                                    backgroundColor:
                                                                        '#3074d3'
                                                                },
                                                                name: 'confirm',
                                                                svg: 'assets/svg/ic_spec-confirm.svg'
                                                            },
                                                            secondCommand: {
                                                                popup: {
                                                                    name: 'Cancel',
                                                                    backgroundColor:
                                                                        '#2f2f2f'
                                                                },
                                                                name: 'cancel',
                                                                svg: 'assets/svg/ic_x.svg'
                                                            }
                                                        }
                                                    }"
                                                    [colors]="card.colorRes"
                                                    [options]="card.colorLabels"
                                                    [selectedLabel]="
                                                        selectedContactLabel[i]
                                                    "
                                                    [selectedLabelColor]="
                                                        selectedContactColor
                                                    "
                                                    (pickExistLabel)="
                                                        onPickExistLabel(
                                                            $event,
                                                            i
                                                        )
                                                    "
                                                    (pickColorLabel)="
                                                        onSelectColorLabel(
                                                            $event,
                                                            i
                                                        )
                                                    "
                                                    (saveLabel)="
                                                        onSaveLabel($event, i)
                                                    "
                                                >
                                                </app-ta-input-dropdown-label>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                </div>
                            </div>
                        </ng-container>
                    </div>

                    <!-- Card body Back -->

                    <div
                        class="flipped"
                        [ngClass]="{
                            'card-body-content': isCardFlipped.includes(i)
                        }"
                    >
                        <!-- First item in back of the card -->

                        <ng-container
                            *ngFor="
                                let rowsBack of displayRowsBack;
                                trackBy: trackCard
                            "
                        >
                            <div class="item-body">
                                <div class="top-item-body">
                                    {{ rowsBack.title }}
                                </div>
                                <div
                                    class="bottom-item-body d-flex align-items-center"
                                >
                                    <!-- Load Page Body -->

                                    <ng-container *ngIf="page === 'Load'">
                                        <ng-container>
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    rowsBack.endpoint
                                                )
                                            }}

                                            <!-- if miles add mi -->

                                            <ng-container
                                                *ngIf="
                                                    rowsBack.endpoint ===
                                                    'totalMiles'
                                                "
                                                ><span class="muted"
                                                    >mi</span
                                                ></ng-container
                                            >
                                        </ng-container>
                                    </ng-container>

                                    <!-- Customer Page Body -->

                                    <ng-container *ngIf="page === 'Customer'">
                                        <!-- Rest of body items -->

                                        <ng-container
                                            *ngIf="
                                                rowsBack.endpoint !==
                                                    'revenue' &&
                                                rowsBack.endpoint !==
                                                    'tableRaiting.likeCount'
                                            "
                                        >
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    rowsBack.endpoint
                                                )
                                            }}
                                        </ng-container>

                                        <!-- Rating & Review -->

                                        <ng-container
                                            *ngIf="
                                                rowsBack.endpoint ===
                                                'tableRaiting.likeCount'
                                            "
                                        >
                                            <div class="rating-holder d-flex">
                                                <span
                                                    class="rating ta-font-semi-bold d-flex align-items-center"
                                                >
                                                    <svg-icon
                                                        class="svg-like"
                                                        [src]="
                                                            'assets/svg/common/ic_like.svg'
                                                        "
                                                    ></svg-icon>
                                                    <span>
                                                        {{
                                                            getValueByStringPath(
                                                                card,
                                                                rowsBack.endpoint
                                                            )
                                                        }}
                                                    </span>
                                                </span>
                                                <span
                                                    class="rating ta-font-semi-bold d-flex align-items-center"
                                                >
                                                    <svg-icon
                                                        class="svg-dislike"
                                                        [src]="
                                                            'assets/svg/common/ic_dislike.svg'
                                                        "
                                                    ></svg-icon>
                                                    <span>
                                                        {{
                                                            getValueByStringPath(
                                                                card,
                                                                rowsBack.secondEndpoint
                                                            )
                                                        }}
                                                    </span>
                                                </span>
                                            </div>
                                        </ng-container>

                                        <!-- Format revanue -->

                                        <ng-container
                                            *ngIf="
                                                rowsBack.endpoint === 'revenue'
                                            "
                                        >
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    rowsBack.endpoint
                                                )
                                            }}
                                        </ng-container>
                                    </ng-container>

                                    <!--  Driver Page Body -->

                                    <ng-container *ngIf="page === 'Driver'">
                                        <!-- Hired -->

                                        <ng-container
                                            *ngIf="
                                                rowsBack.endpoint === 'hired'
                                            "
                                        >
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    rowsBack.endpoint
                                                )
                                            }}
                                        </ng-container>

                                        <!-- Driver Cdl Progres Bar -->

                                        <ng-container
                                            *ngIf="
                                                rowsBack.endpoint ===
                                                'tableMedicalData.expirationDaysText'
                                            "
                                        >
                                            <app-progres-bar
                                                [percents]="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsBack.secondEndpoint
                                                    )
                                                "
                                                [text]="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsBack.endpoint
                                                    )
                                                "
                                            ></app-progres-bar>
                                        </ng-container>

                                        <!-- Driver Medical Progres Bar -->

                                        <ng-container
                                            *ngIf="
                                                rowsBack.endpoint ===
                                                'tableCdlDetailExpiration.expirationDaysText'
                                            "
                                        >
                                            <app-progres-bar
                                                [percents]="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsBack.secondEndpoint
                                                    )
                                                "
                                                [text]="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsBack.endpoint
                                                    )
                                                "
                                            ></app-progres-bar>
                                        </ng-container>

                                        <!-- Driver MVR Progres Bar -->

                                        <ng-container
                                            *ngIf="
                                                rowsBack.endpoint ===
                                                'tableMvrDetailsExpiration.expirationDaysText'
                                            "
                                        >
                                            <app-progres-bar
                                                [percents]="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsBack.secondEndpoint
                                                    )
                                                "
                                                [text]="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsBack.endpoint
                                                    )
                                                "
                                            ></app-progres-bar>
                                        </ng-container>
                                    </ng-container>

                                    <!-- Truck Page Body -->

                                    <ng-container
                                        *ngIf="
                                            page === 'Truck' ||
                                            page === 'Trailer'
                                        "
                                    >
                                        <ng-container
                                            *ngIf="
                                                rowsBack.title ===
                                                    'FHWA Exp.' ||
                                                rowsBack.title ===
                                                    'Licence Exp.'
                                            "
                                        >
                                            <app-progres-bar
                                                [percents]="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsBack.secondEndpoint
                                                    )
                                                "
                                                [text]="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsBack.endpoint
                                                    )
                                                "
                                            ></app-progres-bar>
                                        </ng-container>

                                        <ng-container
                                            *ngIf="rowsBack.title === 'Color'"
                                        >
                                            <span
                                                class="color-circle"
                                                [style.background]="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsBack.endpoint
                                                    )
                                                "
                                            ></span>
                                            <span>{{
                                                getValueByStringPath(
                                                    card,
                                                    rowsBack.secondEndpoint
                                                )
                                            }}</span>
                                        </ng-container>

                                        <!-- Rest of the items -->
                                        <ng-container
                                            *ngIf="
                                                rowsBack.title !==
                                                    'FHWA Exp.' &&
                                                rowsBack.title !==
                                                    'Licence Exp.' &&
                                                rowsBack.title !== 'Color'
                                            "
                                            >{{
                                                getValueByStringPath(
                                                    card,
                                                    rowsBack.endpoint
                                                )
                                            }}</ng-container
                                        >
                                    </ng-container>

                                    <!-- Repair Page Body -->
                                    <ng-container *ngIf="page === 'Repair'">
                                        {{
                                            getValueByStringPath(
                                                card,
                                                rowsBack.endpoint
                                            )
                                        }}

                                        <ng-container
                                            *ngIf="
                                                rowsBack.endpoint ===
                                                'tableRaiting.likeCount'
                                            "
                                        >
                                            <div class="rating-holder d-flex">
                                                <span
                                                    class="rating ta-font-semi-bold d-flex align-items-center"
                                                >
                                                    <svg-icon
                                                        class="svg-like"
                                                        [src]="
                                                            'assets/svg/common/ic_like.svg'
                                                        "
                                                    ></svg-icon>
                                                    <span>
                                                        {{
                                                            getValueByStringPath(
                                                                card,
                                                                rowsBack.endpoint
                                                            )
                                                        }}
                                                    </span>
                                                </span>
                                                <span
                                                    class="rating ta-font-semi-bold d-flex align-items-center"
                                                >
                                                    <svg-icon
                                                        class="svg-dislike"
                                                        [src]="
                                                            'assets/svg/common/ic_dislike.svg'
                                                        "
                                                    ></svg-icon>
                                                    <span>
                                                        {{
                                                            getValueByStringPath(
                                                                card,
                                                                rowsBack.secondEndpoint
                                                            )
                                                        }}
                                                    </span>
                                                </span>
                                            </div>
                                        </ng-container>
                                    </ng-container>

                                    <!-- PM Page Body -->
                                    <ng-container *ngIf="page === 'PM'">
                                        {{
                                            getValueByStringPath(
                                                card,
                                                rowsBack.endpoint
                                            )
                                        }}
                                    </ng-container>

                                    <!-- Owner Page Body -->
                                    <ng-container *ngIf="page === 'Owner'">
                                        <ng-container
                                            *ngIf="
                                                rowsBack.title !==
                                                'Bank Account'
                                            "
                                        >
                                            {{
                                                getValueByStringPath(
                                                    card,
                                                    rowsBack.endpoint
                                                )
                                            }}
                                        </ng-container>

                                        <ng-container
                                            *ngIf="
                                                rowsBack.title ===
                                                'Bank Account'
                                            "
                                        >
                                            <svg-icon
                                                [src]="
                                                    'assets/svg/common/ic_password.svg'
                                                "
                                            ></svg-icon>
                                            <span
                                                class="masked-number"
                                                [innerHTML]="
                                                    getValueByStringPath(
                                                        card,
                                                        rowsBack.endpoint
                                                    ) | maskNumber : 'masked'
                                                "
                                            ></span>
                                        </ng-container>
                                    </ng-container>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </div>

                <!-- Right side of card -->

                <div class="card-body-right">
                    <div class="top-side">
                        <!-- Open dropdown element-->

                        <div
                            class="right-side-svg d-flex align-items-center justify-content-center flex-column"
                            [ngClass]="
                                dropDownIsOpened === card.id &&
                                Dropdown.isOpen()
                                    ? 'active-item'
                                    : ''
                            "
                        >
                            <div
                                #Dropdown="ngbPopover"
                                (click)="toggleDropdown(Dropdown, card)"
                                [autoClose]="'outside'"
                                [ngbPopover]="dropdownPopover"
                                [placement]="'bottom-right'"
                                class="table-dropdown-container"
                                container="body"
                                popoverClass="table-dropdown-popover"
                                triggers="manual"
                                (hidden)="onRemoveClickEventListener()"
                            >
                                <svg-icon
                                    class="dots"
                                    [ngClass]="
                                        dropDownIsOpened === card.id &&
                                        Dropdown.isOpen()
                                            ? 'rotate-dropdown-svg'
                                            : 'dropdown-svg-back'
                                    "
                                    [src]="
                                        'assets/svg/common/ic_horizontal_dots_details.svg'
                                    "
                                ></svg-icon>
                            </div>
                        </div>

                        <!-- Note element -->

                        <div
                            class="note-container right-side-svg d-flex align-items-center justify-content-center flex-column"
                        >
                            <span
                                class="note-tooltip d-flex align-items-center"
                                type="button"
                                ngbTooltip
                                mainTooltip="View Note"
                                tooltipBackground="#424242"
                                position="bottom"
                            >
                                <app-ta-note
                                    [note]="card.note"
                                    [mainData]="card"
                                    [entityId]="card.id"
                                    [openedAll]="false"
                                    [parking]="false"
                                >
                                </app-ta-note>
                            </span>
                        </div>

                        <!-- Comments element -->

                        <ng-container *ngIf="page === 'Load'">
                            <div
                                class="right-side-svg d-flex align-items-center justify-content-center flex-column"
                            >
                                <span
                                    class="comment-number ta-font-semi-bold"
                                    >{{ card?.commentsCount }}</span
                                >
                                <svg-icon
                                    class="comment"
                                    [src]="
                                        'assets/svg/detail-cards/comment - count.svg'
                                    "
                                ></svg-icon>
                                <ng-container *ngIf="card?.commentsCount > 0">
                                    <svg-icon
                                        class="notification"
                                        [src]="
                                            'assets/svg/applicant/notification-light.svg'
                                        "
                                    ></svg-icon>
                                </ng-container>
                            </div>
                        </ng-container>

                        <!-- Favorite element -->
                        <ng-container *ngIf="page === 'Repair'">
                            <div
                                class="right-side-svg-favorite d-flex align-items-center justify-content-center flex-column"
                                (click)="onFavorite(card)"
                            >
                                <span
                                    class="tooltip-card d-flex align-items-center"
                                    type="button"
                                    ngbTooltip
                                    mainTooltip="Mark as Favourite"
                                    tooltipBackground="#424242"
                                    position="bottom"
                                >
                                    <svg-icon
                                        class="favorite"
                                        [src]="
                                            'assets/svg/truckassist-table/favorite.svg'
                                        "
                                    ></svg-icon>
                                </span>
                            </div>
                        </ng-container>

                        <!-- Atachemnts element -->

                        <ng-container *ngIf="thirdLabelRightSide?.count > 0">
                            <div
                                class="right-side-svg d-flex align-items-center justify-content-center flex-column"
                            >
                                <svg-icon
                                    [src]="
                                        'assets/svg/truckassist-table/attachment-icon.svg'
                                    "
                                ></svg-icon>
                                <span class="ta-font-bold">{{
                                    card?.fileCount
                                }}</span>
                            </div>
                        </ng-container>
                    </div>

                    <!-- Expand element -->

                    <div
                        class="bottom-side d-flex justify-content-center"
                        (click)="flipCard(i)"
                    >
                        <span
                            class="expand-card"
                            type="button"
                            ngbTooltip
                            mainTooltip="Expand Card"
                            tooltipBackground="#424242"
                            position="bottom"
                            [ngClass]="{
                                'rotate-svg': isCardFlipped.includes(i),
                                'svg-position': !isCardFlipped.includes(i)
                            }"
                        >
                            <svg-icon
                                [src]="'assets/svg/common/resize-arrow.svg'"
                            ></svg-icon>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>
</div>
<!-- Dropdown -->

<ng-template #dropdownPopover let-data="data">
    <div class="table-list-dropdown">
        <div
            class="table-list-dropdown-content-container"
            [ngClass]="{
                'table-list-dropdown-inner-dropdown-active':
                    action?.isInnerDropActive
            }"
            *ngFor="let action of data"
        >
            <!-- Action -->

            <div
                class="table-list-dropdown-content"
                (click)="
                    !action?.isDropdown
                        ? onDropAction(action, card)
                        : onShowInnerDropdown(action)
                "
                [ngClass]="{
                    'table-list-dropdown-content-muted': action.mutedStyle,
                    'table-list-dropdown-content-dropdown': action?.isDropdown,
                    'table-list-dropdown-content-dropdown-active':
                        action?.isInnerDropActive
                }"
                [ngStyle]="action?.tableListDropdownContentStyle"
            >
                <div class="table-list-dropdown-content-text">
                    {{ action?.title }}
                </div>
                <svg-icon
                    *ngIf="action?.svgUrl"
                    [class]="action?.svgClass"
                    class="table-list-dropdown-content-icon"
                    [ngClass]="{
                        'inner-dropdown-open': action?.isInnerDropActive
                    }"
                    [src]="action?.svgUrl"
                    [svgStyle]="{
                        'width.px': action?.svgStyle.width,
                        'height.px': action?.svgStyle.height
                    }"
                ></svg-icon>
            </div>

            <!-- Inner Dropdown -->

            <div
                class="table-list-inner-dropdown"
                [ngClass]="{
                    'table-list-inner-dropdown-active':
                        action?.isInnerDropActive
                }"
                [innerHtml]="
                    action?.innerDropElement ? action?.innerDropElement : null
                "
            ></div>

            <!-- Border -->

            <div
                class="table-list-dropdown-border-container"
                *ngIf="action?.hasBorder"
            >
                <div class="table-list-dropdown-border"></div>
            </div>
        </div>
    </div>
</ng-template>

<!-- Description-->
<ng-template #descriptionCardsPopover let-data="data">
    <div class="card-dropdown-container" [style.width.px]="elementWidth">
        <div class="description-titles d-flex align-items-center">
            <div
                class="number-title ta-font-bold d-flex align-items-center justify-content-center"
            >
                #
            </div>
            <div class="dropdown-titles d-flex justify-content-between">
                <ng-container *ngIf="data.isRepairOrder">
                    <p
                        class="dropdown-left m-0 ta-font-bold d-flex align-items-center"
                    >
                        DESCRIPTION
                    </p>
                    <p
                        class="dropdown-right m-0 ta-font-bold d-flex align-items-center"
                    >
                        QTY
                    </p>
                </ng-container>
                <ng-container *ngIf="!data.isRepairOrder">
                    <p
                        class="dropdown-left m-0 ta-font-bold d-flex align-items-center"
                    >
                        DESC  QTY  PRICE
                    </p>
                    <div class="dropdown-right">
                        <p class="price-total-title ta-font-semi-bold m-0">
                            {{ data.tabelDescriptionDropTotal }}
                        </p>
                    </div>
                </ng-container>
            </div>
        </div>
        <div class="description-items">
            <div class="description-item d-flex flex-column">
                <ng-container
                    *ngFor="
                        let item of data.descriptionItems;
                        let i = index;
                        trackBy: trackCard
                    "
                >
                    <div class="d-flex align-items-center item-description">
                        <div
                            class="item-index d-flex justify-content-center align-items-center"
                        >
                            {{ i + 1 }}
                        </div>
                        <ng-container *ngIf="item.pmDescription">
                            <div class="pm-item">
                                <svg-icon
                                    [src]="
                                        '../../../../../../assets/svg/common/repair-pm/' +
                                        item.pmDescription.logoName
                                    "
                                    [svgStyle]="{
                                        'width.px': '20',
                                        'height.px': '20'
                                    }"
                                ></svg-icon>
                            </div>
                        </ng-container>
                        <div
                            class="items-holder d-flex justify-content-between"
                        >
                            <div class="left-description">
                                <div class="item-title ta-font-medium">
                                    {{ item.description }}
                                </div>
                                <div class="items-number-items-cost d-flex">
                                    <div
                                        class="number-of-items ta-font-regular"
                                    >
                                        {{ item.quantity }} X
                                        {{ item.descriptionPrice }}
                                    </div>
                                </div>
                            </div>

                            <div
                                class="item-total-cost d-flex align-items-center"
                                [ngClass]="{
                                    'pm-style': item.pmDescription
                                }"
                            >
                                {{ item.descriptionTotalPrice }}
                            </div>
                        </div>
                    </div>
                </ng-container>
            </div>
            <div class="right-background"></div>
        </div>
    </div>
</ng-template>
