<div class="ta-custom-card">
  <div *ngIf="hasDivider" class="divider"></div>
  <div
    [ngClass]="{ 'has-counter': hasCounter }"
    class="ta-card-header"
    [class.active]="_isCardOpen && _isCardOpen != 'null'"
    [class.no-data]="!hasBodyData"
    [class.disabled]="disabledCard"
    (mouseenter)="isHeaderHover = true"
    (mouseleave)="isHeaderHover = false"
    (click)="isCardOpenEvent($event)"
  >
    <!-- Left side of header -->
    <div class="header-content" [class.counter]="hasCounter">
      <!-- Checkbox -->
      <app-ta-checkbox
        *ngIf="hasCheckbox"
        [formControl]="controlName"
        [label]="''"
      >
      </app-ta-checkbox>

      <!-- Counter -->
      <app-ta-counter
        *ngIf="hasCounter !== -1"
        [count]="hasCounter"
        [countBackground]="'#F3F3F3'"
        [countColor]="'#919191'"
        [countHeight]="'24px'"
        [countWidth]="'24px'"
        [countTextBottomPosition]="textBottomPossiton"
      ></app-ta-counter>

      <!-- Name -->
      <span class="header-text" [ngClass]="{ 'no-counter': !hasCounter }">
        {{ cardName }}
      </span>

      <!-- Svg near name -->
      <div
        *ngIf="
          hasHeaderSvg &&
          ((_isCardOpen && _isCardOpen != 'null') || headerSvgEnabled)
        "
        ngbTooltip
        [mainTooltip]="tooltipName"
        [tooltipBackground]="tooltipName ? '#6c6c6c' : '#ffffff'"
        position="top"
      >
        <svg-icon
          [ngClass]="{ 'header-svg-bank': customClassHeaderSvg }"
          class="header-svg"
          src="{{ hasHeaderSvg }}"
        ></svg-icon>
      </div>
    </div>

    <!-- Right Side (action side) of header -->
    <div
      class="header-actions"
      [ngClass]="{
        'like-dislike-template': hasLikeDislike,
        'hidden-add-new-action': disableMultipleReviews
      }"
    >
      <!-- Like & Dislike -->
      <app-ta-like-dislike *ngIf="hasLikeDislike"></app-ta-like-dislike>

      <div
        *ngIf="customTextAction"
        class="header-custom-text-action"
        (click)="onAction($event, 'custom', customTextAction)"
      >
        <p class="header-action-text">{{ customTextAction }}</p>
      </div>

      <!-- Download -->
      <svg-icon
        class="header-action-download"
        *ngIf="hasDownload"
        (click)="onAction($event, 'download')"
        [src]="hasDownload"
      ></svg-icon>

      <!-- Plus Add New Things -->
      <div
        *ngIf="hasActionSvg && !disableMultipleReviews"
        class="header-action-container"
        [class.hovered]="isHeaderHover"
        [class.data]="
          (hasBodyData && _isCardOpen && _isCardOpen != 'null' && hasArrow) ||
          (isHeaderHover &&
            hasBodyData &&
            (!_isCardOpen || _isCardOpen == 'null') &&
            hasArrow)
        "
        [class.comment]="
          hasBodyData && _isCardOpen && _isCardOpen != 'null' && isCommentData
        "
        (click)="onAction($event, 'add')"
      >
        <svg-icon
          *ngIf="!hasBodyData && !isHeaderHover"
          class="header-action-svg"
          [ngClass]="{ 'new-position': !hasArrow || !hasBodyData }"
          src="{{ hasActionSvg }}"
        ></svg-icon>
        <p
          *ngIf="
            isHeaderHover ||
            (hasBodyData && _isCardOpen && _isCardOpen != 'null')
          "
          class="header-action-text"
        >
          {{ actionText ? actionText : "ADD NEW" }}
        </p>
      </div>

      <!-- Header (Details page, Calendar...) -->
      <div
        *ngIf="
          (hasPlusHeader && _isCardOpen && _isCardOpen != 'null') || stayOpen
        "
        class="arrow-down-plus"
      >
        <div
          class="add-custom-card"
          ngbTooltip
          mainTooltip="Add New Event"
          position="top"
          tooltipBackground="#536BC2"
        >
          <svg-icon
            class="plus-custom-card"
            src="assets/svg/common/ic_plus.svg"
            (click)="onAction($event, 'add')"
          ></svg-icon>
        </div>
      </div>

      <!-- Weekly status -->
      <div *ngIf="hasWeeklyStatus" class="weekly-status">
        <div class="weekly-status-value">
          {{ hasWeeklyStatus }}
        </div>
      </div>

      <!-- Edit & Delete Actions -->
      <div *ngIf="hasDeleteAction" class="edit-delete-actions">
        <svg-icon
          class="delete-icon"
          src="assets/svg/truckassist-table/dropdown/content/delete.svg"
          [svgStyle]="{
            'width.px': 18,
            'height.px': 18
          }"
          (click)="onAction($event, 'delete')"
        ></svg-icon>
      </div>

      <!-- Arrow -->
      <svg-icon
        *ngIf="hasArrow && hasBodyData"
        class="header-arrow"
        [ngClass]="{ rotate: _isCardOpen && _isCardOpen != 'null' }"
        src="assets/svg/common/ic_arrow_down_updated.svg"
      ></svg-icon>
    </div>
  </div>
  
  <!-- BODY -->
  <div class="ta-card-body" [ngClass]="{ scroll: hasScrollBody }">
    <div
      [ngClass]="noActive"
      [ngStyle]="animationMarginParams"
      [@showHideCardBody]="{
        value: _isCardOpen.toString(),
        params: animationMarginParams
      }"
      class="content-holder"
    >
      <ng-content></ng-content>
    </div>
  </div>
</div>
