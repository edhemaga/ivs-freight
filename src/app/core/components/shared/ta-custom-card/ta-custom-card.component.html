<div class="ta-custom-card">
    <div class="invisible-mainual-trigger" style="display: none">
        {{ _isCardOpen }}
    </div>
    <div *ngIf="hasDivider" class="divider"></div>
    <div
        [ngClass]="{ 'has-counter': hasCounter }"
        class="ta-card-header"
        [class.no-data]="!hasBodyData"
        [class.disabled]="disabledCard"
        (mouseenter)="isHeaderHover = true"
        (mouseleave)="isHeaderHover = false"
        (click)="isCardOpenEvent($event)"
    >
        <!-- Left side of header -->
        <div class="header-content" [class.counter]="hasCounter">
            <!-- Checkbox -->
            <app-ta-checkbox
                *ngIf="hasCheckbox"
                [formControl]="controlName"
                [label]="''"
            >
            </app-ta-checkbox>

            <!-- Name -->
            <span class="header-text">
                {{ cardName }}
            </span>

            <!-- Counter -->
            <app-ta-counter
                *ngIf="hasCounter !== -1"
                [count]="hasCounter"
                [countBackground]="'#424242'"
                [countColor]="'#ffffff'"
                [countHeight]="'22px'"
                [countWidth]="'22px'"
                [countBorderRadius]="'50%'"
                [marginLeft]="'4px'"
                [countTextBottomPosition]="textBottomPossiton"
            ></app-ta-counter>

            <!-- Capsula Text -->

            <div *ngIf="capsulaText" class="capsula-wrapper">
                <p class="capsula-text">{{ capsulaText }}</p>
            </div>

            <!-- Svg near name -->
            <div
                *ngIf="
                    hasHeaderSvg &&
                    ((_isCardOpen && _isCardOpen != 'null') || headerSvgEnabled)
                "
                ngbTooltip
                [mainTooltip]="tooltipName"
                [tooltipBackground]="tooltipName ? '#6c6c6c' : '#ffffff'"
                position="top"
            >
                <svg-icon
                    [ngClass]="{ 'header-svg-bank': customClassHeaderSvg }"
                    class="header-svg"
                    src="{{ hasHeaderSvg }}"
                ></svg-icon>
            </div>
        </div>

        <!-- Right Side (action side) of header -->
        <div
            class="header-actions"
            [ngClass]="{
                'like-dislike-template': hasLikeDislike,
                'hidden-add-new-action': disableMultipleReviews
            }"
        >
            <!-- Payroll status -->
            <div class="payroll-status d-flex" *ngIf="hasPayrollStatus">
                <app-payroll-statuses
                    [active]="_isCardOpen && _isCardOpen != 'null'"
                    [options]="{ value: '$4,146.92 DEBT', type: 'next' }"
                ></app-payroll-statuses>
                <app-payroll-statuses
                    [active]="_isCardOpen && _isCardOpen != 'null'"
                    [options]="{ value: '$4,146.92 DEBT', type: 'dept' }"
                ></app-payroll-statuses>

                <app-payroll-statuses
                    [active]="_isCardOpen && _isCardOpen != 'null'"
                    [options]="{ value: 'EVERY MONDAY', type: 'normal' }"
                ></app-payroll-statuses>
            </div>

            <!-- Like & Dislike -->
            <app-ta-like-dislike *ngIf="hasLikeDislike"></app-ta-like-dislike>

            <div
                *ngIf="customTextAction"
                class="header-custom-text-action"
                (click)="onAction($event, 'custom', customTextAction)"
            >
                <p class="header-action-text">{{ customTextAction }}</p>
            </div>

            <!-- Download -->
            <svg-icon
                class="header-action-download"
                *ngIf="hasDownload"
                (click)="onAction($event, 'download')"
                [src]="hasDownload"
            ></svg-icon>

            <!-- Plus Add New Things -->
            <div
                *ngIf="hasActionSvg && !disableMultipleReviews"
                class="header-action-container"
                [class.hovered]="isHeaderHover"
                [class.data]="
                    (hasBodyData &&
                        _isCardOpen &&
                        _isCardOpen != 'null' &&
                        hasArrow) ||
                    (isHeaderHover &&
                        hasBodyData &&
                        (!_isCardOpen || _isCardOpen == 'null') &&
                        hasArrow)
                "
                [class.comment]="
                    hasBodyData &&
                    _isCardOpen &&
                    _isCardOpen != 'null' &&
                    isCommentData
                "
                (click)="onAction($event, 'add')"
            >
                <svg-icon
                    *ngIf="!hasBodyData && !isHeaderHover"
                    class="header-action-svg"
                    [ngClass]="{ 'new-position': !hasArrow || !hasBodyData }"
                    src="{{ hasActionSvg }}"
                ></svg-icon>
                <p
                    *ngIf="
                        isHeaderHover ||
                        (hasBodyData && _isCardOpen && _isCardOpen != 'null')
                    "
                    class="header-action-text"
                >
                    {{ actionText ? actionText : 'ADD NEW' }}
                </p>
            </div>

            <!-- Header (Details page, Calendar...) -->

            <div *ngIf="hasPlusHeader || stayOpen" class="arrow-down-plus">
                <div
                    class="add-custom-card"
                    ngbTooltip
                    mainTooltip="Add New Event"
                    position="top"
                    tooltipBackground="#536BC2"
                >
                    <svg-icon
                        class="plus-custom-card"
                        src="assets/svg/common/ic_plus.svg"
                        (click)="onAction($event, 'add')"
                    ></svg-icon>
                </div>
            </div>

            <!-- 24/7 button -->
            <div
                *ngIf="has24Hours"
                class="_24-7-status"
                [ngClass]="{ active: is24Hours }"
                (click)="onAction($event, 'hours-24')"
            >
                <p>24/7</p>
            </div>

            <!-- Weekly status -->
            <div
                *ngIf="hasWeeklyStatus"
                class="weekly-status"
                [class.disabledWeeklyStatus]="disabledCard"
            >
                <div class="weekly-status-value">
                    {{ hasWeeklyStatus }}
                </div>
            </div>

            <!-- Edit & Delete Actions -->
            <div *ngIf="hasDeleteAction" class="edit-delete-actions">
                <svg-icon
                    class="delete-icon"
                    src="assets/svg/truckassist-table/dropdown/content/delete.svg"
                    [svgStyle]="{
                        'width.px': 18,
                        'height.px': 18
                    }"
                    (click)="onAction($event, 'delete')"
                ></svg-icon>
            </div>

            <!-- Arrow -->
            <svg-icon
                *ngIf="hasArrow && hasBodyData"
                class="header-arrow"
                [ngClass]="{ rotate: _isCardOpen && _isCardOpen != 'null' }"
                src="assets/svg/common/ic_arrow_down_updated.svg"
            ></svg-icon>
        </div>
    </div>

    <!-- BODY -->
    <div
        class="ta-card-body"
        [ngClass]="{ scroll: hasScrollBody }"
        [@.disabled]="disableAnimation"
    >
        <div
            [ngClass]="noActive"
            [ngStyle]="animationMarginParams"
            [@showHideCardBody]="{
                value: _isCardOpen.toString(),
                params: animationMarginParams
            }"
            class="content-holder"
        >
            <ng-content></ng-content>
        </div>
    </div>
</div>
