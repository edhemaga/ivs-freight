<div class="ta-custom-card">
    <div class="invisible-mainual-trigger" style="display: none">
        {{ _isCardOpen }}
    </div>

    <ng-container *ngIf="hasDivider">
        <div class="divider"></div>
    </ng-container>

    <div
        [ngClass]="{ 'has-counter': hasCounter }"
        class="ta-card-header"
        [class.no-data]="!hasBodyData"
        [class.disabled]="disabledCard"
        [class.active]="
            hasPayrollStatus && _isCardOpen && _isCardOpen != 'null'
        "
        (mouseenter)="isHeaderHover = true"
        (mouseleave)="isHeaderHover = false"
        (click)="isCardOpenEvent($event)"
    >
        <!-- Left side of header -->

        <div class="header-content">
            <!-- Checkbox -->
            <ng-container *ngIf="hasCheckbox">
                <app-ta-checkbox [formControl]="controlName" [label]="''">
                </app-ta-checkbox>
            </ng-container>

            <!-- Payroll left Counter -->

            <ng-container *ngIf="hasLeftCounter !== -1">
                <div class="payroll-left-counter">
                    {{ hasLeftCounter }}
                </div>
            </ng-container>

            <!-- Name -->

            <span
                class="header-text"
                [ngStyle]="{ color: _isCardOpen ? '#424242' : '#6C6C6C' }"
            >
                {{ cardName }}
            </span>

            <!-- Counter -->

            <app-ta-counter
                *ngIf="hasCounter !== -1"
                [count]="hasCounter"
                [countBackground]="'#6C6C6C'"
                [countColor]="'#ffffff'"
                [countHeight]="'18px'"
                [countWidth]="'18px'"
                [countBorderRadius]="'50%'"
                [marginLeft]="'4px'"
            ></app-ta-counter>

            <!-- Capsula Text -->

            <ng-container *ngIf="capsulaText">
                <div
                    class="d-flex align-items-center justify-content-center capsula-wrapper"
                >
                    <p class="m-0 ta-font-bold">
                        {{ capsulaText }}
                    </p>
                </div>
            </ng-container>

            <!-- Svg near name -->

            <ng-container
                *ngIf="
                    hasHeaderSvg &&
                    ((_isCardOpen && _isCardOpen != 'null') || headerSvgEnabled)
                "
            >
                <div>
                    <svg-icon
                        [ngClass]="{ 'header-svg-bank': customClassHeaderSvg }"
                        class="header-svg"
                        src="{{ hasHeaderSvg }}"
                    ></svg-icon>
                </div>
            </ng-container>
        </div>

        <!-- Right Side (action side) of header -->

        <div
            class="header-actions"
            [ngClass]="{
                'like-dislike-template': hasLikeDislike,
                'hidden-add-new-action': disableMultipleReviews
            }"
        >
            <!-- Payroll status -->

            <ng-container *ngIf="hasPayrollStatus">
                <div class="payroll-status d-flex">
                    <app-payroll-statuses
                        [active]="_isCardOpen && _isCardOpen != 'null'"
                        [options]="{ value: '$4,146.92 DEBT', type: 'dept' }"
                    ></app-payroll-statuses>

                    <app-payroll-statuses
                        [active]="_isCardOpen && _isCardOpen != 'null'"
                        [options]="{ value: 'EVERY MONDAY', type: 'normal' }"
                    ></app-payroll-statuses>
                </div>
            </ng-container>

            <!-- Like & Dislike -->

            <app-ta-like-dislike *ngIf="hasLikeDislike"></app-ta-like-dislike>

            <ng-container *ngIf="customTextAction">
                <div
                    class="header-custom-text-action"
                    (click)="onAction($event, 'custom', customTextAction)"
                >
                    <p class="header-action-text">{{ customTextAction }}</p>
                </div>
            </ng-container>

            <!-- Download -->

            <ng-container *ngIf="hasDownload">
                <svg-icon
                    class="header-action-download"
                    (click)="onAction($event, 'download')"
                    [src]="hasDownload"
                ></svg-icon>
            </ng-container>

            <!-- Plus Add New Things -->

            <ng-container *ngIf="hasActionSvg && !disableMultipleReviews">
                <div
                    class="d-flex align-items-center justify-content-center action-plus-icon-container"
                    (click)="onAction($event, 'add')"
                >
                    <svg-icon
                        class="action-plus-icon"
                        [src]="'assets/svg/common/ic_plus.svg'"
                        [svgStyle]="{ 'width.px': '16', 'height.px': '16' }"
                    ></svg-icon>
                </div>
            </ng-container>

            <!-- Header (Details page, Calendar...) -->

            <ng-container
                *ngIf="hasPlusHeader || stayOpen"
                class="arrow-down-plus"
            >
                <div class="add-custom-card" (click)="onAction($event, 'add')">
                    <svg-icon
                        class="plus-custom-card"
                        src="assets/svg/common/ic_plus.svg"
                    ></svg-icon>
                </div>
            </ng-container>

            <!-- 24/7 button -->

            <ng-container *ngIf="has24Hours">
                <div
                    class="_24-7-status"
                    [ngClass]="{ active: is24Hours }"
                    (click)="onAction($event, 'hours-24')"
                >
                    <p>24/7</p>
                </div>
            </ng-container>

            <!-- Weekly status -->

            <ng-container *ngIf="hasWeeklyStatus">
                <div
                    class="weekly-status"
                    [class.disabledWeeklyStatus]="disabledCard"
                >
                    <div class="weekly-status-value">
                        {{ hasWeeklyStatus }}
                    </div>
                </div>
            </ng-container>

            <!-- Edit & Delete Actions -->

            <svg-icon
                *ngIf="hasDeleteAction"
                class="edit-delete-actions"
                class="delete-icon"
                src="assets/svg/truckassist-table/dropdown/content/delete.svg"
                [svgStyle]="{
                    'width.px': 18,
                    'height.px': 18
                }"
                (click)="onAction($event, 'delete')"
            ></svg-icon>

            <!-- Format Text Actions -->

            <app-ta-note-container
                *ngIf="_isCardOpen && hasFormatTextActionButtons"
                #noteContainer
                [isExpanded]="true"
                [range]="range"
                [selectionTaken]="selectionTaken"
                [value]="value"
                [parking]="parking"
                [popoverNote]="true"
                [selectedEditor]="main_editor?.nativeElement"
                [type]="type"
            ></app-ta-note-container>

            <!-- Arrow -->

            <svg-icon
                *ngIf="hasArrow && hasBodyData"
                class="header-arrow"
                [ngClass]="{ rotate: _isCardOpen && _isCardOpen != 'null' }"
                src="assets/svg/common/ic_arrow_down_updated.svg"
            ></svg-icon>
        </div>
    </div>

    <!-- Body -->

    <div
        class="ta-card-body"
        [ngClass]="{
            scroll: hasScrollBody,
            'scroll-x-axis': hasScrollBodyXAxis && _isCardOpen
        }"
        [@.disabled]="disableAnimation"
    >
        <div
            [ngClass]="noActive"
            [ngStyle]="animationMarginParams"
            [class.openedCardClass]="_isCardOpen"
            [@showHideCardBody]="{
                value: _isCardOpen.toString(),
                params: animationMarginParams
            }"
            class="content-holder {{ customClass }}"
        >
            <ng-content></ng-content>
        </div>
    </div>
</div>
