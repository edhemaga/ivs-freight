<div
  class="input-custom-group"
  [ngClass]="{
    'hide-placeholder-icon': getSuperControl.value,
    'valid': getSuperControl.value && !invalidAddress && !focusInput,
    'invalid': getSuperControl.value && invalidAddress && !focusInput,
    'invalid-empty-required':
      inputConfig.isRequired &&
      !getSuperControl.value &&
      invalidAddress &&
      !focusInput,
    'invalid-empty-required-waitValidation':
      inputConfig.isRequired &&
      !getSuperControl.value &&
      invalidAddress &&
      waitValidation &&
      !focusInput,
    'invalid-empty-focus-required':
      inputConfig.isRequired &&
      !getSuperControl.value &&
      invalidAddress &&
      focusInput
  }"
>
  <!-- Input Clear -->
  <div
    class="input-clear {{ inputConfig.customClass }}"
    [ngClass]="{
      'disabled': inputConfig.isDisabled,
      'focus-typing': getSuperControl.value && focusInput,
      'valid-focus-in':
        activeAddress?.address === getSuperControl.value  &&
        !(invalidAddress || getSuperControl.invalid) &&
        waitValidation &&
        focusInput,
      'invalid-focus-in':
        !inputConfig.isRequired &&
        getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        waitValidation &&
        focusInput,
      'invalid-focus-out':
        !inputConfig.isRequired &&
        getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        waitValidation &&
        !focusInput &&
        !inputConfig.placeholderIcon,
      'invalid-focus-in-required':
        inputConfig.isRequired &&
        getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        waitValidation &&
        focusInput,
      'invalid-focus-in-empty-required':
        inputConfig.isRequired &&
        !getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        waitValidation &&
        focusInput &&
        !inputConfig.placeholderIcon,
      'invalid-submit':
        inputConfig.isRequired &&
        (invalidAddress || getSuperControl.invalid) &&
        getSuperControl.touched &&
        !inputConfig.placeholderIcon
    }"
    [appTooltip]="'Clear'"
    [position]="'top-middle'"
    [tooltipBackground]="'#6C6C6C'"
    [tooltipColor]="'#FFFFFF'"
    [zIndex]="900"
    [borderRadius]="'2px'"
    [boxShadow]="'0 0 4px rgb(0,0,0,.2)'"
    [fontWeight]="'bold'"
    [fontSize]="'11px'"
    [customPosition]="-6"
    (click)="clearInput()"
  >
    <svg-icon src="assets/svg/ic_x.svg" class="input-clear-x"></svg-icon>
  </div>

  <!-- Input Required Check -->
  <svg-icon
    class="input-required-check {{ inputConfig.customClass }}"
    [ngClass]="{
      valid:
        inputConfig.isRequired &&
        getSuperControl.value &&
        !(invalidAddress || getSuperControl.invalid) &&
        !focusInput &&
        !inputConfig.isDisabled &&
        !inputConfig.placeholderIcon
    }"
    src="assets/svg/common/ic_confirm.svg"
  ></svg-icon>

  <input
    #placesRef="ngx-places"
    #input
    [id]="inputConfig.name"
    [name]="inputConfig.name"
    [disabled]="inputConfig.isDisabled"
    [placeholder]="''"
    ngx-google-places-autocomplete
    [options]="options"
    class="input-control {{inputConfig.textTransform}} {{inputConfig.customClass}}"
    [ngClass]="{
      'disabled': !getSuperControl.value && inputConfig.isDisabled,
      'disabled-filled': getSuperControl.value && inputConfig.isDisabled,
      'valid-focus-in': activeAddress && activeAddress?.address === getSuperControl.value && focusInput,
      'invalid-focus-in':
        getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        waitValidation &&
        focusInput
    }"
    (keyup)="onBackspace($event)"
    (input)="onChange($event.target.value)"
    (blur)="onBlur()"
    (focus)="onFocus()"
    (keypress)="manipulateWithInput($event)"
    (onAddressChange)="handleAddressChange($event)"
  />

  <!-- Input Icon Placeholder -->
  <svg-icon
    class="input-icon {{ inputConfig.customClass }}"
    [ngClass]="{
      'show-input-icon': inputConfig.placeholderIcon,
      'disabled-empty': !getSuperControl.value && inputConfig.isDisabled,
      'disabled-filled': getSuperControl.value && inputConfig.isDisabled,
      'hide-icon': getSuperControl.value && focusInput,
      'valid-required':
        inputConfig.isRequired &&
        getSuperControl.value &&
        !(invalidAddress || getSuperControl.invalid) &&
        !focusInput,
      'invalid-required-empty':
        inputConfig.isRequired &&
        !getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        waitValidation &&
        !focusInput,
      'invalid-required-empty-focus':
        inputConfig.isRequired &&
        !getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        waitValidation &&
        focusInput,
      'invalid-required-filled':
        inputConfig.isRequired &&
        getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid)&&
        !focusInput,
      'invalid-submit':
        inputConfig.isRequired &&
        (invalidAddress || getSuperControl.invalid) &&
        getSuperControl.touched
    }"
    [src]="inputConfig.placeholderIcon?.toLowerCase() | taSvg:'common'"
  ></svg-icon>

  <!-- Input Label -->
  <label
    [for]="inputConfig.name"
    class="input-label {{ inputConfig.customClass }}"
    [ngClass]="{
      'required': inputConfig.isRequired && !inputConfig.isDisabled,
      'disabled-empty': !getSuperControl.value && inputConfig.isDisabled,
      'disabled-filled': getSuperControl.value && inputConfig.isDisabled,
      'up-label': getSuperControl.value || focusInput,
      'valid-focus-out':
        getSuperControl.value && !(invalidAddress || getSuperControl.invalid) && !focusInput,
      'invalid-focus-out':
        getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        waitValidation &&
        !focusInput
    }"
  >
    {{ inputConfig.label }}
  </label>

  <!-- Input Error Message -->
  <span
    class="input-error {{ inputConfig.customClass }}"
    [ngClass]="{
      'invalid-focus-out':
        inputConfig.isRequired &&
        getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        waitValidation &&
        !focusInput,
      'invalid-empty-focus-out-required':
        inputConfig.isRequired &&
        !getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        waitValidation,
      'invalid-focus-in':
        inputConfig.isRequired &&
        getSuperControl.value &&
        (invalidAddress || getSuperControl.invalid) &&
        focusInput &&
        waitValidation,
      'invalid-submit':
        inputConfig.isRequired &&
        (invalidAddress || getSuperControl.invalid)  &&
        getSuperControl.touched
    }"
  >
    {{ invalidAddress | inputError:inputConfig.name }}
  </span>
</div>
