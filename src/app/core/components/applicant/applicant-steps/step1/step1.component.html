<div class="d-flex flex-column justify-content-center step-container">
    <h1 class="m-0 text-center step-title ta-font-bold">Driver Application</h1>

    <!-- TOP SECTION -->

    <div class="d-flex flex-column text-center top-section">
        <p class="m-0 ta-font-regular">
            In compliance with Federal and State equal opportunity laws,
            qualified applicants are<br />considered for all positions without
            regard to race, religion, sex national origin, age<br />marital
            status, or non-job related disability.
        </p>
        <p class="m-0 ta-font-regular">
            I understand that information I provide regarding current and/or
            previous employers<br />may be used, and those employer(s) will be
            contacted, for the purpose of investigation<br />my safety
            performance history as required by 49 CFR 391.23(d) and (e).
        </p>
    </div>

    <!-- MID SECTION -->

    <div
        class="d-flex flex-column text-center mid-section"
        [formGroup]="personalInfoForm"
    >
        <app-ta-checkbox
            formControlName="isAgreement"
            [name]="'isAgreement'"
            [label]="
                'I also understand that ' + companyName + ' have the right to:'
            "
            [customClass]="'bold-14 label-black'"
            [disabledStillCheckMark]="selectedMode !== 'APPLICANT_MODE'"
        ></app-ta-checkbox>
    </div>

    <!-- BOTTOM SECTION -->

    <div class="d-flex flex-column text-center bottom-section">
        <p class="m-0 ta-font-regular">
            Review information provided by previous employers. Have errors in
            the information<br />corrected by previous employers and for those
            previous employers<br />to re-send the corrected
        </p>

        <p class="m-0 ta-font-regular">
            Information to the prospective employer, and have a rebuttal
            statement attached to the<br />alleged erroneous information, if the
            previous employer(s) and I cannot agree on<br />the accuracy of the
            information
        </p>
    </div>

    <!-- FORM SECTION -->

    <ng-container *ngIf="personalInfoForm.get('isAgreement').value">
        <div class="d-flex justify-content-center form-section">
            <form [formGroup]="personalInfoForm">
                <!-- FIRST NAME, LAST NAME -->

                <div class="d-flex form-input-container line-container">
                    <div class="group first-name-group">
                        <app-ta-input
                            formControlName="firstName"
                            [inputConfig]="{
                                name: 'First Name',
                                type: 'text',
                                label: 'First Name',
                                isRequired: true,
                                minLength: 2,
                                maxLength: 26,
                                textTransform: 'capitalize',
                                autoFocus: true,
                                isDisabled:
                                    selectedMode === 'REVIEW_MODE' ||
                                    (selectedMode === 'FEEDBACK_MODE' &&
                                        stepFeedbackValues?.isFirstNameValid),
                                incorrectInput: selectedMode === 'REVIEW_MODE'
                            }"
                            [incorrectValue]="
                                openAnnotationArray[0].lineInputs[0]
                            "
                            (incorrectEvent)="incorrectInput($event, 0, 0)"
                        ></app-ta-input>
                    </div>

                    <div class="group last-name-group">
                        <app-ta-input
                            formControlName="lastName"
                            [inputConfig]="{
                                name: 'Last Name',
                                type: 'text',
                                label: 'Last Name',
                                isRequired: true,
                                minLength: 2,
                                maxLength: 26,
                                textTransform: 'capitalize',
                                isDisabled:
                                    selectedMode === 'REVIEW_MODE' ||
                                    (selectedMode === 'FEEDBACK_MODE' &&
                                        stepFeedbackValues?.isLastNameValid),
                                incorrectInput: selectedMode === 'REVIEW_MODE'
                            }"
                            [incorrectValue]="
                                openAnnotationArray[0].lineInputs[1]
                            "
                            (incorrectEvent)="incorrectInput($event, 1, 0)"
                        ></app-ta-input>
                    </div>

                    <!-- REVIEW AND FEEDBACK -->

                    <ng-container *ngIf="selectedMode !== 'APPLICANT_MODE'">
                        <div class="review-feedback-container">
                            <app-applicant-review-feedback
                                formControlName="firstRowReview"
                                [displayAnnotationButton]="
                                    selectedMode === 'REVIEW_MODE' &&
                                    openAnnotationArray[0]
                                        .displayAnnotationButton
                                "
                                [displayAnnotationTextArea]="
                                    selectedMode === 'REVIEW_MODE' &&
                                    openAnnotationArray[0]
                                        .displayAnnotationTextArea
                                "
                                [lineIndex]="0"
                                [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
                                [feedbackText]="
                                    selectedMode === 'FEEDBACK_MODE' &&
                                    stepFeedbackValues?.personalInfoMessage
                                "
                                (annotationBtnClickEvent)="
                                    selectedMode === 'REVIEW_MODE' &&
                                        getAnnotationBtnClickValue($event)
                                "
                            ></app-applicant-review-feedback>
                        </div>
                    </ng-container>
                </div>

                <!--  DOB, SSN, PHONE-->

                <div class="d-flex form-input-container line-container">
                    <div class="group date-group">
                        <app-ta-input
                            formControlName="dateOfBirth"
                            [inputConfig]="{
                                name: 'datepicker',
                                type: 'text',
                                label: 'DOB',
                                isDropdown: true,
                                placeholderIcon: 'date',
                                isRequired: true,
                                customClass: 'datetimeclass',
                                isDisabled:
                                    selectedMode === 'REVIEW_MODE' ||
                                    (selectedMode === 'FEEDBACK_MODE' &&
                                        stepFeedbackValues?.isDoBValid),
                                incorrectInput: selectedMode === 'REVIEW_MODE'
                            }"
                            [incorrectValue]="
                                openAnnotationArray[0].lineInputs[2]
                            "
                            (incorrectEvent)="incorrectInput($event, 2, 0)"
                        ></app-ta-input>
                    </div>

                    <div class="group ssn-group">
                        <app-ta-input
                            formControlName="ssn"
                            [inputConfig]="{
                                name: 'SSN',
                                type: 'text',
                                label: 'SSN',
                                isRequired: true,
                                mask: '000-00-0000',
                                maxLength: 11,
                                isDisabled:
                                    selectedMode === 'REVIEW_MODE' ||
                                    (selectedMode === 'FEEDBACK_MODE' &&
                                        stepFeedbackValues?.isSsnValid),
                                incorrectInput: selectedMode === 'REVIEW_MODE'
                            }"
                            [incorrectValue]="
                                openAnnotationArray[7].lineInputs[0]
                            "
                            (incorrectEvent)="incorrectInput($event, 0, 7)"
                        ></app-ta-input>
                    </div>

                    <div class="group phone-group">
                        <app-ta-input
                            formControlName="phone"
                            [inputConfig]="{
                                name: 'Phone',
                                type: 'text',
                                label: 'Phone',
                                isRequired: true,
                                placeholderIcon: 'phone',
                                mask: '(000) 000-0000',
                                maxLength: 14,
                                isDisabled:
                                    selectedMode === 'REVIEW_MODE' ||
                                    (selectedMode === 'FEEDBACK_MODE' &&
                                        stepFeedbackValues?.isPhoneValid),
                                incorrectInput: selectedMode === 'REVIEW_MODE'
                            }"
                            [incorrectValue]="
                                openAnnotationArray[1].lineInputs[0]
                            "
                            (incorrectEvent)="incorrectInput($event, 0, 1)"
                        ></app-ta-input>
                    </div>

                    <!-- REVIEW AND FEEDBACK -->

                    <ng-container *ngIf="selectedMode !== 'APPLICANT_MODE'">
                        <div class="review-feedback-container">
                            <app-applicant-review-feedback
                                formControlName="secondRowReview"
                                [displayAnnotationButton]="
                                    selectedMode === 'REVIEW_MODE' &&
                                    openAnnotationArray[1]
                                        .displayAnnotationButton
                                "
                                [displayAnnotationTextArea]="
                                    selectedMode === 'REVIEW_MODE' &&
                                    openAnnotationArray[1]
                                        .displayAnnotationTextArea
                                "
                                [lineIndex]="1"
                                [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
                                [feedbackText]="
                                    selectedMode === 'FEEDBACK_MODE' &&
                                    stepFeedbackValues?.phoneMessage
                                "
                                (annotationBtnClickEvent)="
                                    selectedMode === 'REVIEW_MODE' &&
                                        getAnnotationBtnClickValue($event)
                                "
                            ></app-applicant-review-feedback>
                        </div>
                    </ng-container>
                </div>

                <!-- PREVIOUS ADDRESSES -->

                <div
                    class="d-flex flex-column justify-content-center previous-addresses"
                    formArrayName="previousAddresses"
                >
                    <div class="d-flex flex-column justify-content-center">
                        <ng-container
                            *ngFor="
                                let address of previousAddresses?.controls;
                                let i = index;
                                let last = last;
                                let first = first;
                                trackBy: trackByIdentity
                            "
                        >
                            <div
                                class="d-flex flex-column justify-content-center dets-container"
                                [ngStyle]="{
                                    'margin-top':
                                        (isEditingArray[i]?.isEditing &&
                                            isEditingMiddlePositionAddress &&
                                            i !== 0) ||
                                        (isEditingArray[i]?.isEditing &&
                                            isEditingMiddlePositionAddress &&
                                            last)
                                            ? '36px'
                                            : '0',
                                    'margin-bottom':
                                        isEditingArray[i]?.isEditing &&
                                        isEditingMiddlePositionAddress &&
                                        !last
                                            ? '22px'
                                            : isEditingArray[i]?.isEditing &&
                                              !isEditingMiddlePositionAddress &&
                                              first &&
                                              previousAddresses?.controls
                                                  .length > 1
                                            ? '22px'
                                            : '2px'
                                }"
                            >
                                <ng-container
                                    *ngIf="
                                        (previousAddresses.controls.length >
                                            1 &&
                                            helperIndex !== 0 &&
                                            i === 0) ||
                                        (helperIndex === 0 &&
                                            i === 1 &&
                                            previousAddresses.at(1).value
                                                .address)
                                    "
                                >
                                    <div
                                        class="d-flex align-items-center title-container"
                                    >
                                        <div class="address-title-container">
                                            <p class="m-0 ta-font-bold">
                                                Address, City, State Zip
                                                <span>*</span>
                                            </p>
                                        </div>
                                        <div
                                            class="address-unit-title-container"
                                        >
                                            <p class="m-0 ta-font-bold">
                                                Unit #
                                            </p>
                                        </div>
                                    </div></ng-container
                                >

                                <ng-container
                                    *ngIf="
                                        (previousAddresses.at(i).value
                                            .address &&
                                            !isEditingArray[i]?.isEditing) ||
                                        (!previousAddresses.at(i).value
                                            .address &&
                                            isEditingArray[i]?.isEditing) ||
                                        (previousAddresses.at(i).value
                                            .address &&
                                            isEditingArray[i]?.isEditing)
                                    "
                                >
                                    <div
                                        class="d-flex align-items-center"
                                        [formGroupName]="i"
                                        [ngStyle]="{
                                            'margin-top':
                                                previousAddresses?.controls
                                                    .length > 1 &&
                                                last &&
                                                isEditingArray[i].isEditing &&
                                                !isLastInputDeleted
                                                    ? '32px'
                                                    : '0'
                                        }"
                                    >
                                        <div
                                            class="d-flex align-items-center right-container line-container"
                                            [ngStyle]="{
                                                'background-color':
                                                    isEditingArray[i]?.isEditing
                                                        ? '#ffffff'
                                                        : '#F3F3F3',
                                                padding: isEditingArray[i]
                                                    ?.isEditing
                                                    ? '0'
                                                    : '4px 6px'
                                            }"
                                        >
                                            <ng-container
                                                *ngIf="
                                                    isEditingArray[i]?.isEditing
                                                "
                                            >
                                                <div
                                                    class="d-flex align-items-center input-container"
                                                >
                                                    <div
                                                        class="d-flex align-items-center"
                                                    >
                                                        <div
                                                            class="address-container"
                                                            [ngStyle]="{
                                                                width:
                                                                    previousAddresses
                                                                        .controls
                                                                        .length ===
                                                                        1 ||
                                                                    (isEditingArray[
                                                                        i
                                                                    ]
                                                                        ?.isEditing &&
                                                                        !isEditingArray[
                                                                            i
                                                                        ]
                                                                            ?.isEditingAddress &&
                                                                        isEditingArray[
                                                                            i
                                                                        ]
                                                                            ?.isFirstAddress &&
                                                                        previousAddresses
                                                                            .controls
                                                                            .length ===
                                                                            1)
                                                                        ? '480px'
                                                                        : isEditingArray[
                                                                              i
                                                                          ]
                                                                              ?.isEditing &&
                                                                          !isEditingArray[
                                                                              i
                                                                          ]
                                                                              ?.isEditingAddress &&
                                                                          !isLastInputDeleted &&
                                                                          !isEditingArray[
                                                                              i
                                                                          ]
                                                                              ?.isFirstAddress
                                                                        ? '442px'
                                                                        : '412px'
                                                            }"
                                                        >
                                                            <app-input-address-dropdown
                                                                formControlName="address"
                                                                [inputConfig]="{
                                                                    name: 'Address',
                                                                    type: 'text',
                                                                    label: 'Address, City, State Zip',
                                                                    isRequired: true,
                                                                    placeholderIcon:
                                                                        'address',
                                                                    textTransform:
                                                                        'capitalize',
                                                                    dropdownWidthClass:
                                                                        isEditingArray[
                                                                            i
                                                                        ]
                                                                            ?.isEditing &&
                                                                        !isEditingArray[
                                                                            i
                                                                        ]
                                                                            ?.isEditingAddress &&
                                                                        !isLastInputDeleted &&
                                                                        !isEditingArray[
                                                                            i
                                                                        ]
                                                                            ?.isFirstAddress
                                                                            ? 'w-col-442'
                                                                            : isEditingArray[
                                                                                  i
                                                                              ]
                                                                                  ?.isEditing &&
                                                                              !isEditingArray[
                                                                                  i
                                                                              ]
                                                                                  ?.isEditingAddress &&
                                                                              isEditingArray[
                                                                                  i
                                                                              ]
                                                                                  ?.isFirstAddress &&
                                                                              previousAddresses
                                                                                  .controls
                                                                                  .length ===
                                                                                  1
                                                                            ? 'w-col-480'
                                                                            : 'w-col-412',
                                                                    minLength: 6,
                                                                    maxLength: 256,
                                                                    isDisabled:
                                                                        selectedMode ===
                                                                            'REVIEW_MODE' ||
                                                                        (selectedMode ===
                                                                            'FEEDBACK_MODE' &&
                                                                            i ===
                                                                                previousAddresses
                                                                                    .controls
                                                                                    .length -
                                                                                    1 &&
                                                                            stepFeedbackValues?.isAddressValid),
                                                                    incorrectInput:
                                                                        selectedMode ===
                                                                        'REVIEW_MODE'
                                                                }"
                                                                [placeholderType]="
                                                                    'longAddress'
                                                                "
                                                                [incorrectValue]="
                                                                    openAnnotationArray[6]
                                                                        .lineInputs
                                                                        ? openAnnotationArray[6]
                                                                              .lineInputs[0]
                                                                        : openAnnotationArray[5]
                                                                              .lineInputs
                                                                        ? openAnnotationArray[5]
                                                                              .lineInputs[0]
                                                                        : openAnnotationArray[4]
                                                                              .lineInputs
                                                                        ? openAnnotationArray[4]
                                                                              .lineInputs[0]
                                                                        : openAnnotationArray[3]
                                                                              .lineInputs
                                                                        ? openAnnotationArray[3]
                                                                              .lineInputs[0]
                                                                        : openAnnotationArray[2]
                                                                              .lineInputs
                                                                        ? openAnnotationArray[2]
                                                                              .lineInputs[0]
                                                                        : false
                                                                "
                                                                (incorrectEvent)="
                                                                    incorrectInput(
                                                                        $event,
                                                                        0,
                                                                        i + 2
                                                                    )
                                                                "
                                                                (selectedAddress)="
                                                                    handleInputSelect(
                                                                        $event,
                                                                        'PREVIOUS-ADDRESS',
                                                                        i
                                                                    )
                                                                "
                                                            ></app-input-address-dropdown>
                                                        </div>

                                                        <div
                                                            class="address-unit-container"
                                                        >
                                                            <app-ta-input
                                                                formControlName="addressUnit"
                                                                [inputConfig]="{
                                                                    name: 'address-unit',
                                                                    type: 'text',
                                                                    label: 'Unit No.',
                                                                    minLength: 1,
                                                                    maxLength: 10,
                                                                    textTransform:
                                                                        'uppercase',
                                                                    isDisabled:
                                                                        selectedMode ===
                                                                            'REVIEW_MODE' ||
                                                                        (selectedMode ===
                                                                            'FEEDBACK_MODE' &&
                                                                            i ===
                                                                                previousAddresses
                                                                                    .controls
                                                                                    .length -
                                                                                    1 &&
                                                                            stepFeedbackValues?.isAddressUnitValid),
                                                                    incorrectInput:
                                                                        selectedMode ===
                                                                        'REVIEW_MODE'
                                                                }"
                                                                [incorrectValue]="
                                                                    openAnnotationArray[6]
                                                                        .lineInputs
                                                                        ? openAnnotationArray[6]
                                                                              .lineInputs[1]
                                                                        : openAnnotationArray[5]
                                                                              .lineInputs
                                                                        ? openAnnotationArray[5]
                                                                              .lineInputs[1]
                                                                        : openAnnotationArray[4]
                                                                              .lineInputs
                                                                        ? openAnnotationArray[4]
                                                                              .lineInputs[1]
                                                                        : openAnnotationArray[3]
                                                                              .lineInputs
                                                                        ? openAnnotationArray[3]
                                                                              .lineInputs[1]
                                                                        : openAnnotationArray[2]
                                                                              .lineInputs
                                                                        ? openAnnotationArray[2]
                                                                              .lineInputs[1]
                                                                        : false
                                                                "
                                                                (incorrectEvent)="
                                                                    incorrectInput(
                                                                        $event,
                                                                        1,
                                                                        i + 2
                                                                    )
                                                                "
                                                            ></app-ta-input>
                                                        </div>

                                                        <ng-container
                                                            *ngIf="
                                                                isEditingArray[
                                                                    i
                                                                ]?.isEditing &&
                                                                isEditingArray[
                                                                    i
                                                                ]
                                                                    ?.isEditingAddress
                                                            "
                                                        >
                                                            <div
                                                                class="d-flex align-items-center justify-content-center confirm-cancel-btn-container"
                                                            >
                                                                <div
                                                                    ngbTooltip
                                                                    mainTooltip="Confirm"
                                                                    tooltipBackground="#536BC2"
                                                                    position="top"
                                                                >
                                                                    <svg-icon
                                                                        class="confirm-icon"
                                                                        src="assets/svg/ic_spec-confirm.svg"
                                                                        [svgStyle]="{
                                                                            'width.px': 26,
                                                                            'height.px': 26
                                                                        }"
                                                                        (click)="
                                                                            onConfirmEditedNewAddress(
                                                                                i
                                                                            )
                                                                        "
                                                                    ></svg-icon>
                                                                </div>

                                                                <div
                                                                    ngbTooltip
                                                                    mainTooltip="Cancel"
                                                                    tooltipBackground="#6C6C6C"
                                                                    position="top"
                                                                >
                                                                    <svg-icon
                                                                        class="cancel-icon"
                                                                        src="assets/svg/ic_x.svg"
                                                                        [svgStyle]="{
                                                                            'width.px': 26,
                                                                            'height.px': 26
                                                                        }"
                                                                        (click)="
                                                                            onCancelEditingNewAddress(
                                                                                i
                                                                            )
                                                                        "
                                                                    ></svg-icon>
                                                                </div>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container
                                                            *ngIf="
                                                                previousAddresses
                                                                    ?.controls
                                                                    .length !==
                                                                    1 &&
                                                                isEditingArray[
                                                                    i
                                                                ]?.isEditing &&
                                                                !isEditingArray[
                                                                    i
                                                                ]
                                                                    ?.isEditingAddress &&
                                                                !isLastInputDeleted &&
                                                                !isEditingArray[
                                                                    i
                                                                ].isFirstAddress
                                                            "
                                                        >
                                                            <div
                                                                class="d-flex align-items-center justify-content-center delete-btn-container"
                                                                [ngClass]="{
                                                                    disabled:
                                                                        selectedMode !==
                                                                        'APPLICANT_MODE'
                                                                }"
                                                            >
                                                                <div
                                                                    ngbTooltip
                                                                    mainTooltip="Delete"
                                                                    tooltipBackground="#EF5350"
                                                                    position="top"
                                                                >
                                                                    <svg-icon
                                                                        class="delete-icon"
                                                                        src="assets/svg/truckassist-table/dropdown/content/delete.svg"
                                                                        [svgStyle]="{
                                                                            'width.px': 18,
                                                                            'height.px': 18
                                                                        }"
                                                                        (click)="
                                                                            onRemoveNewAddress(
                                                                                i
                                                                            )
                                                                        "
                                                                    ></svg-icon>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </ng-container>

                                            <div
                                                class="d-flex align-items-center info-btn-container"
                                            >
                                                <ng-container
                                                    *ngIf="
                                                        !isEditingArray[i]
                                                            ?.isEditing &&
                                                        !isEditingArray[i]
                                                            ?.isEditingAddress
                                                    "
                                                >
                                                    <div
                                                        class="d-flex align-items-center info-container"
                                                    >
                                                        <div
                                                            class="d-flex align-items-center text-truncate address-container"
                                                        >
                                                            <svg-icon
                                                                class="address-icon"
                                                                src="assets/svg/common/ic_address.svg"
                                                                [svgStyle]="{
                                                                    'width.px': 18,
                                                                    'height.px': 18
                                                                }"
                                                            ></svg-icon>

                                                            <div
                                                                class="d-flex pipe"
                                                            ></div>

                                                            <p
                                                                class="m-0 ta-font-regular"
                                                            >
                                                                {{
                                                                    address
                                                                        .value
                                                                        ?.address
                                                                }}
                                                            </p>
                                                        </div>

                                                        <div
                                                            class="d-flex align-items-center address-unit-container"
                                                        >
                                                            <p
                                                                class="d-inline-block text-truncate m-0 ta-font-regular"
                                                                style="
                                                                    max-width: 300px;
                                                                "
                                                            >
                                                                {{
                                                                    address
                                                                        .value
                                                                        ?.addressUnit
                                                                }}
                                                            </p>
                                                        </div>
                                                    </div>
                                                </ng-container>

                                                <ng-container
                                                    *ngIf="
                                                        !isEditingArray[i]
                                                            ?.isEditing
                                                    "
                                                >
                                                    <div
                                                        class="d-flex align-items-center btn-container"
                                                        [ngClass]="{
                                                            active:
                                                                selectedMode ===
                                                                'REVIEW_MODE'
                                                        }"
                                                        [ngStyle]="{
                                                            'margin-left':
                                                                selectedMode ===
                                                                'APPLICANT_MODE'
                                                                    ? '26px'
                                                                    : selectedMode ===
                                                                      'FEEDBACK_MODE'
                                                                    ? '48px'
                                                                    : '5px'
                                                        }"
                                                    >
                                                        <ng-container
                                                            *ngIf="
                                                                selectedMode ===
                                                                    'APPLICANT_MODE' ||
                                                                (selectedMode ===
                                                                    'FEEDBACK_MODE' &&
                                                                    !stepFeedbackValues
                                                                        .previousAddressesReview[
                                                                        i
                                                                    ]
                                                                        .isPreviousAddressValid)
                                                            "
                                                        >
                                                            <div
                                                                ngbTooltip
                                                                mainTooltip="Edit"
                                                                tooltipBackground="#6C6C6C"
                                                                position="top"
                                                            >
                                                                <svg-icon
                                                                    class="edit-icon"
                                                                    src="assets/svg/truckassist-table/dropdown/content/edit-hover.svg"
                                                                    [svgStyle]="{
                                                                        'width.px': 18,
                                                                        'height.px': 18
                                                                    }"
                                                                    (click)="
                                                                        onEditNewAddress(
                                                                            i
                                                                        )
                                                                    "
                                                                ></svg-icon>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container
                                                            *ngIf="
                                                                selectedMode ===
                                                                'APPLICANT_MODE'
                                                            "
                                                        >
                                                            <div
                                                                ngbTooltip
                                                                mainTooltip="Delete"
                                                                tooltipBackground="#EF5350"
                                                                position="top"
                                                            >
                                                                <svg-icon
                                                                    class="delete-icon"
                                                                    src="assets/svg/truckassist-table/dropdown/content/delete.svg"
                                                                    [svgStyle]="{
                                                                        'width.px': 18,
                                                                        'height.px': 18
                                                                    }"
                                                                    (click)="
                                                                        onRemoveNewAddress(
                                                                            i
                                                                        )
                                                                    "
                                                                ></svg-icon>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container
                                                            *ngIf="
                                                                selectedMode ===
                                                                'REVIEW_MODE'
                                                            "
                                                        >
                                                            <div>
                                                                <div
                                                                    class="review-icon-box"
                                                                    ngbTooltip
                                                                    mainTooltip="Mark Incorrect"
                                                                    tooltipBackground="#F44336"
                                                                    position="top"
                                                                >
                                                                    <svg-icon
                                                                        class="review-icon"
                                                                        [ngClass]="{
                                                                            active:
                                                                                openAnnotationArray[
                                                                                    i +
                                                                                        2
                                                                                ]
                                                                                    .displayAnnotationButton ||
                                                                                openAnnotationArray[
                                                                                    i +
                                                                                        2
                                                                                ]
                                                                                    .displayAnnotationTextArea
                                                                        }"
                                                                        src="assets/svg/ic_x.svg"
                                                                        [svgStyle]="{
                                                                            'width.px': 18,
                                                                            'height.px': 18
                                                                        }"
                                                                        (click)="
                                                                            incorrectInput(
                                                                                $event,
                                                                                0,
                                                                                i +
                                                                                    2,
                                                                                'card'
                                                                            )
                                                                        "
                                                                    ></svg-icon>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </ng-container>
                                            </div>

                                            <!-- REVIEW AND FEEDBACK -->

                                            <ng-container
                                                *ngIf="
                                                    selectedMode !==
                                                    'APPLICANT_MODE'
                                                "
                                            >
                                                <div
                                                    class="d-flex review-feedback-container"
                                                >
                                                    <app-applicant-review-feedback
                                                        [formControlName]="
                                                            'cardReview' +
                                                            (i + 1)
                                                        "
                                                        [displayAnnotationButton]="
                                                            selectedMode ===
                                                                'REVIEW_MODE' &&
                                                            openAnnotationArray[
                                                                i + 2
                                                            ]
                                                                .displayAnnotationButton
                                                        "
                                                        [displayAnnotationTextArea]="
                                                            selectedMode ===
                                                                'REVIEW_MODE' &&
                                                            openAnnotationArray[
                                                                i + 2
                                                            ]
                                                                .displayAnnotationTextArea
                                                        "
                                                        [lineIndex]="i + 2"
                                                        [isFeedback]="
                                                            selectedMode ===
                                                            'FEEDBACK_MODE'
                                                        "
                                                        [feedbackText]="
                                                            selectedMode ===
                                                                'FEEDBACK_MODE' &&
                                                            i ===
                                                                previousAddresses
                                                                    ?.controls
                                                                    .length -
                                                                    1
                                                                ? stepFeedbackValues?.addressMessage
                                                                : i === 3
                                                                ? stepFeedbackValues
                                                                      ?.previousAddressesReview[3]
                                                                      ?.previousAddressMessage
                                                                : i === 2
                                                                ? stepFeedbackValues
                                                                      ?.previousAddressesReview[2]
                                                                      ?.previousAddressMessage
                                                                : i === 1
                                                                ? stepFeedbackValues
                                                                      ?.previousAddressesReview[1]
                                                                      ?.previousAddressMessage
                                                                : i === 0
                                                                ? stepFeedbackValues
                                                                      ?.previousAddressesReview[0]
                                                                      ?.previousAddressMessage
                                                                : null
                                                        "
                                                        [cardsLength]="
                                                            previousAddresses
                                                                ?.controls
                                                                .length
                                                        "
                                                        [cardsType]="
                                                            'addresses'
                                                        "
                                                        [cardIndex]="i + 2"
                                                        (annotationBtnClickEvent)="
                                                            selectedMode ===
                                                                'REVIEW_MODE' &&
                                                                getAnnotationBtnClickValue(
                                                                    $event
                                                                )
                                                        "
                                                    ></app-applicant-review-feedback>
                                                </div>
                                            </ng-container>
                                        </div></div
                                ></ng-container>
                            </div>
                        </ng-container>
                    </div>

                    <ng-container
                        *ngIf="
                            selectedMode === 'APPLICANT_MODE' &&
                            previousAddresses.controls?.length < 5
                        "
                    >
                        <div
                            class="d-flex flex-column justify-content-center align-items-center previous-address-btn-container"
                        >
                            <h5 class="m-0 ta-font-bold previous-address-title">
                                Add previous addresses for the past 3 years?
                            </h5>

                            <app-applicant-add-save-btn
                                [addBtn]="true"
                                [btnText]="'Add Address'"
                                [disabledValue]="
                                    !isLastAddedPreviousAddressValid &&
                                    !isLastInputDeleted
                                "
                                (clickValueEmitter)="onGetBtnClickValue($event)"
                            ></app-applicant-add-save-btn>
                        </div>
                    </ng-container>
                </div>

                <!-- BANK NAME, ACCOUNT NUMBER, ROUTING NUMBER -->

                <div
                    class="d-flex form-input-container line-container"
                    [ngStyle]="{
                        'margin-top':
                            selectedMode !== 'APPLICANT_MODE' ||
                            (selectedMode === 'APPLICANT_MODE' &&
                                previousAddresses.controls.length === 5)
                                ? '32px'
                                : 0
                    }"
                >
                    <div class="group bank-group">
                        <app-ta-input-dropdown
                            formControlName="bankId"
                            [template]="'svg-template'"
                            [inputConfig]="{
                                name: 'Input Dropdown Bank Name',
                                type: 'text',
                                label: 'Bank Name',
                                minLength: 2,
                                maxLength: 64,
                                textTransform: 'uppercase',
                                isDropdown: true,
                                dropdownWidthClass: 'w-col-416',
                                isDisabled: selectedMode !== 'APPLICANT_MODE'
                            }"
                            [activeItem]="selectedBank"
                            [options]="banksDropdownList"
                            [canAddNew]="true"
                            (saveItem)="onSaveNewBank($event)"
                            (selectedItem)="handleInputSelect($event, 'BANK')"
                        ></app-ta-input-dropdown>
                    </div>

                    <div class="group account-number-group">
                        <app-ta-input
                            formControlName="accountNumber"
                            [inputConfig]="{
                                name: 'account-bank',
                                type: 'text',
                                label: 'Account number',
                                isDisabled:
                                    (selectedMode === 'APPLICANT_MODE' &&
                                        !isBankSelected) ||
                                    selectedMode === 'REVIEW_MODE' ||
                                    (selectedMode === 'FEEDBACK_MODE' &&
                                        stepFeedbackValues?.isAccountNumberValid),
                                isRequired: isBankSelected,
                                maxLength: 17,
                                minLength: 5,
                                incorrectInput: selectedMode === 'REVIEW_MODE'
                            }"
                            [incorrectValue]="
                                openAnnotationArray[8].lineInputs[0]
                            "
                            (incorrectEvent)="incorrectInput($event, 0, 8)"
                        ></app-ta-input>
                    </div>

                    <div class="group routing-number-group">
                        <app-ta-input
                            formControlName="routingNumber"
                            [inputConfig]="{
                                name: 'routing-bank',
                                type: 'text',
                                label: 'Routing number',
                                isDisabled:
                                    (selectedMode === 'APPLICANT_MODE' &&
                                        !isBankSelected) ||
                                    selectedMode !== 'APPLICANT_MODE',
                                isRequired: isBankSelected,
                                minLength: 9,
                                maxLength: 9
                            }"
                        ></app-ta-input>
                    </div>

                    <!-- REVIEW AND FEEDBACK -->

                    <ng-container *ngIf="selectedMode !== 'APPLICANT_MODE'">
                        <div class="review-feedback-container">
                            <app-applicant-review-feedback
                                formControlName="thirdRowReview"
                                [displayAnnotationButton]="
                                    selectedMode === 'REVIEW_MODE' &&
                                    openAnnotationArray[7]
                                        .displayAnnotationButton
                                "
                                [displayAnnotationTextArea]="
                                    selectedMode === 'REVIEW_MODE' &&
                                    openAnnotationArray[7]
                                        .displayAnnotationTextArea
                                "
                                [lineIndex]="7"
                                [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
                                [feedbackText]="
                                    selectedMode === 'FEEDBACK_MODE' &&
                                    stepFeedbackValues?.ssnBankMessage
                                "
                                (annotationBtnClickEvent)="
                                    selectedMode === 'REVIEW_MODE' &&
                                        getAnnotationBtnClickValue($event)
                                "
                            ></app-applicant-review-feedback>
                        </div>
                    </ng-container>
                </div>

                <!-- ACCOUNT NUMBER, ROUTING NUMBER -->

                <div class="d-flex">
                    <!-- REVIEW AND FEEDBACK -->

                    <ng-container *ngIf="selectedMode !== 'APPLICANT_MODE'">
                        <div class="review-feedback-container">
                            <app-applicant-review-feedback
                                formControlName="fourthRowReview"
                                [displayAnnotationButton]="
                                    selectedMode === 'REVIEW_MODE' &&
                                    openAnnotationArray[8]
                                        .displayAnnotationButton
                                "
                                [displayAnnotationTextArea]="
                                    selectedMode === 'REVIEW_MODE' &&
                                    openAnnotationArray[8]
                                        .displayAnnotationTextArea
                                "
                                [lineIndex]="8"
                                [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
                                [feedbackText]="
                                    selectedMode === 'FEEDBACK_MODE' &&
                                    stepFeedbackValues?.accountNumberMessage
                                "
                                (annotationBtnClickEvent)="
                                    selectedMode === 'REVIEW_MODE' &&
                                        getAnnotationBtnClickValue($event)
                                "
                            ></app-applicant-review-feedback>
                        </div>
                    </ng-container>
                </div>

                <!-- QUESTIONS SECTION -->

                <div class="questions-section">
                    <ng-container
                        *ngFor="
                            let question of questions;
                            let i = index;
                            trackBy: trackByIdentity
                        "
                    >
                        <div class="d-flex flex-column question-container">
                            <div
                                class="d-flex align-items-center justify-content-between"
                            >
                                <div
                                    class="d-flex align-items-center question-title-box"
                                >
                                    <p
                                        class="m-0 ta-font-regular"
                                        [ngClass]="
                                            selectedMode === 'FEEDBACK_MODE'
                                                ? 'question-title-feedback'
                                                : 'question-title'
                                        "
                                    >
                                        {{ question.title }}

                                        <span class="required-star">*</span>
                                    </p>

                                    <p
                                        class="m-0 ta-font-semi-bold required"
                                        [ngClass]="{
                                            'required-active':
                                                displayRadioRequiredNoteArray[i]
                                                    .displayRadioRequiredNote
                                        }"
                                    >
                                        Required
                                    </p>
                                </div>

                                <div class="question-radios-box">
                                    <app-ta-input-radiobuttons
                                        #cmp
                                        [buttons]="question.answerChoices"
                                        [disabled]="
                                            selectedMode !== 'APPLICANT_MODE'
                                        "
                                        [displayRequiredNote]="
                                            displayRadioRequiredNoteArray[i]
                                                .displayRadioRequiredNote
                                        "
                                        (changedValue)="
                                            handleInputSelect(
                                                $event,
                                                'ANSWER-CHOICE'
                                            )
                                        "
                                    ></app-ta-input-radiobuttons>
                                </div>
                            </div>

                            <!-- EXPLAIN -->

                            <ng-container
                                *ngIf="
                                    i !== 0 &&
                                    i !== 1 &&
                                    personalInfoForm.get(
                                        question.formControlName
                                    )?.value
                                "
                            >
                                <div
                                    class="d-flex explain-container line-container"
                                    [ngStyle]="{
                                        'margin-bottom': personalInfoForm.get(
                                            question.formControlName
                                        )?.value
                                            ? '12px'
                                            : '0'
                                    }"
                                >
                                    <div class="w-100">
                                        <app-ta-input
                                            [formControlName]="
                                                question.formControlNameExplain
                                            "
                                            [inputConfig]="{
                                                name: 'Explain',
                                                type: 'text',
                                                label: 'Please explain',
                                                isRequired: true,
                                                textTransform: 'capitalize',
                                                placeholder: 'Please explain',
                                                placeholderInsteadOfLabel: true,
                                                isDisabled:
                                                    selectedMode ===
                                                        'REVIEW_MODE' ||
                                                    (selectedMode ===
                                                        'FEEDBACK_MODE' &&
                                                        ((i === 2 &&
                                                            stepFeedbackValues?.isAnotherNameValid) ||
                                                            (i === 3 &&
                                                                stepFeedbackValues?.isInMilitaryValid) ||
                                                            (i === 4 &&
                                                                stepFeedbackValues?.isFelonyValid) ||
                                                            (i === 5 &&
                                                                stepFeedbackValues?.isMisdemeanorValid) ||
                                                            (i === 6 &&
                                                                stepFeedbackValues?.isDrunkDrivingValid))),
                                                incorrectInput:
                                                    selectedMode ===
                                                    'REVIEW_MODE'
                                            }"
                                            [incorrectValue]="
                                                openAnnotationArray[i + 9]
                                                    .lineInputs[0]
                                            "
                                            (incorrectEvent)="
                                                incorrectInput($event, 0, i + 9)
                                            "
                                        ></app-ta-input>
                                    </div>

                                    <!-- REVIEW AND FEEDBACK -->

                                    <ng-container
                                        *ngIf="
                                            selectedMode !== 'APPLICANT_MODE'
                                        "
                                    >
                                        <div class="review-feedback-container">
                                            <app-applicant-review-feedback
                                                [formControlName]="
                                                    'questionReview' + (i + 1)
                                                "
                                                [displayAnnotationButton]="
                                                    selectedMode ===
                                                        'REVIEW_MODE' &&
                                                    openAnnotationArray[i + 9]
                                                        .displayAnnotationButton
                                                "
                                                [displayAnnotationTextArea]="
                                                    selectedMode ===
                                                        'REVIEW_MODE' &&
                                                    openAnnotationArray[i + 9]
                                                        .displayAnnotationTextArea
                                                "
                                                [lineIndex]="i + 9"
                                                [isFeedback]="
                                                    selectedMode ===
                                                    'FEEDBACK_MODE'
                                                "
                                                [feedbackText]="
                                                    selectedMode ===
                                                        'FEEDBACK_MODE' &&
                                                    i === 2
                                                        ? stepFeedbackValues?.anotherNameMessage
                                                        : i === 3
                                                        ? stepFeedbackValues?.inMilitaryMessage
                                                        : i === 4
                                                        ? stepFeedbackValues?.felonyMessage
                                                        : i === 5
                                                        ? stepFeedbackValues?.misdemeanorMessage
                                                        : i === 6
                                                        ? stepFeedbackValues?.drunkDrivingMessage
                                                        : null
                                                "
                                                (annotationBtnClickEvent)="
                                                    selectedMode ===
                                                        'REVIEW_MODE' &&
                                                        getAnnotationBtnClickValue(
                                                            $event
                                                        )
                                                "
                                            ></app-applicant-review-feedback>
                                        </div>
                                    </ng-container>
                                </div>
                            </ng-container></div
                    ></ng-container>
                </div>

                <!-- FILES SECTION -->

                <div
                    class="d-flex flex-column align-items-center files-section"
                >
                    <h4
                        class="m-0 text-center ta-font-bold"
                        [ngStyle]="{
                            color:
                                selectedMode === 'FEEDBACK_MODE'
                                    ? '#919191'
                                    : '#2F2F2F'
                        }"
                    >
                        Please upload your SSN Card
                    </h4>

                    <!-- FILES CONTAINER -->

                    <div class="d-flex flex-column files-container">
                        <div
                            class="d-flex align-items-center justify-content-center files-header"
                        >
                            <p class="m-0 ta-font-bold">SSN Card</p>

                            <div
                                class="d-flex align-items-center justify-content-center counter-container"
                            >
                                <p class="m-0 ta-font-extra-bold">
                                    {{ documents.length }}
                                </p>
                            </div>
                        </div>

                        <div class="line-container">
                            <app-ta-upload-files
                                [files]="documents"
                                [size]="'medium'"
                                [showDropzone]="
                                    selectedMode === 'APPLICANT_MODE'
                                "
                                [isRequired]="!documents.length"
                                [showRequired]="displayDocumentsRequiredNote"
                                [isReview]="selectedMode === 'REVIEW_MODE'"
                                [reviewMode]="
                                    selectedMode === 'REVIEW_MODE' &&
                                    'REVIEW_MODE'
                                "
                                (onFileEvent)="onFilesAction($event)"
                            ></app-ta-upload-files>

                            <!-- REVIEW AND FEEDBACK -->

                            <!--  <div
                            class="review-feedback-container"
                            *ngIf="
                                selectedMode === 'REVIEW_MODE' ||
                                selectedMode === 'FEEDBACK_MODE'
                            "
                        >
                            <app-applicant-review-feedback
                                formControlName="firstRowReview"
                                [displayAnnotationButton]="
                                    openAnnotationArray[0]
                                        .displayAnnotationButton
                                "
                                [displayAnnotationTextArea]="
                                    openAnnotationArray[0]
                                        .displayAnnotationTextArea
                                "
                                [lineIndex]="0"
                                [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
                                [feedbackText]="
                                    'Check the routing number one more time (one number missing)!!!'
                                "
                                (annotationBtnClickEvent)="
                                    getAnnotationBtnClickValue($event)
                                "
                            ></app-applicant-review-feedback>
                        </div> -->
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </ng-container>
</div>

<!-- NEXT BTN -->

<div
    class="d-flex justify-content-center align-items-center next-btn-container"
>
    <app-applicant-next-back-btn
        [nextStep]="true"
        [mode]="selectedMode"
        [filledCorrectly]="
            personalInfoForm.valid &&
            helperIndex === 2 &&
            (selectedMode === 'APPLICANT_MODE' ||
                (selectedMode === 'FEEDBACK_MODE' && isFeedbackValueUpdated))
        "
        [hasIncorrectFields]="
            selectedMode === 'REVIEW_MODE' && hasIncorrectFields
        "
        (stepEvent)="onStepAction($event)"
    ></app-applicant-next-back-btn>
</div>
