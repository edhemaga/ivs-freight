<div class="d-flex flex-column align-items-center step-container">
  <h1 class="step-title text-center noselect ta-font-bold">CDL Information</h1>

  <!-- TOP SECTION -->

  <div class="d-flex flex-column text-center top-section">
    <p class="d-flex justify-content-center noselect ta-font-regular">
      No person who operates a commercial motor vehicle shall at any time have
      more than one driverâ€™s license (49 CFR 383.21). I certify that I do not
      have more than one motor vehicle license, the information for which is
      listed below.
    </p>
  </div>

  <!-- FORM SECTION -->

  <div class="d-flex form-section">
    <!-- CREATED LICENSE DATA -->

    <div
      class="d-flex justify-content-center license-view-container"
      *ngIf="licenseFormArray.length"
    >
      <div
        class="d-flex flex-column"
        *ngFor="
          let license of licenseFormArray | filter: false;
          let i = index;
          trackBy: trackByIdentity
        "
      >
        <div class="d-flex justify-content-center title-container">
          <div class="d-flex justify-content-center license-title-box">
            <p class="m-0 ta-font-bold">LICENSE #</p>
          </div>
          <div class="d-flex justify-content-center state-title-box">
            <p class="m-0 ta-font-bold">STATE</p>
          </div>
          <div class="d-flex justify-content-center class-title-box">
            <p class="m-0 ta-font-bold">CLASS</p>
          </div>
          <div class="d-flex justify-content-center date-title-box">
            <p class="m-0 ta-font-bold">EXP.DATE</p>
          </div>
        </div>

        <div class="d-flex justify-content-center license-info-container">
          <div
            class="d-flex justify-content-center align-items-center license-box"
          >
            <p class="m-0 ta-font-regular">
              {{ license.license }}
            </p>
          </div>
          <div
            class="d-flex justify-content-center align-items-center state-box"
          >
            <p class="m-0 ta-font-regular">
              {{ license.state }}
            </p>
          </div>
          <div
            class="d-flex justify-content-center align-items-center class-box"
          >
            <p class="m-0 ta-font-regular">
              {{ license.classData }}
            </p>
          </div>
          <div
            class="d-flex justify-content-center align-items-center date-box"
          >
            <p class="m-0 ta-font-regular">
              {{ license.expDate }}
            </p>
          </div>

          <div
            class="d-flex justify-content-center align-items-center edit-delete-box"
          >
            <button
              type="button"
              class="d-flex justify-content-center align-items-center edit-btn"
              (click)="onEditLicense(i)"
            >
              <svg-icon
                class="edit-icon"
                src="assets/svg/common/ic_pen.svg"
                [svgStyle]="{
                  'width.px': 10,
                  'height.px': 10
                }"
              ></svg-icon>
            </button>
            <button
              type="button"
              class="d-flex justify-content-center align-items-center delete-btn"
              (click)="onDeleteLicense(i)"
            >
              <svg-icon
                class="delete-icon"
                src="assets/svg/common/ic_trash.svg"
                [svgStyle]="{
                  'width.px': 8,
                  'height.px': 9
                }"
              ></svg-icon>
            </button>
          </div>
        </div>
      </div>
    </div>

    <form [formGroup]="licenseForm">
      <!-- LICENSE, COUNTRY, STATE, CLASS  -->

      <div class="d-flex">
        <div class="form-label-group license-group">
          <app-ta-input
            formControlName="license"
            [inputConfig]="{
              name: 'License',
              type: 'text',
              label: 'License',
              isRequired: true,
              textTransform: 'capitalize',
              autoFocus: true
            }"
          ></app-ta-input>
        </div>
        <div class="form-label-group country-group">
          <app-ta-input-dropdown
            formControlName="countryType"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'Country',
              isRequired: true,
              isDropdown: true,
              dropdownWidthClass: 'w-col-applicant-country'
            }"
            [canAddNew]="true"
            [options]="countryTypes"
            (selectedItem)="handleInputSelect($event, 'COUNTRY-TYPE')"
          ></app-ta-input-dropdown>
        </div>
        <div class="form-label-group state-group">
          <app-ta-input-dropdown
            formControlName="stateId"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'State',
              isRequired: true,
              isDisabled: !licenseForm.get('countryType').value,
              isDropdown: true,
              dropdownWidthClass: 'w-col-applicant-state'
            }"
            [canAddNew]="true"
            [options]="stateTypes"
            (selectedItem)="handleInputSelect($event, 'STATE-TYPE')"
          ></app-ta-input-dropdown>
        </div>
        <div class="form-label-group class-group">
          <app-ta-input-dropdown
            formControlName="classType"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'Class',
              isRequired: true,
              isDropdown: true,
              dropdownWidthClass: 'w-col-applicant-class'
            }"
            [canAddNew]="true"
            [options]="classTypes"
            (selectedItem)="handleInputSelect($event, 'CLASS-TYPE')"
          ></app-ta-input-dropdown>
        </div>

        <!-- REVIEW AND FEEDBACK -->

        <div class="review-feedback" *ngIf="selectedMode === 'REVIEW_MODE'">
          <app-applicant-review-feedback
            [index]="0"
            [reviewFeedbackData]=""
            (sendReview)="onSubmitReview($event)"
          ></app-applicant-review-feedback>
        </div>
      </div>

      <!-- EXP. DATE, ENDORSMENTS -->

      <div class="d-flex">
        <div class="form-label-group exp-date-group">
          <app-ta-input
            formControlName="expDate"
            [inputConfig]="{
              name: 'datepicker',
              type: 'text',
              label: 'Exp. Date',
              placeholderIcon: 'date',
              isRequired: true,
              customClass: 'datetimeclass'
            }"
          ></app-ta-input>
        </div>

        <div class="form-label-group endorsments-group">
          <app-ta-input-dropdown
            formControlName="endorsments"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'Endorsments',
              isDropdown: true,
              dropdownWidthClass: 'w-col-applicant-endorsments'
            }"
            [canAddNew]="true"
            [options]="endorsmentsList"
            (selectedItem)="handleInputSelect($event, 'ENDORSMENTS')"
          ></app-ta-input-dropdown>
        </div>

        <!-- REVIEW AND FEEDBACK -->

        <div class="review-feedback" *ngIf="selectedMode === 'REVIEW_MODE'">
          <app-applicant-review-feedback
            [index]="1"
            [reviewFeedbackData]=""
            (sendReview)="onSubmitReview($event)"
          ></app-applicant-review-feedback>
        </div>
      </div>

      <!-- RESTRICTIONS -->

      <div class="d-flex">
        <div class="form-label-group">
          <app-ta-input-dropdown
            formControlName="restrictions"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'Restrictions',
              isDropdown: true,
              dropdownWidthClass: 'w-col-12'
            }"
            [canAddNew]="true"
            [options]="restrictionsList"
            (selectedItem)="handleInputSelect($event, 'RESTRICTIONS')"
          ></app-ta-input-dropdown>
        </div>

        <!-- REVIEW AND FEEDBACK -->

        <div class="review-feedback" *ngIf="selectedMode === 'REVIEW_MODE'">
          <app-applicant-review-feedback
            [index]="3"
            [reviewFeedbackData]=""
            (sendReview)="onSubmitReview($event)"
          ></app-applicant-review-feedback>
        </div>
      </div>

      <!-- ADD MORE LICENSES -->

      <div
        class="d-flex flex-column align-items-center add-more-license-container"
      >
        <h4 class="text-center m-0 noselect ta-font-bold">
          List any additional license(s) held in past 3 years
        </h4>

        <button
          type="button"
          class="add-license-btn ta-font-semi-bold"
          (click)="onAddLicense()"
          *ngIf="editLicense === -1"
        >
          Add license
        </button>
        <button
          type="button"
          class="add-license-btn ta-font-semi-bold"
          (click)="onUpdateLicense()"
          *ngIf="editLicense !== -1"
        >
          Save license
        </button>
      </div>

      <!-- PERMIT -->

      <div class="d-flex flex-column permit-container">
        <div class="d-flex align-items-center justify-content-between">
          <div class="permit-title-box">
            <p class="m-0 ta-font-regular">
              Has your permit, CDL or privilege to operate a motor vehicle ever
              been denided, suspended, or revoked?
              <span class="required-star">*</span>
            </p>
          </div>

          <div class="permit-radios-box">
            <app-ta-input-radiobuttons
              [buttons]="answerChoices"
              (changedValue)="handleInputSelect($event, 'PERMIT')"
            ></app-ta-input-radiobuttons>
          </div>
        </div>

        <!-- EXPLAIN -->

        <div
          class="d-flex explain-container"
          *ngIf="licenseForm.get('permit')?.value === 'Yes'"
        >
          <div class="w-100">
            <app-ta-input
              formControlName="permitExplain"
              [inputConfig]="{
                name: 'Explain',
                type: 'text',
                label: 'Please Explain',
                isRequired: true,
                textTransform: 'capitalize'
              }"
            ></app-ta-input>
          </div>
        </div>

        <!-- REVIEW AND FEEDBACK -->

        <div class="review-feedback" *ngIf="selectedMode === 'REVIEW_MODE'">
          <app-applicant-review-feedback
            [index]="2"
            [reviewFeedbackData]=""
            (sendReview)="onSubmitReview($event)"
          ></app-applicant-review-feedback>
        </div>
      </div>

      <!-- NEXT, BACK STEP -->

      <app-applicant-next-step
        (stepEvent)="onStepAction($event)"
      ></app-applicant-next-step>
    </form>
  </div>
</div>

<!-- CONFIRM ALL REVIEW -->

<app-applicant-confirm-all-review
  *ngIf="selectedMode === 'REVIEW_MODE'"
></app-applicant-confirm-all-review>
