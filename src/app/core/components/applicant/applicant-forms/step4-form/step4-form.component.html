<div class="d-flex flex-column step-form" [formGroup]="accidentForm">
  <div class="d-flex line-container">
    <div class="group location-group">
      <app-ta-input-address
        formControlName="accidentLocation"
        [inputConfig]="{
          name: 'Address',
          type: 'text',
          label: 'Location',
          isRequired: true,
          placeholderIcon: 'address',
          textTransform: 'capitalize',
          autoFocus: true
        }"
        [activeAddress]="selectedAddress"
        (selectedAddress)="handleInputSelect($event, 'ADDRESS')"
      ></app-ta-input-address>
    </div>
    <div class="group date-group">
      <app-ta-input
        formControlName="accidentDate"
        [inputConfig]="{
          name: 'datepicker',
          type: 'text',
          label: 'Date',
          placeholderIcon: 'date',
          isRequired: true,
          customClass: 'datetimeclass',
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 1, 10)"
      ></app-ta-input>
    </div>

    <!-- REVIEW AND FEEDBACK -->

    <div
      class="review-feedback-container"
      *ngIf="selectedMode === 'REVIEW_MODE' || selectedMode === 'FEEDBACK_MODE'"
    >
      <app-applicant-review-feedback
        formControlName="firstRowReview"
        [displayAnnotationButton]="
          openAnnotationArray[10].displayAnnotationButton
        "
        [displayAnnotationTextArea]="
          openAnnotationArray[10].displayAnnotationTextArea
        "
        [lineIndex]="10"
        [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
        [feedbackText]="
          'Check the routing number one more time (one number missing)!!!'
        "
        (annotationBtnClickEvent)="getAnnotationBtnClickValue($event)"
      ></app-applicant-review-feedback>
    </div>
  </div>

  <!-- FATALITIES, INJURIES, HAZMAT SPILL -->

  <div class="d-flex justify-content-between">
    <div class="d-flex align-items-center fatalities-injuries-group">
      <div class="d-flex align-items-center fatalities-group">
        <app-ta-input-arrows
          formControlName="fatalities"
          [inputConfig]="{
            name: 'FatalInjuries',
            type: 'text',
            blackInput: true,
            hideRequiredCheck: true,
            hideClear: true,
            hideErrorMessage: true,
            textAlign: 'center'
          }"
          [name]="'Fatalities #'"
          [type]="'applicant'"
        ></app-ta-input-arrows>
      </div>

      <div class="d-flex align-items-center injuries-group">
        <app-ta-input-arrows
          formControlName="injuries"
          [inputConfig]="{
            name: 'FatalInjuries',
            type: 'text',
            blackInput: true,
            hideRequiredCheck: true,
            hideClear: true,
            hideErrorMessage: true,
            textAlign: 'center'
          }"
          [name]="'Inj. #'"
          [type]="'applicant'"
        ></app-ta-input-arrows>
      </div>
    </div>

    <div
      class="d-flex align-items-center justify-content-between group hazmat-spill-group"
    >
      <div class="title-box">
        <p class="m-0 ta-font-regular">
          Hazmat spill <span class="required-star">*</span>
        </p>
      </div>
      <div class="radios-box">
        <app-ta-input-radiobuttons
          [buttons]="answerChoices"
          (changedValue)="handleInputSelect($event, 'HAZMAT-SPILL')"
        ></app-ta-input-radiobuttons>
      </div>
    </div>
  </div>

  <!-- TRUCK TYPE, DESCRIPTION -->

  <div class="d-flex line-container">
    <div class="group truck-type-group">
      <app-ta-input-dropdown
        formControlName="truckType"
        [template]="'svgtext-template'"
        [inputConfig]="{
          name: 'Input Dropdown',
          type: 'text',
          label: 'Vehicle type',
          isRequired: true,
          isDropdown: true,
          dropdownWidthClass: 'w-col-applicant-t-type'
        }"
        [options]="truckType"
        (selectedItem)="handleInputSelect($event, 'TRUCK-TYPE')"
      ></app-ta-input-dropdown>
    </div>
    <div class="group description-group">
      <app-ta-input
        formControlName="accidentDescription"
        [inputConfig]="{
          name: 'Description',
          type: 'text',
          label: 'Description',
          textTransform: 'capitalize',
          isRequired: true,
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 1, 11)"
      ></app-ta-input>
    </div>

    <!-- REVIEW AND FEEDBACK -->

    <div
      class="review-feedback-container"
      *ngIf="selectedMode === 'REVIEW_MODE' || selectedMode === 'FEEDBACK_MODE'"
    >
      <app-applicant-review-feedback
        formControlName="secondRowReview"
        [displayAnnotationButton]="
          openAnnotationArray[11].displayAnnotationButton
        "
        [displayAnnotationTextArea]="
          openAnnotationArray[11].displayAnnotationTextArea
        "
        [lineIndex]="11"
        [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
        [feedbackText]="
          'Check the routing number one more time (one number missing)!!!'
        "
        (annotationBtnClickEvent)="getAnnotationBtnClickValue($event)"
      ></app-applicant-review-feedback>
    </div>
  </div>

  <!-- ADD ANOTHER ACCIDENT -->

  <div class="d-flex justify-content-center align-items-center btn-container">
    <button
      type="button"
      class="d-flex justify-content-center align-items-center ta-font-bold add-btn"
      (click)="onAddAccident()"
      [ngClass]="{
        disabled: accidentForm.invalid
      }"
      *ngIf="!isEditing"
    >
      <svg-icon
        class="plus-icon"
        src="assets/svg/common/ic_plus.svg
  "
        [svgStyle]="{
          'width.px': 18,
          'height.px': 18
        }"
      ></svg-icon>

      Add Another Accident
    </button>

    <div
      class="d-flex align-items-center mx-auto justify-content-center btn-container-inside"
      *ngIf="isEditing"
    >
      <button
        type="button"
        class="d-flex justify-content-center align-items-center ta-font-semi-bold add-btn cancel-btn"
        (click)="onCancelEditAccident()"
      >
        Cancel
      </button>
      <button
        type="button"
        class="d-flex justify-content-center align-items-center ta-font-semi-bold add-btn save-btn"
        [ngClass]="{
          disabled: !isAccidentEdited
        }"
        (click)="onSaveEditedAccident()"
      >
        Save Changes
      </button>
    </div>
  </div>
</div>
