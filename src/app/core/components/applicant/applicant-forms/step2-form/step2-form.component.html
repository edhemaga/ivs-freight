<div class="d-flex flex-column step-form" [formGroup]="form">
  <!-- EMPLOYER -->

  <div class="d-flex line-container">
    <div class="group employer-group">
      <app-ta-input
        formControlName="employer"
        [inputConfig]="{
          name: 'Employer',
          type: 'text',
          label: 'Current or last employer',
          isRequired: true,
          textTransform: 'capitalize',
          autoFocus: true,
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 0, 15)"
      ></app-ta-input>
    </div>

    <!-- REVIEW AND FEEDBACK -->

    <div
      class="review-feedback-container"
      *ngIf="selectedMode === 'REVIEW_MODE' || selectedMode === 'FEEDBACK_MODE'"
    >
      <app-applicant-review-feedback
        [displayAnnotationButton]="
          openAnnotationArray[15].displayAnnotationButton
        "
        [displayAnnotationTextArea]="
          openAnnotationArray[15].displayAnnotationTextArea
        "
        [lineIndex]="15"
        [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
        [feedbackText]="
          'Check the routing number one more time (one number missing)!!!'
        "
        (annotationBtnClickEvent)="getAnnotationBtnClickValue($event)"
      ></app-applicant-review-feedback>
    </div>
  </div>

  <!-- JOB DESCRIPTION, FROM, TO -->

  <div class="d-flex line-container">
    <div class="group job-description-group">
      <app-ta-input
        formControlName="jobDescription"
        [inputConfig]="{
          name: 'Job Description',
          type: 'text',
          label: 'Job description',
          isRequired: true,
          textTransform: 'capitalize',
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 0, 16)"
      ></app-ta-input>
    </div>
    <div class="group date-group">
      <app-ta-input
        formControlName="fromDate"
        [inputConfig]="{
          name: 'datepicker',
          type: 'text',
          label: 'From',
          placeholderIcon: 'date',
          isRequired: true,
          customClass: 'datetimeclass',
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 1, 16)"
      ></app-ta-input>
    </div>
    <div class="group date-group date-to-group">
      <app-ta-input
        formControlName="toDate"
        [inputConfig]="{
          name: 'datepicker',
          type: 'text',
          label: 'To',
          placeholderIcon: 'date',
          isRequired: true,
          customClass: 'datetimeclass',
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 2, 16)"
      ></app-ta-input>
    </div>

    <!-- REVIEW AND FEEDBACK -->

    <div
      class="review-feedback-container"
      *ngIf="selectedMode === 'REVIEW_MODE' || selectedMode === 'FEEDBACK_MODE'"
    >
      <app-applicant-review-feedback
        [displayAnnotationButton]="
          openAnnotationArray[16].displayAnnotationButton
        "
        [displayAnnotationTextArea]="
          openAnnotationArray[16].displayAnnotationTextArea
        "
        [lineIndex]="16"
        [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
        [feedbackText]="
          'Check the routing number one more time (one number missing)!!!'
        "
        (annotationBtnClickEvent)="getAnnotationBtnClickValue($event)"
      ></app-applicant-review-feedback>
    </div>
  </div>

  <!-- PHONE, EMAIL, FAX -->

  <div class="d-flex line-container">
    <div class="group phone-group">
      <app-ta-input
        formControlName="employerPhone"
        [inputConfig]="{
          name: 'Phone',
          type: 'text',
          label: 'Employer Phone',
          isRequired: true,
          placeholderIcon: 'phone',
          mask: '(000) 000-0000',
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 0, 17)"
      ></app-ta-input>
    </div>
    <div class="group email-group">
      <app-ta-input
        formControlName="employerEmail"
        [inputConfig]="{
          name: 'Email',
          type: 'text',
          label: 'Employer Email',
          isRequired: true,
          placeholderIcon: 'email',
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 1, 17)"
      ></app-ta-input>
    </div>
    <div class="group fax-group">
      <app-ta-input
        formControlName="employerFax"
        [inputConfig]="{
          name: 'Fax',
          type: 'text',
          label: 'Employer Fax',
          placeholderIcon: 'fax',
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 2, 17)"
      ></app-ta-input>
    </div>

    <!-- REVIEW AND FEEDBACK -->

    <div
      class="review-feedback-container"
      *ngIf="selectedMode === 'REVIEW_MODE' || selectedMode === 'FEEDBACK_MODE'"
    >
      <app-applicant-review-feedback
        [displayAnnotationButton]="
          openAnnotationArray[17].displayAnnotationButton
        "
        [displayAnnotationTextArea]="
          openAnnotationArray[17].displayAnnotationTextArea
        "
        [lineIndex]="17"
        [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
        [feedbackText]="
          'Check the routing number one more time (one number missing)!!!'
        "
        (annotationBtnClickEvent)="getAnnotationBtnClickValue($event)"
      ></app-applicant-review-feedback>
    </div>
  </div>

  <!-- ADDRESS -->

  <div class="d-flex line-container">
    <div class="group address-group">
      <app-ta-input-address
        formControlName="employerAddress"
        [inputConfig]="{
          name: 'Address',
          type: 'text',
          label: 'Employer Address, City, State Zip',
          isRequired: true,
          placeholderIcon: 'address',
          textTransform: 'capitalize'
        }"
        [activeAddress]="selectedAddress"
        (selectedAddress)="handleInputSelect($event, 'ADDRESS')"
      ></app-ta-input-address>
    </div>
    <div class="group address-unit-group">
      <app-ta-input
        formControlName="employerAddressUnit"
        [inputConfig]="{
          name: 'Address Unit',
          type: 'text',
          label: 'Unit #',
          maxLength: 6,
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 1, 18)"
      ></app-ta-input>
    </div>

    <!-- REVIEW AND FEEDBACK -->

    <div
      class="review-feedback-container"
      *ngIf="selectedMode === 'REVIEW_MODE' || selectedMode === 'FEEDBACK_MODE'"
    >
      <app-applicant-review-feedback
        [displayAnnotationButton]="
          openAnnotationArray[18].displayAnnotationButton
        "
        [displayAnnotationTextArea]="
          openAnnotationArray[18].displayAnnotationTextArea
        "
        [lineIndex]="18"
        [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
        [feedbackText]="
          'Check the routing number one more time (one number missing)!!!'
        "
        (annotationBtnClickEvent)="getAnnotationBtnClickValue($event)"
      ></app-applicant-review-feedback>
    </div>
  </div>

  <!-- DRIVING POSITION CHECKBOX -->

  <div
    class="d-flex justify-content-center align-items-center driving-position-group"
  >
    <app-ta-checkbox
      formControlName="isDrivingPosition"
      [name]="'isDrivingPosition'"
      [label]="'Was this a driving position?'"
      [customClass]="'bold-14'"
    ></app-ta-checkbox>
  </div>

  <!-- TRUCK TYPE, TRAILER TYPE, LENGTH -->

  <div class="d-flex flex-column" *ngIf="form.get('isDrivingPosition').value">
    <div class="d-flex line-container">
      <div class="group vehicle-type-group">
        <app-ta-input-dropdown
          formControlName="truckType"
          [template]="'svgtext-template'"
          [inputConfig]="{
            name: 'Input Dropdown',
            type: 'text',
            label: 'Vehicle type',
            isRequired: true,
            isDropdown: true,
            dropdownWidthClass: 'w-col-applicant-t-type',
            incorrectInput: selectedMode === 'REVIEW_MODE'
          }"
          [incorrectValue]="false"
          (incorrectEvent)="incorrectInput($event, 0, 19)"
          [options]="truckType"
          (selectedItem)="handleInputSelect($event, 'TRUCK-TYPE')"
        ></app-ta-input-dropdown>
      </div>
      <div class="group trailer-type-group">
        <app-ta-input-dropdown
          formControlName="trailerType"
          [template]="'svgtext-template'"
          [inputConfig]="{
            name: 'Input Dropdown',
            type: 'text',
            label: 'Trailer Type',
            isDisabled: !isTruckSelected,
            isRequired: isTruckSelected,
            isDropdown: true,
            dropdownWidthClass: 'w-col-applicant-t-type',
            incorrectInput: selectedMode === 'REVIEW_MODE'
          }"
          [incorrectValue]="false"
          (incorrectEvent)="incorrectInput($event, 1, 19)"
          [options]="trailerType"
          (selectedItem)="handleInputSelect($event, 'TRAILER-TYPE')"
        ></app-ta-input-dropdown>
      </div>
      <div class="group length-group">
        <app-ta-input-dropdown
          formControlName="trailerLength"
          [inputConfig]="{
            name: 'Input Dropdown',
            type: 'text',
            label: 'Length',
            isDropdown: true,
            isDisabled: !isTruckSelected,
            isRequired: isTruckSelected,
            dropdownWidthClass: 'w-col-applicant-length',
            incorrectInput: selectedMode === 'REVIEW_MODE'
          }"
          [incorrectValue]="false"
          (incorrectEvent)="incorrectInput($event, 2, 19)"
          [options]="trailerLengthType"
          (selectedItem)="handleInputSelect($event, 'TRAILER-LENGTH')"
        ></app-ta-input-dropdown>
      </div>

      <!-- REVIEW AND FEEDBACK -->

      <div
        class="review-feedback-container"
        *ngIf="
          selectedMode === 'REVIEW_MODE' || selectedMode === 'FEEDBACK_MODE'
        "
      >
        <app-applicant-review-feedback
          [displayAnnotationButton]="
            openAnnotationArray[19].displayAnnotationButton
          "
          [displayAnnotationTextArea]="
            openAnnotationArray[19].displayAnnotationTextArea
          "
          [lineIndex]="19"
          [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
          [feedbackText]="
            'Check the routing number one more time (one number missing)!!!'
          "
          (annotationBtnClickEvent)="getAnnotationBtnClickValue($event)"
        ></app-applicant-review-feedback>
      </div>
    </div>

    <!-- ANOTHER CLASS -->

    <div
      class="d-flex justify-content-center align-items-center another-class-group"
    >
      <button
        type="button"
        class="d-flex justify-content-center align-items-center ta-font-bold add-btn"
      >
        <svg-icon
          class="plus-icon"
          src="assets/svg/common/ic_plus.svg
  "
          [svgStyle]="{
            'width.px': 18,
            'height.px': 18
          }"
        ></svg-icon>

        Add Another Class Of Equipment
      </button>
    </div>

    <!-- QUESTIONS -->

    <ng-container *ngIf="questions">
      <div class="d-flex align-items-center questions-container">
        <div
          class="d-flex align-items-center question-box"
          *ngFor="
            let question of questions;
            let i = index;
            trackBy: trackByIdentity
          "
        >
          <div class="question-title-box">
            <p class="m-0 noselect ta-font-regular">
              {{ question.title }} <span>*</span>
            </p>
          </div>

          <div class="question-radios-box">
            <app-ta-input-radiobuttons
              [buttons]="question.answerChoices"
              (changedValue)="handleInputSelect($event, 'ANSWER-CHOICE')"
            ></app-ta-input-radiobuttons>
          </div>
        </div>
      </div>
    </ng-container>
  </div>

  <!-- REASON FOR LEAVING -->

  <div class="d-flex line-container">
    <div class="group reason-for-leaving-group">
      <app-ta-input-dropdown
        formControlName="reasonForLeaving"
        [template]="'svgtext-template'"
        [inputConfig]="{
          name: 'Input Dropdown',
          type: 'text',
          label: 'Reason for leaving',
          isRequired: true,
          isDropdown: true,
          dropdownWidthClass: 'w-col-applicant-reason'
        }"
        [options]="reasonsForLeaving"
        [activeItem]="selectedReasonForLeaving"
        (selectedItem)="handleInputSelect($event, 'REASON-FOR-LEAVING')"
      ></app-ta-input-dropdown>
    </div>

    <!-- REVIEW AND FEEDBACK -->

    <div
      class="review-feedback-container"
      *ngIf="selectedMode === 'REVIEW_MODE' || selectedMode === 'FEEDBACK_MODE'"
    >
      <app-applicant-review-feedback
        [displayAnnotationButton]="
          openAnnotationArray[20].displayAnnotationButton
        "
        [displayAnnotationTextArea]="
          openAnnotationArray[20].displayAnnotationTextArea
        "
        [lineIndex]="20"
        [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
        [feedbackText]="
          'Check the routing number one more time (one number missing)!!!'
        "
        (annotationBtnClickEvent)="getAnnotationBtnClickValue($event)"
      ></app-applicant-review-feedback>
    </div>
  </div>

  <!-- ACCOUNT FOR PERIOD -->

  <div class="d-flex line-container">
    <div class="mb-0 account-for-period-group group">
      <app-ta-input
        formControlName="accountForPeriod"
        [inputConfig]="{
          name: 'Account for Period',
          type: 'text',
          label: 'Account for period between jobs (include reason)',
          textTransform: 'capitalize',
          incorrectInput: selectedMode === 'REVIEW_MODE'
        }"
        [incorrectValue]="false"
        (incorrectEvent)="incorrectInput($event, 0, 21)"
      ></app-ta-input>
    </div>

    <!-- REVIEW AND FEEDBACK -->

    <div
      class="review-feedback-container"
      *ngIf="selectedMode === 'REVIEW_MODE' || selectedMode === 'FEEDBACK_MODE'"
    >
      <app-applicant-review-feedback
        [displayAnnotationButton]="
          openAnnotationArray[21].displayAnnotationButton
        "
        [displayAnnotationTextArea]="
          openAnnotationArray[21].displayAnnotationTextArea
        "
        [lineIndex]="21"
        [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
        [feedbackText]="
          'Check the routing number one more time (one number missing)!!!'
        "
        (annotationBtnClickEvent)="getAnnotationBtnClickValue($event)"
      ></app-applicant-review-feedback>
    </div>
  </div>
</div>
