<div cdkDrag class="modal-container">
  <div cdkDragHandle class="modal-header">
    <h5 class="modal-title">{{ modalTitle }}</h5>
    <svg-icon
      (click)="activeModal.dismiss('Modal close')"
      [svgStyle]="{ 'width.px': 16, 'height.px': 16 }"
      class="modal-close-btn cursor-pointer"
      src="assets/img/svgs/table/close.svg"
    ></svg-icon>
  </div>
  <div class="divider">
  </div>
  <div class="modal-body edit-repair-shop">
    <!-- <app-loading-modal *ngIf="!loaded"></app-loading-modal> -->
    <form
      (keydown)="keyDownFunction($event)"
      *ngIf="loaded"
      [formGroup]="repairShopForm"
      class="form-container"
    >
      <div class="row">
        <div class="col-12">
          <div class="form-label-group" [ngClass]="inputText ? 'typing' : 'not-typing'">
            <input
              (keydown)="onCheckBackSpace($event)"
              (keypress)="onShopNameTyping($event)"
              (paste)="onPaste($event, 'name')"
              [modalType]="inputData.data.type"
              appAutoFocus
              appInputFocus
              class="form-control input-control required"
              formControlName="name"
              id="name"
              placeholder="Name"
              style="text-transform: uppercase;"
              (keyup)="onKeyUpMethod($event)"
            />
            <div (click)="clearInput($event)" class="clear-button" ngbTooltip="Clear" placement="bottom-left">
            </div>
            <label class="required-label" for="name">Name</label>
            <app-required-label [control]="repairShopForm.controls.name"></app-required-label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-4">
          <div
            class="form-label-group input-icon phone-field-wrapper {{
              manageInputValidation(repairShopForm.controls.phone)
            }}"
            [ngClass]="inputText ? 'typing' : 'not-typing'"
          >
            <input
              appInputFocus
              class="form-control input-control required"
              formControlName="phone"
              id="phone"
              mask="(000) 000-0000"
              placeholder="Phone"
              (keyup)="onKeyUpMethod($event)"
            />
            <div (click)="clearInput($event)" class="clear-button" ngbTooltip="Clear" placement="bottom-left">
            </div>
            <label class="required-label" for="phone">Phone</label>
            <app-required-label [control]="repairShopForm.controls.phone"></app-required-label>
          </div>
        </div>
        <div class="col-8">
          <div
            class="form-label-group input-icon email-field-wrapper {{
              manageInputValidation(repairShopForm.controls.email)
            }}"
            [ngClass]="inputText ? 'typing' : 'not-typing'"
          >
            <input
              (keydown)="onCheckBackSpace($event)"
              (keypress)="onEmailTyping($event)"
              (paste)="onPaste($event, 'email')"
              appInputFocus
              class="form-control input-control email-input"
              formControlName="email"
              id="email"
              oninput="this.value = this.value.replace(/[ ]|^ /g,'')"
              placeholder="Email"
              (keyup)="onKeyUpMethod($event)"
            />
            <div (click)="clearInput($event)" class="clear-button" ngbTooltip="Clear" placement="bottom-left">
            </div>
            <label for="email">Email</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-10">
          <div
            class="form-label-group input-icon address-field-wrapper {{
              manageInputValidation(repairShopForm.controls.address)
            }}"
            [ngClass]="inputText ? 'typing' : 'not-typing'"
          >
            <input
              #placesRef="ngx-places"
              (onAddressChange)="handleAddressChange($event)"
              [options]="options"
              appInputFocus
              class="form-control input-control required"
              formControlName="address"
              id="address"
              ngx-google-places-autocomplete
              placeholder="Address, City, State Zip"
              (keyup)="onKeyUpMethod($event)"
            />
            <div (click)="clearInput($event)" class="clear-button" ngbTooltip="Clear" placement="bottom-left">
            </div>
            <label class="required-label" for="address">Address, City, State Zip</label>
            <app-required-label [control]="repairShopForm.controls.address"></app-required-label>
          </div>
        </div>
        <div class="col-2">
          <div class="form-label-group" [ngClass]="inputText ? 'typing' : 'not-typing'">
            <input
              appInputFocus
              appInputrestriction="[A-Za-z0-9-]"
              class="form-control input-control"
              formControlName="address_unit"
              id="address_unit"
              maxlength="6"
              placeholder="Unit #"
              (keyup)="onKeyUpMethod($event)"
            />
            <div (click)="clearInput($event)" class="clear-button" ngbTooltip="Clear" placement="bottom-left">
            </div>
            <label for="address_unit">Unit #</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div *ngIf="repairShopTypes !== undefined && repairShopTypes.length > 0" class="type">
            Types
          </div>
          <div class="shop-type-select">
            <div
              *ngFor="let type of repairShopTypes; let i = index"
              [ngStyle]="{ width: type.width }"
              class="btn-group btn-group-toggle{{ i == 0 ? ' first-choise' : '' }}"
            >
              <label class="btn-primary" ngbButtonLabel>
                <input
                  [(ngModel)]="type.checked"
                  [ngModelOptions]="{ standalone: true }"
                  ngbButton
                  type="checkbox"
                />
                {{ type.name }}
              </label>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button (click)="closeRepairShopEdit()" class="cancel-btn" type="button">
      <p class="m-0">Cancel</p>
    </button>
    <button (click)="manageRepairShop()" class="save-btn"  [ngClass]="{'invalid-btn' : !repairShopForm.valid}" ngbAutofocus type="button">
      <p class="m-0">Save</p>
    </button>
  </div>
</div>
