<app-ta-modal
   [modalTitle]="editData?.type !== 'edit' ? 'Add Task' : 'Edit Task'"
   [editName]="taskName"
   [editData]="editData"
   [isModalValid]="taskForm.valid && isFormDirty"
   (action)="onModalAction($event)"
>
   <form
      origin
      [formGroup]="taskForm"
      class="form-container form-container-without-mb"
   >
      <div class="row">
         <div class="col-12">
            <app-ta-input
               formControlName="title"
               [inputConfig]="{
                  name: 'Title',
                  type: 'text',
                  label: 'Title',
                  isRequired: true,
                  textTransform: 'capitalize',
                  autoFocus: editData?.type !== 'edit',
                  minLength: 2,
                  maxLength: 64
               }"
            ></app-ta-input>
         </div>
      </div>
      <div class="row">
         <div class="col-12">
            <app-ta-input
               formControlName="description"
               [inputConfig]="{
                  name: 'Description',
                  type: 'text',
                  label: 'Description',
                  minLength: 2,
                  maxLength: 160,
                  textTransform: 'capitalize'
               }"
            ></app-ta-input>
         </div>
      </div>
      <div class="row">
         <div class="col-8">
            <app-ta-input
               formControlName="url"
               [inputConfig]="{
                  name: 'Url',
                  type: 'text',
                  label: 'Hyperlink',
                  placeholderIcon: 'hyperlink',
                  minLength: 4,
                  maxLength: 255
               }"
            ></app-ta-input>
         </div>
         <div class="col-4">
            <app-ta-input
               formControlName="deadline"
               [inputConfig]="{
                  name: 'datepicker',
                  type: 'text',
                  isDropdown: true,
                  label: 'Deadline',
                  placeholderIcon: 'date',
                  customClass: 'datetimeclass'
               }"
            ></app-ta-input>
         </div>
      </div>
      <div class="row">
         <div class="col-12">
            <app-ta-input-dropdown
               formControlName="departmentIds"
               [template]="'multiselect'"
               [inputConfig]="{
                  name: 'Input Dropdown Department',
                  minLength: 2,
                  maxLength: 36,
                  type: 'text',
                  isDropdown: true,
                  label: 'Department',
                  textTransform: 'capitalize',
                  multiselectDropdown: true,
                  dropdownWidthClass: 'w-col-455'
               }"
               [options]="resDepartments"
               [preloadMultiselectItems]="selectedDepartments"
               (selectedItems)="onSelectDropDown($event, 'res-department')"
            ></app-ta-input-dropdown>
         </div>
      </div>
      <div class="row last-row">
         <div class="col-12">
            <app-ta-input-dropdown
               formControlName="companyUserIds"
               [template]="'multiselect'"
               [inputConfig]="{
                  name: 'Input Dropdown',
                  type: 'text',
                  isDropdown: true,
                  label: 'Assign task',
                  multiselectDropdown: true,
                  dropdownWidthClass: 'w-col-455'
               }"
               [options]="resCompanyUsers"
               [preloadMultiselectItems]="selectedCompanyUsers"
               (selectedItems)="onSelectDropDown($event, 'assign-task')"
            ></app-ta-input-dropdown>
         </div>
      </div>
      <app-ta-custom-card
         [hasCounter]="comments.length ? comments.length : 0"
         [cardName]="'Comment'"
         [isCardOpen]="comments.length > 0"
         [isCommentData]="true"
         [hasBodyData]="comments.length > 0"
         [hasScrollBody]="comments.length > 4"
         [disabledCard]="editData?.type !== 'edit'"
         [hasActionSvg]="
            editData?.type === 'edit' ? 'assets/svg/common/ic_plus.svg' : ''
         "
         (onActionEvent)="createComment()"
         [animationMarginParams]="{
            marginTop: '10px',
            marginBottom: '12px'
         }"
      >
         <app-ta-user-review
            *ngIf="comments.length"
            [reviewData]="comments"
            (changeReviewsEvent)="changeCommentsEvent($event)"
            [isNewReview]="comments[0].isNewReview"
         ></app-ta-user-review>
      </app-ta-custom-card>
      <div class="ta-card-body-overflow-none">
         <app-ta-custom-card
            [hasCounter]="documents.length ? documents.length : 0"
            [cardName]="'Documents'"
            [isCardOpen]="documents.length > 0"
         >
            <app-ta-upload-files
               [files]="documents"
               (onFileEvent)="onFilesEvent($event)"
            ></app-ta-upload-files>
         </app-ta-custom-card>
      </div>
   </form>
</app-ta-modal>
