<app-ta-modal
  [modalTitle]="editData?.header?.concat(' ', 'PM')"
  [editData]="editData"
  [editName]="
    editData?.action.includes('unit-pm')
      ? 'Unit'.concat(' ', editData?.id)
      : editData?.id
  "
  [isModalValid]="PMform.valid"
  (modalActionTypeEmitter)="onModalAction($event)"
>
  <form [formGroup]="PMform" class="form-container">
    <app-ta-custom-card
      [hasCounter]="'0'"
      [hasDivider]="false"
      [cardName]="'Selected'"
      [hasActionSvg]="'assets/svg/common/ic_plus.svg'"
      [hasArrow]="false"
      [isCommentData]="true"
      [isCardOpen]="defaultPMs.length"
      [hasScrollBody]="defaultPMs.length > 18"
      (onActionEvent)="addPMs($event)"
    >
      <!-- Default PMs -->
      <div
        formArrayName="defaultPMs"
        class="common-fake-table-modal common-fake-table-modal-pm"
        *ngIf="defaultPMs.length"
      >
        <div class="common-fake-table-label">
          <p></p>
          <p>TITLE</p>
          <p>MILES</p>
        </div>
        <div
          *ngFor="
            let pm of defaultPMs.controls;
            let ind = index;
            trackBy: identity
          "
        >
          <div [formGroupName]="ind" class="common-fake-table-card">
            <app-ta-checkbox
              formControlName="isChecked"
              [name]="ind"
              [customClass]="'regular'"
              [disabled]="
                editData?.header?.includes('Truck') ? ind < 4 : ind < 1
              "
              [svg]="pm.get('svg').value"
              [label]="pm.get('title').value"
            >
            </app-ta-checkbox>

            <app-ta-input
              formControlName="miles"
              [inputConfig]="{
                name: 'Miles',
                type: 'text',
                blackInput: true,
                modalPM: true,
                thousandSeparator: true
              }"
            ></app-ta-input>

            <!-- <div
              ngbTooltip
              mainTooltip="Delete"
              position="top"
              tooltipBackground="#EF5350"
              class="common-fake-table-delete"
              (click)="removePMs(ind)"
            >
              <svg-icon src="assets/svg/common/ic_trash.svg"></svg-icon>
            </div> -->
          </div>
        </div>
      </div>
      <!-- New PMs -->
    </app-ta-custom-card>
  </form>
</app-ta-modal>
