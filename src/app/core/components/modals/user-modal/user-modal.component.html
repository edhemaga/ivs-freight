<app-ta-modal
  [modalTitle]="editData?.type !== 'edit' ? 'Add User' : 'Edit User'"
  [editData]="editData"
  [editName]="editData?.id"
  [isModalValid]="userForm.valid"
  (action)="onModalAction($event)"
>
  <app-ta-tab-switch
    [tabs]="tabs"
    (switchClicked)="tabChange($event)"
    [type]="'type1-modal-popup'"
  >
  </app-ta-tab-switch>

  <form [formGroup]="userForm" class="form-container">
    <div class="animation-two-tabs" [@animationTabsModal]="animationObject">
      <!-------------------------------- Basic Tab -------------------------------->
      <div class="m-tab" *ngIf="selectedTab === 1">
        <div class="row">
          <div class="col-6">
            <app-ta-input
              formControlName="firstName"
              [inputConfig]="{
                name: 'First name',
                type: 'text',
                label: 'First Name',
                isRequired: true,
                minLength: 2,
                maxLength: 26,
                textTransform: 'capitalize',
                autoFocus: editData?.type !== 'edit' ? true : false
              }"
            ></app-ta-input>
          </div>
          <div class="col-6">
            <app-ta-input
              formControlName="lastName"
              [inputConfig]="{
                name: 'Last name',
                type: 'text',
                label: 'Last Name',
                minLength: 2,
                maxLength: 26,
                isRequired: true,
                textTransform: 'capitalize'
              }"
            ></app-ta-input>
          </div>
        </div>
        <div class="row">
          <div class="col-10">
            <app-ta-input-address
              formControlName="address"
              [inputConfig]="{
                name: 'Address',
                type: 'text',
                label: 'Address, City, State Zip',
                placeholderIcon: 'address',
                minLength: 12,
                maxLength: 256,
                textTransform: 'capitalize'
              }"
              [activeAddress]="selectedAddress"
              (selectedAddress)="onHandleAddress($event)"
            ></app-ta-input-address>
          </div>
          <div class="col-2">
            <app-ta-input
              formControlName="addressUnit"
              [inputConfig]="{
                name: 'address-unit',
                type: 'text',
                label: 'Unit #',
                textTransform: 'uppercase',
                minLength: 1,
                maxLength: 10
              }"
            ></app-ta-input>
          </div>
        </div>
        <div class="row last-row">
          <div class="col-5">
            <app-ta-input
              formControlName="personalPhone"
              [inputConfig]="{
                name: 'Phone',
                type: 'text',
                label: 'Phone',
                isRequired: true,
                placeholderIcon: 'phone',
                mask: '(000) 000-0000'
              }"
            ></app-ta-input>
          </div>
          <div class="col-7">
            <app-ta-input
              formControlName="personalEmail"
              [inputConfig]="{
                name: 'Email',
                type: 'text',
                label: 'Email',
                placeholderIcon: 'email',
                minLength: 5,
                maxLength: 64,
                textTransform: 'lowercase'
              }"
            ></app-ta-input>
          </div>
        </div>

        <app-ta-custom-card [cardName]="'Employe Details'" [isCardOpen]="true">
          <div class="row row-mt-20">
            <div class="col-4">
              <app-ta-input-dropdown
                formControlName="departmentId"
                [inputConfig]="{
                  name: 'Input Dropdown Department',
                  minLength: 2,
                  maxLength: 36,
                  type: 'text',
                  label: 'Department',
                  textTransform: 'capitalize',
                  isRequired: true,
                  isDropdown: true,
                  dropdownWidthClass: 'w-col-136'
                }"
                [options]="departments"
                [activeItem]="selectedDepartment"
                (selectedItem)="onSelectDropdown($event, 'department')"
              ></app-ta-input-dropdown>
            </div>
            <div class="col-5">
              <app-ta-input-dropdown
                formControlName="mainOfficeId"
                [inputConfig]="{
                  name: 'Input Dropdown',
                  type: 'text',
                  label: 'Office',
                  isDropdown: true,
                  dropdownWidthClass: 'w-col-188'
                }"
                [options]="offices"
                [activeItem]="selectedOffice"
                (selectedItem)="onSelectDropdown($event, 'office')"
              ></app-ta-input-dropdown>
            </div>
            <div class="col-3 no-p-left">
              <app-ta-tab-switch
                [tabs]="typeOfEmploye"
                (switchClicked)="onTypeOfEmploye($event)"
                [type]="'type2-modal-popup'"
              >
              </app-ta-tab-switch>
            </div>
          </div>
          <div
            class="phone-ext-email-small-modal"
            [ngClass]="{ 'active-phone-ext': isPhoneExtExist }"
          >
            <div class="phone-extension">
              <div class="phone-field">
                <app-ta-input
                  formControlName="employePhone"
                  [inputConfig]="{
                    name: 'Phone',
                    type: 'text',
                    label: 'Phone',
                    isRequired: true,
                    placeholderIcon: 'phone',
                    mask: '(000) 000-0000'
                  }"
                ></app-ta-input>
              </div>
              <div
                class="extension-field"
                *ngIf="!isPhoneExtExist"
                ngbTooltip
                mainTooltip="Add Extension"
                position="top"
                tooltipBackground="#6c6c6c"
                (click)="isPhoneExtExist = !isPhoneExtExist"
              >
                <svg-icon src="assets/svg/common/ic_plus.svg"></svg-icon>
              </div>
              <app-ta-input
                *ngIf="isPhoneExtExist"
                formControlName="employePhoneExt"
                [inputConfig]="{
                  name: 'phone-extension',
                  type: 'text',
                  label: 'Ext.',
                  minLength: 1,
                  maxLength: 8,
                  placeholderIcon: 'phone-extension'
                }"
              ></app-ta-input>
            </div>
            <div class="email-field">
              <app-ta-input
                formControlName="employeEmail"
                [inputConfig]="{
                  name: 'Email',
                  type: 'text',
                  label: 'Email',
                  placeholderIcon: 'email',
                  isRequired: true,
                  minLength: 5,
                  maxLength: 64,
                  textTransform: 'lowercase'
                }"
              ></app-ta-input>
            </div>
          </div>
        </app-ta-custom-card>
        <div class="custom-checkbox-card">
          <div class="divider"></div>
          <div
            class="checkbox-card-header"
            [ngClass]="{ pointer: userForm.get('isIncludePayroll').value }"
          >
            <app-ta-checkbox
              formControlName="isIncludePayroll"
              [label]="'Include in Payroll'"
            ></app-ta-checkbox>
            <svg-icon
              class="checkbox-card-header-arrow"
              src="assets/svg/common/ic_arrow_down_updated.svg"
              [ngClass]="{ visible: userForm.get('isIncludePayroll').value }"
            ></svg-icon>
          </div>
          <div
            *ngIf="userForm.get('isIncludePayroll').value"
            class="checkbox-card-body"
            [ngClass]="{ active: userForm.get('isIncludePayroll').value }"
          >
            <div class="row">
              <div class="col-5">
                <app-ta-input
                  formControlName="salary"
                  [inputConfig]="{
                    name: 'Dollar',
                    type: 'text',
                    label: 'Salary',
                    isRequired: true,
                    placeholderIcon: 'dollar',
                    customClass: 'dollar-placeholderIcon',
                    thousandSeparator: true
                  }"
                ></app-ta-input>
              </div>
              <div class="col-4">
                <app-ta-input
                  formControlName="startDate"
                  [inputConfig]="{
                    name: 'datepicker',
                    type: 'text',
                    label: 'Start Date',
                    isDropdown: true,
                    placeholderIcon: 'date',
                    isRequired: true,
                    customClass: 'datetimeclass'
                  }"
                ></app-ta-input>
              </div>
              <div class="col-3 no-p-left">
                <app-ta-tab-switch
                  [tabs]="typeOfPayroll"
                  (switchClicked)="onTypeOfPayroll($event)"
                  [type]="'type2-modal-popup'"
                >
                </app-ta-tab-switch>
              </div>
            </div>
            <div
              class="custom-bank-row last-row"
              [ngClass]="{
                'no-m-bottom': !userForm.get('isIncludePayroll').value
              }"
            >
              <div class="bank-field">
                <app-ta-input-dropdown
                  formControlName="bankId"
                  [template]="'svg-template'"
                  [inputConfig]="{
                    name: 'Input Dropdown  Bank Name',
                    type: 'text',
                    label: 'Bank Name',
                    minLength: 2,
                    maxLength: 64,
                    textTransform: 'uppercase',
                    isDropdown: true,
                    dropdownWidthClass: 'w-col-163'
                  }"
                  [canAddNew]="true"
                  [options]="labelsBank"
                  [activeItem]="selectedBank"
                  (selectedItem)="onSelectDropdown($event, 'bank')"
                  (saveItem)="onSaveNewBank($event)"
                ></app-ta-input-dropdown>
              </div>
              <div class="bank-field">
                <app-ta-input
                  formControlName="routingNumber"
                  [inputConfig]="{
                    name: 'routing-bank',
                    type: 'text',
                    label: 'Routing #',
                    isDisabled: !isBankSelected,
                    isRequired: isBankSelected,
                    minLength: 9,
                    maxLength: 9
                  }"
                ></app-ta-input>
              </div>
              <div class="bank-field">
                <app-ta-input
                  formControlName="accountNumber"
                  [inputConfig]="{
                    name: 'account-bank',
                    type: 'text',
                    label: 'Account #',
                    isDisabled: !isBankSelected,
                    isRequired: isBankSelected,
                    maxLength: 17,
                    minLength: 5
                  }"
                ></app-ta-input>
              </div>
            </div>
          </div>
          <app-ta-input-note
            formControlName="note"
            [isVisibleNote]="userForm.get('note').value"
          ></app-ta-input-note>
        </div>
      </div>
      <!-------------------------------- Additional Tab -------------------------------->
      <div class="m-tab" *ngIf="selectedTab === 2">Additional Tab TO DO</div>
    </div>
  </form>
</app-ta-modal>
