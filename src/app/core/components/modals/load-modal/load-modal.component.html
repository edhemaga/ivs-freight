<app-ta-modal
  [modalTitle]="!editData?.type?.includes('edit') ? 'Create Load' : 'Edit Load'"
  [editData]="editData"
  [loadModalTitle]="loadNumber"
  [loadModalBill]="loadModalBill"
  [hazardousLogo]="isHazardousPicked"
  [isModalValid]="loadForm.valid && isFormDirty"
  [tabChange]="headerTabs"
  [customClass]="'modal-container-load'"
  [modalAdditionalPart]="true"
  (onTabHeaderChange)="onModalHeaderTabChange($event)"
  (action)="onModalAction($event)"
>
  <!-- Origin Tab -->
  <form
    #originTab
    origin
    [formGroup]="loadForm"
    class="form-container form-container-without-mb"
  >
    <!-------------------------------- FTL Tab -------------------------------->
    <div *ngIf="selectedTab === 1" class="m-tab">
      <div class="load-ftl-first-row">
        <div class="ftl-load-status">UNASSIGNED</div>
        <app-ta-input-dropdown
          formControlName="selectTemplate"
          [inputConfig]="{
            name: 'Input Dropdown',
            type: 'text',
            label: 'Select Template',
            isDropdown: true,
            dropdownWidthClass: 'w-col-220'
          }"
          [options]="labelsTemplate"
          [activeItem]="selectedTemplate"
          (selectedItem)="onSelectDropdown($event, 'template')"
        ></app-ta-input-dropdown>
        <app-ta-input-dropdown
          formControlName="dispatcher"
          [template]="'load-dispatcher'"
          [inputConfig]="{
            name: 'Input Dropdown',
            type: 'text',
            label: 'Dispatcher',
            isDropdown: true,
            dropdownImageInput: {
              withText: true,
              svg: false,
              image: true,
              url: selectedDispatcher?.logoName,
              nameInitialsInsteadUrl: !selectedDispatcher?.logoName
                ? selectedDispatcher?.name
                : null,
              template: 'user'
            },
            textTransform: 'capitalize',
            dropdownWidthClass: 'w-col-220'
          }"
          [options]="labelsDispatcher"
          [activeItem]="selectedDispatcher"
          (selectedItem)="onSelectDropdown($event, 'dispatcher')"
        ></app-ta-input-dropdown>
        <!-- Only One Company -->
        <app-ta-input
          *ngIf="labelsCompanies.length === 1"
          formControlName="company"
          [inputConfig]="{
            name: 'Company',
            type: 'text',
            label: 'Company',
            isRequired: true,
            textTransform: 'uppercase'
          }"
        ></app-ta-input>
        <!-- Multiple Companies -->
        <app-ta-input-dropdown
          *ngIf="labelsCompanies.length > 1"
          formControlName="company"
          [inputConfig]="{
            name: 'Input Dropdown',
            type: 'text',
            label: 'Company',
            isDropdown: true,
            dropdownWidthClass: 'w-col-226'
          }"
          [options]="labelsCompanies"
          [activeItem]="selectedCompany"
          (selectedItem)="onSelectDropdown($event, 'company')"
        ></app-ta-input-dropdown>
      </div>
      <div class="load-ftl-second-row">
        <app-ta-input-dropdown
          formControlName="dispatchesId"
          [template]="'load-dispatches-ttd'"
          [inputConfig]="loadDispatchesTTDInputConfig"
          [options]="labelsDispatches"
          [activeItem]="selectedDispatches"
          (selectedItem)="onSelectDropdown($event, 'dispatches')"
        ></app-ta-input-dropdown>
        <app-ta-input
          formControlName="refNumber"
          [inputConfig]="{
            name: 'Ref Number',
            type: 'text',
            label: 'Ref #',
            isRequired: true,
            textTransform: 'capitalize'
          }"
        ></app-ta-input>
        <app-ta-input-dropdown
          formControlName="generalCommodity"
          [template]="'svgtext-template'"
          [inputConfig]="{
            name: 'Input Dropdown',
            type: 'text',
            label: 'General Commodity',
            isDropdown: true,
            dropdownWidthClass: 'w-col-178',
            placeholderIcon: isHazardousPicked ? 'hazardous-info' : null,
            blackInput: true
          }"
          [options]="labelsGeneralCommodity"
          [activeItem]="selectedGeneralCommodity"
          (placeholderIconEvent)="commandEvent($event)"
          (selectedItem)="onSelectDropdown($event, 'general-commodity')"
        ></app-ta-input-dropdown>
        <app-ta-input
          formControlName="weight"
          [inputConfig]="{
            name: 'Weight',
            type: 'text',
            label: 'Weight',
            placeholderIcon: 'weight',
            thousandSeparator: true
          }"
        ></app-ta-input>
      </div>
      <div class="load-ftl-third-row">
        <app-ta-input-dropdown
          formControlName="broker"
          [template]="'load-broker'"
          [inputConfig]="{
            name: 'Input Dropdown',
            type: 'text',
            label: 'Broker',
            isDropdown: true,
            isRequired: true,
            dropdownImageInput: {
              withText: true,
              svg: true,
              image: false,
              url: selectedBroker?.logoName,
              class: 'load-broker',
              template: 'user'
            },
            textTransform: 'capitalize',
            dropdownWidthClass: 'w-col-439'
          }"
          [canAddNew]="true"
          [canOpenModal]="true"
          [options]="labelsBroker"
          [activeItem]="selectedBroker"
          (selectedItem)="onSelectDropdown($event, 'broker')"
        ></app-ta-input-dropdown>

        <app-ta-input-dropdown
          formControlName="brokerContact"
          [template]="'load-broker-contact'"
          [inputConfig]="loadBrokerContactsInputConfig"
          [canAddNew]="true"
          [canOpenModal]="true"
          [options]="labelsBrokerContacts"
          [activeItem]="selectedBrokerContact"
          (selectedItem)="onSelectDropdown($event, 'broker-contact')"
        ></app-ta-input-dropdown>
      </div>
      <app-ta-custom-card
        [cardName]="'Load Requirements'"
        [animationMarginParams]="{ marginTop: '18px', marginBottom: '22px' }"
      >
        <div class="load-requirements-load">
          <app-ta-input-dropdown
            formControlName="truckReq"
            [template]="'svgtext-template'"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'Truck Req.',
              isDropdown: true,
              dropdownImageInput: {
                withText: true,
                svg: true,
                image: false,
                url: selectedTruckReq?.logoName,
                template: 'truck',
                class: selectedTruckReq?.name
                  ?.trim()
                  .replace(' ', '')
                  .toLowerCase()
              },
              dropdownWidthClass: 'w-col-164',
              customClass: 'truck-trailer-dropdown'
            }"
            [options]="labelsTruckReq"
            [activeItem]="selectedTruckReq"
            (selectedItem)="onSelectDropdown($event, 'truck-req')"
          ></app-ta-input-dropdown>

          <app-ta-input-dropdown
            formControlName="trailerReq"
            [template]="'svgtext-template'"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'Trailer Req.',
              isDropdown: true,
              dropdownImageInput: {
                withText: true,
                svg: true,
                image: false,
                url: selectedTrailerReq?.logoName,
                template: 'trailer',
                class: selectedTrailerReq?.name
                  ?.toLowerCase()
                  .includes('liquid')
                  ? 'tanker-liquid'
                  : selectedTrailerReq?.name?.toLowerCase()?.includes('rgn')
                  ? 'low-boy-rgn'
                  : selectedTrailerReq?.name?.toLowerCase().includes('dry-bulk')
                  ? 'tanker-dry-bulk'
                  : selectedTrailerReq?.name
                      ?.trim()
                      .replace(' ', '')
                      .toLowerCase()
              },
              dropdownWidthClass: 'w-col-164',
              customClass: 'truck-trailer-dropdown'
            }"
            [options]="labelsTrailerReq"
            [activeItem]="selectedTrailerReq"
            (selectedItem)="onSelectDropdown($event, 'trailer-req')"
          ></app-ta-input-dropdown>

          <app-ta-input-dropdown
            formControlName="doorType"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'Door Type',
              isDropdown: true,
              dropdownWidthClass: 'w-col-107'
            }"
            [options]="labelsDoorType"
            [activeItem]="selectedDoorType"
            (selectedItem)="onSelectDropdown($event, 'door-type')"
          ></app-ta-input-dropdown>

          <app-ta-input-dropdown
            formControlName="suspension"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'Suspension',
              isDropdown: true,
              dropdownWidthClass: 'w-col-177'
            }"
            [options]="labelsSuspension"
            [activeItem]="selectedSuspension"
            (selectedItem)="onSelectDropdown($event, 'suspension')"
          ></app-ta-input-dropdown>

          <app-ta-input-dropdown
            formControlName="length"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'Length',
              isDropdown: true,
              dropdownWidthClass: 'w-col-88'
            }"
            [options]="labelsTrailerLength"
            [activeItem]="selectedTrailerLength"
            (selectedItem)="onSelectDropdown($event, 'length')"
          ></app-ta-input-dropdown>

          <app-ta-input-dropdown
            formControlName="year"
            [inputConfig]="{
              name: 'Input Dropdown',
              type: 'text',
              label: 'Year',
              isDropdown: true,
              dropdownWidthClass: 'w-col-66'
            }"
            [options]="labelsYear"
            [activeItem]="selectedYear"
            (selectedItem)="onSelectDropdown($event, 'year')"
          ></app-ta-input-dropdown>

          <app-ta-checkbox
            formControlName="lifgate"
            [customClass]="'regular-small'"
            [label]="'Lifgate'"
          ></app-ta-checkbox>
        </div>
      </app-ta-custom-card>

      <app-ta-custom-card
        [cardName]="'Create Stop'"
        [isCardOpen]="true"
        [animationMarginParams]="{
          marginTop: '18px',
          marginBottom: '22px'
        }"
      >
        <div class="stop-load-first-row">
          <app-ta-tab-switch
            [tabs]="stopTabs"
            (switchClicked)="onTabChange($event, 'stop-tab')"
            [type]="'type2-modal-popup load-type2-modal-popup'"
          ></app-ta-tab-switch>

          <app-ta-input-dropdown
            formControlName="shipper"
            [template]="'load-shipper'"
            [inputConfig]="loadShipperInputConfig"
            [canAddNew]="true"
            [canOpenModal]="true"
            [options]="labelsShippers"
            [activeItem]="selectedShipper"
            (selectedItem)="onSelectDropdown($event, 'shipper')"
          ></app-ta-input-dropdown>
        </div>

        <div
          class="stop-load-second-row"
          [ngClass]="{ 'date-range-active': isDateRange }"
        >
          <div class="date-range">
            <app-ta-input
              formControlName="dateFrom"
              [inputConfig]="{
                name: 'datepicker',
                type: 'text',
                isDropdown: true,
                label: isDateRange ? 'Date From' : 'Date',
                placeholderIcon: 'date',
                isRequired: true,
                customClass: 'datetimeclass'
              }"
            ></app-ta-input>
            <div
              *ngIf="!isDateRange"
              class="billing-plus billing-date-range"
              ngbTooltip
              mainTooltip="Date Range"
              tooltipBackground="#B7B7B7"
              position="top"
              (click)="isDateRange = true"
            >
              <svg-icon
                class="billing-date-range-plus"
                src="assets/svg/common/ic_plus.svg"
              ></svg-icon>
            </div>
            <app-ta-input
              *ngIf="isDateRange"
              formControlName="dateTo"
              [inputConfig]="{
                name: 'datepicker',
                type: 'text',
                isDropdown: true,
                label: 'Date To',
                placeholderIcon: 'date',
                customClass: 'datetimeclass'
              }"
            ></app-ta-input>
          </div>
          <div class="stop-time-tabs">
            <app-ta-tab-switch
              [tabs]="stopTimeTabs"
              (switchClicked)="onTabChange($event, 'stop-time')"
              [type]="'type2-modal-popup'"
            ></app-ta-tab-switch>
          </div>
          <!-- Time Picker -->
          <app-ta-input
            formControlName="timeFrom"
            [inputConfig]="{
              name: 'timepicker',
              type: 'text',
              label: 'From',
              placeholderIcon: 'time',
              isDropdown: true,
              isRequired: true,
              customClass: 'datetimeclass'
            }"
          ></app-ta-input>
          <!-- Time Picker -->
          <app-ta-input
            formControlName="timeTo"
            [inputConfig]="{
              name: 'timepicker',
              type: 'text',
              label: 'To',
              placeholderIcon: 'time',
              isDropdown: true,
              isRequired: true,
              isDisabled: selectedStopTime === 6,
              customClass: 'datetimeclass'
            }"
          ></app-ta-input>
        </div>
      </app-ta-custom-card>

      <app-ta-custom-card
        [cardName]="'Stops'"
        [hasBodyData]="loadStops().length > 0"
        [hasCounter]="loadStops().length ? loadStops().length : 0"
        [isCardOpen]="loadStops().length > 0"
        [animationMarginParams]="{
          marginTop: '10px',
          marginBottom: '10px'
        }"
      >
        <div
          *ngIf="loadStops().length"
          cdkDropList
          formArrayName="loadStops"
          class="common-fake-table-modal common-fake-table-modal-load-stops"
          (cdkDropListDropped)="loadStopReordering($event)"
        >
          <div class="common-fake-table-label">
            <p>#</p>
            <p>SHIPPER</p>
            <p>LOCATION</p>
            <p>DATE</p>
            <p>TIME</p>
            <p>LEG MI.</p>
            <p>TOTAL</p>
          </div>
          <div class="common-fake-table-body">
            <!-- Load Stop -->
            <div
              cdkDrag
              *ngFor="
                let loadStop of loadStops().controls;
                let loadStopIndex = index;
                trackBy: identity
              "
              style="margin-bottom: 2px"
            >
              <div
                [formGroupName]="loadStopIndex"
                class="common-fake-table-card"
              >
                <!-- Card Title -->
                <div
                  class="common-fake-table-card-title"
                  [ngClass]="{
                    'pickup-mode': loadStop.get('stopMode').value === 'pickup',
                    'delivery-mode':
                      loadStop.get('stopMode').value === 'delivery'
                  }"
                  (mouseenter)="loadStop.get('hovered').patchValue(true)"
                  (mouseleave)="loadStop.get('hovered').patchValue(false)"
                  (click)="toggleLoadStop(loadStop)"
                >
                  <div class="load-stop-serial-number">
                    <p *ngIf="!loadStop.get('hovered').value">
                      {{ loadStop.get("id").value }}
                    </p>

                    <svg-icon
                      *ngIf="loadStop.get('hovered').value"
                      src="assets/svg/common/load/ic_load-ordering.svg"
                    ></svg-icon>
                  </div>

                  <p class="load-stop-shipper-name">
                    {{ loadStop.get("shipper").value }}
                  </p>

                  <p class="load-stop-location">
                    {{ loadStop.get("location").value }}
                  </p>

                  <p class="load-stop-date">
                    {{
                      loadStop.get("dateFrom").value
                        | loadStopTimeDate: loadStop.get("dateTo").value
                    }}
                  </p>

                  <p class="load-stop-time">
                    {{
                      loadStop.get("timeFrom").value
                        | loadStopTimeDate: loadStop.get("timeTo").value
                    }}
                  </p>

                  <p class="load-stop-leg-mi">
                    {{ loadStop.get("miles").value }}
                  </p>

                  <p class="load-stop-total">
                    {{ loadStop.get("total").value }}
                  </p>

                  <div
                    (click)="removeLoadStop(loadStopIndex)"
                    class="common-fake-table-delete"
                    mainTooltip="Delete"
                    ngbTooltip
                    position="top"
                    tooltipBackground="#EF5350"
                  >
                    <svg-icon src="assets/svg/common/ic_trash.svg"></svg-icon>
                  </div>
                </div>
                <!-- Card Body -->
                <!-- Load Stop Details-->
                <div
                  *ngIf="loadStop.get('openClose').value"
                  class="common-fake-table-load-stop-details"
                >
                  <div class="load-shipper-more-details">
                    <div class="load-shipper-more-details-item">
                      <p>Address</p>
                      <p>{{ loadStop.get("address").value }}</p>
                    </div>
                    <div class="load-shipper-more-details-item">
                      <p>Contact</p>
                      <p>{{ loadStop.get("contact").value }}</p>
                    </div>
                    <div class="load-shipper-more-details-item">
                      <p>Phone</p>
                      <p>{{ loadStop.get("phone").value }}</p>
                    </div>
                    <div class="load-shipper-more-details-item">
                      <p>Ext.</p>
                      <p>{{ loadStop.get("extensionPhone").value }}</p>
                    </div>
                  </div>
                  <div formArrayName="loadStopDetails">
                    <div
                      *ngIf="loadStopsDetails(loadStopIndex).length"
                      class="load-stop-details-header"
                    >
                      <p>#</p>
                      <p>Description</p>
                      <p>QTY</p>
                      <p>Units</p>
                      <p>Weight</p>
                      <p>Length</p>
                      <p>Height</p>
                      <p>TMP</p>
                      <p>BOL #</p>
                      <p>Appointment #</p>
                      <p>Pickup #</p>
                      <p>PO #</p>
                      <p>Seal #</p>
                      <p>Code</p>
                      <p>Stackable</p>
                      <p>Tarp</p>
                      <p>Driver Assis</p>
                      <p>Strap/Chain</p>
                    </div>
                    <div
                      *ngFor="
                        let loadStopDetail of loadStopsDetails(loadStopIndex)
                          .controls;
                        let loadStopDetailsIndex = index;
                        trackBy: identity
                      "
                    >
                      <div
                        [formGroupName]="loadStopDetailsIndex"
                        class="load-stop-more-details"
                      >
                        <!-- Load Details Serial Number -->
                        <p class="first-paragraf">
                          {{ loadStopDetailsIndex + 1 }}
                        </p>

                        <!-- Description -->
                        <app-ta-input
                          *ngIf="!isHazardousPicked"
                          formControlName="description"
                          [inputConfig]="{
                            name: 'Description',
                            type: 'text',
                            minLength: 2,
                            maxLength: 160,
                            textTransform: 'capitalize',
                            blackInput: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            customClass: 'load-stop-details'
                          }"
                          [ngStyle]="{ height: '20px' }"
                        ></app-ta-input>

                        <!-- Hazardous Dropdown -->
                        <app-ta-input-dropdown
                          *ngIf="isHazardousPicked"
                          formControlName="hazardous"
                          [template]="'svgtext-template'"
                          [inputConfig]="{
                            name: 'Input Dropdown',
                            type: 'text',
                            isDropdown: true,
                            dropdownImageInput: {
                              withText: true,
                              svg: true,
                              image: false,
                              url:
                                'assets/svg/common/load/' +
                                selectedLoadDetailsHazardous[
                                  loadStopDetailsIndex
                                ]?.logoName,
                              template: 'user'
                            },
                            dropdownWidthClass: 'w-col-156',
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                          [options]="labelsLoadDetailsHazardous"
                          [activeItem]="
                            selectedLoadDetailsHazardous[loadStopDetailsIndex]
                          "
                          (selectedItem)="
                            onSelectDropdown(
                              $event,
                              'hazardous',
                              loadStopDetailsIndex
                            )
                          "
                        ></app-ta-input-dropdown>

                        <!-- QTY -->
                        <app-ta-input
                          formControlName="qty"
                          [inputConfig]="{
                            name: 'QTY',
                            type: 'text',
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- Units -->
                        <app-ta-input-dropdown
                          formControlName="units"
                          [inputConfig]="{
                            name: 'Input Dropdown',
                            type: 'text',
                            isDropdown: true,
                            dropdownWidthClass: 'w-col-73',
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                          [options]="labelsloadDetailsUnits"
                          [activeItem]="
                            selectedLoadDetailsUnits[loadStopDetailsIndex]
                          "
                          (selectedItem)="
                            onSelectDropdown(
                              $event,
                              'units',
                              loadStopDetailsIndex
                            )
                          "
                        ></app-ta-input-dropdown>

                        <!-- Weight -->
                        <app-ta-input
                          formControlName="weight"
                          [inputConfig]="{
                            name: 'Weight',
                            type: 'text',
                            placeholderText: 'ibs',
                            thousandSeparator: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- Length -->
                        <app-ta-input
                          formControlName="length"
                          [inputConfig]="{
                            name: 'Length',
                            type: 'text',
                            placeholderText: 'ibs',
                            thousandSeparator: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- Height -->
                        <app-ta-input
                          formControlName="height"
                          [inputConfig]="{
                            name: 'Height',
                            type: 'text',
                            placeholderText: 'ibs',
                            thousandSeparator: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- TMP -->
                        <app-ta-input
                          formControlName="tmp"
                          [inputConfig]="{
                            name: 'TMP',
                            type: 'text',
                            placeholderText: 'ibs',
                            thousandSeparator: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- BOL -->
                        <app-ta-input
                          formControlName="bol"
                          [inputConfig]="{
                            name: 'BOL',
                            type: 'text',
                            placeholderText: 'ibs',
                            thousandSeparator: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- Appointment -->
                        <app-ta-input
                          formControlName="appointment"
                          [inputConfig]="{
                            name: 'Appointment',
                            type: 'text',
                            placeholderText: 'ibs',
                            thousandSeparator: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- Pickup -->
                        <app-ta-input
                          formControlName="pickup"
                          [inputConfig]="{
                            name: 'Pickup',
                            type: 'text',
                            placeholderText: 'ibs',
                            thousandSeparator: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- PO -->
                        <app-ta-input
                          formControlName="po"
                          [inputConfig]="{
                            name: 'PO',
                            type: 'text',
                            placeholderText: 'ibs',
                            thousandSeparator: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- Seal -->
                        <app-ta-input
                          formControlName="seal"
                          [inputConfig]="{
                            name: 'Seal',
                            type: 'text',
                            placeholderText: 'ibs',
                            thousandSeparator: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- Code -->
                        <app-ta-input
                          formControlName="code"
                          [inputConfig]="{
                            name: 'Code',
                            type: 'text',
                            placeholderText: 'ibs',
                            thousandSeparator: true,
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                        ></app-ta-input>

                        <!-- Stackable -->
                        <app-ta-input-dropdown
                          formControlName="stackable"
                          [inputConfig]="{
                            name: 'Input Dropdown',
                            type: 'text',
                            isDropdown: true,
                            dropdownWidthClass: 'w-col-69',
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                          [options]="labelsLoadDetailsStackable"
                          [activeItem]="
                            selectedLoadDetailsStackable[loadStopDetailsIndex]
                          "
                          (selectedItem)="
                            onSelectDropdown(
                              $event,
                              'stackable',
                              loadStopDetailsIndex
                            )
                          "
                        ></app-ta-input-dropdown>

                        <!-- Tarp -->
                        <app-ta-input-dropdown
                          formControlName="tarp"
                          [inputConfig]="{
                            name: 'Input Dropdown',
                            type: 'text',
                            isDropdown: true,
                            dropdownWidthClass: 'w-col-71',
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                          [options]="labelsLoadDetailsTarps"
                          [activeItem]="
                            selectedLoadDetailsTarps[loadStopDetailsIndex]
                          "
                          (selectedItem)="
                            onSelectDropdown(
                              $event,
                              'tarp',
                              loadStopDetailsIndex
                            )
                          "
                        ></app-ta-input-dropdown>

                        <!-- Driver Assis -->
                        <app-ta-input-dropdown
                          formControlName="driverAssis"
                          [inputConfig]="{
                            name: 'Input Dropdown',
                            type: 'text',
                            isDropdown: true,
                            dropdownWidthClass: 'w-col-69',
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                          [options]="labelsLoadDetailsDriverAssis"
                          [activeItem]="
                            selectedLoadDetailsDriverAssis[loadStopDetailsIndex]
                          "
                          (selectedItem)="
                            onSelectDropdown(
                              $event,
                              'driverAssis',
                              loadStopDetailsIndex
                            )
                          "
                        ></app-ta-input-dropdown>

                        <!-- Strap Chain -->
                        <app-ta-input-dropdown
                          formControlName="strapChain"
                          [inputConfig]="{
                            name: 'Input Dropdown',
                            type: 'text',
                            isDropdown: true,
                            dropdownWidthClass: 'w-col-66',
                            hideRequiredCheck: true,
                            hideErrorMessage: true,
                            blackInput: true,
                            customClass: 'load-stop-details'
                          }"
                          [options]="labelsLoadDetailsStrapChain"
                          [activeItem]="
                            selectedLoadDetailsStrapChain[loadStopDetailsIndex]
                          "
                          (selectedItem)="
                            onSelectDropdown(
                              $event,
                              'strapChain',
                              loadStopDetailsIndex
                            )
                          "
                        ></app-ta-input-dropdown>
                      </div>
                    </div>
                  </div>
                  <p
                    (click)="addLoadStopDetails(loadStopIndex)"
                    class="load-stop-add-btn"
                  >
                    Add Stop Details
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </app-ta-custom-card>

      <app-ta-custom-card
        [cardName]="'Billing & Payment'"
        [isCardOpen]="true"
        [animationMarginParams]="{ marginTop: '18px', marginBottom: '22px' }"
      >
        <div class="billing-payment-load">
          <!-- Base Rate -->
          <app-ta-input
            formControlName="billingPaymentBaseRate"
            [inputConfig]="{
              name: 'Dollar',
              type: 'number',
              label: 'Base Rate',
              isRequired: true,
              placeholderIcon: 'dollar',
              customClass: 'dollar-placeholderIcon',
              thousandSeparator: true,
              blackInput: true
            }"
            [ngStyle]="{ width: '130px' }"
          ></app-ta-input>

          <!-- Adjusted Rate -->
          <div
            *ngIf="!isAvailableAdjustedRate"
            class="billing-plus billing-adjusted"
            ngbTooltip
            mainTooltip="Adjusted"
            tooltipBackground="#FFA726"
            position="top"
            (click)="isAvailableAdjustedRate = true"
          >
            <svg-icon
              class="billing-adjusted-plus"
              src="assets/svg/common/ic_plus.svg"
            ></svg-icon>
          </div>

          <app-ta-input
            *ngIf="isAvailableAdjustedRate"
            formControlName="billingPaymentAdjustedRate"
            [inputConfig]="{
              name: 'Dollar',
              type: 'number',
              label: 'Adjusted',
              placeholderIcon: 'dollar',
              customClass: 'dollar-placeholderIcon load-adjusted-rate',
              thousandSeparator: true,
              blackInput: true
            }"
            [ngStyle]="{ width: '130px' }"
          ></app-ta-input>

          <!-- Advance Rate -->
          <div
            *ngIf="!isAvailableAdvanceRate"
            class="billing-plus billing-advance"
            ngbTooltip
            mainTooltip="Advance"
            tooltipBackground="#26A690"
            position="top"
            (click)="isAvailableAdvanceRate = true"
          >
            <svg-icon
              class="billing-advance-plus"
              src="assets/svg/common/ic_plus.svg"
            ></svg-icon>
          </div>

          <app-ta-input
            *ngIf="isAvailableAdvanceRate"
            formControlName="bilingPaymentAdvanceRate"
            [inputConfig]="{
              name: 'Dollar',
              type: 'number',
              label: 'Advance',
              placeholderIcon: 'dollar',
              customClass: 'dollar-placeholderIcon load-advance-rate',
              thousandSeparator: true,
              blackInput: true
            }"
            [ngStyle]="{ width: '130px' }"
          ></app-ta-input>

          <!-- Layover -->
          <app-ta-input
            *ngIf="additionalOptions[0].active"
            formControlName="bilingPaymentLayover"
            [inputConfig]="{
              name: 'Dollar',
              type: 'number',
              label: 'Layover',
              isRequired: true,
              placeholderIcon: 'dollar',
              customClass: 'dollar-placeholderIcon',
              thousandSeparator: true,
              blackInput: true
            }"
            [ngStyle]="{ width: '130px' }"
          ></app-ta-input>

          <!-- Lumper -->
          <app-ta-input
            *ngIf="additionalOptions[1].active"
            formControlName="bilingPaymentLumper"
            [inputConfig]="{
              name: 'Dollar',
              type: 'number',
              label: 'Lumper',
              isRequired: true,
              placeholderIcon: 'dollar',
              customClass: 'dollar-placeholderIcon',
              thousandSeparator: true,
              blackInput: true
            }"
            [ngStyle]="{ width: '130px' }"
          ></app-ta-input>

          <!-- Fuel Surcharge -->
          <app-ta-input
            *ngIf="additionalOptions[2].active"
            formControlName="bilingPaymentFuelSurcharge"
            [inputConfig]="{
              name: 'Dollar',
              type: 'number',
              label: 'Fuel Surch.',
              isRequired: true,
              placeholderIcon: 'dollar',
              customClass: 'dollar-placeholderIcon',
              thousandSeparator: true,
              blackInput: true
            }"
            [ngStyle]="{ width: '130px' }"
          ></app-ta-input>

          <!-- Escort -->
          <app-ta-input
            *ngIf="additionalOptions[3].active"
            formControlName="bilingPaymentEscort"
            [inputConfig]="{
              name: 'Dollar',
              type: 'number',
              label: 'Escort',
              isRequired: true,
              placeholderIcon: 'dollar',
              customClass: 'dollar-placeholderIcon',
              thousandSeparator: true,
              blackInput: true
            }"
            [ngStyle]="{ width: '130px' }"
          ></app-ta-input>

          <!-- Detention -->
          <app-ta-input
            *ngIf="additionalOptions[4].active"
            formControlName="bilingPaymentDetention"
            [inputConfig]="{
              name: 'Dollar',
              type: 'number',
              label: 'Detention',
              isRequired: true,
              placeholderIcon: 'dollar',
              customClass: 'dollar-placeholderIcon',
              thousandSeparator: true,
              blackInput: true
            }"
            [ngStyle]="{ width: '130px' }"
          ></app-ta-input>

          <div
            #t2="ngbPopover"
            popoverClass="load-additional-options"
            [ngbPopover]="taInputDropdownPopover"
            [placement]="['bottom-left']"
            [container]="'body'"
            ngbTooltip
            mainTooltip="Additional"
            tooltipBackground="#536BC2"
            position="top"
            class="billing-plus billing-additional"
          >
            <svg-icon
              class="billing-additional-plus"
              src="assets/svg/common/ic_plus.svg"
            ></svg-icon>
          </div>

          <ng-template #taInputDropdownPopover>
            <div class="load-additional-container">
              <div
                *ngFor="let option of additionalOptions; trackBy: identity"
                class="dropdown-option"
                (click)="onSelectAdditionalOption(option)"
              >
                {{ option.name }}
              </div>
            </div>
          </ng-template>
        </div>
      </app-ta-custom-card>

      <!-- Comments -->
      <app-ta-custom-card
        [hasCounter]="comments.length ? comments.length : 0"
        [cardName]="'Comment'"
        [isCardOpen]="comments.length > 0"
        [isCommentData]="true"
        [hasBodyData]="comments.length > 0"
        [hasScrollBody]="comments.length > 4"
        [disabledCard]="editData?.type !== 'edit'"
        [hasActionSvg]="
          editData?.type === 'edit' ? 'assets/svg/common/ic_plus.svg' : ''
        "
        (onActionEvent)="createComment()"
        [animationMarginParams]="{ marginTop: '10px', marginBottom: '12px' }"
      >
        <app-ta-user-review
          *ngIf="comments.length"
          [reviewData]="comments"
          [isNewReview]="comments[0].isNewReview"
          (changeReviewsEvent)="changeCommentsEvent($event)"
        ></app-ta-user-review>
      </app-ta-custom-card>

      <!-- Documents -->
      <app-ta-custom-card
        [hasCounter]="documents.length ? documents.length : 0"
        [cardName]="'Documents'"
        [isCardOpen]="documents.length > 0"
      >
        <app-ta-upload-files
          [files]="documents"
          [size]="'large'"
          (onFileEvent)="onFilesEvent($event)"
        ></app-ta-upload-files>
      </app-ta-custom-card>

      <!-- Note -->
      <app-ta-input-note
        formControlName="note"
        [isVisibleNote]="loadForm.get('note').value"
      ></app-ta-input-note>
    </div>
    <!-------------------------------- LTL Tab -------------------------------->
    <div *ngIf="selectedTab === 2" class="m-tab">
      <div class="row">LTL</div>
    </div>
  </form>
  <!-------------------------------- Additional Tab Part -------------------------------->
  <div
    additional
    [ngClass]="{
      'load-map-container': !isHazardousVisible,
      'load-hazardous-container': isHazardousVisible
    }"
    [ngStyle]="{ height: originTab?.nativeElement?.height }"
  >
    <!-- Hazardous -->
    <app-load-modal-hazardous
      *ngIf="isHazardousVisible"
      (close)="isHazardousVisible = false"
    ></app-load-modal-hazardous>

    <!-- Map -->
    <app-maps
      *ngIf="!isHazardousVisible"
      [mapType]="'routing'"
      [routes]="loadStopRoutes"
      [ngStyle]="{ width: '100%', height: '100%' }"
    ></app-maps>
  </div>
</app-ta-modal>
