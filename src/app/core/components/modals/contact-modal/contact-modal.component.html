<app-ta-modal
  [modalTitle]="editData?.type !== 'edit' ? 'Add Contact' : 'Edit Contact'"
  [editData]="editData"
  [editName]="editData?.data?.name"
  [isModalValid]="contactForm.valid && isFormDirty"
  [dropZoneConfig]="dropZoneConfig"
  (action)="onModalAction($event)"
>
  <form
    [formGroup]="contactForm"
    class="form-container form-container-without-mb"
  >
    <div class="row">
      <div class="col-12">
        <app-ta-input
          formControlName="name"
          [inputConfig]="{
            name: 'Full Name',
            type: 'text',
            label: 'Full Name',
            isRequired: true,
            minLength: 2,
            maxLength: 32,
            textTransform: 'capitalize',
            autoFocus: editData?.type !== 'edit'
          }"
        ></app-ta-input>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <app-ta-input-dropdown-label
          formControlName="companyContactLabelId"
          [inputConfig]="{
            name: 'Input Dropdown Label',
            type: 'text',
            label: 'Label',
            placeholderIcon: 'ic_dynamic_label',
            dropdownLabel: true,
            dropdownWidthClass: 'w-col-456',
            textTransform: 'lowercase',
            minLength: 1,
            maxLength: 32,
            blackInput: true,
            commands: {
              active: false,
              type: 'confirm-cancel',
              firstCommand: {
                popup: {
                  name: 'Confirm',
                  backgroundColor: '#536BC2'
                },
                name: 'confirm',
                svg: 'assets/svg/ic_spec-confirm.svg'
              },
              secondCommand: {
                popup: {
                  name: 'Cancel',
                  backgroundColor: '#6c6c6c'
                },
                name: 'cancel',
                svg: 'assets/svg/ic_x.svg'
              }
            }
          }"
          [colors]="colors"
          [options]="contactLabels"
          [selectedLabel]="selectedContactLabel"
          [selectedLabelColor]="selectedContactColor"
          (pickExistLabel)="onPickExistLabel($event)"
          (pickColorLabel)="onSelectColorLabel($event)"
          (saveLabel)="onSaveLabel($event)"
        >
        </app-ta-input-dropdown-label>
      </div>
    </div>
    <div class="row">
      <div class="col-5">
        <app-ta-input
          formControlName="phone"
          [inputConfig]="{
            name: 'Phone',
            type: 'text',
            label: 'Phone',
            isRequired: true,
            placeholderIcon: 'phone',
            mask: '(000) 000-0000',
            maxLength: 14
          }"
        ></app-ta-input>
      </div>
      <div class="col-7">
        <app-ta-input
          formControlName="email"
          [inputConfig]="{
            name: 'Email',
            type: 'text',
            label: 'Email',
            isRequired: true,
            placeholderIcon: 'email',
            minLength: 5,
            maxLength: 64,
            textTransform: 'lowercase'
          }"
        ></app-ta-input>
      </div>
    </div>
    <div class="row last-row">
      <div class="col-10">
        <app-input-address-dropdown
          formControlName="address"
          [inputConfig]="{
            name: 'Address',
            type: 'text',
            label: 'Address, City, State Zip',
            placeholderIcon: 'address',
            placeholder: 'Address, City, State Zip',
            textTransform: 'capitalize',
            dropdownWidthClass: 'w-col-376',
            minLength: 6,
            maxLength: 256,
            isDropdown: true
          }"
          [placeholderType]="'longAddress'"
          [activeAddress]="selectedAddress"
          (selectedAddress)="onHandleAddress($event)"
        ></app-input-address-dropdown>
      </div>
      <div class="col-2">
        <app-ta-input
          formControlName="addressUnit"
          [inputConfig]="{
            name: 'address-unit',
            type: 'text',
            label: 'Unit No.',
            textTransform: 'uppercase',
            minLength: 1,
            maxLength: 10
          }"
        ></app-ta-input>
      </div>
    </div>
    <!-- Shared Contact -->
    <div class="custom-checkbox-card">
      <div class="divider"></div>
      <div
        class="checkbox-card-header"
        [ngClass]="{ pointer: contactForm.get('shared').value }"
      >
        <app-ta-checkbox
          formControlName="shared"
          [label]="'Shared Contact'"
        ></app-ta-checkbox>
        <svg-icon
          class="checkbox-card-header-arrow"
          src="assets/svg/common/ic_arrow_down_updated.svg"
          [ngClass]="{
            visible: contactForm.get('shared').value,
            rotate: !sharedContactCheckboxCard
          }"
          (click)="toggleCheckboxCard()"
        ></svg-icon>
      </div>
      <div
        *ngIf="contactForm.get('shared').value && sharedContactCheckboxCard"
        class="checkbox-card-body"
        [ngClass]="{ 'active-20': contactForm.get('shared').value }"
      >
        <div *ngIf="contactForm.get('shared').value">
          <div class="row shared-contact-dropdown">
            <div class="col-12">
              <app-ta-input-dropdown
                formControlName="sharedLabelId"
                [template]="'groups'"
                [inputConfig]="{
                  name: 'Input Dropdown Department',
                  minLength: 2,
                  maxLength: 36,
                  type: 'text',
                  label: 'Department',
                  isDropdown: true,
                  isRequired: true,
                  textTransform: 'capitalize',
                  dropdownWidthClass: 'w-col-455'
                }"
                [options]="sharedDepartments"
                (selectedItem)="onSelectDropdown($event, 'departments')"
              ></app-ta-input-dropdown>
            </div>
          </div>
        </div>
      </div>
      <div class="ta-card-body-overflow-none">
        <app-ta-custom-card [cardName]="'Contact Image'" [isCardOpen]="true">
          <app-ta-logo-change
            [croppieOptions]="croppieOptions"
            [customClass]="'modal-container-S'"
            [imageUrl]="this.contactForm.get('avatar').value"
            (base64ImageEvent)="onUploadImage($event)"
            (validationEvent)="onImageValidation($event)"
          ></app-ta-logo-change>
        </app-ta-custom-card>
      </div>
      <!-- Note -->
      <app-ta-input-note
        formControlName="note"
        [isVisibleNote]="contactForm.get('note').value"
      ></app-ta-input-note>
    </div>
  </form>
</app-ta-modal>
