<div class="repair-component">
    <div [ngSwitch]="repairShopItem.template">
        <!---------------------------- GENERAL TEMPLATE ----------------------------->
        <div *ngSwitchCase="'general'">
            <app-shop-repair-card-view
                [repairShopCardViewData]="repairShopItem?.data"
            >
            </app-shop-repair-card-view>
        </div>
        <div *ngSwitchCase="'repair'">
            <div class="repair-container" *ngIf="repairListData?.length">
                <div class="repair-header">
                    <span class="repaier-headers">UNIT</span>
                    <span class="repaier-headers">DATE</span>
                    <span class="repaier-headers">INV.#</span>
                    <span class="repaier-headers">DESCRIPTION</span>
                    <span class="repaier-headers">COST</span>
                </div>
                <div class="divider"></div>
                <div class="repair-items-wrapper">
                    <span
                        *ngFor="let repairs of repairListData; let i = index"
                        (click)="
                            openRepairDetail(repairs)
                        "
                        class="item-shop-wrapper"
                        [ngClass]="{
                            'finish-order-cont': repairs.repairType.name != 'Bill',
                            'open-items-body':
                                showRepairItems[repairs?.id] && repairs.repairType.name == 'Bill',
                            'open-items-body-no-invoice':
                                showRepairItems[repairs?.id] && repairs.repairType.name != 'Bill'
                        }"
                    >
                        <div class="repair-items">
                            <div
                                class="items-header"
                                [ngClass]="{
                                    'open-items-body':
                                        showRepairItems[repairs?.id] &&
                                        repairs.repairType.name == 'Bill',
                                    'open-items-body-no-invoice':
                                        showRepairItems[repairs?.id] &&
                                        repairs.repairType.name != 'Bill'
                                }"
                            >
                                <span class="unit">{{
                                    repairs?.trailer?.trailerNumber
                                        ? repairs.trailer.trailerNumber
                                        : repairs.truck.truckNumber
                                }}</span>
                                <span class="date">{{
                                    repairs.date
                                        ? (repairs.date | formatDateP)
                                        : (repairs.createdAt | formatDateP)
                                }}</span>
                                <span class="date"
                                    ><span
                                        class="inv"
                                        *ngIf="repairs.repairType.name == 'Bill'"
                                        >{{ repairs.invoice ? repairs.invoice : '' }}</span
                                    ></span
                                >
                                <div
                                    *ngIf="repairs.repairType.name != 'Bill'"
                                    class="no-invoice"
                                >
                                    <svg-icon
                                        class="no-inv"
                                        src="assets/svg/common/ic_note_order.svg"
                                    ></svg-icon>
                                    <span class="date-order">Order</span>
                                </div>
                                <span class="date-description">
                                    <span
                                        class="item-desc"
                                        *ngFor="
                                            let desc of repairs?.items;
                                            trackBy: identity
                                        "
                                        [ngClass]="{
                                            'have-pm-description':
                                                desc?.pmTruck != null ||
                                                desc?.pmTrailer != null
                                        }"
                                        >{{ desc.description }}
                                        <span
                                            class="full-stop-shop"
                                            *ngIf="repairs.items.length > 1"
                                            >‚óè</span
                                        ></span
                                    >
                                </span>

                                <span *ngIf="repairs?.total" class="cost">{{
                                    repairs.total | formatCurrency
                                }}</span>
                                <div
                                    (click)="
                                        finishOrder(repairs.id, repairs, $event)
                                    "
                                    *ngIf="repairs.repairType.name != 'Bill'"
                                    class="button-wrapper-shop"
                                >
                                    Finish Order
                                </div>
                                <div
                                    class="dots-vertical"
                                    [ngClass]="{
                                        'order-activate': repairs.repairType.name != 'Bill'
                                    }"
                                >
                                    <app-details-page-dropdown
                                        [options]="dummyData.actions"
                                        [customClassDropDown]="
                                            'drop-down-details-single'
                                        "
                                        [id]="repairs.id"
                                        (dropDownActions)="
                                            optionsEvent($event, 'repair')
                                        "
                                        (click)="stopClick($event, repairs)"
                                    >
                                    </app-details-page-dropdown>
                                </div>
                            </div>
                        </div>
                        <div
                            *ngIf="repairs?.items?.length"
                            [@showHideCardBody]="
                                showRepairItems[repairs?.id] ? 'true' : 'false'
                            "
                            [ngClass]="{
                                'no-repairs-inovice': repairs.repairType.name != 'Bill'
                            }"
                            class="repair-items-body-wrapper"
                        >
                            <div class="repair-items-body-header">
                                <div class="item-header">#</div>
                                <div class="item-header">ITEM</div>
                                <div
                                    *ngIf="repairs.repairType.name == 'Bill'"
                                    class="item-header"
                                >
                                    PRICE
                                </div>
                                <div class="item-header">QTY</div>
                                <div
                                    *ngIf="repairs.repairType.name == 'Bill'"
                                    class="item-header"
                                >
                                    TOTAL
                                </div>
                            </div>
                            <div
                                *ngFor="
                                    let desc of repairs?.items;
                                    let i = index;
                                    trackBy: identity
                                "
                                class="repair-body-container"
                            >
                                <div
                                    class="repair-items-body"
                                    [ngClass]="{
                                        'have-pm-description':
                                            desc?.pmTruck != null ||
                                            desc?.pmTrailer != null
                                    }"
                                >
                                    <span class="description-item-counter">{{
                                        i + 1
                                    }}</span>
                                    <div class="item-icon-desc-wrapper">
                                        <svg-icon
                                            *ngIf="desc?.pmTruck?.logoName"
                                            class="pm-icon"
                                            [src]="
                                                'assets/svg/common/repair-pm/' +
                                                desc?.pmTruck?.logoName
                                            "
                                            [svgStyle]="{
                                                'width.px': '20',
                                                'height.px': '20'
                                            }"
                                        ></svg-icon>
                                        <svg-icon
                                            *ngIf="desc?.pmTrailer?.logoName"
                                            class="pm-icon"
                                            [src]="
                                                'assets/svg/common/repair-pm/' +
                                                desc?.pmTrailer?.logoName
                                            "
                                            [svgStyle]="{
                                                'width.px': '20',
                                                'height.px': '20'
                                            }"
                                        ></svg-icon>
                                        <span class="description-item">{{
                                            desc?.description
                                        }}</span>
                                    </div>
                                    <span
                                        *ngIf="desc.price"
                                        class="description-item-qty qty-price"
                                        >{{
                                            desc?.price | formatCurrency
                                        }}</span
                                    >
                                    <span class="description-item-qty">
                                        <span class="inner-qty-value">
                                            {{ desc?.quantity }}
                                        </span>
                                    </span>
                                    <span
                                        *ngIf="desc.subtotal"
                                        class="description-item-total"
                                        >{{
                                            desc?.subtotal | formatCurrency
                                        }}</span
                                    >
                                </div>
                            </div>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div *ngSwitchCase="'repaired-vehicle'">
            <div
                class="repaired-vehicle-container"
                *ngIf="repairedVehicleListData?.length"
            >
                <div class="repair-vehicle-header">
                    <span class="repaier-headers">UNIT</span>
                    <span class="repaier-headers">TYPE</span>
                    <svg-icon
                        src="assets/svg/common/ic_key-repair.svg"
                    ></svg-icon>
                    <span class="repaier-headers">COST</span>
                </div>
                <div class="divider"></div>
                <div
                    class="repair-items-vehicle"
                    *ngFor="
                        let vehicle of repairedVehicleListData;
                        let i = index
                    "
                >
                    <div class="items-vehicle">
                        <span class="unit">{{ vehicle.unitNumber }}</span>

                        <svg-icon
                            class="vehicle-icon"
                            *ngIf="vehicle.unitType === 'Trailer'"
                            src="assets/svg/common/trailers/{{
                                vehicle.logoName
                            }} "
                        ></svg-icon>
                        <svg-icon
                            class="vehicle-icon truck-icon"
                            *ngIf="vehicle.unitType === 'Truck'"
                            src="assets/svg/common/trucks/{{
                                vehicle.logoName
                            }} "
                        ></svg-icon>
                        <span class="date">{{ vehicle.totalRepairs }}</span>
                        <span class="cost">{{
                            vehicle.totalCost | formatCurrency
                        }}</span>
                    </div>
                    <div class="divider"></div>
                </div>
            </div>
        </div>
        <div *ngSwitchCase="'review'">
            <div class="likes-count-container">
                <div class="likes-item">
                    <div class="ic-counter">
                        <svg-icon
                            class="like"
                            src="assets/svg/common/ic_dislike.svg"
                        ></svg-icon>
                        <app-ta-counter
                            [countBackgroud]="'#F3F3F3'"
                            [countColor]="'#919191'"
                            [countHeight]="'24px'"
                            [countWidth]="'24px'"
                            [count]="repairShopLikes"
                        >
                        </app-ta-counter>
                    </div>
                    <div class="border-vertical"></div>
                    <div class="ic-counter">
                        <app-ta-counter
                            [countBackgroud]="'#F3F3F3'"
                            [countColor]="'#919191'"
                            [countHeight]="'24px'"
                            [countWidth]="'24px'"
                            [count]="repairShopDislike"
                        >
                        </app-ta-counter>
                        <svg-icon
                            class="dislike"
                            src="assets/svg/common/ic_dislike.svg"
                        ></svg-icon>
                    </div>
                </div>
            </div>
            <div class="review-container">
                <div *ngIf="!reviewsRepair?.length" class="no-reviews-details">
                    No review
                </div>
                <app-ta-user-review
                    *ngIf="reviewsRepair?.length"
                    [reviewData]="reviewsRepair"
                    [isNewReview]="reviewsRepair[0].isNewReview"
                    (changeReviewsEvent)="changeReviewsEvent($event)"
                ></app-ta-user-review>
            </div>
        </div>
    </div>
</div>
