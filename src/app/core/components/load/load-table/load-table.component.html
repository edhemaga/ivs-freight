<div class="table-container">
    <app-truckassist-table-toolbar
        (toolBarAction)="onToolBarAction($event)"
        [options]="tableOptions"
        [tableData]="tableData"
        [selectedTab]="selectedTab"
        [columns]="columns"
    ></app-truckassist-table-toolbar>
    <ng-container *ngIf="activeViewMode === 'List'">
        <app-truckassist-table-head
            [options]="tableOptions"
            [viewData]="viewData"
            [columns]="columns"
            [tableData]="tableData"
            (headActions)="onTableHeadActions($event)"
        ></app-truckassist-table-head>

        <app-truckassist-table-body
            [viewData]="viewData"
            [columns]="columns"
            [options]="tableOptions"
            [selectedTab]="selectedTab"
            (bodyActions)="onTableBodyActions($event)"
            [tableData]="tableData"
        ></app-truckassist-table-body>
    </ng-container>
    <!-- Cards -->
    <div
        *ngIf="activeViewMode === 'Card'"
        class="cards-container d-flex flex-wrap"
    >
        <ng-container
            *ngFor="let data of viewData; let i = index; trackBy: trackCard"
        >
            <app-truckassist-cards
                (bodyActions)="onTableBodyActions($event)"
                [viewData]="viewData"
                [cardIndex]="[i]"
                [card]="data"
                [cardHeader]="{
                    checkbox: true,
                    cardTitle: 'INV-' + data?.loadInvoice.invoice,
                    svg:
                        data.type.name === 'LTL'
                            ? 'assets/svg/detail-cards/left-arrows.svg'
                            : 'assets/svg/detail-cards/shuffle.svg',
                    svgStyle: 'margin-right: 5px'
                }"
                [firstLabel]="{
                    title: 'Status',
                    value: {
                        firstValue: data.loadStatus?.status,
                        firstValueStyle: getStatusLabelStyle(
                            data.loadStatus?.status
                        )
                    }
                }"
                [seccondLabel]="{
                    title: 'Pickup',
                    value: {
                        firstValue: data.loadPickup?.count,
                        firstValueStyle:
                            'font-weight: 700; font-size: 11px; background: #56B4AC; width: 18px; height: 18px; border-radius: 1px; color: #FFFFFF; display: flex; justify-content: center; align-items: center;',
                        seccValue: data?.loadPickup?.location,
                        thirdValue: data?.loadPickup?.date,
                        thirdValueStyle: 'color:#919191;'
                    }
                }"
                [thirdLabel]="{
                    title: 'Delivery',
                    value: {
                        firstValue: data.loadDelivery?.count,
                        firstValueStyle:
                            'font-weight: 700; font-size: 11px; background: #E66767; width: 18px; height: 18px; border-radius: 1px; color: #FFFFFF; display: flex; justify-content: center; align-items: center;',

                        seccValue: data?.loadDelivery?.location,
                        thirdValue: data?.loadDelivery?.date,
                        thirdValueStyle: 'color:#919191;'
                    }
                }"
                [fourthLabel]="{
                    title: 'Rate',
                    value: { firstValue: data.textBase }
                }"
                [firstLabelBack]="{
                    title: 'Dispatcher',
                    value: {
                        firstValue:
                            data.dispatcher.avatar !== null
                                ? data.dispatcher.avatar
                                : '',
                        seccValue: data.dispatcher.fullName
                    }
                }"
                [seccondLabelBack]="{
                    title: 'Broker',
                    value: {
                        firstValue: data.broker.businessName
                    }
                }"
                [thirdLabelBack]="{
                    title: 'Ref. Number',
                    value: {
                        firstValue: data.referenceNumber
                    }
                }"
                [fourthLabelBack]="{
                    title: 'Total Miles',
                    value: {
                        firstValue: data.totalMiles,
                        seccValue: 'mi',
                        seccValueStyle: 'color:#919191;'
                    }
                }"
                [firstLabelRightSide]="{
                    svg: 'assets/svg/truckassist-table/note/Note-hover.svg'
                }"
                [seccondLabelRightSide]="{
                    count: data.commentsCount,
                    svg: 'assets/svg/detail-cards/comment - count.svg'
                }"
                [thirdLabelRightSide]="{
                    count: data.fileCount,
                    svg: 'assets/svg/truckassist-table/attachment-icon.svg'
                }"
            ></app-truckassist-cards>
        </ng-container>
    </div>
</div>
