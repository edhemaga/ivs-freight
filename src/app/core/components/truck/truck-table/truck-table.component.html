<div class="table-container">
    <app-truckassist-table-toolbar
        (toolBarAction)="onToolBarAction($event)"
        [options]="tableOptions"
        [tableData]="tableData"
        [selectedTab]="selectedTab"
        [columns]="columns"
    ></app-truckassist-table-toolbar>

    <ng-container *ngIf="activeViewMode === 'List'">
        <app-truckassist-table-head
            [options]="tableOptions"
            [viewData]="viewData"
            [columns]="columns"
            [tableData]="tableData"
            (headActions)="onTableHeadActions($event)"
        ></app-truckassist-table-head>

        <app-truckassist-table-body
            [viewData]="viewData"
            [columns]="columns"
            [options]="tableOptions"
            [selectedTab]="selectedTab"
            (bodyActions)="onTableBodyActions($event)"
            [tableData]="tableData"
        ></app-truckassist-table-body>
    </ng-container>
    <!-- Cards -->
    <ng-container *ngIf="activeViewMode === 'Card'">
        <div class="elements">
            <div class="cards-container">
                <ng-container
                    *ngFor="
                        let data of viewData;
                        let i = index;
                        trackBy: trackCard
                    "
                >
                    <app-truckassist-cards
                        (bodyActions)="onTableBodyActions($event)"
                        [viewData]="viewData"
                        [cardIndex]="[i]"
                        [card]="data"
                        [cardHeader]="{
                            checkbox: true,
                            cardTitle:
                                data?.licensePlate !== null
                                    ? data?.licensePlate
                                    : '/'
                        }"
                        [firstLabel]="{
                            title: 'VIN No.',
                            value: {
                                firstValue:
                                    data?.tableVin?.regularText !== null
                                        ? data?.tableVin?.regularText
                                        : '/',
                                seccValue:
                                    data?.tableVin?.boldText !== null
                                        ? data?.tableVin?.boldText
                                        : '/',
                                seccValueStyle:
                                    'font-weight:600; position: relative; left: -4px;'
                            }
                        }"
                        [seccondLabel]="{
                            title: 'Make',
                            value: {
                                firstValue:
                                    data?.truckMake?.name !== null
                                        ? data?.truckMake?.name
                                        : '/'
                            }
                        }"
                        [thirdLabel]="{
                            title: 'Model',
                            value: {
                                firstValue:
                                    data?.model !== null ? data?.model : '/'
                            }
                        }"
                        [fourthLabel]="{
                            title: 'Mileage',
                            value: {
                                firstValue:
                                    data?.mileage !== null
                                        ? data?.mileage
                                        : '/',
                                seccondValue:
                                    data?.mileage !== null ? 'mi' : '',
                                seccValueStyle: 'color: #919191'
                            }
                        }"
                        [firstLabelBack]="{
                            title: 'Owner',
                            value: {
                                firstValue:
                                    data.owner.name !== null
                                        ? data.owner.name
                                        : '/'
                            }
                        }"
                        [seccondLabelBack]="{
                            title: 'Commission',
                            value: {
                                firstValue:
                                    data.tabelOwnerDetailsComm !== null
                                        ? data.tabelOwnerDetailsComm
                                        : '/'
                            }
                        }"
                        [thirdLabelBack]="{
                            title: 'Licence Exp.',
                            value: {
                                deadline: true,
                                deadlineValue:
                                    data?.tableLicencePlateDetailExpiration
                                        ?.percentage,
                                firstValue:
                                    data?.tableLicencePlateDetailExpiration
                                        ?.expirationDaysText !== null
                                        ? 'in ' +
                                          data
                                              ?.tableLicencePlateDetailExpiration
                                              ?.expirationDaysText +
                                          ' days'
                                        : '/'
                            }
                        }"
                        [fourthLabelBack]="{
                            title: 'FHWA Exp.',
                            value: {
                                deadline: true,
                                deadlineValue:
                                    data?.tableFhwaInspectionExpiration
                                        ?.percentage,
                                firstValue:
                                    data?.tableFhwaInspectionExpiration
                                        ?.expirationDaysText !== null
                                        ? 'in ' +
                                          data?.tableFhwaInspectionExpiration
                                              ?.expirationDaysText +
                                          ' days'
                                        : '/'
                            }
                        }"
                    ></app-truckassist-cards>
                </ng-container>
            </div>
            <!-- Show More -->
            <ng-container *ngIf="viewData.length">
                <div
                    class="show-more-container d-flex align-items-center justify-content-between"
                    [ngStyle]="{ 'width.px': tableWidth }"
                >
                    <div class="showing ta-font-semi-bold">
                        {{ viewData.length }} OF
                        {{ activeTableData.length }}
                    </div>
                    <ng-container
                        *ngIf="viewData.length < activeTableData.length"
                    >
                        <div
                            class="show-more ta-font-bold w-fit-content align-items-center d-flex justify-content-between"
                            (click)="onShowMore()"
                        >
                            SHOW MORE
                        </div>
                    </ng-container>
                </div>
            </ng-container>
        </div>
    </ng-container>
</div>
