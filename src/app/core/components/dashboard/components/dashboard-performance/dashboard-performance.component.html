<div class="d-flex flex-column justify-content-center dashboard-performance">
    <!-- Header -->

    <div
        class="d-flex align-items-center justify-content-between dashboard-performance-header"
    >
        <!-- Title -->

        <div
            class="d-flex align-items-center dashboard-performance-header-title"
        >
            <p class="m-0 ta-font-black">Performance</p>
        </div>

        <div class="d-flex align-items-center">
            <!-- Tabs -->

            <div
                class="d-flex align-items-center dashboard-performance-header-tabs"
            >
                <app-ta-tab-switch
                    [tabs]="performanceTabs"
                    [disableHeight]="true"
                    (switchClicked)="handleSwitchTabClick($event)"
                    (customPeriodRangeEmitter)="
                        handleSetCustomPeriodRangeClick($event)
                    "
                >
                </app-ta-tab-switch>
            </div>

            <div class="dashboard-performance-header-border"></div>

            <!-- Dropdown -->

            <div
                class="d-flex align-items-center dashboard-performance-header-dropdown"
                [formGroup]="performanceForm"
                [ngClass]="{
                    'dropdown-right-w-1': selectedSubPeriod?.name === 'Hourly',
                    'dropdown-right-w-2':
                        selectedSubPeriod?.name === '3 Hours' ||
                        selectedSubPeriod?.name === '6 Hours',
                    'dropdown-right-w-3':
                        selectedSubPeriod?.name === 'Semi-Daily',
                    'dropdown-right-w-4': selectedSubPeriod?.name === 'Daily',
                    'dropdown-right-w-5': selectedSubPeriod?.name === 'Weekly',
                    'dropdown-right-w-6':
                        selectedSubPeriod?.name === 'Bi-Weekly',
                    'dropdown-right-w-7':
                        selectedSubPeriod?.name === 'Semi-Monthly',
                    'dropdown-right-w-8': selectedSubPeriod?.name === 'Monthly',
                    'dropdown-right-w-9':
                        selectedSubPeriod?.name === 'Quarterly',
                    'dropdown-right-w-10': selectedSubPeriod?.name === 'Yearly'
                }"
            >
                <app-ta-input-dropdown
                    formControlName="subPeriod"
                    [inputConfig]="{
                        name: 'Input Dropdown',
                        type: 'text',
                        isDropdown: true,
                        hideClear: true,
                        hideColorValidations: true,
                        removeInputBackground: true,
                        dropdownWidthClass: 'w-col-157'
                    }"
                    [options]="subPeriodDropdownList"
                    [activeItem]="selectedSubPeriod"
                    (selectedItem)="handleInputSelect($event)"
                ></app-ta-input-dropdown>
            </div>
        </div>
    </div>

    <!-- Body -->

    <div
        class="d-flex flex-column justify-content-center dashboard-performance-body"
    >
        <!-- Boxes -->

        <div
            class="d-flex align-items-center dashboard-performance-body-boxes-container"
        >
            <div
                class="d-flex flex-column justify-content-center boxes-double-box"
                placement="bottom"
                [ngbTooltip]="
                    performanceData[0].isSelected
                        ? 'Hide from Chart'
                        : 'Show on Chart'
                "
                [ngStyle]="{
                    background: performanceData[0].isHovered
                        ? performanceData[0].selectedHoverColor
                        : performanceData[0].isSelected
                        ? performanceData[0].selectedColor
                        : '#f7f7f780'
                }"
                [ngClass]="{ selected: performanceData[0].isSelected }"
                (mouseenter)="handlePerformanceDataHover(0)"
                (mouseleave)="handlePerformanceDataHover(0, true)"
                (click)="
                    handlePerformanceDataClick(
                        0,
                        performanceData[0].selectedColor
                    )
                "
            >
                <div
                    class="d-flex flex-column justify-content-center boxes-double-box-header"
                >
                    <div
                        class="d-flex flex-column justify-content-center boxes-double-box-header-income"
                    >
                        <div
                            class="d-flex align-items-center boxes-double-box-header-income-up"
                        >
                            <svg-icon
                                class="circle-icon"
                                [src]="
                                    'assets/svg/common/load/ic_circle-default-load.svg'
                                "
                                [svgStyle]="{
                                    'width.px': 10,
                                    'height.px': 10
                                }"
                            ></svg-icon>

                            <p class="m-0 ta-font-bold">NET INCOME</p>
                        </div>

                        <div
                            class="d-flex align-items-center boxes-double-box-header-income-down"
                        >
                            <p class="m-0 ta-font-bold">
                                $320.56K
                                <!--  | addThousandSign -->
                            </p>
                        </div>
                    </div>

                    <!-- Status Bar -->

                    <div class="status-bar">
                        <div class="status-bar-inner"></div>
                    </div>
                </div>

                <div
                    class="d-flex flex-column justify-content-center boxes-double-box-body"
                >
                    <div
                        class="d-flex flex-column justify-content-center boxes-double-box-body-stats"
                    >
                        <p class="m-0 ta-font-bold">
                            ${{
                                performanceData[0].lastMonthValue
                                    | addThousandSign
                            }}
                        </p>

                        <div class="d-flex align-items-center">
                            <ng-container
                                *ngIf="!performanceData[0].lastMonthTrend"
                            >
                                <div
                                    class="d-flex align-items-center trend-span"
                                >
                                    <p class="m-0 ta-font-bold">SAME AS</p>
                                </div>
                            </ng-container>

                            <ng-container
                                *ngIf="performanceData[0].lastMonthTrend"
                            >
                                <p class="m-0 ta-font-bold">
                                    {{
                                        performanceData[0].lastMonthTrend > 0
                                            ? '+'
                                            : '-'
                                    }}${{
                                        performanceData[0].lastMonthTrend < 0
                                            ? performanceData[0]
                                                  .lastMonthTrend * -1
                                            : (performanceData[0].lastMonthTrend
                                              | addThousandSign)
                                    }}
                                </p>

                                <div
                                    class="d-flex align-items-center justify-content-center trend-icon-box"
                                >
                                    <svg-icon
                                        class="d-flex align-items-center justify-content-center trend-icon"
                                        [src]="
                                            performanceData[0].lastMonthTrend
                                                | setTrendIcon
                                                    : performanceData[0].title
                                        "
                                        [svgStyle]="{
                                            'width.px': 14,
                                            'height.px': 14
                                        }"
                                    ></svg-icon>
                                </div>
                            </ng-container>
                        </div>

                        <p class="m-0 ta-font-bold">
                            {{
                                currentActiveTab.name === 'Today'
                                    ? 'YESTERDAY'
                                    : currentActiveTab.name === 'WTD'
                                    ? 'LAST WEEK'
                                    : currentActiveTab.name === 'MTD'
                                    ? 'LAST MONTH'
                                    : currentActiveTab.name === 'QTD'
                                    ? 'LAST QUARTAL'
                                    : currentActiveTab.name === 'YTD'
                                    ? 'LAST PERIOD'
                                    : ''
                            }}
                        </p>
                    </div>

                    <div
                        class="d-flex flex-column justify-content-center boxes-double-box-body-stats"
                    >
                        <p class="m-0 ta-font-bold">
                            ${{
                                performanceData[0].monthlyAverageValue
                                    | addThousandSign
                            }}
                        </p>

                        <div class="d-flex align-items-center">
                            <p class="m-0 ta-font-bold">
                                ${{
                                    performanceData[0].monthlyAverageTrend
                                        | addThousandSign
                                }}
                            </p>

                            <div
                                class="d-flex align-items-center justify-content-center trend-icon-box"
                            >
                                <svg-icon
                                    class="d-flex align-items-center justify-content-center trend-icon"
                                    [src]="
                                        'assets/svg/common/dashboard/trend-up-with-frame.svg'
                                    "
                                    [svgStyle]="{
                                        'width.px': 14,
                                        'height.px': 14
                                    }"
                                ></svg-icon>
                            </div>
                        </div>

                        <p class="m-0 ta-font-bold">
                            {{
                                currentActiveTab.name === 'Today'
                                    ? 'DAILY AVERAGE'
                                    : currentActiveTab.name === 'WTD'
                                    ? 'WEEKLY AVERAGE'
                                    : currentActiveTab.name === 'MTD'
                                    ? 'MONTHLY AVERAGE'
                                    : currentActiveTab.name === 'QTD'
                                    ? 'QUARTERLY AVERAGE'
                                    : currentActiveTab.name === 'YTD'
                                    ? 'PERIOD AVERAGE'
                                    : ''
                            }}
                        </p>
                    </div>
                </div>
            </div>

            <div class="boxes-single-box-container">
                <ng-container
                    *ngFor="
                        let performanceDataItem of performanceData | slice : 1;
                        let i = index;
                        trackBy: trackByIdentity
                    "
                >
                    <div
                        class="d-flex flex-column box"
                        placement="bottom"
                        [ngbTooltip]="
                            performanceDataItem.isSelected
                                ? 'Hide from Chart'
                                : 'Show on Chart'
                        "
                        [ngStyle]="{
                            background: performanceDataItem.isHovered
                                ? performanceDataItem.selectedHoverColor
                                : performanceDataItem.isSelected
                                ? performanceDataItem.selectedColor
                                : '#f7f7f780'
                        }"
                        [ngClass]="{ selected: performanceDataItem.isSelected }"
                        (mouseenter)="handlePerformanceDataHover(i + 1)"
                        (mouseleave)="handlePerformanceDataHover(i + 1, true)"
                        (click)="
                            handlePerformanceDataClick(
                                i + 1,
                                performanceDataItem.selectedColor
                            )
                        "
                    >
                        <div class="d-flex align-items-center box-header">
                            <svg-icon
                                class="circle-icon"
                                [src]="
                                    'assets/svg/common/load/ic_circle-default-load.svg'
                                "
                                [svgStyle]="{
                                    'width.px': 10,
                                    'height.px': 10
                                }"
                            ></svg-icon>

                            <p class="m-0 ta-font-bold">
                                {{ performanceDataItem.title }}
                            </p>
                        </div>

                        <div class="d-flex align-items-center box-value">
                            <p class="m-0 ta-font-bold">
                                {{
                                    performanceDataItem.title === 'REVENUE' ||
                                    performanceDataItem.title === 'FUEL COST' ||
                                    performanceDataItem.title ===
                                        'REPAIR COST' ||
                                    performanceDataItem.title === 'EXPENSES'
                                        ? '$'
                                        : ''
                                }}
                            </p>

                            <p class="m-0 ta-font-bold">
                                {{
                                    (performanceDataItem.isHovered
                                        ? performanceDataItem.monthlyAverageValue
                                        : performanceDataItem.lastMonthValue
                                    ) | addThousandSign
                                }}
                            </p>

                            <p class="m-0 ta-font-bold">
                                {{
                                    performanceDataItem.title === 'REVENUE' ||
                                    performanceDataItem.title === 'MILES' ||
                                    performanceDataItem.title ===
                                        'FUEL GALLON' ||
                                    performanceDataItem.title === 'FUEL COST' ||
                                    performanceDataItem.title ===
                                        'REPAIR COST' ||
                                    performanceDataItem.title === 'EXPENSES'
                                        ? 'K'
                                        : ''
                                }}
                            </p>
                        </div>

                        <div class="d-flex flex-column box-last-average">
                            <div class="d-flex align-items-center">
                                <ng-container
                                    *ngIf="!performanceDataItem.lastMonthTrend"
                                >
                                    <div
                                        class="d-flex align-items-center trend-span"
                                    >
                                        <p class="m-0 ta-font-bold">SAME AS</p>
                                    </div>
                                </ng-container>

                                <ng-container
                                    *ngIf="performanceDataItem.lastMonthTrend"
                                >
                                    <p class="m-0 ta-font-bold">
                                        {{
                                            performanceDataItem.lastMonthTrend >
                                            0
                                                ? '+'
                                                : ''
                                        }}
                                    </p>
                                    <p class="m-0 ta-font-bold">
                                        {{
                                            (performanceDataItem.isHovered
                                                ? performanceDataItem.monthlyAverageTrend
                                                : performanceDataItem.lastMonthTrend
                                            ) | addThousandSign
                                        }}
                                    </p>

                                    <div
                                        class="d-flex align-items-center justify-content-center trend-icon-box"
                                    >
                                        <svg-icon
                                            class="d-flex align-items-center justify-content-center trend-icon"
                                            [src]="
                                                performanceDataItem.lastMonthTrend
                                                    | setTrendIcon
                                                        : performanceDataItem.title
                                            "
                                            [svgStyle]="{
                                                'width.px': 14,
                                                'height.px': 14
                                            }"
                                        ></svg-icon>
                                    </div>
                                </ng-container>
                            </div>
                        </div>

                        <div class="d-flex align-items-center box-bottom-title">
                            <ng-container
                                *ngIf="!performanceDataItem.isHovered"
                            >
                                <p class="m-0 ta-font-bold">
                                    {{
                                        currentActiveTab.name === 'Today'
                                            ? 'YESTERDAY'
                                            : currentActiveTab.name === 'WTD'
                                            ? 'LAST WEEK'
                                            : currentActiveTab.name === 'MTD'
                                            ? 'LAST MONTH'
                                            : currentActiveTab.name === 'QTD'
                                            ? 'LAST QUARTAL'
                                            : currentActiveTab.name === 'YTD'
                                            ? 'LAST PERIOD'
                                            : ''
                                    }}
                                </p>
                            </ng-container>

                            <ng-container *ngIf="performanceDataItem.isHovered">
                                <p class="m-0 ta-font-bold">
                                    {{
                                        currentActiveTab.name === 'Today'
                                            ? 'DAILY AVERAGE'
                                            : currentActiveTab.name === 'WTD'
                                            ? 'WEEKLY AVERAGE'
                                            : currentActiveTab.name === 'MTD'
                                            ? 'MONTHLY AVERAGE'
                                            : currentActiveTab.name === 'QTD'
                                            ? 'QUARTERLY AVERAGE'
                                            : currentActiveTab.name === 'YTD'
                                            ? 'PERIOD AVERAGE'
                                            : ''
                                    }}
                                </p>
                            </ng-container>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>

        <!-- Line Chart -->

        <div class="charts-container" (mouseleave)="handleRemoveChartsHover()">
            <div
                class="d-flex flex-column justify-content-center dashboard-performance-body-line-chart-container"
            >
                <div
                    class="d-flex align-items-center justify-content-between line-chart-header"
                >
                    <p class="m-0 ta-font-bold">Mar 01 - Mar 24, 2023</p>

                    <div
                        class="d-flex align-items-center line-chart-header-right"
                    >
                        <div class="d-flex align-items-center">
                            <svg-icon
                                class="circle-icon circle-icon-price"
                                [src]="
                                    'assets/svg/common/load/ic_circle-default-load.svg'
                                "
                                [svgStyle]="{
                                    'width.px': 10,
                                    'height.px': 10
                                }"
                            ></svg-icon>

                            <p class="m-0 ta-font-semi-bold">
                                Price per Gallon
                            </p>
                        </div>

                        <div class="d-flex align-items-center">
                            <svg-icon
                                class="circle-icon circle-icon-rate"
                                [src]="
                                    'assets/svg/common/load/ic_circle-default-load.svg'
                                "
                                [svgStyle]="{
                                    'width.px': 10,
                                    'height.px': 10
                                }"
                            ></svg-icon>

                            <p class="m-0 ta-font-semi-bold">
                                Load Rate per Mile
                            </p>
                        </div>
                    </div>
                </div>

                <div class="line-chart-container">
                    <app-ta-chart
                        #lineChart
                        [chartConfig]="lineChartConfig"
                        [axesProperties]="lineChartAxes"
                        [legendAttributes]="{}"
                    >
                    </app-ta-chart>
                </div>
            </div>

            <!-- Bar Chart -->

            <div class="bar-chart-container">
                <app-ta-chart
                    #barChart
                    [chartConfig]="barChartConfig"
                    [axesProperties]="barChartAxes"
                    [legendAttributes]="{}"
                    (hoverOtherChart)="handleBarChartHover($event)"
                >
                </app-ta-chart>
            </div>
        </div>
    </div>
</div>
