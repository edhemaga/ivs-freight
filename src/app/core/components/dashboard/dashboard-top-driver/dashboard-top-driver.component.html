<div class="dashboard-top-driver-holder">
  <div class="dashboard-top-driver-header-holder">
    <div class="dashboard-top-driver-header-title-holder">
      <div class="dashboard-top-driver-header-title">
        Top {{ topTenTitle }} (67)
      </div>
      <div
        class="dashboard-top-driver-header-arrow-down"
        #t3="ngbPopover"
        [ngbPopover]="topTenPopover"
        [placement]="['bottom']"
        [popoverClass]="'toptenpopovermain'"
        autoClose="outside"
        [container]="'body'"
        [ngClass]="{ 'active-options': t3?.isOpen() }"
      >
        <svg-icon src="assets/svg/common/fill_arrow_down.svg"></svg-icon>
      </div>
    </div>
    <div class="dashboard-top-driver-header-toolbar-holder">
      <div class="dashboard-top-driver-header-toolbar-items-holder">
        <div class="dashboard-top-driver-header-toolbar-switch-left">
          <app-ta-tab-switch
            [tabs]="topTenSwitchTabstype1"
            (switchClicked)="changeDriverSwitchTabs($event)"
          >
          </app-ta-tab-switch>
        </div>
        <div class="dashboard-top-driver-header-toolbar-border"></div>
        <div class="dashboard-top-driver-header-toolbar-search-icon">
          <app-truckassist-search
            [selectedTabData]="searchDashboardOptions"
          ></app-truckassist-search>
        </div>
        <div class="dashboard-top-driver-header-toolbar-border"></div>
        <div class="dashboard-top-driver-toolbar-filter-selected" 
          (click)="clearSelected()"
          *ngIf="selectedDrivers?.length > 0"
        >
          Clear Selection
        </div>
      </div>
      <div class="dashboard-top-driver-header-toolbar-items-holder">
        <div class="dashboard-top-driver-header-toolbar-switch-right">
          <app-ta-tab-switch
            #tabSwitch
            [tabs]="driverTopSwitch"
            (switchClicked)="changeDriverSwitchTabs($event)"
            (saveCustomRange)="saveCustomRange($event)"
          >
          </app-ta-tab-switch>
        </div>
        <div
          class="dashboard-top-driver-header-toolbar-border different-margin"
        ></div>
        <app-ta-time-period
          #timePeriod
          (selectTimePeriod)="selectTimePeriod($event)"
        >
        </app-ta-time-period>
      </div>
    </div>
  </div>
  <div class="dashboard-top-driver-body-holder">
    <div class="row">
      <div class="dashboard_top_driver_list">
        <div class="dashboard-top-driver-body-list-holder">
          <div
            *ngFor="let item of driverList; let indx = index"
            class="dashboard-top-driver-body-list-items-holder"
            (mouseenter)="hoverDriver(indx)"
            (mouseleave)="removeDriverHover()"
            (click)="selectCompare($event, item, indx)"
          >
            <div
              class="dashboard-top-driver-body-list-items top-compare-{{
                compareColor[item.id]
              }}"
            >
              <div class="dashboard-top-driver-body-list-frame list-name-holder">
                <div class="dashboard-top-driver-body-list-id">
                  {{ item.id }}
                </div>
                <div
                  class="dashboard-top-driver-body-list-remove"
                  (click)="removeDriverFromList($event, indx, item)"
                >
                  <svg-icon src="assets/svg/truckassist-table/x.svg"></svg-icon>
                </div>
                <div
                  class="dashboard-top-driver-body-list-circle top-ten-{{
                    circleColor[indx]
                  }}-color"
                ></div>
                <div class="dashboard-top-driver-body-list-name">
                  {{ item.name }}
                </div>
              </div>
              <div class="dashboard-top-driver-body-list-frame">
                <div class="dashboard-top-driver-body-list-price">
                  {{ item.price }}
                </div>
                <div class="dashboard-top-driver-body-list-percent">
                  {{ item.percent }}
                </div>
              </div>
            </div>
            <div
              class="dashboard-top-driver-body-list-border"
              [class.list_line_hidden]="!compareColor[item.id]"
            ></div>
          </div>
          <div class="driver_empty_state_holder" *ngIf="!driverList.length">
            <div class="main_empty_state_holder">
              <div class="empty_state_title">
                {{this.searchDashboardOptions.gridNameTitle}} list is empty
              </div>
              <div class="empty_state_title_bottom">
                Please add {{this.searchDashboardOptions.gridNameTitle.toLowerCase()+'s'}}
              </div>
              <div class="empty_state_image">
                <svg-icon src="assets/svg/common/dashboard_empty_state.svg"></svg-icon>
              </div>
              <div class="empty_add_button">
                <div class="add_text">Add {{this.searchDashboardOptions.gridNameTitle}}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="doughnut_chart_main_holder">
        <div class="doughnut_chart_holder">
          <app-ta-chart
            #doughnutChart
            [chartConfig]="chartConfig"
            [axesProperties]="chartAxes"
            [legendAttributes]="{}"
          >
          </app-ta-chart>
        </div>
      </div>
      <div class="bar_chart_main_holder">
        <div class="bar_chart_holder">
          <div class="chart_top_line_holder">
            <div class="chart_line_title">March, 2023 - March, 2025</div>
            <div
              class="chart_legend_hold"
              [ngStyle]="{ opacity: selectedDrivers?.length ? '0' : '1' }"
            >
              <div class="chart_legend_line line_sep">
                <div class="chart_legend_dot round_dark_grey">
                  <svg-icon src="assets/svg/common/round_blue.svg"></svg-icon>
                </div>
                <div class="chart_legend_title">Top 10</div>
              </div>
              <div class="chart_legend_line">
                <div class="chart_legend_dot round_light_grey">
                  <svg-icon src="assets/svg/common/round_blue.svg"></svg-icon>
                </div>
                <div class="chart_legend_title">All Others</div>
              </div>
            </div>
          </div>
          <app-ta-chart
            #topDriverBarChart
            [chartConfig]="barChartConfig"
            [axesProperties]="barAxes"
            [legendAttributes]="{}"
          >
          </app-ta-chart>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #topTenPopover let-data="data">
  <div class="top-ten-popover-holder">
    <div
      *ngFor="let item of popoverTopTen; let indx = index"
      class="top-ten-popover-items-holder"
      [ngClass]="{ active: item.active }"
      (click)="changeTopTen(item)"
    >
      {{ item.name.toUpperCase() }}
      <div class="popover-icon-holder">
        <svg-icon src="assets/svg/common/ic_confirm.svg"></svg-icon>
      </div>
    </div>
  </div>
</ng-template>
