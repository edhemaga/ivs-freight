<div class="d-flex flex-column justify-content-center dashboard-top-rated">
    <!-- Header -->

    <div
        class="d-flex align-items-center justify-content-between dashboard-top-rated-header"
    >
        <!-- Left Side -->
        <div class="d-flex align-items-center">
            <!-- Title -->

            <div class="dashboard-top-rated-header-title">
                <p class="m-0 ta-font-black">
                    Top {{ topRatedTitle }} ({{ topRatedList.length }})
                </p>
            </div>

            <!-- Dropdown -->

            <button
                class="dashboard-top-rated-header-arrow-btn"
                #popover="ngbPopover"
                autoClose="outside"
                [ngbPopover]="topRatedPopover"
                [popoverClass]="'top-rated-popover-main'"
                [placement]="['bottom']"
                [container]="'body'"
                [ngClass]="{ active: popover?.isOpen() }"
            >
                <svg-icon
                    src="assets/svg/common/fill_arrow_down.svg"
                    [svgStyle]="{ 'width.px': '18', 'height.px': '18' }"
                ></svg-icon>
            </button>

            <ng-template #topRatedPopover>
                <div class="top-rated-popover-container">
                    <div
                        *ngFor="
                            let topRatedDropdownItem of topRatedDropdownList;
                            trackBy: trackByIdentity
                        "
                        class="top-rated-popover-item"
                        [ngClass]="{ active: topRatedDropdownItem.isActive }"
                        (click)="
                            handleSwitchTopRatedClick(topRatedDropdownItem)
                        "
                    >
                        <p class="m-0">{{ topRatedDropdownItem.name }}</p>

                        <div class="popover-icon-container">
                            <svg-icon
                                src="assets/svg/common/ic_confirm.svg"
                                [svgStyle]="{ 'width.px': 14, 'height.px': 14 }"
                            ></svg-icon>
                        </div>
                    </div>
                </div>
            </ng-template>

            <!-- Tabs -->

            <div
                class="d-flex align-items-center dashboard-top-rated-header-tabs"
            >
                <app-ta-tab-switch
                    [tabs]="topRatedTabs"
                    [disableHeight]="true"
                    (switchClicked)="handleSwitchTabClick($event)"
                >
                </app-ta-tab-switch>
            </div>

            <div class="dashboard-top-rated-header-border"></div>

            <!-- Search -->

            <div class="dashboard-top-rated-header-search">
                <app-carrier-search-two
                    [placeHolderText]="topRatedTitle"
                    (searchValueEmitter)="handleSearchValue($event)"
                ></app-carrier-search-two>
            </div>
        </div>

        <!-- Right Side -->
        <div class="d-flex align-items-center" [formGroup]="topRatedForm">
            <div
                class="dropdown-left-container"
                [ngClass]="{
                    'dropdown-left-w-1': selectedMainPeriod.name === 'Today',
                    'dropdown-left-w-2':
                        selectedMainPeriod.name === 'Week-to-Date',
                    'dropdown-left-w-3':
                        selectedMainPeriod.name === 'Month-to-Date',
                    'dropdown-left-w-4':
                        selectedMainPeriod.name === 'Year-to-Date',
                    'dropdown-left-w-5': selectedMainPeriod.name === 'All Time',
                    'dropdown-left-w-6': selectedMainPeriod.name === 'Custom'
                }"
            >
                <app-ta-input-dropdown
                    formControlName="dropdownLeft"
                    [inputConfig]="{
                        name: 'Input Dropdown',
                        type: 'text',
                        isDropdown: true,
                        hideClear: true,
                        hideColorValidations: true,
                        removeInputBackground: true,
                        dropdownWidthClass: 'w-col-157'
                    }"
                    [options]="mainPeriodDropdownList"
                    [activeItem]="selectedMainPeriod"
                    (selectedItem)="
                        handleInputSelect($event, 'MAIN_PERIOD_DROPDOWN')
                    "
                ></app-ta-input-dropdown>
            </div>

            <div class="dashboard-top-rated-header-border"></div>

            <div
                class="dropdown-right-container"
                [ngClass]="{
                    'dropdown-right-w-1': selectedSubPeriod.name === 'Hourly',
                    'dropdown-right-w-2':
                        selectedSubPeriod.name === '3 Hours' ||
                        selectedSubPeriod.name === '6 Hours',
                    'dropdown-right-w-3':
                        selectedSubPeriod.name === 'Semi-Daily',
                    'dropdown-right-w-4': selectedSubPeriod.name === 'Daily',
                    'dropdown-right-w-5': selectedSubPeriod.name === 'Weekly',
                    'dropdown-right-w-6':
                        selectedSubPeriod.name === 'Bi-Weekly',
                    'dropdown-right-w-7':
                        selectedSubPeriod.name === 'Semi-Monthly',
                    'dropdown-right-w-8': selectedSubPeriod.name === 'Monthly',
                    'dropdown-right-w-9':
                        selectedSubPeriod.name === 'Quarterly',
                    'dropdown-right-w-10': selectedSubPeriod.name === 'Yearly'
                }"
            >
                <app-ta-input-dropdown
                    formControlName="dropdownRight"
                    [inputConfig]="{
                        name: 'Input Dropdown',
                        type: 'text',
                        isDropdown: true,
                        hideClear: true,
                        hideColorValidations: true,
                        removeInputBackground: true,
                        dropdownWidthClass: 'w-col-157'
                    }"
                    [options]="subPeriodDropdownList"
                    [activeItem]="selectedSubPeriod"
                    (selectedItem)="
                        handleInputSelect($event, 'SUB_PERIOD_DROPDOWN')
                    "
                ></app-ta-input-dropdown>
            </div>
        </div>
    </div>

    <!-- Body-->

    <div
        class="d-flex flex-column justify-content-center dashboard-top-rated-body"
    >
        <!-- Body Up -->

        <div class="dashboard-top-rated-body-up">
            <!-- Top Rated List -->

            <div
                class="d-flex flex-column justify-content-center dashboard-top-rated-body-up-list"
                [ngClass]="{ 'show-more': isShowingMore }"
            >
                <ng-container
                    *ngFor="
                        let topRatedListItem of topRatedList
                            | slice : 0 : topRatedListSliceEnd;
                        let i = index;
                        trackBy: trackByIdentity
                    "
                >
                    <div
                        class="d-flex align-items-center justify-content-between top-rated-item"
                        [ngStyle]="
                            i <= 9 &&
                            topRatedListItem.isSelected && {
                                background: mainColorsPallete[i].code
                            }
                        "
                        [ngClass]="{
                            selected: i <= 9 && topRatedListItem.isSelected
                        }"
                        (click)="handleAddSelectedClick(topRatedListItem, i)"
                    >
                        <div class="align-items-center top-rated-item-left">
                            <div
                                class="d-flex align-items-center justify-content-center top-rated-item-number-box"
                            >
                                <p class="m-0 ta-font-semi-bold">
                                    {{ topRatedListItem.id }}
                                </p>

                                <svg-icon
                                    class="close-icon"
                                    [src]="'assets/svg/applicant/close-x.svg'"
                                    [svgStyle]="{
                                        'width.px': 18,
                                        'height.px': 18
                                    }"
                                    (click)="
                                        handleRemoveSelectedClick(
                                            $event,
                                            topRatedListItem,
                                            i
                                        )
                                    "
                                ></svg-icon>
                            </div>

                            <div
                                class="d-flex align-items-center justify-content-center top-rated-item-color-box"
                                [ngStyle]="{
                                    background:
                                        i <= 9 && mainColorsPallete[i].code
                                }"
                            ></div>

                            <div
                                class="d-flex align-items-center top-rated-item-name-box"
                            >
                                <p class="m-0 ta-font-extra-bold">
                                    {{ topRatedListItem.name }}
                                </p>
                            </div>
                        </div>

                        <div
                            class="d-flex align-items-center top-rated-item-right"
                        >
                            <div
                                class="d-flex align-items-center top-rated-item-first-tab-box"
                            >
                                <p class="m-0">
                                    {{ topRatedListItem.firstTabValue }}
                                </p>
                            </div>

                            <div
                                class="d-flex align-items-center top-rated-item-second-tab-box"
                            >
                                <p class="m-0 ta-font-semi-bold">
                                    {{ topRatedListItem.secondTabValue }}%
                                </p>
                            </div>
                        </div>
                    </div>
                </ng-container>

                <!-- Show More -->

                <div
                    class="d-flex align-items-center justify-content-between show-more-container"
                >
                    <div
                        class="d-flex align-items-center show-more-container-left"
                    >
                        <p class="m-0 ta-font-semi-bold">
                            {{
                                topRatedList.length <= 10
                                    ? topRatedList.length
                                    : '10'
                            }}
                            OF {{ topRatedList.length }}
                        </p>
                    </div>

                    <ng-container *ngIf="topRatedList.length > 10">
                        <div
                            class="d-flex align-items-center show-more-container-right"
                        >
                            <button
                                type="button"
                                class="ta-font-bold show-more-btn"
                                (click)="handleShowMoreClick()"
                            >
                                SHOW MORE
                            </button>
                        </div>
                    </ng-container>
                </div>
            </div>

            <!-- Border -->

            <div class="dashboard-top-rated-body-up-border"></div>

            <!-- Doughnut Chart -->

            <div
                class="d-flex align-items-center justify-content-center dashboard-top-rated-body-up-doughnut-chart"
            >
                <app-ta-chart
                    #doughnutChart
                    [chartConfig]="chartConfig"
                    [axesProperties]="chartAxes"
                    [legendAttributes]="{}"
                >
                </app-ta-chart>
            </div>
        </div>
    </div>
</div>

<!-- <div class="dashboard-top-driver-holder">
   <div class="dashboard-top-driver-body-holder">
        <div class="main_driver_holder">
            <div class="d-flex align-items-center">
                <div
                    class="dashboard_top_driver_list"
                >
                       
                <div class="doughnut_chart_main_holder">
                    <div class="doughnut_chart_holder">
                        <app-ta-chart
                            #doughnutChart
                            [chartConfig]="chartConfig"
                            [axesProperties]="chartAxes"
                            [legendAttributes]="{}"
                        >
                        </app-ta-chart>
                    </div>
                </div>
            </div>

            <div class="bar_chart_main_holder">
                <div class="bar_chart_holder">
                    <div class="chart_top_line_holder">
                        <div class="chart_line_title">
                            March, 2023 - March, 2025
                        </div>

                        <div
                            class="chart_legend_hold"
                            [ngStyle]="{
                                opacity: selectedDrivers?.length ? '0' : '1'
                            }"
                        >
                            <div class="chart_legend_line line_sep">
                                <div class="chart_legend_dot round_dark_grey">
                                    <svg-icon
                                        src="assets/svg/common/round_blue.svg"
                                    ></svg-icon>
                                </div>

                                <div class="chart_legend_title">Top 10</div>
                            </div>

                            <div class="chart_legend_line">
                                <div class="chart_legend_dot round_light_grey">
                                    <svg-icon
                                        src="assets/svg/common/round_blue.svg"
                                    ></svg-icon>
                                </div>

                                <div class="chart_legend_title">All Others</div>
                            </div>
                        </div>
                    </div>

                    <app-ta-chart
                        #topDriverBarChart
                        [chartConfig]="barChartConfig"
                        [axesProperties]="barAxes"
                        [legendAttributes]="{}"
                    >
                    </app-ta-chart>
                </div>
            </div>
        </div>
    </div>
</div>
 -->
