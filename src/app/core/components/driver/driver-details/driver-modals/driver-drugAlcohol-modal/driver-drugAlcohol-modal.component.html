<app-ta-modal
  [modalTitle]="editData?.type !== 'edit' ? 'Add Test' : 'Edit Test'"
  [editData]="editData"
  [editName]="modalName"
  [isModalValid]="drugForm.valid"
  [specificCaseModalName]="true"
  (modalActionTypeEmitter)="onModalAction($event)"
>
  <form [formGroup]="drugForm" class="form-container">
    <div class="drug-type-reason-date">
      <app-ta-input-dropdown
        formControlName="testType"
        [inputConfig]="{
          name: 'Input Dropdown',
          type: 'text',
          label: 'Type',
          isRequired: true,
          isDropdown: true,
          dropdownWidthClass: 'w-test-types'
        }"
        [canAddNew]="true"
        [options]="testTypes"
        (selectedItem)="onSelectTestType($event)"
      ></app-ta-input-dropdown>
      <app-ta-input-dropdown
        formControlName="testReasonId"
        [inputConfig]="{
          name: 'Input Dropdown',
          type: 'text',
          label: 'Reason',
          isRequired: true,
          isDropdown: true,
          isDisabled: !drugForm.get('testType').value,
          dropdownWidthClass: 'w-reason-types'
        }"
        [canAddNew]="true"
        [options]="reasonTypes"
        (selectedItem)="onSelectReasonType($event)"
      ></app-ta-input-dropdown>
      <app-ta-input
        formControlName="testingDate"
        [inputConfig]="{
          name: 'datepicker',
          type: 'text',
          label: 'Issue Date',
          placeholderIcon: 'date',
          isRequired: true,
          customClass: 'datetimeclass'
        }"
      ></app-ta-input>
    </div>

    <div class="ta-card-body-overflow-none">
      <app-ta-custom-card
        [hasCounter]="documents.length ? documents.length : '0'"
        [cardName]="'Documents'"
        [isCardOpen]="documents.length"
      >
        <app-ta-modal-upload
          [files]="[]"
          (onFileEvent)="onFilesEvent($event)"
        ></app-ta-modal-upload>
      </app-ta-custom-card>
    </div>
    <app-ta-input-note
      formControlName="note"
      [isVisibleNote]="drugForm.get('note').value"
    ></app-ta-input-note>
  </form>
</app-ta-modal>
