<div class="details-component">
  <div [ngSwitch]="data.template">
    <!---------------------- GENERAL TEMPLATE ------------------>
    <div *ngSwitchCase="'general'">
      <app-driver-details-card
      [data]="driverData.driver"
      ></app-driver-details-card>
    </div>
    <div *ngSwitchCase="'cdl'">
      <div *ngFor="let cdl of driverData.driver.cdls; trackBy: identity">
        <app-ta-re-card
          [options]="dataTest"
          [cardDocumentCounter]="6"
          (resizePage)="toggleResizePage($event)"
          [cardNameCommon]="cdl?.cdlNumber"
          [expDateClose]="formatDate(cdl?.expDate)"
          [hasCopyIcon]="true"
          [optionsId]="cdl.id"
          (dropActions)="optionsEv($event,'edit-licence')"
        >
          <div class="cards-container">
            <div class="card-body-cdl">
              <div class="card-restriction-endorsment card-restriction-class">
                <!-- <div class="card-item">
                  <div class="card-item-name">State</div>
                  <div class="card-item-value">
                    {{ cdl.state.stateShortName }}
                  </div>
                </div> -->
                <div class="card-restriction">
                  <div class="restriction-name">Class</div>
                  <div class="restriction-item-value">{{ cdl?.classType }}</div>
                </div>
                <div class="card-restriction">
                  <div class="restriction-name">Issued</div>
                  <div class="restriction-item-value">
                    {{ formatDate(cdl?.issueDate) }}
                  </div>
                </div>
              </div>
              <div [ngClass]="{ 'card-restriction-endorsment': !toggler }">
                <div class="card-restriction">
                  <p class="restriction-name">Restriction</p>
                  <div class="item-card-wrapper">
                    <p
                      class="restriction-item-value"
                      *ngFor="let rest of cdl.cdlRestrictions; trackBy: identity"
                    >
                      <span class="value-name">{{ rest?.code }}</span>
                      <span class="desc" *ngIf="toggler"
                        >- {{ rest?.description }}
                      </span>
                    </p>
                  </div>
                </div>
                <div class="card-restriction endorsement">
                  <p class="restriction-name">Endorsement</p>
                  <div class="item-card-wrapper">
                    <p
                      class="restriction-item-value"
                      *ngFor="let endors of cdl.cdlEndorsements; trackBy: identity"
                    >
                      <span class="value-name">{{ endors?.code }}</span>
                      <span class="desc" *ngIf="toggler"
                        >- {{ endors?.description }}</span
                      >
                    </p>
                  </div>
                </div>
              </div>
              <div
                class="card-row-progress"
                [ngClass]="{ 'second-progress': toggler }"
              >
                <div class="card-details-progress-container">
                  <app-truckassist-progress-expiration
                    [expireDate]="formatDate(cdl?.expDate)"
                    [startDate]="formatDate(cdl?.issueDate)"
                    [expiresSettings]="'details'"
                  >
                  </app-truckassist-progress-expiration>
                </div>
              </div>
            </div>

            <div class="divider" *ngIf="toggler"></div>
            <div *ngIf="toggler" class="details-document-container">
              <div class="icon-counter-wrapper">
                <div class="counter-text-wrapper">
                  <app-ta-counter
                    [countBackgroud]="'#F3F3F3'"
                    [countHeight]="'24px'"
                    [countWidth]="'24px'"
                    [count]="6"
                  >
                  </app-ta-counter>
                  <p class="details-document-name">Document</p>
                </div>
                <svg-icon
                  (click)="onFileAction('download')"
                  src="assets/svg/common/ic_download.svg"
                >
                </svg-icon>
              </div>
            </div>
            <div *ngIf="toggler" class="card-pdf">
              <app-ta-files
                [files]="[
                  {
                    fileName: 'truckassist0',
                    url: 'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf',
                    extension: 'pdf'
                  },
                  {
                    fileName: 'truckassist0',
                    url: 'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf',
                    extension: 'pdf'
                  },
                  {
                    fileName: 'truckassist0',
                    url: 'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf',
                    extension: 'pdf'
                  },
                  {
                    fileName: 'truckassist0',
                    url: 'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf',
                    extension: 'pdf'
                  }
                ]"
                [fileType]="'multiple-pdf'"
                [customClassName]="'driver-details-multiple-pdf'"
              >
              </app-ta-files>
            </div>
            <div *ngIf="toggler" class="divider"></div>
            <div *ngIf="toggler" class="card-note">
              <app-ta-input-note
                [formControl]="cdlNote"
                [isVisibleDivider]="false"
                [isVisibleNote]="true"
                [isVisibleSecondDivider]="false"
                [isVisibleArrow]="false"
                [minRows]="1"
                [placeholder]="'Write something.'"
                [customClass]="'note-small'"
              >
              </app-ta-input-note>
            </div>
          </div>
        </app-ta-re-card>
      </div>
    </div>
    <div *ngSwitchCase="'drug-alcohol'">
      <div *ngFor="let test of driverData.driver.tests; trackBy: identity">
        <app-ta-re-card
          [options]="dataTest"
          [cardNameCommon]="test.testType"
          (resizePage)="toggleResizePage($event)"
          [expDateClose]="formatDate(test?.testingDate)"
          [optionsId]="test.id"
          (dropActions)="optionsEv($event,'edit-drug')"
        >
          <div class="cards-container">
            <div class="card-body-cdl">
              <div class="card-restriction-endorsment card-restriction-class">
                <div class="card-restriction">
                  <div class="restriction-name">Reason</div>
                  <div class="restriction-item-value">
                    {{ test?.testReason.reason }}
                  </div>
                </div>
                <div class="card-restriction">
                  <div class="restriction-name">Issued</div>
                  <div class="restriction-item-value">
                    {{ formatDate(test?.testingDate) }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </app-ta-re-card>
      </div>
    </div>
    <div *ngSwitchCase="'medical'">
      <div *ngFor="let med of driverData.driver.medicals; trackBy: identity">
        <app-ta-re-card
          [options]="dataTest"
          [cardNameCommon]="formatDate(med?.issueDate)"
          [expDateClose]="formatDate(med?.expDate)"
          [optionsId]="med.id"
          (dropActions)="optionsEv($event,'edit-medical')"
        >
          <div class="cards-container">
            <div class="card-body-cdl">
              <div class="card-row-progress">
                <div class="card-details-progress-container">
                  <app-truckassist-progress-expiration
                    [expireDate]="formatDate(med?.expDate)"
                    [startDate]="formatDate(med?.issueDate)"
                    [expiresSettings]="'details'"
                  >
                  </app-truckassist-progress-expiration>
                </div>
              </div>
            </div>
          </div>
        </app-ta-re-card>
      </div>
    </div>
    <div *ngSwitchCase="'mvr'">
      <div *ngFor="let mvr of driverData.driver.mvrs; trackBy: identity">
        <app-ta-re-card
          [options]="dataTest"
          [cardDocumentCounter]="6"
          (resizePage)="toggleResizePage($event)"
          [cardNameCommon]="formatDate(mvr?.issueDate)"
          [expDateClose]="formatDate(mvr?.issueDate)"
          [optionsId]="mvr.id"
          (dropActions)="optionsEv($event,'edit-mvr')"
        >
          <div class="cards-container">
            <div class="card-body-cdl">
              <div
                class="card-row-progress"
                [ngClass]="{ 'second-progress': toggler }"
              >
                <div class="card-details-progress-container">
                  <app-truckassist-progress-expiration
                    [startDate]="formatDate(mvr?.issueDate)"
                    [expiresSettings]="'details'"
                  >
                  </app-truckassist-progress-expiration>
                </div>
              </div>
            </div>
            <div *ngIf="toggler" class="divider"></div>
            <div *ngIf="toggler" class="details-document-container">
              <div class="icon-counter-wrapper">
                <div class="counter-text-wrapper">
                  <app-ta-counter
                    [countBackgroud]="'#F3F3F3'"
                    [countHeight]="'24px'"
                    [countWidth]="'24px'"
                    [count]="6"
                  >
                  </app-ta-counter>
                  <p class="details-document-name">Document</p>
                </div>
                <svg-icon
                  (click)="onFileAction('download')"
                  src="assets/svg/common/ic_download.svg"
                >
                </svg-icon>
              </div>
            </div>
            <div *ngIf="toggler" class="card-pdf">
              <app-ta-files
                [files]="[
                  {
                    fileName: 'truckassist0',
                    url: 'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf',
                    extension: 'pdf'
                  },
                  {
                    fileName: 'truckassist0',
                    url: 'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf',
                    extension: 'pdf'
                  },
                  {
                    fileName: 'truckassist0',
                    url: 'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf',
                    extension: 'pdf'
                  },
                  {
                    fileName: 'truckassist0',
                    url: 'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf',
                    extension: 'pdf'
                  }
                ]"
                [fileType]="'multiple-pdf'"
                [customClassName]="'driver-details-multiple-pdf'"
              >
              </app-ta-files>
            </div>
            <div *ngIf="toggler" class="divider"></div>
            <div *ngIf="toggler" class="card-note">
              <app-ta-input-note
                [formControl]="cdlNote"
                [isVisibleDivider]="false"
                [isVisibleNote]="true"
                [isVisibleSecondDivider]="false"
                [isVisibleArrow]="false"
                [minRows]="1"
                [placeholder]="'Write something.'"
                [customClass]="'note-small'"
              >
              </app-ta-input-note>
            </div>
          </div>
        </app-ta-re-card>
      </div>
    </div>
  </div>
</div>
