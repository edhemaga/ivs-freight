<div class="main_inside" [class.filled]="truck">
    <div
        class="padding-inside"
        [ngClass]="{
            'd-flex justify-content-center align-items-center': !isNoteExpanded,
            'hovering-note': isHoveringRowIndex === rowIndex,
            'hovering-note-content':
                isHoveringRowIndex === rowIndex &&
                truck &&
                !_note &&
                isNoteExpanded &&
                isUnlockable,
            'note-default': !truck || !isUnlockable,
            'pe-none': !isUnlockable
        }"
    >
        <div
            class="dispatcher-table-cell-container note-container"
            [class.empty-box-field]="!_note"
            [class.expanded]="isNoteExpanded"
        >
            <ng-container
                *ngIf="
                    (isNoteExpanded && truck) ||
                    (!isNoteExpanded && truck && _note) ||
                    (truck && !_note && isHoveringRowIndex === rowIndex) ||
                    noteOpened
                "
            >
                <app-ta-note
                    [note]="_note"
                    [openedAll]="isNoteExpanded"
                    [dispatchIndex]="rowIndex"
                    [parking]="false"
                    [noteWidth]="250"
                    [parentWidth]="'.note-field'"
                    [type]="'dark'"
                    [isDispatch]="true"
                    [entityType]="'Dispatch'"
                    [entityId]="dispatchId"
                    [dispatchNoteEmpty]="
                        truck && !_note && isHoveringRowIndex === rowIndex
                    "
                    [noteDimension]="_noteWidth"
                    (saveNoteValue)="saveNote($event)"
                    (noteToggleEmitter)="toggleNote($event)"
                >
                </app-ta-note>
            </ng-container>
        </div>
    </div>
</div>
