<div
    class="main_inside truck-trailer-container"
    [class.filled]="truck"
    [ngStyle]="{ background: !truck && !isBoardLocked ? '#fff' : '' }"
>
    <ng-container *ngIf="openedTruckDropdown !== rowIndex; else dropdown">
        <!-- Not Selected -->

        <ng-container
            *ngIf="!truck && !isBoardLocked; else selectedTruckTrailer"
        >
            <app-dispatch-table-add-new> </app-dispatch-table-add-new>
        </ng-container>

        <!-- Selected -->

        <ng-template #selectedTruckTrailer>
            <ng-container *ngIf="truck">
                <div class="padding-inside">
                    <div
                        class="d-flex align-items-center justify-content-between selected-container"
                        ngbTooltip
                        position="bottom"
                        [mainTooltip]="
                            isCircleIconHovering ? truck.truckType.name : ''
                        "
                        [tooltipBackground]="
                            isCircleIconHovering
                                ? (truck.truckType.id
                                  | colorFinder : 'truck' : true)
                                : 'transparent'
                        "
                        [ngStyle]="{
                            padding: isBoardLocked
                                ? '2px 0 1px 6px'
                                : '0 0 0 6px'
                        }"
                    >
                        <div class="d-flex align-items-center">
                            <!-- Circle Icon -->

                            <svg-icon
                                class="circle-icon"
                                [ngClass]="
                                    truck.truckType.id | colorFinder : 'truck'
                                "
                                [src]="dispatchTableSvgRoutes.circleSvgRoute"
                                [svgStyle]="{
                                    'width.px': '10',
                                    'height.px': '10'
                                }"
                                (mouseenter)="isCircleIconHovering = true"
                                (mouseleave)="isCircleIconHovering = false"
                            ></svg-icon>

                            <!-- Truck - Trailer Icon -->

                            <ng-container
                                *ngIf="
                                    isCircleIconHovering;
                                    else notHoveringCircleIcon
                                "
                            >
                                <svg-icon
                                    class="truck-trailer-icon"
                                    [ngClass]="
                                        truck.truckType.id
                                            | colorFinder : 'truck'
                                    "
                                    [svgStyle]="{
                                        'height.px': '18'
                                    }"
                                    [src]="truck.truckType.logoName"
                                ></svg-icon>
                            </ng-container>

                            <!-- Text -->

                            <ng-template #notHoveringCircleIcon>
                                <p class="m-0 ta-font-bold">
                                    {{ truck.truckNumber }}
                                </p>

                                <span>
                                    {{
                                        !!truck.year
                                            ? '(' + truck.year + ')'
                                            : ''
                                    }}
                                </span>
                            </ng-template>
                        </div>

                        <!-- Remove Icon -->

                        <ng-container *ngIf="!isBoardLocked && !isDrag">
                            <div
                                class="d-flex justify-content-center align-items-center remove-icon-container"
                                [ngClass]="{ disabled: isActiveLoad }"
                                ngbTooltip
                                [mainTooltip]="
                                    isActiveLoad ? 'Active Load' : 'Remove'
                                "
                                [tooltipBackground]="
                                    isActiveLoad ? '#424242' : '#DF3C3C'
                                "
                                tooltipMarginTop="5px"
                                position="bottom"
                                (click)="removeTruck(rowIndex)"
                            >
                                <svg-icon
                                    class="icon"
                                    [src]="dispatchTableSvgRoutes.closeSvgRoute"
                                ></svg-icon>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </ng-container>
        </ng-template>
    </ng-container>

    <!-- Dropdown -->

    <ng-template #dropdown>
        <app-ta-input-dropdown
            [formControl]="truckFormControll"
            [template]="'svgtext-dispatch-template'"
            [inputConfig]="{
                name: 'Input Dropdown',
                type: 'text',
                label: 'Unit No.',
                placeholder: 'Unit No.',
                isDropdown: true,
                dropdownWidthClass: 'w-col-118',
                placeholderInsteadOfLabel: true,
                hideDropdownArrow: true,
                autoFocus: true,
                blackInput: true,
                hideRequiredCheck: true,
                hideDangerMark: true,
                hideErrorMessage: true,
                mergeDropdownBodyWithInput: true
            }"
            [options]="truckList"
            [canAddNew]="true"
            [canOpenModal]="true"
            [activeItem]="null"
            (selectedItem)="addTruck($event)"
        ></app-ta-input-dropdown>
    </ng-template>
</div>
