<app-ta-modal
    [modalTitle]="editData?.header"
    [editData]="editData"
    [editName]="
        editData?.action?.includes('unit-pm') ? editData?.data?.textUnit : null
    "
    [disableDelete]="true"
    [isModalValid]="isFormDirty && isFormValid"
    (action)="onModalAction($event)"
>
    <form
        origin
        [formGroup]="PMform"
        class="form-container form-container-without-mb"
    >
        <app-ta-custom-card
            [hasCounter]="activePMs()"
            [hasDivider]="false"
            [cardName]="'Selected'"
            [hasActionSvg]="
                editData?.action?.includes('unit-pm')
                    ? null
                    : 'assets/svg/common/ic_plus.svg'
            "
            [hasArrow]="false"
            [isCardOpen]="newPMs.length > 0"
            [hasScrollBody]="newPMs.length > 18"
            [disabledCard]="!newPMs.length"
            [disableAnimation]="disableCardAnimation"
            (onActionEvent)="addPMs()"
        >
            <app-ta-modal-table
                [tableType]="
                    !!editData?.data?.truck
                        ? modalTableTypeEnum.PM_TRUCK
                        : modalTableTypeEnum.PM_TRAILER
                "
                [isEdit]="editData?.type === 'edit'"
                [isNewRowCreated]="isPmRowCreated"
                [modalTableData]="pmTableData"
                (modalTableValueEmitter)="handleModalTableValueEmit($event)"
                (modalTableValidStatusEmitter)="
                    handleModalTableValidStatusEmit($event)
                "
            ></app-ta-modal-table>
        </app-ta-custom-card>
    </form>
</app-ta-modal>
