<ng-container *ngIf="load">
    <div class="cards-item-wrapper-1 load-details-card">
        <!-- Details Title Card -->

        <app-load-details-title-card
            [loadCurrentIndex]="loadCurrentIndex"
            [loadsDropdownList]="loadsDropdownList"
            [cardData]="{
                loadNumber: load?.loadNumber,
                referenceNumber: load?.referenceNumber
            }"
            (cardValuesEmitter)="handleDriverDetailsTitleCardEmit($event)"
        ></app-load-details-title-card>

        <div class="wrapper-additional-cards">
            <div class="details-cards">
                <!-- Broker Details -->
                <app-ta-custom-card
                    [cardName]="'Broker Details'"
                    [hasDivider]="false"
                    [isCardOpen]="true"
                    [bodyTemplate]="'card'"
                    [animationsDisabled]="false"
                    [animationMarginParams]="{
                        marginTop: '0px',
                        marginBottom: '0px'
                    }"
                    class="first-custom-card"
                    [customClass]="'detailsPadding'"
                >
                    <div class="load-broker-container">
                        <div class="company-name">
                            {{ load?.broker?.businessName }}
                        </div>
                        <div
                            class="broker-name"
                            *ngIf="load?.brokerContact?.contactName"
                        >
                            {{ load?.brokerContact?.contactName }}
                        </div>
                        <div
                            class="phone-ext-wrapper"
                            *ngIf="load?.brokerContact?.phone"
                        >
                            <div
                                class="phone-ext-item-wrapper"
                                *ngIf="load?.brokerContact?.phone"
                            >
                                <svg-icon
                                    src="assets/svg/common/ic_phone.svg"
                                ></svg-icon>
                                <span class="item-value">
                                    {{ load?.brokerContact?.phone }}</span
                                >
                            </div>
                            <div
                                class="phone-ext-item-wrapper"
                                *ngIf="load?.brokerContact?.extensionPhone"
                            >
                                <svg-icon
                                    src="assets/svg/common/ic_phone-extension.svg"
                                ></svg-icon>
                                <span class="item-value">
                                    {{
                                        load?.brokerContact?.extensionPhone
                                    }}</span
                                >
                            </div>
                        </div>
                        <div
                            class="phone-ext-item-wrapper phone-ext-item-wrapper-last"
                            *ngIf="load?.brokerContact?.email"
                        >
                            <svg-icon
                                src="assets/svg/common/ic_email.svg"
                            ></svg-icon>
                            <span class="item-value email-broker-load">{{
                                load?.brokerContact?.email
                            }}</span>
                        </div>
                    </div>
                </app-ta-custom-card>

                <!-- AssignedTo -->
                <app-ta-custom-card
                    [cardName]="'Assigned To'"
                    [hasDivider]="true"
                    [isCardOpen]="true"
                    [bodyTemplate]="'card'"
                    [animationsDisabled]="false"
                    [customClass]="'detailsPadding'"
                >
                    <div class="load-assigned-container">
                        <div class="assigned-driver">
                            <div class="driver-info">
                                <img
                                    [src]="
                                        load?.dispatch?.driver?.avatar
                                            ? imageBase64Service.sanitizer(
                                                  load?.dispatch?.driver?.avatar
                                              )
                                            : 'assets/svg/truckassist-table/customer/contact-column-avatar-select-row.svg'
                                    "
                                    class="driver-avatar"
                                    alt=""
                                />
                                <span
                                    class="driver-name"
                                    *ngIf="load?.dispatch?.driver"
                                    >{{
                                        load?.dispatch?.driver?.firstName +
                                            ' ' +
                                            load?.dispatch?.driver?.lastName
                                    }}</span
                                >
                            </div>
                        </div>
                        <div class="flex-load">
                            <div class="assigned-driver truck">
                                <div class="driver-info">
                                    <svg-icon
                                        class="flex-load"
                                        src="assets/svg/common/trucks/ic_truck_car-hauler.svg"
                                        [src]="
                                            'assets/svg/common/trucks/' +
                                            load.dispatch?.truck?.truckType
                                                .logoName
                                        "
                                    ></svg-icon>
                                    <span class="driver-name">{{
                                        load?.dispatch?.truck?.truckNumber
                                    }}</span>
                                </div>
                            </div>
                            <div class="assigned-driver trailer">
                                <div class="driver-info">
                                    <svg-icon
                                        class="flex-load"
                                        [src]="
                                            'assets/svg/common/trailers/' +
                                            load.dispatch?.trailer?.trailerType
                                                .logoName
                                        "
                                        src="assets/svg/common/trailers/ic_trailer_conestoga.svg"
                                    ></svg-icon>
                                    <span class="driver-name">{{
                                        load?.dispatch?.trailer?.trailerNumber
                                    }}</span>
                                </div>
                            </div>
                        </div>
                        <div
                            class="assigned-driver phone-ext-item-wrapper-last"
                        >
                            <div class="driver-info">
                                <span class="driver-name">{{
                                    load?.company?.companyName
                                }}</span>
                            </div>
                        </div>
                    </div>
                </app-ta-custom-card>

                <!-- Status -->
                <app-ta-custom-card
                    [cardName]="'Status History'"
                    [hasDivider]="true"
                    [isCardOpen]="false"
                    [bodyTemplate]="'card'"
                    [animationsDisabled]="false"
                    [customClass]="'detailsPadding'"
                >
                </app-ta-custom-card>

                <!-- Load Details -->
                <app-ta-custom-card
                    [cardName]="'Load Details & Requirements'"
                    [hasDivider]="true"
                    [isCardOpen]="true"
                    [bodyTemplate]="'card'"
                    [animationsDisabled]="false"
                    [animationMarginParams]="{
                        marginTop: '0px',
                        marginBottom: '0px'
                    }"
                    [customClass]="'detailsPadding'"
                >
                    <div class="load-details-container">
                        <div class="load-details-wrapper">
                            <div class="load-details-item">
                                <div
                                    class="load-details-header"
                                    *ngIf="load?.generalCommodity?.name"
                                >
                                    General Commodity
                                </div>
                                <div class="load-details-value">
                                    {{ load?.generalCommodity?.name }}
                                </div>
                            </div>
                            <div class="load-details-item" *ngIf="load?.weight">
                                <div class="load-details-header">Weight</div>
                                <div class="load-details-value">
                                    {{ load?.weight }} ibs
                                </div>
                            </div>
                            <div
                                class="load-details-item"
                                *ngIf="load?.loadRequirements?.truckType?.name"
                            >
                                <div class="load-details-header">
                                    Truck req.
                                </div>
                                <div class="load-details-value">
                                    {{
                                        load?.loadRequirements?.truckType?.name
                                    }}
                                </div>
                            </div>
                            <div
                                class="load-details-item"
                                *ngIf="
                                    load?.loadRequirements?.trailerType?.name
                                "
                            >
                                <div class="load-details-header">
                                    Trailer req.
                                </div>
                                <div class="load-details-value">
                                    {{
                                        load?.loadRequirements?.trailerType
                                            ?.name
                                    }}
                                </div>
                            </div>
                            <div
                                class="load-details-item"
                                *ngIf="load?.loadRequirements?.doorType?.name"
                            >
                                <div class="load-details-header">Door type</div>
                                <div class="load-details-value">
                                    {{ load?.loadRequirements?.doorType?.name }}
                                </div>
                            </div>
                            <div
                                class="load-details-item"
                                *ngIf="load?.loadRequirements?.suspension?.name"
                            >
                                <div class="load-details-header">
                                    Suspension
                                </div>
                                <div class="load-details-value">
                                    {{
                                        load?.loadRequirements?.suspension?.name
                                    }}
                                </div>
                            </div>
                            <div
                                class="load-details-item"
                                *ngIf="
                                    load?.loadRequirements?.trailerLength?.name
                                "
                            >
                                <div class="load-details-header">Length</div>
                                <div class="load-details-value">
                                    {{
                                        load?.loadRequirements?.trailerLength
                                            ?.name
                                    }}
                                </div>
                            </div>
                            <div
                                class="load-details-item"
                                *ngIf="load?.loadRequirements?.year"
                            >
                                <div class="load-details-header">Year</div>
                                <div class="load-details-value">
                                    {{ load?.loadRequirements?.year }}
                                </div>
                            </div>
                            <div
                                class="load-details-item"
                                *ngIf="load?.loadRequirements?.liftgate"
                            >
                                <div class="load-details-header">Liftgate</div>
                                <div class="load-details-value">
                                    {{
                                        load?.loadRequirements?.liftgate
                                            ? 'Yes'
                                            : 'No'
                                    }}
                                </div>
                            </div>
                        </div>
                    </div>
                </app-ta-custom-card>
                <!-- Load Details -->
                <app-ta-custom-card
                    *ngIf="load?.files.length"
                    [cardName]="'Document'"
                    [hasDivider]="true"
                    [isCardOpen]="false"
                    [hasCounter]="load.files?.length"
                    [bodyTemplate]="'card'"
                    [animationsDisabled]="false"
                    [customClass]="'detailsPadding'"
                >
                    <div
                        class="card_files_holder"
                        [class.active]="load.files?.length > 1"
                    >
                        <app-ta-upload-files
                            [files]="load?.files"
                            [customClassName]="'driver-card-pdf'"
                            [hasCarouselBottomTabs]="true"
                            [type]="'details'"
                            [slideWidth]="428"
                            [reviewMode]="'REVIEW_MODE'"
                        ></app-ta-upload-files>
                    </div>
                </app-ta-custom-card>
                <div class="divider"></div>
                <div class="details-page-row-5">
                    <div class="note-item">
                        <app-ta-input-note
                            [formControl]="loadNote"
                            [isVisibleDivider]="false"
                            [isVisibleNote]="true"
                            [isVisibleArrow]="true"
                            [minRows]="1"
                            [isVisibleSecondDivider]="false"
                            [placeholder]="'Write something.'"
                            [customClass]="'note-small'"
                            [noteType]="'details-card'"
                            [blankNote]="load?.note ? false : true"
                            [note]="
                                load.note && load.note != 'null'
                                    ? load.note
                                    : ''
                            "
                            [entityId]="load.id"
                            [entityType]="'Load'"
                        >
                        </app-ta-input-note>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-container>
