<div class="table-container">
    @if (
        {
            tableOptions: loadStoreService.tableOptions$ | async,
            tableData: loadStoreService.tableData$ | async,
            columns: loadStoreService.columns$ | async,
            viewData: loadStoreService.viewData$ | async,
            activeTableData: loadStoreService.activeTableData$ | async,
            activeViewMode: loadStoreService.activeViewMode$ | async,
        };
        as store
    ) {
        <app-ta-table-toolbar
            #toolbarComponent
            (toolBarAction)="onToolBarAction($event)"
            [options]="store?.tableOptions"
            [tableData]="store?.tableData"
            [selectedTab]="selectedTab | lowercase"
            [columns]="store?.columns"
            [activeViewMode]="store?.activeViewMode"
            listName="Load"
        ></app-ta-table-toolbar>

        @if (store?.activeViewMode === 'List') {
            <app-ta-table-head
                [options]="store?.tableOptions"
                [viewData]="store?.viewData"
                [columns]="store?.columns"
                [tableData]="store?.tableData"
                (headActions)="onTableHeadActions($event)"
            ></app-ta-table-head>

            <app-ta-table-body
                [viewData]="store?.viewData"
                [columns]="store?.columns"
                [options]="store?.tableOptions"
                [selectedTab]="selectedTab | lowercase"
                (tableBodyActions)="
                    handleDropdownMenuActions(
                        $event,
                        dropdownMenuStringEnum.LOAD,
                        selectedTab
                    )
                "
                [tableData]="store?.tableData"
                (saveValueNote)="saveValueNote($event)"
            ></app-ta-table-body>
        }
        <!-- Cards -->

        @if (store?.activeViewMode === 'Card') {
            <div class="elements">
                <app-load-card
                    [viewData]="store?.viewData"
                    [selectedTab]="selectedTab"
                    [displayRowsFront]="
                        (displayRows$ | async)?.displayRowsFront
                    "
                    [displayRowsBack]="(displayRows$ | async)?.displayRowsBack"
                    (saveValueNote)="saveValueNote($event)"
                    (bodyActions)="onTableBodyActions($event)"
                ></app-load-card>

                <!-- Show More -->

                <div
                    class="show-more-container d-flex align-items-center justify-content-between"
                    [ngStyle]="{ 'width.px': tableWidth }"
                >
                    <div class="showing ta-font-semi-bold">
                        {{ store?.viewData?.length }} OF
                        {{ store?.activeTableData?.data?.length }}
                    </div>

                    @if (
                        store?.viewData?.length <
                        store?.activeTableData?.data?.length
                    ) {
                        <div
                            class="show-more ta-font-bold w-fit-content align-items-center d-flex justify-content-between"
                            (click)="handleShowMoreAction()"
                        >
                            SHOW MORE
                        </div>
                    }
                </div>
            </div>
        }
    }
</div>
