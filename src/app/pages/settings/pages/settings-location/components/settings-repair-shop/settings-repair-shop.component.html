<div class="settings-repair-shop">
    <div class="settings-header">
        <div class="settings-name d-flex align-items-center">
            <app-ta-counter
                [count]="repairShopData?.count"
                [countColor]="'#919191'"
                [countBackground]="'#F3F3F3'"
                [countHeight]="'24px'"
                [countWidth]="'24px'"
            ></app-ta-counter>
            <p>Repair Shop</p>
        </div>

        <div class="settings-header-button">
            <div class="border-left"></div>
            <svg-icon
                src="assets/svg/common/ic_plus.svg"
                class="settings-plus-button"
                (click)="onAction({ modalName: 'repairshop' })"
            ></svg-icon>
        </div>
    </div>
    <div class="settings-body">
        <app-ta-common-card
            *ngFor="
                let item of repairShopData?.data;
                let i = index;
                trackBy: identity
            "
            [cardNameCommon]="item.name"
            [settingsIcon]="item.companyOwned ? 'ic_company.svg' : ''"
            [hasFooter]="false"
            [haveHeaderText]="true"
            [options]="repairsActions"
            [optionsId]="item.id"
            (dropActions)="repairDropActions($event, 'repair-shop')"
            [paddingDots]="'8px 0px 0px 0px'"
        >
            <div class="settings-body-items">
                <div *ngIf="item.phone" class="single-item">
                    <svg-icon
                        class="company-icons"
                        src="assets/svg/common/ic_phone.svg"
                    ></svg-icon>
                    <app-ta-copy
                        [copyValue]="item?.phone"
                        [textColor]="'#2f2f2f'"
                    >
                    </app-ta-copy>
                </div>
                <div *ngIf="item.email" class="single-item">
                    <svg-icon
                        class="company-icons"
                        src="assets/svg/common/ic_email.svg"
                    ></svg-icon>
                    <app-ta-copy
                        [copyValue]="item?.email"
                        [textColor]="'#2f2f2f'"
                    >
                    </app-ta-copy>
                </div>
                <div *ngIf="item.address.address" class="single-item">
                    <svg-icon
                        class="company-icons"
                        src="assets/svg/truckassist-table/location-icon.svg"
                    ></svg-icon>
                    <span>{{ item.address.address }}</span>
                </div>
            </div>
            <app-ta-custom-card
                [hasCounter]="getActiveServices(item).length"
                [cardName]="'Services'"
                [isCardOpen]="true"
                [bodyTemplate]="'card'"
                [customClass]="'detailsPadding'"
            >
                <div
                    class="repair-shop-template-data"
                    [ngClass]="{ 'no-divider': !item.rent }"
                >
                    <div
                        class="repair-shop-template-item"
                        *ngFor="let ser of item.serviceTypes; trackBy: identity"
                    >
                        <svg-icon
                            class="repair-shop-template-svg"
                            [ngClass]="{ disabled: !ser.active }"
                            src="assets/svg/common/repair-services/{{
                                ser.logoName
                            }}"
                        ></svg-icon>
                        <p
                            class="repair-shop-template-text"
                            [ngClass]="{ 'cross-out': !ser.active }"
                        >
                            {{ ser.serviceType.name }}
                        </p>
                    </div>
                </div>
            </app-ta-custom-card>
            <div *ngIf="item.rent" class="divider"></div>
            <div *ngIf="item.rent" class="settings-progress-container">
                <app-ta-truckassist-progress-expiration
                    *ngIf="item.rent"
                    [expireDate]="'03/25/2023'"
                    [startDate]="'03/12/2021'"
                    [expiresSettings]="'settings-parking'"
                    [customText]="generateTextForProgressBar(item)"
                    [darkText]="true"
                ></app-ta-truckassist-progress-expiration>
            </div>
        </app-ta-common-card>
    </div>
</div>
