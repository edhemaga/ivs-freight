<app-ta-modal
    [modalTitle]="editData?.type !== 'edit' ? 'Add Parking' : 'Edit Parking'"
    [editData]="editData"
    [editName]="parkingName"
    [isModalValid]="parkingForm.valid && isFormDirty"
    [saveAndAddNew]="editData?.type !== 'edit'"
    (action)="onModalAction($event)"
>
    <div origin>
        <form
            [formGroup]="parkingForm"
            class="form-container form-container-mt-22"
            [ngClass]="{
                'form-container-without-mb': !isParkingCardOpen,
                'form-container-with-card': isParkingCardOpen
            }"
        >
            <div class="animation-two-tabs">
                <div class="m-tab">
                    <div class="row">
                        <div class="col-12">
                            <app-ta-input
                                formControlName="name"
                                [inputConfig]="{
                                    name: 'Parking Name',
                                    type: 'text',
                                    label: 'Parking Name',
                                    isRequired: true,
                                    autoFocus: editData?.type !== 'edit',
                                    textTransform: 'uppercase',
                                    minLength: 1,
                                    maxLength: 64
                                }"
                            ></app-ta-input>
                        </div>
                    </div>

                    <div
                        class="phone-ext-email-small-modal"
                        [ngClass]="{
                            'active-phone-ext': isPhoneExtExist
                        }"
                    >
                        <div class="phone-extension">
                            <div class="phone-field">
                                <app-ta-input
                                    formControlName="phone"
                                    [inputConfig]="{
                                        name: 'Phone',
                                        type: 'text',
                                        label: 'Phone',
                                        placeholderIcon: 'phone',
                                        mask: '(000) 000-0000',
                                        maxLength: 14
                                    }"
                                ></app-ta-input>
                            </div>
                            <div
                                class="extension-field"
                                *ngIf="!isPhoneExtExist"
                                (click)="isPhoneExtExist = !isPhoneExtExist"
                                ngbTooltip
                                mainTooltip="Add Extension"
                                position="top"
                                tooltipBackground="#6c6c6c"
                            >
                                <svg-icon
                                    src="assets/svg/common/ic_plus.svg"
                                ></svg-icon>
                            </div>
                            <app-ta-input
                                *ngIf="isPhoneExtExist"
                                formControlName="extensionPhone"
                                [inputConfig]="{
                                    name: 'phone-extension',
                                    type: 'text',
                                    label: 'Ext.',
                                    minLength: 1,
                                    maxLength: 8,
                                    placeholderIcon: 'phone-extension'
                                }"
                            ></app-ta-input>
                        </div>
                        <div class="email-field">
                            <app-ta-input
                                formControlName="email"
                                [inputConfig]="{
                                    name: 'Email',
                                    type: 'text',
                                    label: 'Email',
                                    placeholderIcon: 'email',
                                    minLength: 5,
                                    maxLength: 64,
                                    textTransform: 'lowercase'
                                }"
                            ></app-ta-input>
                        </div>
                    </div>

                    <div class="row row-address">
                        <div class="col-10">
                            <app-ta-input-address-dropdown
                                formControlName="address"
                                [inputConfig]="{
                                    name: 'Address',
                                    type: 'text',
                                    label: 'Address, City, State Zip',
                                    isRequired: true,
                                    placeholderIcon: 'address',
                                    textTransform: 'capitalize',
                                    dropdownWidthClass: 'w-col-376',
                                    minLength: 6,
                                    maxLength: 256
                                }"
                                [placeholderType]="'longAddress'"
                                [activeAddress]="selectedAddress"
                                (selectedAddress)="onHandleAddress($event)"
                            ></app-ta-input-address-dropdown>
                        </div>
                        <div class="col-2">
                            <app-ta-input
                                formControlName="addressUnit"
                                [inputConfig]="{
                                    name: 'address-unit',
                                    type: 'text',
                                    label: 'Unit #',
                                    textTransform: 'uppercase',
                                    minLength: 1,
                                    maxLength: 10
                                }"
                            ></app-ta-input>
                        </div>
                    </div>

                    <div class="mt-3 mb-3">
                        <div class="parking-gate-securityCamera">
                            <div class="gate-field">
                                <p
                                    class="m-0 text-color-black-2 text-size-14 ta-font-medium"
                                >
                                    Gate
                                </p>
                                <div class="gate-radio">
                                    <app-ta-tab-switch
                                        [tabs]="gateBtns"
                                        (switchClicked)="
                                            tabChange($event, 'gate')
                                        "
                                        [type]="'type2-modal-popup'"
                                    >
                                    </app-ta-tab-switch>
                                </div>
                            </div>
                            <div class="camera-field">
                                <p
                                    class="m-0 text-color-black-2 text-size-14 ta-font-medium"
                                >
                                    Security Camera
                                </p>
                                <div class="camera-radio">
                                    <app-ta-tab-switch
                                        [tabs]="cameraBtns"
                                        (switchClicked)="
                                            tabChange($event, 'camera')
                                        "
                                        [type]="'type2-modal-popup'"
                                    >
                                    </app-ta-tab-switch>
                                </div>
                            </div>
                        </div>
                    </div>

                    <app-ta-checkbox-card
                        formControlName="isOwner"
                        [label]="'Company Owned'"
                        [name]="'company-owned'"
                        [hasArrow]="false"
                        [withoutToggle]="true"
                        [animationMarginParams]="{
                            marginTop: '0',
                            marginBottom: '0'
                        }"
                        [isCardOpen]="!parkingForm.get('isOwner').value"
                    >
                        <ng-container body>
                            <div class="mt-3 mb-3">
                                <div class="location-parking-financial-card">
                                    <app-ta-input-dropdown
                                        formControlName="payPeriod"
                                        [inputConfig]="{
                                            name: 'Input Dropdown',
                                            type: 'text',
                                            label: 'Pay Period',
                                            isDropdown: true,
                                            dropdownWidthClass: 'w-col-144'
                                        }"
                                        [options]="payPeriods"
                                        [activeItem]="selectedPayPeriod"
                                        (selectedItem)="
                                            onSelectDropdown(
                                                $event,
                                                'pay-period'
                                            )
                                        "
                                    ></app-ta-input-dropdown>
                                    <app-ta-input-dropdown
                                        formControlName="monthlyDay"
                                        [inputConfig]="{
                                            name: 'Input Dropdown',
                                            type: 'text',
                                            label: 'Day',
                                            isDropdown: true,
                                            isDisabled:
                                                !parkingForm.get('payPeriod')
                                                    .value,
                                            dropdownWidthClass: 'w-col-144'
                                        }"
                                        [options]="
                                            selectedDay?.name === 'Weekly'
                                                ? weeklyDays
                                                : monthlyDays
                                        "
                                        [activeItem]="selectedDay"
                                        (selectedItem)="
                                            onSelectDropdown($event, 'day')
                                        "
                                    ></app-ta-input-dropdown>
                                    
                                    <app-ta-input
                                        formControlName="rent"
                                        [inputConfig]="{
                                            name: 'Rent',
                                            type: 'text',
                                            label: 'Rent',
                                            placeholderIcon: 'dollar',
                                            thousandSeparator: true,
                                            minLength: 4,
                                            maxLength: 8
                                        }"
                                    ></app-ta-input>
                                </div>
                            </div>
                        </ng-container>
                    </app-ta-checkbox-card>

                    <!-- Parking Slot -->
                    <app-ta-custom-card
                        [hasCounter]="
                            (parkingSlots | sumArrays) === 0
                                ? 0
                                : (parkingSlots | sumArrays)
                        "
                        [hasArrow]="false"
                        subText="Use Comma (,) to separate and Hyphen (-) for range"
                        [cardName]="'Parking Slot'"
                        [isCardOpen]="true"
                        [disableAnimation]="disableCardAnimation"
                        [animationMarginParams]="{
                            marginTop: '18px',
                            marginBottom: '12px'
                        }"
                        (onOpenCard)="isParkingCardOpen = $event"
                    >
                        <div class="checkbox-card-body">
                            <div class="row">
                                <div class="col-12">
                                    <app-ta-input
                                        formControlName="parkingSlot"
                                        [inputConfig]="{
                                            name: 'Parking Slot',
                                            type: 'text',
                                            label: 'Parking Slot No. (Truck)',
                                            minLength: 1,
                                            maxLength: 64
                                        }"
                                    ></app-ta-input>
                                </div>
                            </div>
                            <div class="row row-no-mb">
                                <div class="col-12">
                                    <app-ta-input
                                        formControlName="fullParkingSlot"
                                        [inputConfig]="{
                                            name: 'Full Parking Slot',
                                            type: 'text',
                                            label: 'Full Parking Slot No. (Semi Truck - Trailer)',
                                            minLength: 1,
                                            maxLength: 128
                                        }"
                                    ></app-ta-input>
                                </div>
                            </div>
                        </div>
                    </app-ta-custom-card>
                </div>
            </div>
        </form>
    </div>
</app-ta-modal>
