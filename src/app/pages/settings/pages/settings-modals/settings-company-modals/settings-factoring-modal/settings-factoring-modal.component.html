<app-ta-modal
    [modalTitle]="
        editData?.type !== 'edit'
            ? 'New Factoring Company'
            : 'Edit Factoring Company'
    "
    [editData]="editData"
    [editName]="editData?.id"
    [isModalValid]="factoringForm.valid && isFormDirty"
    [isBluredNotice]="isBluredNotice"
    (action)="onModalAction($event)"
>
    <form
        origin
        [formGroup]="factoringForm"
        class="form-container form-container-without-mb"
    >
        <div class="row">
            <div class="col-12">
                <app-ta-input
                    formControlName="name"
                    [inputConfig]="{
                        name: 'name',
                        type: 'text',
                        label: 'Company Name',
                        isRequired: true,
                        textTransform: 'uppercase',
                        autoFocus: editData?.type !== 'edit',
                    }"
                    (blurInput)="onCompanyNameInputBlur()"
                ></app-ta-input>
            </div>
        </div>
        <div class="row">
            <div class="col-5">
                <app-ta-input
                    formControlName="phone"
                    [inputConfig]="{
                        name: 'phone',
                        type: 'text',
                        label: 'Phone',
                        placeholderIcon: 'phone',
                        mask: '(000) 000-0000',
                        maxLength: 14,
                    }"
                ></app-ta-input>
            </div>
            <div class="col-7">
                <app-ta-input
                    formControlName="email"
                    [inputConfig]="{
                        name: 'email',
                        type: 'text',
                        label: 'Email',
                        placeholderIcon: 'email',
                        minLength: 5,
                        maxLength: 64,
                        textTransform: 'lowercase',
                    }"
                ></app-ta-input>
            </div>
        </div>
        <div class="row last-row">
            <div class="col-10">
                <app-ta-input-address-dropdown
                    formControlName="address"
                    [inputConfig]="{
                        name: 'address',
                        type: 'text',
                        label: 'Address, City, State Zip',
                        placeholderIcon: 'address',
                        textTransform: 'capitalize',
                        dropdownWidthClass: 'w-col-376',
                        minLength: 6,
                        maxLength: 256,
                    }"
                    [placeholderType]="'longAddress'"
                    [activeAddress]="selectedAddress"
                    (selectedAddress)="onHandleAddress($event)"
                ></app-ta-input-address-dropdown>
            </div>
            <div class="col-2">
                <app-ta-input
                    formControlName="addressUnit"
                    [inputConfig]="{
                        name: 'addressUnit',
                        type: 'text',
                        label: 'Unit #',
                        textTransform: 'uppercase',
                        minLength: 1,
                        maxLength: 10,
                    }"
                ></app-ta-input>
            </div>
        </div>
        <app-ta-custom-card
            [cardName]="'Notice of Assignment'"
            [disableAnimation]="isCardAnimationDisabled"
            [disabledCard]="
                (factoringForm.get('name')?.invalid ||
                    factoringForm.get('name').value === 'null') &&
                factoringForm.get('noticeOfAssigment').invalid
            "
            [isCardOpen]="
                factoringForm.get('noticeOfAssigment').value &&
                factoringForm.get('noticeOfAssigment').value !== 'null' &&
                !isInitialCompanyNameSet
                    ? true
                    : false
            "
        >
            <div class="wisywygholder">
                <app-ta-notice-of-asignment
                    formControlName="noticeOfAssigment"
                    #noticeOfAssignment
                    [settings]="wysiwigSettings"
                    [sidebarWidth]="1000"
                    (noticeFocus)="onNoticeFocus($event)"
                ></app-ta-notice-of-asignment>
            </div>
        </app-ta-custom-card>
        <app-ta-input-note
            formControlName="note"
            [isVisibleNote]="
                factoringForm.get('note').value &&
                factoringForm.get('note').value !== 'null'
                    ? factoringForm.get('note').value
                    : false
            "
            [note]="
                factoringForm.get('note').value &&
                factoringForm.get('note').value !== 'null'
                    ? factoringForm.get('note').value
                    : ''
            "
        ></app-ta-input-note>
    </form>
</app-ta-modal>
