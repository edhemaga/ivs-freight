<div class="details-component">
    @for (trucks of truck; let indx = $index; track indx) {
        @switch (trucks.template) {
            @case ('general') {
                <app-truck-details-card [truck]="trucks.data">
                </app-truck-details-card>
            }
            @case ('registration') {
                <div class="card-width">
                    @for (reg of trucks?.data; let i = $index; track i) {
                        <app-ta-common-card
                            [cardDocumentCounter]="reg?.files?.length ?? 0"
                            (resizePage)="toggleResizePage(i, 'registration')"
                            [cardNameCommon]="reg.licensePlate"
                            [hasCopyIcon]="false"
                            [options]="dataEdit"
                            [cardNameCurrent]="'truckRegistration'"
                            [noteIcons]="
                                reg.note
                                    ? 'assets/svg/truckassist-table/note/Note.svg'
                                    : 'assets/svg/truckassist-table/note/Note - Empty.svg'
                            "
                            [expDateClose]="reg.expDate | formatDateP"
                            [isCardOpen]="i == 0 && reg.expDate > currentDate"
                            [notExpired]="currentDate > reg.expDate"
                            [openCloseStatus]="i !== 0"
                            [voidedDate]="reg.voidedOn | formatDateP"
                            [isDeactivated]="reg.voidedOn"
                            [optionsId]="reg.id"
                            [danger]="true"
                            (dropActions)="
                                optionsEvent(
                                    $event,
                                    trucks.data,
                                    'registration'
                                )
                            "
                        >
                            <div class="card-container">
                                <div class="card-body-cdl">
                                    <div class="card-row-endor">
                                        <div class="card-item">
                                            <div class="card-item-name">
                                                State
                                            </div>
                                            <div class="card-item-value">
                                                <app-ta-copy
                                                    [copyValue]="
                                                        reg.state.stateShortName
                                                    "
                                                    [textColor]="'#2f2f2f'"
                                                >
                                                </app-ta-copy>
                                            </div>
                                        </div>
                                        <div class="card-item">
                                            <div class="card-item-name">
                                                Issued
                                            </div>
                                            <div class="card-item-value">
                                                <app-ta-copy
                                                    [copyValue]="
                                                        formatDate(
                                                            reg.issueDate
                                                        )
                                                    "
                                                    [textColor]="'#2f2f2f'"
                                                >
                                                </app-ta-copy>
                                            </div>
                                        </div>
                                        @if (reg.voidedOn) {
                                            <div class="card-item">
                                                <div class="card-item-name">
                                                    Voided
                                                </div>
                                                <div class="card-item-value">
                                                    {{
                                                        reg.voidedOn
                                                            | formatDateP
                                                    }}
                                                </div>
                                            </div>
                                        }
                                    </div>
                                    <div
                                        class="card-row-progress second-progress"
                                    >
                                        <div
                                            class="card-details-progress-container"
                                        >
                                            <app-ta-progress-expiration
                                                [expireDate]="
                                                    formatDate(reg.expDate)
                                                "
                                                [startDate]="
                                                    formatDate(reg.issueDate)
                                                "
                                                [expiresSettings]="'details'"
                                                [darkText]="true"
                                            >
                                            </app-ta-progress-expiration>
                                        </div>
                                    </div>
                                    @if (isVoidActive && reg.voidedOn) {
                                        <div
                                            class="void-button"
                                            (click)="
                                                chechVoidStatus(
                                                    reg.id,
                                                    trucks.data,
                                                    'registration'
                                                )
                                            "
                                        >
                                            <p class="ta-font-bold">Activate</p>
                                        </div>
                                    }
                                </div>

                                <div
                                    [@showHideCardBody]="
                                        toggler[i + 'registration']
                                            ? 'true'
                                            : 'false'
                                    "
                                >
                                    @let fileCount = reg?.files?.length;
                                    @if (fileCount) {
                                        <div class="divider"></div>
                                        <div
                                            class="details-document-container"
                                            [class.disabled]="!fileCount"
                                        >
                                            <div class="icon-counter-wrapper">
                                                <div
                                                    class="counter-text-wrapper"
                                                    [class.disabled]="
                                                        !fileCount
                                                    "
                                                >
                                                    <p
                                                        class="details-document-name"
                                                    >
                                                        Document
                                                    </p>
                                                    <app-ta-counter
                                                        [countBackground]="
                                                            '#424242'
                                                        "
                                                        [customClass]="
                                                            'circle_counter'
                                                        "
                                                        [countHeight]="'22px'"
                                                        [countWidth]="'22px'"
                                                        [count]="fileCount ?? 0"
                                                    >
                                                    </app-ta-counter>
                                                </div>
                                                <svg-icon
                                                    (click)="
                                                        downloadAllFiles(
                                                            'registration',
                                                            i
                                                        )
                                                    "
                                                    src="assets/svg/common/ic_download.svg"
                                                >
                                                </svg-icon>
                                            </div>
                                        </div>
                                    }
                                    <div
                                        class="card-pdf"
                                        [class.disabled]="!fileCount"
                                        [class.extended]="fileCount > 1"
                                    >
                                        <app-ta-upload-files
                                            #registrationUpload
                                            [files]="reg.files ?? []"
                                            [customClassName]="
                                                'driver-details-pdf'
                                            "
                                            [hasCarouselBottomTabs]="true"
                                            [type]="'details'"
                                            [slideWidth]="324"
                                        ></app-ta-upload-files>
                                    </div>
                                    <div class="divider"></div>
                                    <div class="note-wrapper">
                                        <app-ta-input-note
                                            [formControl]="registrationNote"
                                            [isVisibleDivider]="false"
                                            [placeholder]="'Write something.'"
                                            [customClass]="'note-small'"
                                            [isVisibleArrow]="false"
                                            [minRows]="1"
                                            [isVisibleNote]="true"
                                            [noteType]="'details-card'"
                                            [note]="reg.note"
                                            [entityId]="reg.id"
                                            [entityType]="'Registration'"
                                        ></app-ta-input-note>
                                    </div>
                                </div>
                            </div>
                        </app-ta-common-card>
                    }
                </div>
            }
            @case ('fhwa-inspection') {
                <div class="card-width">
                    @for (fhwa of trucks?.data; let i = $index; track i) {
                        <app-ta-common-card
                            [options]="dataFHWA"
                            [isCardOpen]="
                                i == 0 && fhwa.expDate > currentDate
                                    ? true
                                    : false
                            "
                            [cardDocumentCounter]="
                                fhwa?.files?.length ? fhwa.files.length : 0
                            "
                            [noteIcons]="
                                fhwa.note
                                    ? 'assets/svg/truckassist-table/note/Note.svg'
                                    : 'assets/svg/truckassist-table/note/Note - Empty.svg'
                            "
                            [cardNameCommon]="formatDate(fhwa.expDate)"
                            (resizePage)="toggleResizePage(i, 'fhwa')"
                            [expDateClose]="formatDate(fhwa.expDate)"
                            [optionsId]="fhwa.id"
                            [notExpired]="
                                currentDate > fhwa.expDate ? false : true
                            "
                            [openCloseStatus]="i == 0 ? false : true"
                            (dropActions)="
                                optionsEvent($event, trucks.data, 'inspection')
                            "
                        >
                            <div class="card-container">
                                <div class="card-body-cdl">
                                    <div
                                        class="card-row-progress second-progress"
                                    >
                                        <div
                                            class="card-details-progress-container"
                                        >
                                            <app-ta-progress-expiration
                                                [expireDate]="
                                                    formatDate(fhwa.expDate)
                                                "
                                                [startDate]="
                                                    formatDate(fhwa.issueDate)
                                                "
                                                [expiresSettings]="'details'"
                                                [darkText]="true"
                                            >
                                            </app-ta-progress-expiration>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    [@showHideCardBody]="
                                        toggler[i + 'fhwa'] ? 'true' : 'false'
                                    "
                                >
                                    @let fhwaFilesCount = fhwa?.files?.length;
                                    @if (fhwaFilesCount) {
                                        <div class="divider"></div>
                                        <div
                                            class="details-document-container"
                                            [class.disabled]="!fhwaFilesCount"
                                        >
                                            <div class="icon-counter-wrapper">
                                                <div
                                                    class="counter-text-wrapper"
                                                    [class.disabled]="
                                                        !fhwaFilesCount
                                                    "
                                                >
                                                    <p
                                                        class="details-document-name"
                                                    >
                                                        Document
                                                    </p>
                                                    <app-ta-counter
                                                        [countBackground]="
                                                            '#424242'
                                                        "
                                                        [customClass]="
                                                            'circle_counter'
                                                        "
                                                        [countHeight]="'22px'"
                                                        [countWidth]="'22px'"
                                                        [count]="
                                                            fhwaFilesCount ?? 0
                                                        "
                                                    >
                                                    </app-ta-counter>
                                                </div>
                                                <svg-icon
                                                    (click)="
                                                        downloadAllFiles(
                                                            'fhwa',
                                                            i
                                                        )
                                                    "
                                                    src="assets/svg/common/ic_download.svg"
                                                >
                                                </svg-icon>
                                            </div>
                                        </div>
                                    }
                                    <div
                                        class="card-pdf"
                                        [class.disabled]="!fhwaFilesCount"
                                        [class.extended]="fhwaFilesCount > 1"
                                    >
                                        <app-ta-upload-files
                                            #fhwaUpload
                                            [files]="fhwa.files ?? []"
                                            [customClassName]="
                                                'driver-details-pdf'
                                            "
                                            [hasCarouselBottomTabs]="true"
                                            [type]="'details'"
                                            [slideWidth]="324"
                                        ></app-ta-upload-files>
                                    </div>
                                    <div class="divider"></div>
                                    <div class="note-wrapper">
                                        <app-ta-input-note
                                            [formControl]="fhwaNote"
                                            [placeholder]="'Write something.'"
                                            [isVisibleDivider]="false"
                                            [customClass]="'note-small'"
                                            [isVisibleArrow]="false"
                                            [minRows]="1"
                                            [isVisibleNote]="true"
                                            [noteType]="'details-card'"
                                            [note]="fhwa.note"
                                            [entityId]="fhwa.id"
                                            [entityType]="'Inspection'"
                                        ></app-ta-input-note>
                                    </div>
                                </div>
                            </div>
                        </app-ta-common-card>
                    }
                </div>
            }
            @case ('title') {
                <div class="card-width">
                    @for (title of trucks?.data; let i = $index; track i) {
                        <app-ta-common-card
                            [cardDocumentCounter]="title?.files?.length ?? 0"
                            (resizePage)="toggleResizePage(i, 'titles')"
                            [cardNameCommon]="title.number"
                            [options]="dataFHWA"
                            [noteIcons]="
                                title.note
                                    ? 'assets/svg/truckassist-table/note/Note.svg'
                                    : 'assets/svg/truckassist-table/note/Note - Empty.svg'
                            "
                            [optionsId]="title.id"
                            (dropActions)="
                                optionsEvent($event, trucks.data, 'title')
                            "
                            [stateTooltipName]="title.state.stateName"
                            [shortName]="title.state.stateShortName"
                            [weeklyWidth]="'28'"
                            [haveHeaderText]="true"
                        >
                            <div class="card-container">
                                <div class="card-body-cdl">
                                    <div class="card-row-endor">
                                        <div class="card-item">
                                            <div class="card-item-name">
                                                Purchased
                                            </div>
                                            <div class="card-item-value">
                                                <app-ta-copy
                                                    [copyValue]="
                                                        formatDate(
                                                            title.purchaseDate
                                                        )
                                                    "
                                                    [textColor]="'#2f2f2f'"
                                                >
                                                </app-ta-copy>
                                            </div>
                                        </div>
                                        <div class="card-item">
                                            <div class="card-item-name">
                                                Issued
                                            </div>
                                            <div class="card-item-value">
                                                <app-ta-copy
                                                    [copyValue]="
                                                        formatDate(
                                                            title.issueDate
                                                        )
                                                    "
                                                    [textColor]="'#2f2f2f'"
                                                >
                                                </app-ta-copy>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    [@showHideCardBody]="
                                        toggler[i + 'titles'] ? 'true' : 'false'
                                    "
                                >
                                    @let titleFilesCount = title?.files?.length;
                                    @if (titleFilesCount) {
                                        <div class="divider"></div>
                                        <div
                                            class="details-document-container"
                                            [class.disabled]="!titleFilesCount"
                                        >
                                            <div class="icon-counter-wrapper">
                                                <div
                                                    class="counter-text-wrapper"
                                                    [class.disabled]="
                                                        !titleFilesCount
                                                    "
                                                >
                                                    <p
                                                        class="details-document-name"
                                                    >
                                                        Document
                                                    </p>
                                                    <app-ta-counter
                                                        [countBackground]="
                                                            '#424242'
                                                        "
                                                        [customClass]="
                                                            'circle_counter'
                                                        "
                                                        [countHeight]="'22px'"
                                                        [countWidth]="'22px'"
                                                        [count]="
                                                            titleFilesCount ?? 0
                                                        "
                                                    >
                                                    </app-ta-counter>
                                                </div>
                                                <svg-icon
                                                    (click)="
                                                        downloadAllFiles(
                                                            'title',
                                                            i
                                                        )
                                                    "
                                                    src="assets/svg/common/ic_download.svg"
                                                >
                                                </svg-icon>
                                            </div>
                                        </div>
                                    }
                                    <div
                                        class="card-pdf"
                                        [class.disabled]="!titleFilesCount"
                                        [class.extended]="titleFilesCount > 1"
                                    >
                                        <app-ta-upload-files
                                            #titleUpload
                                            [files]="title.files ?? []"
                                            [customClassName]="
                                                'driver-details-pdf'
                                            "
                                            [hasCarouselBottomTabs]="true"
                                            [type]="'details'"
                                            [slideWidth]="324"
                                        ></app-ta-upload-files>
                                    </div>
                                    <div class="divider"></div>
                                    <div class="note-wrapper">
                                        <app-ta-input-note
                                            [formControl]="titleNote"
                                            [placeholder]="'Write something.'"
                                            [customClass]="'note-small'"
                                            [isVisibleArrow]="false"
                                            [minRows]="1"
                                            [isVisibleDivider]="false"
                                            [isVisibleNote]="true"
                                            [noteType]="'details-card'"
                                            [note]="title.note"
                                            [entityId]="title.id"
                                            [entityType]="'Title'"
                                        ></app-ta-input-note>
                                    </div>
                                </div>
                            </div>
                        </app-ta-common-card>
                    }
                </div>
            }
            @case ('lease-purchase') {
                <div class="card-width">
                    <app-ta-common-card
                        [hasSvg]="'assets/svg/common/green_arrow_down.svg'"
                        (resizePage)="toggleResizePage(5, 'lease')"
                        [cardNameCommon]="'KSKA FREIGHT, INC'"
                        [isCardOpen]="true"
                        [expDateClose]="'04/04/27' | formatDateP"
                    >
                        <div class="purchase-container">
                            <div class="purchase-template">
                                <div class="purchase-template-item">
                                    <div class="purchase-template-item-name">
                                        Purchased
                                    </div>
                                    <div class="purchase-template-item-value">
                                        09/01/20
                                    </div>
                                </div>
                                <div class="purchase-template-item second-name">
                                    <div class="purchase-template-item-name">
                                        Price
                                    </div>
                                    <div class="purchase-template-item-value">
                                        $81,600.00
                                    </div>
                                </div>
                            </div>
                            <div class="purchase-template">
                                <div class="purchase-template-item">
                                    <div class="purchase-template-item-name">
                                        No. of Payment
                                    </div>
                                    <div class="purchase-template-item-value">
                                        12
                                    </div>
                                </div>
                                <div class="purchase-template-item second-name">
                                    <div class="purchase-template-item-name">
                                        Down Payment
                                    </div>
                                    <div class="purchase-template-item-value">
                                        $30.000.00
                                    </div>
                                </div>
                            </div>
                            <div class="purchase-template">
                                <div class="purchase-template-item">
                                    <div class="purchase-template-item-name">
                                        Pay Period
                                    </div>
                                    <div class="purchase-template-item-value">
                                        Monthly
                                    </div>
                                </div>
                                <div class="purchase-template-item second-name">
                                    <div class="purchase-template-item-name">
                                        Rate
                                    </div>
                                    <div class="purchase-template-item-value">
                                        10%
                                    </div>
                                </div>
                            </div>
                            <div class="purchase-template">
                                <div class="purchase-template-item">
                                    <div class="purchase-template-item-name">
                                        <span class="longText"
                                            >Payment Amount</span
                                        >
                                        <span class="shortText"
                                            >Pay Amount</span
                                        >
                                    </div>
                                    <div
                                        class="purchase-template-item-value amount"
                                    >
                                        $4,597.16
                                    </div>
                                </div>
                                <div class="purchase-template-item second-name">
                                    <div class="purchase-template-item-name">
                                        Next Payment
                                    </div>
                                    <div
                                        class="purchase-template-item-value payment"
                                    >
                                        01/01/21
                                    </div>
                                </div>
                            </div>
                            <div class="purchase-template">
                                <div class="purchase-template-item">
                                    <div class="purchase-template-item-name">
                                        Total Value
                                    </div>
                                    <div
                                        class="purchase-template-item-value amount"
                                    >
                                        $54,279.16
                                    </div>
                                </div>
                                <div class="purchase-template-item second-name">
                                    <div class="purchase-template-item-name">
                                        Total Interest
                                    </div>
                                    <div
                                        class="purchase-template-item-value payment"
                                    >
                                        $2,679.16
                                    </div>
                                </div>
                            </div>

                            <!----------Progress Card---------->
                            <div
                                class="details-progress-container purchase-progress"
                                [ngClass]="{
                                    'no-toggler': !toggler[5 + 'lease'],
                                }"
                            >
                                <app-ta-currency-progress-bar
                                    [template]="'payments'"
                                    [totalAmount]="12"
                                    [paidSoFarAmount]="4"
                                    [progressBarName]="'Payments'"
                                >
                                </app-ta-currency-progress-bar>
                            </div>

                            <!----------Amortization table Card---------->
                            <div
                                [@showHideCardBody]="
                                    toggler[5 + 'lease'] ? 'true' : 'false'
                                "
                            >
                                <div
                                    class="details-document-container amortization-details"
                                >
                                    <div class="divider"></div>
                                    <div class="icon-counter-wrapper">
                                        <p
                                            class="details-document-name amortization-details-name"
                                        >
                                            Amortization Table
                                        </p>
                                        <svg-icon
                                            (click)="onFileAction('download')"
                                            src="assets/svg/common/ic_download.svg"
                                        >
                                        </svg-icon>
                                    </div>

                                    <div class="table-amor-data">
                                        <div
                                            class="table-amor-data-items-header"
                                        >
                                            <p class="p-data p-header">#</p>
                                            <p class="p-date p-header">DATE</p>
                                            <p class="p-balance p-header">
                                                BALANCE
                                            </p>
                                        </div>
                                        <div class="divider"></div>
                                        <div class="table-amor-data-items-body">
                                            <p class="p-data-text">1</p>
                                            <p class="p-date-text">09/01/20</p>
                                            <p class="p-balance-text">
                                                $54,279.16
                                            </p>
                                        </div>
                                        <div class="divider"></div>
                                        <div class="table-amor-data-items-body">
                                            <p class="p-data-text">2</p>
                                            <p class="p-date-text">10/01/20</p>
                                            <p class="p-balance-text">
                                                $49,358.35
                                            </p>
                                        </div>
                                        <div class="divider"></div>
                                        <div class="table-amor-data-items-body">
                                            <p class="p-data-text">3</p>
                                            <p class="p-date-text">11/01/20</p>
                                            <p class="p-balance-text">
                                                $44,452.20
                                            </p>
                                        </div>
                                        <div class="divider"></div>
                                        <div
                                            class="table-amor-data-items-body bottom"
                                        >
                                            <p class="p-data-text">4</p>
                                            <p class="p-date-text">12/01/20</p>
                                            <p class="p-balance-text">
                                                $38,658.52
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="divider"></div>
                                <!----------Bank Card---------->
                                <div class="bank-card">
                                    <app-ta-custom-card
                                        [cardName]="'Bank Account'"
                                        [hasArrow]="false"
                                        [hasHeaderSvg]="
                                            'assets/svg/common/ic_bankAccount_dummy.svg'
                                        "
                                        [isCardOpen]="true"
                                        [hasDivider]="false"
                                        [customClass]="'detailsPadding'"
                                    >
                                        <div class="purchase-template">
                                            <div class="purchase-template-item">
                                                <div
                                                    class="purchase-template-item-name"
                                                >
                                                    Routing
                                                </div>
                                                <div
                                                    class="purchase-template-item-value"
                                                >
                                                    052001633
                                                </div>
                                            </div>
                                            <div
                                                class="purchase-template-item second-name"
                                            >
                                                <div
                                                    class="purchase-template-item-name"
                                                >
                                                    Account
                                                </div>
                                                <div
                                                    class="purchase-template-item-value acc-number"
                                                >
                                                    <p>
                                                        {{
                                                            accountText
                                                                ? accountText
                                                                : hiddenPassword(
                                                                      cardNumberFake,
                                                                      4
                                                                  )
                                                        }}
                                                    </p>
                                                    <svg-icon
                                                        (click)="
                                                            showHideValue(
                                                                cardNumberFake
                                                            )
                                                        "
                                                        class="hidden-svg-eye"
                                                        src="{{
                                                            isAccountVisible
                                                                ? 'assets/svg/common/ic_eye-visible.svg'
                                                                : 'assets/svg/common/ic_eye-hidden.svg'
                                                        }}"
                                                    >
                                                    </svg-icon>
                                                </div>
                                            </div>
                                        </div>
                                    </app-ta-custom-card>
                                </div>

                                <!----------Pdf Card---------->
                                <div class="details-document-container">
                                    <div class="divider"></div>
                                    <div class="icon-counter-wrapper">
                                        <div class="counter-text-wrapper">
                                            <p class="details-document-name">
                                                Document
                                            </p>
                                            <app-ta-counter
                                                [countBackgroud]="'#F3F3F3'"
                                                [countHeight]="'24px'"
                                                [countWidth]="'24px'"
                                                [count]="3"
                                            >
                                            </app-ta-counter>
                                        </div>
                                        <svg-icon
                                            (click)="onFileAction('download')"
                                            src="assets/svg/common/ic_download.svg"
                                        >
                                        </svg-icon>
                                    </div>
                                </div>
                                <div class="files-item">
                                    <div class="details-page-row-7">
                                        <app-ta-upload-files
                                            [files]="[
                                                {
                                                    name: 'truckassist - 0',
                                                    url: 'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf',
                                                    extension: 'pdf',
                                                },
                                                {
                                                    name: 'truckassist - 1',
                                                    url: 'https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf',
                                                    extension: 'pdf',
                                                },
                                            ]"
                                            [customClassName]="
                                                'driver-details-pdf'
                                            "
                                            [hasCarouselBottomTabs]="true"
                                        ></app-ta-upload-files>
                                    </div>
                                </div>

                                <div class="note-cards-lease">
                                    <app-ta-input-note
                                        [formControl]="note"
                                        [isReadOnly]="true"
                                        [isVisibleArrow]="false"
                                        [noteType]="'details-card'"
                                    ></app-ta-input-note>
                                </div>
                            </div>
                        </div>
                    </app-ta-common-card>
                </div>
            }
        }
    }
</div>
