<app-ta-modal
    [modalTitle]="editData?.type !== 'edit' ? 'Add Owner' : 'Edit Owner'"
    [editData]="editData"
    [editName]="editData?.data?.name"
    [isModalValid]="ownerForm.valid && isFormDirty"
    [saveAndAddNew]="editData?.type !== 'edit'"
    (action)="onModalAction($event)"
>
    <div origin>
        <app-ta-tab-switch
            [tabs]="tabs"
            (switchClicked)="tabChange($event)"
            [type]="'type1-modal-popup'"
        >
        </app-ta-tab-switch>

        <form
            [formGroup]="ownerForm"
            class="form-container form-container-without-mb"
        >
            <div class="row" *ngIf="selectedTab === 1">
                <div class="col-8">
                    <app-ca-input
                        formControlName="bussinesName"
                        [inputConfig]="{
                            name: 'Business Name',
                            type: 'text',
                            label: 'Business Name',
                            isRequired: true,
                            textTransform: 'uppercase',
                            autoFocus: editData?.type !== 'edit',
                            minLength: 2,
                            maxLength: 64,
                        }"
                    ></app-ca-input>
                </div>
                <div class="col-4">
                    <app-ca-input
                        formControlName="ein"
                        [inputConfig]="{
                            name: 'EIN',
                            type: 'text',
                            label: 'EIN #',
                            isRequired: true,
                            mask: '00-0000000',
                            maxLength: 10,
                        }"
                    ></app-ca-input>
                </div>
            </div>
            <div class="row" *ngIf="selectedTab === 2">
                <div class="col-4">
                    <app-ca-input
                        formControlName="firstName"
                        [inputConfig]="{
                            name: 'First name',
                            type: 'text',
                            label: 'First Name',
                            minLength: 2,
                            maxLength: 26,
                            isRequired: true,
                            textTransform: 'capitalize',
                            autoFocus:
                                selectedTab === 2 &&
                                !ownerForm.get('firstName').value,
                        }"
                    ></app-ca-input>
                </div>
                <div class="col-4 no-p-right">
                    <app-ca-input
                        formControlName="lastName"
                        [inputConfig]="{
                            name: 'Last name',
                            type: 'text',
                            label: 'Last Name',
                            minLength: 2,
                            maxLength: 26,
                            isRequired: true,
                            textTransform: 'capitalize',
                        }"
                    ></app-ca-input>
                </div>
                <div class="col-4">
                    <app-ca-input
                        formControlName="ssn"
                        [inputConfig]="{
                            name: 'SSN',
                            type: 'text',
                            label: 'SSN',
                            isRequired: true,
                            mask: '000-00-0000',
                            maxLength: 11,
                        }"
                    ></app-ca-input>
                </div>
            </div>
            <div class="row">
                <div class="col-5">
                    <app-ca-input
                        formControlName="phone"
                        [inputConfig]="{
                            name: 'Phone',
                            type: 'text',
                            label: 'Phone',
                            isRequired: true,
                            placeholderIcon: 'phone',
                            mask: '(000) 000-0000',
                        }"
                    ></app-ca-input>
                </div>
                <div class="col-7">
                    <app-ca-input
                        formControlName="email"
                        [inputConfig]="{
                            name: 'Email',
                            type: 'text',
                            label: 'Email',
                            isRequired: true,
                            placeholderIcon: 'email',
                            minLength: 5,
                            maxLength: 64,
                            textTransform: 'lowercase',
                        }"
                    ></app-ca-input>
                </div>
            </div>
            <div class="row">
                <div class="col-10">
                    <app-ta-input-address-dropdown
                        formControlName="address"
                        [inputConfig]="{
                            name: 'Address',
                            type: 'text',
                            label: 'Address, City, State Zip',
                            isRequired: true,
                            placeholderIcon: 'address',
                            textTransform: 'capitalize',
                            dropdownWidthClass: 'w-col-376',
                            minLength: 6,
                            maxLength: 256,
                        }"
                        [placeholderType]="'longAddress'"
                        [activeAddress]="selectedAddress"
                        (selectedAddress)="onHandleAddress($event)"
                    ></app-ta-input-address-dropdown>
                </div>
                <div class="col-2">
                    <app-ca-input
                        formControlName="addressUnit"
                        [inputConfig]="{
                            name: 'address-unit',
                            type: 'text',
                            label: 'Unit #',
                            textTransform: 'uppercase',
                            minLength: 1,
                            maxLength: 10,
                        }"
                    ></app-ca-input>
                </div>
            </div>
            <div class="custom-bank-row last-row">
                <div class="bank-field">
                    <app-ca-input-dropdown
                        formControlName="bankId"
                        [template]="'svg-template'"
                        [inputConfig]="{
                            name: 'Input Dropdown Bank Name',
                            type: 'text',
                            label: 'Bank Name',
                            minLength: 2,
                            maxLength: 64,
                            textTransform: 'uppercase',
                            isDropdown: true,
                            dropdownWidthClass: 'w-col-164',
                        }"
                        [canAddNew]="true"
                        [options]="labelsBank"
                        [activeItem]="selectedBank"
                        (selectedItem)="onSelectBank($event)"
                        (saveItem)="onSaveNewBank($event)"
                    ></app-ca-input-dropdown>
                </div>
                <div class="bank-field">
                    <app-ca-input
                        formControlName="routingNumber"
                        [inputConfig]="{
                            name: 'routing-bank',
                            type: 'text',
                            label: 'Routing #',
                            isDisabled: !isBankSelected,
                            isRequired: isBankSelected,
                            minLength: 9,
                            maxLength: 9,
                        }"
                    ></app-ca-input>
                </div>
                <div class="bank-field">
                    <app-ca-input
                        formControlName="accountNumber"
                        [inputConfig]="{
                            name: 'account-bank',
                            type: 'text',
                            label: 'Account #',
                            isDisabled: !isBankSelected,
                            isRequired: isBankSelected,
                            maxLength: 17,
                            minLength: 5,
                        }"
                    ></app-ca-input>
                </div>
            </div>
            <div class="ta-card-body-overflow-none">
                <app-ta-custom-card
                    [hasCounter]="documents.length ? documents.length : 0"
                    [cardName]="'Document'"
                    [isCardOpen]="!!documents.length"
                >
                    <!-- TODO:  -->
                </app-ta-custom-card>
            </div>
            <div class="divider"></div>
            <app-ca-input-note
                formControlName="note"
                [isVisibleNote]="
                    ownerForm.get('note').value &&
                    ownerForm.get('note').value != 'null'
                        ? ownerForm.get('note').value
                        : false
                "
                [note]="
                    ownerForm.get('note').value &&
                    ownerForm.get('note').value != 'null'
                        ? ownerForm.get('note').value
                        : ''
                "
            ></app-ca-input-note>
        </form>
    </div>
</app-ta-modal>
