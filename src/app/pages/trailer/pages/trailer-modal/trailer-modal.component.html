<app-ta-modal
    [modalTitle]="editData?.id ? 'Edit Trailer' : 'Add Trailer'"
    [editData]="editData"
    [editName]="editData?.data?.trailerNumber"
    [isModalValid]="trailerForm.valid && isFormDirty"
    [saveAndAddNew]="true"
    [disableDelete]="true"
    [isEditDate]="editData?.id"
    [topDivider]="false"
    (action)="onModalAction($event)"
>
    <div origin class="origin-part-modal">
        <app-ta-tab-switch
            [tabs]="tabs"
            (switchClicked)="tabChange($event)"
            [type]="'type1-modal-popup'"
        >
        </app-ta-tab-switch>

        <form
            [formGroup]="trailerForm"
            class="form-container"
            [ngClass]="{
                'form-container-without-mb': selectedTab === 1,
                'form-container-with-inputs': selectedTab === 2
            }"
        >
            <div
                class="animation-two-tabs"
                [@animationTabsModal]="animationObject"
            >
                <!-------------------------------- Basic Tab -------------------------------->
                <div class="m-tab" *ngIf="selectedTab === 1">
                    <div class="trailer-modal-first-row">
                        <app-ta-input
                            formControlName="trailerNumber"
                            [inputConfig]="TrailerNumberConfig"
                        ></app-ta-input>
                        <app-ta-input-dropdown
                            formControlName="trailerTypeId"
                            [template]="'svgtext-template'"
                            [inputConfig]="TrailerTypeIdConfig"
                            [options]="trailerType"
                            [activeItem]="selectedTrailerType"
                            (selectedItem)="
                                onSelectDropdown($event, 'trailer-type')
                            "
                        ></app-ta-input-dropdown>
                        <app-ta-input-dropdown
                            formControlName="trailerLengthId"
                            [inputConfig]="TrailerLengthConfig"
                            [options]="trailerLengthType"
                            [activeItem]="selectedTrailerLength"
                            (selectedItem)="
                                onSelectDropdown($event, 'trailer-length')
                            "
                        ></app-ta-input-dropdown>
                    </div>
                    <div class="trailer-modal-second-row d-grid">
                        <app-ta-input
                            formControlName="year"
                            [inputConfig]="TrailerYearConfig"
                        ></app-ta-input>
                        <app-ta-input
                            formControlName="vin"
                            [inputConfig]="TrailerVinConfig"
                        ></app-ta-input>
                        <app-ta-input-dropdown
                            formControlName="trailerMakeId"
                            [template]="'svg-template'"
                            [inputConfig]="TrailerMakeConfig"
                            [options]="trailerMakeType"
                            [activeItem]="selectedTrailerMake"
                            (selectedItem)="
                                onSelectDropdown($event, 'trailer-make')
                            "
                        ></app-ta-input-dropdown>
                    </div>
                    <div class="custom-model-color-year-length last-row">
                        <app-ta-input
                            formControlName="model"
                            [inputConfig]="TrailerModelConfig"
                            (blurInput)="onBlurTrailerModel()"
                        ></app-ta-input>

                        <app-ta-input-dropdown
                            formControlName="colorId"
                            [template]="'svgtext-template'"
                            [inputConfig]="TrailerColorConfig"
                            [options]="colorType"
                            [activeItem]="selectedColor"
                            (selectedItem)="onSelectDropdown($event, 'color')"
                        ></app-ta-input-dropdown>
                    </div>
                    <!-- Company Owned -->
                    <app-ta-checkbox-card
                        formControlName="companyOwned"
                        [label]="'Company Owned'"
                        [name]="'company-owned'"
                        [reverseLogic]="true"
                        [isCardOpen]="trailerForm.get('companyOwned').value"
                        [animationMarginParams]="{
                            marginTop: '12px',
                            marginBottom: '18px'
                        }"
                    >
                        <div bodyFalse class="row row-no-m">
                            <div class="col-12">
                                <app-ta-input-dropdown
                                    formControlName="ownerId"
                                    [inputConfig]="TrailerOwnerConfig"
                                    [canAddNew]="true"
                                    [canOpenModal]="true"
                                    [options]="ownerType"
                                    [activeItem]="selectedOwner"
                                    (selectedItem)="
                                        onSelectDropdown($event, 'owner')
                                    "
                                ></app-ta-input-dropdown>
                            </div>
                        </div>
                    </app-ta-checkbox-card>
                    <div class="ta-card-body-overflow-none">
                        <app-ta-custom-card
                            [hasCounter]="
                                documents.length ? documents.length : 0
                            "
                            [cardName]="'Document'"
                            [isCardOpen]="!!documents.length"
                        >
                            <app-ta-upload-files
                                [files]="documents"
                                [size]="'small'"
                                (onFileEvent)="onFilesEvent($event)"
                                [customClassName]="'modals'"
                                [showDropzone]="true"
                            ></app-ta-upload-files>
                        </app-ta-custom-card>
                    </div>
                    <app-ta-input-note
                        formControlName="note"
                        [isVisibleNote]="
                            trailerForm.get('note').value &&
                            trailerForm.get('note').value != 'null'
                                ? trailerForm.get('note').value
                                : false
                        "
                        [note]="
                            trailerForm.get('note').value &&
                            trailerForm.get('note').value != 'null'
                                ? trailerForm.get('note').value
                                : ''
                        "
                    ></app-ta-input-note>
                </div>
                <!-------------------------------- Additional Tab -------------------------------->
                <div class="m-tab" *ngIf="selectedTab === 2">
                    <!-------------------------------- FIRST ROW -------------------------------->

                    <div
                        class="d-grid trailer-column-gap mb-32"
                        [ngClass]="
                            ['Reefer'].includes(
                                trailerForm.get('trailerTypeId').value
                            )
                                ? 'trailer-first-grid-reefer'
                                : volumenTrailers.includes(
                                      trailerForm.get('trailerTypeId').value
                                  )
                                ? 'trailer-first-grid-3-cols'
                                : 'trailer-first-grid-2-cols'
                        "
                    >
                        <ng-container
                            *ngIf="
                                trailerForm.get('trailerTypeId').value ===
                                'Reefer'
                            "
                        >
                            <app-ta-input-dropdown
                                formControlName="reeferUnit"
                                [inputConfig]="TrailerReferConfig"
                                [options]="reeferUnitType"
                                [activeItem]="selectedReeferType"
                                (selectedItem)="
                                    onSelectDropdown($event, 'reefer-unit')
                                "
                            ></app-ta-input-dropdown>
                        </ng-container>

                        <ng-container
                            *ngIf="
                                volumenTrailers.includes(
                                    trailerForm.get('trailerTypeId').value
                                )
                            "
                        >
                            <app-ta-input
                                formControlName="volume"
                                [inputConfig]="TrailerVolumeConfig"
                            ></app-ta-input>
                        </ng-container>

                        <app-ta-input
                            formControlName="emptyWeight"
                            [inputConfig]="TrailerWeightConfig"
                        ></app-ta-input>

                        <app-ta-input-dropdown
                            formControlName="tireSizeId"
                            [inputConfig]="TrailerTireSizeConfig"
                            [options]="tireSize"
                            [activeItem]="selectedTireSize"
                            (selectedItem)="
                                onSelectDropdown($event, 'tire-size')
                            "
                        ></app-ta-input-dropdown>
                    </div>

                    <!-------------------------------- SECOND ROW -------------------------------->
                    <div
                        class="d-grid trailer-column-gap mb-32"
                        [ngClass]="
                            isDoorAndLiftGate.includes(
                                trailerForm.get('trailerTypeId').value
                            )
                                ? 'trailer-second-grid-4-cols'
                                : 'trailer-second-grid-2-cols'
                        "
                    >
                        <app-ta-input
                            formControlName="axles"
                            [inputConfig]="TrailerAxlesConfig"
                        ></app-ta-input>

                        <app-ta-input-dropdown
                            formControlName="suspension"
                            [inputConfig]="TrailerSuspensionConfig"
                            [options]="suspensionType"
                            [activeItem]="selectedSuspension"
                            (selectedItem)="
                                onSelectDropdown($event, 'suspension')
                            "
                        ></app-ta-input-dropdown>

                        <ng-container
                            *ngIf="
                                isDoorAndLiftGate.includes(
                                    trailerForm.get('trailerTypeId').value
                                )
                            "
                        >
                            <app-ta-input-dropdown
                                formControlName="doorType"
                                [inputConfig]="TrailerDoorTypeConfig"
                                [options]="doorType"
                                [activeItem]="selectedDoorType"
                                (selectedItem)="
                                    onSelectDropdown($event, 'door-type')
                                "
                            ></app-ta-input-dropdown>
                        </ng-container>

                        <ng-container
                            *ngIf="
                                isDoorAndLiftGate.includes(
                                    trailerForm.get('trailerTypeId').value
                                )
                            "
                        >
                            <app-ta-checkbox
                                formControlName="isLiftgate"
                                name="liftgate"
                                [customClass]="'medium'"
                                [label]="'Liftgate'"
                            ></app-ta-checkbox>
                        </ng-container>
                    </div>
                    <!-------------------------------- THIRD ROW -------------------------------->
                    <div class="trailer-modal-insurance-fhwa">
                        <app-ta-input
                            formControlName="insurancePolicy"
                            [inputConfig]="TrailerInsurancePolicyConfig"
                        ></app-ta-input>
                        <app-ta-input
                            formControlName="mileage"
                            [inputConfig]="TrailerMileageConfig"
                        ></app-ta-input>
                        <app-ta-input
                            formControlName="fhwaExp"
                            [inputConfig]="TrailerFhwaExpConfig"
                        ></app-ta-input>
                    </div>
                    <ng-container *ngIf="trailerForm.get('companyOwned').value">
                        <div class="row row-no-mb">
                            <div class="col-6">
                                <app-ta-input
                                    formControlName="purchaseDate"
                                    [inputConfig]="TrailerPurchaseDateConfig"
                                ></app-ta-input>
                            </div>
                            <div class="col-6">
                                <app-ta-input
                                    formControlName="purchasePrice"
                                    [inputConfig]="TrailerPurchasePriceConfig"
                                ></app-ta-input>
                            </div>
                        </div>
                    </ng-container>
                </div>
            </div>
        </form>
    </div>
</app-ta-modal>
