<div class="chat-list-item d-flex">
    <!-- TODO remove user type -->
    <app-ta-profile-images
        [indx]="contact.companyUser?.id"
        [withTooltip]="true"
        [size]="'medium'"
        [type]="(contact.userType?.name | lowercase) || 'user'"
        [name]="contact.companyUser?.fullName"
        [url]="contact.companyUser?.avatarFile?.url"
    >
    </app-ta-profile-images>

    <div class="chat-list-item-text-wrapper">
        <!-- TODO Change into lastMessage -->
        <ng-container *ngIf="contact?.companyUser; else messageData">
            <div class="chat-list-item-name-no-data d-flex align-items-center">
                {{ contact.companyUser.fullName }}
            </div>
        </ng-container>

        <ng-template #messageData>
            <div class="chat-list-item-top d-flex">
                <div class="chat-list-item-name ta-font-medium">
                    {{ contact.companyUser.fullName }}
                </div>
                <ng-container *ngIf="contact?.unreadCount">
                    <div class="chat-list-item-text-count ta-font-semi-bold">
                        {{ contact.unreadCount }}
                    </div>
                </ng-container>
            </div>
            <div class="chat-list-item-text-content d-flex">
                <ng-container [ngSwitch]="status">
                    <ng-container *ngSwitchCase="ConversationStatus.TYPING">
                        <div class="chat-list-item-message ta-font-bold">
                            Typing...
                        </div>
                    </ng-container>

                    <ng-container *ngSwitchCase="ConversationStatus.UNREAD">
                        {{
                            contact.companyUser.lastMessage?.content
                        }}</ng-container
                    >
                    <ng-container *ngSwitchCase="ConversationStatus.READ">
                        {{
                            contact.companyUser.lastMessage?.content
                        }}</ng-container
                    >
                    <ng-container *ngSwitchDefault> </ng-container>
                </ng-container>

                <div class="chat-list-item-text-time ta-font-regular">
                    {{
                        contact.companyUser.lastMessage?.createdAt | formatTime
                    }}
                </div>
            </div>
        </ng-template>
    </div>
</div>
