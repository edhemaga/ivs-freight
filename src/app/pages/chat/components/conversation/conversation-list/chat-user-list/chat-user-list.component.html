<div class="user-list-container">
    <app-chat-list
        [itemsCount]="contactsInfo?.count"
        [isSearchActive]="isSearchActive"
    >
        <app-chat-header
            [isSearchActive]="isSearchActive"
            (searchEvent)="search($event)"
            header
        >
            <div class="chat-header d-flex align-items-center">
                <div class="chat-header-type ta-font-extra-bold">
                    {{ type }}
                </div>

                <div class="chat-header-message-count ta-font-extra-bold">
                    {{ contactsInfo?.count }}
                </div>

                <app-chat-vertical-divider></app-chat-vertical-divider>

                <ng-container *ngIf="!isSearchActive">
                    <svg-icon
                        class="d-flex justify-content-center align-items-center"
                        [svgStyle]="{ 'width.px': 18, 'height.px': 17 }"
                        [src]="ChatSvgRoutes.searchIcon"
                        (click)="openSearch()"
                    ></svg-icon>

                    <app-chat-vertical-divider></app-chat-vertical-divider>
                </ng-container>

                <div
                    ngbTooltip
                    mainTooltip="Online Users"
                    tooltipBackground="#424242"
                    position="bottom"
                    class="status-icon"
                >
                    <svg-icon
                        (click)="showOnlineUsers()"
                        class="d-flex justify-content-center align-items-center"
                        [svgStyle]="{ 'width.px': 18, 'height.px': 17 }"
                        [src]="ChatSvgRoutes.contactStatusIcon"
                    ></svg-icon>
                </div>

                <div
                    ngbTooltip
                    mainTooltip="Department Filter"
                    tooltipBackground="#424242"
                    position="bottom"
                    class="department-icon"
                >
                    <svg-icon
                        (click)="filterByDepartment()"
                        class="d-flex justify-content-center align-items-center"
                        [svgStyle]="{ 'width.px': 18, 'height.px': 17 }"
                        [src]="ChatSvgRoutes.departmentIcon"
                    ></svg-icon>
                </div>
            </div>
        </app-chat-header>

        <div body>
            <ng-container
                *ngFor="
                    let contact of contactsInfo?.data;
                    let ind = index;
                    trackBy: '' | trackByProperty
                "
            >
                <div
                    class="contact"
                    [ngClass]="
                        contact.companyUser.id === this.selectedUserId &&
                        'selected-contact'
                    "
                    (click)="selectUser(contact.companyUser.id)"
                >
                    <app-chat-list-item
                        [item]="{
                            id: contact.companyUser.id,
                            name: contact.companyUser.fullName,
                            lastContent: {
                                content: contact?.lastMessage?.content,
                                createdAt: contact?.lastMessage?.createdAt
                            },
                            notificationCount: unreadCount,
                            pathToAsset: contact.companyUser?.avatarFile?.url,
                            assetExtension:
                                contact.companyUser?.avatarFile?.extension ??
                                (contact.companyUser?.avatarFile?.url
                                    | fileExtension),
                            isRound: type === 'User'
                        }"
                    ></app-chat-list-item>
                </div>
            </ng-container>
        </div>
    </app-chat-list>
</div>
