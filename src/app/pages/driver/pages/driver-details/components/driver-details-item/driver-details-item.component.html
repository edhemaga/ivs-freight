<div class="details-component driver-details-item-container">
    <ng-container
        *ngFor="let driverItem of detailsConfig; trackBy: trackByIdentity"
    >
        <ng-container [ngSwitch]="driverItem.template">
            <!-- General -->

            <ng-container *ngSwitchCase="'general'">
                <app-driver-details-card
                    [driver]="detailsConfig[0]?.data"
                ></app-driver-details-card>
            </ng-container>

            <!-- Cdl -->

            <ng-container *ngSwitchCase="'cdl'">
                <app-driver-details-item-cdl
                    [cardsData]="detailsConfig[1]?.data"
                    [driver]="detailsConfig[0]?.data"
                ></app-driver-details-item-cdl>
            </ng-container>

            <!-- Test -->

            <ng-container *ngSwitchCase="'drug-alcohol'">
                <app-driver-details-item-test
                    [cardsData]="detailsConfig[2]?.data"
                    [driver]="detailsConfig[0]?.data"
                >
                </app-driver-details-item-test>
            </ng-container>

            <!-- Medical -->

            <ng-container *ngSwitchCase="'medical'">
                <div class="card-width">
                    <div>
                        <app-ta-common-card
                            *ngFor="
                                let med of driverItem?.data;
                                let i = index;
                                trackBy: trackByIdentity
                            "
                            [options]="dataDropDownMvr"
                            [cardNameCommon]="formatDate(med?.issueDate)"
                            [cardDocumentCounter]="
                                med?.files?.length ? med.files.length : 0
                            "
                            [expDateClose]="formatDate(med?.expDate)"
                            [optionsId]="med.id"
                            (dataDropDopwn)="getMedicalById(med.id)"
                            (preloadData)="preloadData(med, 'med')"
                            (clickedCard)="getNameForDrop($event)"
                            [cardNameCurrent]="'medical'"
                            [noteIcons]="
                                med.note &&
                                med.note != null &&
                                med.note != 'null'
                                    ? 'assets/svg/truckassist-table/note/Note.svg'
                                    : 'assets/svg/truckassist-table/note/Note - Empty.svg'
                            "
                            (resizePage)="toggleResizePage(i, 'medical')"
                            (dropActions)="optionsEvent($event, 'medical')"
                        >
                            <div class="cards-container">
                                <div class="card-body-cdl">
                                    <div
                                        class="card-row-progress second-progress"
                                    >
                                        <div
                                            class="card-details-progress-container"
                                        >
                                            <app-ta-progress-expiration
                                                [expireDate]="
                                                    formatDate(med?.expDate)
                                                "
                                                [startDate]="
                                                    formatDate(med?.issueDate)
                                                "
                                                [expiresSettings]="'details'"
                                                [darkText]="true"
                                            >
                                            </app-ta-progress-expiration>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    [@showHideCardBody]="
                                        toggler[i + 'medical']
                                            ? 'true'
                                            : 'false'
                                    "
                                >
                                    <div
                                        class="divider"
                                        *ngIf="med?.files?.length"
                                    ></div>
                                    <div
                                        class="details-document-container"
                                        [class.disabled]="!med?.files?.length"
                                        *ngIf="med?.files?.length"
                                    >
                                        <div class="icon-counter-wrapper">
                                            <div
                                                class="counter-text-wrapper"
                                                [class.disabled]="
                                                    !med?.files?.length
                                                "
                                            >
                                                <p
                                                    class="details-document-name"
                                                >
                                                    Document
                                                </p>
                                                <app-ta-counter
                                                    [countBackground]="
                                                        '#424242'
                                                    "
                                                    [customClass]="
                                                        'circle_counter'
                                                    "
                                                    [countHeight]="'22px'"
                                                    [countWidth]="'22px'"
                                                    [count]="
                                                        med?.files?.length
                                                            ? med.files.length
                                                            : 0
                                                    "
                                                >
                                                </app-ta-counter>
                                            </div>
                                            <svg-icon
                                                *ngIf="med?.files?.length"
                                                (click)="
                                                    onFileAction('download')
                                                "
                                                src="assets/svg/common/ic_download.svg"
                                            >
                                            </svg-icon>
                                        </div>
                                    </div>
                                    <div
                                        class="card-pdf"
                                        [class.extended]="
                                            med?.files?.length > 1
                                        "
                                        [class.disabled]="!med?.files?.length"
                                    >
                                        <app-ta-upload-files
                                            [files]="med.files ? med.files : []"
                                            [customClassName]="
                                                'driver-details-pdf'
                                            "
                                            [hasCarouselBottomTabs]="true"
                                            [type]="'details'"
                                            [slideWidth]="324"
                                        ></app-ta-upload-files>
                                    </div>
                                    <div class="divider"></div>
                                    <div class="card-note">
                                        <app-ta-input-note
                                            [formControl]="medNote"
                                            [isVisibleDivider]="false"
                                            [isVisibleNote]="true"
                                            [isVisibleArrow]="false"
                                            [minRows]="1"
                                            [placeholder]="'Write something.'"
                                            [customClass]="'note-small'"
                                            [noteType]="'details-card'"
                                            [note]="
                                                med.note && med.note != 'null'
                                                    ? med.note
                                                    : ''
                                            "
                                            [entityId]="med.id"
                                            [entityType]="'Medical'"
                                        >
                                        </app-ta-input-note>
                                    </div>
                                </div>
                            </div>
                        </app-ta-common-card>
                    </div>
                </div>
            </ng-container>

            <!-- MVR -->

            <ng-container *ngSwitchCase="'mvr'">
                <div class="card-width">
                    <div>
                        <app-ta-common-card
                            *ngFor="
                                let mvr of driverItem?.data;
                                let i = index;
                                trackBy: trackByIdentity
                            "
                            [options]="dataDropDownMvr"
                            [cardNameCurrent]="'mvr'"
                            (clickedCard)="getNameForDrop($event)"
                            (dataDropDopwn)="getMvrById(mvr.id)"
                            (preloadData)="preloadData(mvr, 'mvr')"
                            [cardDocumentCounter]="
                                mvr?.files?.length ? mvr.files.length : 0
                            "
                            [noteIcons]="
                                mvr.note &&
                                mvr.note != null &&
                                mvr.note != 'null'
                                    ? 'assets/svg/truckassist-table/note/Note.svg'
                                    : 'assets/svg/truckassist-table/note/Note - Empty.svg'
                            "
                            (resizePage)="toggleResizePage(i, 'mvr')"
                            [cardNameCommon]="formatDate(mvr?.issueDate)"
                            [expDateClose]="formatDate(mvr?.expDate)"
                            [optionsId]="mvr.id"
                            [setPositionDrop]="true"
                            [mvrPositionDrop]="true"
                            [mainData]="mvr"
                            (dropActions)="optionsEvent($event, 'mvr')"
                        >
                            <div class="cards-container">
                                <div class="card-body-cdl">
                                    <div
                                        class="card-row-progress second-progress"
                                    >
                                        <div
                                            class="card-details-progress-container"
                                        >
                                            <app-ta-progress-expiration
                                                [startDate]="
                                                    formatDate(mvr?.issueDate)
                                                "
                                                [expireDate]="
                                                    formatDate(mvr?.expDate)
                                                "
                                                [expiresSettings]="'details'"
                                                [darkText]="true"
                                            >
                                            </app-ta-progress-expiration>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    [@showHideCardBody]="
                                        toggler[i + 'mvr'] ? 'true' : 'false'
                                    "
                                >
                                    <div
                                        class="divider"
                                        *ngIf="mvr?.files?.length"
                                    ></div>
                                    <div
                                        class="details-document-container"
                                        [class.disabled]="!mvr?.files?.length"
                                        *ngIf="mvr?.files?.length"
                                    >
                                        <div
                                            class="icon-counter-wrapper"
                                            [class.disabled]="
                                                !mvr?.files?.length
                                            "
                                        >
                                            <div class="counter-text-wrapper">
                                                <p
                                                    class="details-document-name"
                                                >
                                                    Document
                                                </p>
                                                <app-ta-counter
                                                    [countBackground]="
                                                        '#424242'
                                                    "
                                                    [customClass]="
                                                        'circle_counter'
                                                    "
                                                    [countHeight]="'22px'"
                                                    [countWidth]="'22px'"
                                                    [count]="
                                                        mvr?.files?.length
                                                            ? mvr.files.length
                                                            : 0
                                                    "
                                                >
                                                </app-ta-counter>
                                            </div>
                                            <svg-icon
                                                *ngIf="mvr?.files?.length"
                                                (click)="
                                                    onFileAction('download')
                                                "
                                                src="assets/svg/common/ic_download.svg"
                                            >
                                            </svg-icon>
                                        </div>
                                    </div>
                                    <div
                                        class="card-pdf"
                                        [class.extended]="
                                            mvr?.files?.length > 1
                                        "
                                        [class.disabled]="!mvr?.files?.length"
                                    >
                                        <app-ta-upload-files
                                            [files]="mvr.files ? mvr.files : []"
                                            [customClassName]="
                                                'driver-details-pdf'
                                            "
                                            [hasCarouselBottomTabs]="true"
                                            [type]="'details'"
                                            [slideWidth]="324"
                                        ></app-ta-upload-files>
                                    </div>
                                    <div class="divider"></div>
                                    <div class="card-note">
                                        <app-ta-input-note
                                            [formControl]="mvrNote"
                                            [isVisibleDivider]="false"
                                            [isVisibleNote]="true"
                                            [isVisibleArrow]="false"
                                            [minRows]="1"
                                            [placeholder]="'Write something.'"
                                            [customClass]="'note-small'"
                                            [noteType]="'details-card'"
                                            [note]="
                                                mvr.note && mvr.note != 'null'
                                                    ? mvr.note
                                                    : ''
                                            "
                                            [entityId]="mvr.id"
                                            [entityType]="'Mvr'"
                                        >
                                        </app-ta-input-note>
                                    </div>
                                </div>
                            </div>
                        </app-ta-common-card>
                    </div>
                </div>
            </ng-container>
        </ng-container>
    </ng-container>
</div>
