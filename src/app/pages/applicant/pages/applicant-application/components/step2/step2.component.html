<div class="d-flex flex-column align-items-center step-container">
    <h1 class="m-0 step-title text-center ta-font-bold">Work Experience</h1>

    <!-- TOP SECTION -->
    <div class="d-flex justify-content-center text-center top-section"
         [ngStyle]="{ color: selectedMode === 'FEEDBACK_MODE' ? '#919191' : '#2F2F2F' }">
        <p class="m-0 ta-font-regular">
            In accordance with 391.21 & .23 of the Federal Motor Carrier Safety Regulations (FMCSR),
            an applicant must list all previous work experience for the three (3) years prior to the
            date of application shown on page one, as well as all commercial driving
            experience for seven (7) years prior to those three years, for a total of 10 years.
        </p>
    </div>

    <!-- MID SECTION -->
    <div class="d-flex justify-content-center text-center mid-section">
        <h5 class="m-0 ta-font-bold"
            [ngStyle]="{ color: selectedMode === 'FEEDBACK_MODE' ? '#919191' : '#2F2F2F' }">
            Please list starting with most recent employer, use add employer link if needed
        </h5>
    </div>

    <!-- WORK EXPERIENCE FORM -->
    <ng-container *ngIf="!workExperienceForm.get('noWorkExperience').value">
        <div class="d-flex flex-column justify-content-center">

            <!-- CREATED WORK EXPERIENCE DATA -->
            <ng-container *ngIf="workExperienceArray.length">
                <div class="d-flex flex-column justify-content-center work-experiences-container"
                     [formGroup]="workExperienceForm">
                    <div class="align-items-center title-container">
                        <div class="align-items-center employer-box">
                            <p class="m-0 ta-font-bold">EMPLOYER</p>
                        </div>
                        <div class="align-items-center job-description-box">
                            <p class="m-0 ta-font-bold">JOB DESCRIPTION</p>
                        </div>
                        <div class="align-items-center equipment-box">
                            <p class="m-0 ta-font-bold">EQUIPMENT</p>
                        </div>
                    </div>

                    <ng-container *ngFor="let workExperience of workExperienceArray; let i = index; trackBy: trackByIdentity">
                        <ng-container *ngIf="!workExperience.isEditingWorkExperience">
                            <div class="d-flex align-items-center work-experience-info-container line-container"
                                 (click)="selectedMode === 'REVIEW_MODE' ? onCardReview(i) : onEditWorkExperience(i)">
                                <!-- EMPLOYER INFO -->
                                <div class="d-flex flex-column justify-content-center">
                                    <div class="d-flex align-items-center employer-box">
                                        <p class="m-0 ta-font-bold d-inline-block text-truncate" style="max-width: 180px"
                                           ngbTooltip [mainTooltip]="workExperience.employer" tooltipBackground="#2F2F2F"
                                           position="bottom-left">
                                            {{ workExperience.employer }}
                                        </p>
                                    </div>

                                    <div class="d-flex align-items-center date-box">
                                        <p class="m-0 ta-font-medium">
                                            {{ workExperience.fromDate }} - {{ workExperience.toDate }}
                                        </p>
                                    </div>
                                </div>

                                <!-- JOB DESCRIPTION -->
                                <div class="d-flex flex-column h-100">
                                    <div class="d-flex align-items-center job-description-box">
                                        <p class="m-0 ta-font-semi-bold">{{ workExperience.jobDescription }}</p>
                                    </div>

                                    <ng-container *ngIf="workExperience.isDrivingPosition">
                                        <div class="d-flex align-items-center driving-position-box">
                                            <p class="m-0 ta-font-medium">Driving Position</p>
                                        </div>
                                    </ng-container>
                                </div>

                                <!-- EQUIPMENT LIST -->
                                <ng-container *ngIf="workExperience.classesOfEquipment.length">
                                    <div class="d-flex flex-column h-100">
                                        <ng-container *ngIf="workExperience.classesOfEquipment.length >= 1">
                                            <div class="d-flex align-items-center icon-box">
                                                <svg-icon class="truck-icon" src="assets/svg/truckassist-table/truck/ic_truck_semi-truck.svg"
                                                          [svgStyle]="{ 'width.px': '33', 'height.px': '12' }"></svg-icon>
                                                <svg-icon class="trailer-icon" src="assets/svg/common/trailers/ic_trailer_reefer.svg"
                                                          [svgStyle]="{ 'width.px': '33', 'height.px': '12' }"></svg-icon>
                                            </div>
                                        </ng-container>
                                        <ng-container *ngIf="workExperience.classesOfEquipment.length >= 2">
                                            <div class="d-flex align-items-center icon-box">
                                                <svg-icon class="truck-icon" src="assets/svg/truckassist-table/truck/ic_truck_semi-truck.svg"
                                                          [svgStyle]="{ 'width.px': '33', 'height.px': '12' }"></svg-icon>
                                                <svg-icon class="trailer-icon" src="assets/svg/common/trailers/ic_trailer_tanker.svg"
                                                          [svgStyle]="{ 'width.px': '33', 'height.px': '12' }"></svg-icon>
                                                <ng-container *ngIf="workExperience.classesOfEquipment.length >= 3">
                                                    <p class="m-0 ta-font-medium equipment-number">
                                                        + {{ workExperience.classesOfEquipment.length - 2 }}
                                                    </p>
                                                </ng-container>
                                            </div>
                                        </ng-container>
                                    </div>
                                </ng-container>
                            </div>
                        </ng-container>
                    </ng-container>
                </div>
            </ng-container>
        </div>
    </ng-container>

    <!-- NEXT AND BACK BUTTONS -->
    <div class="d-flex justify-content-center align-items-center next-btn-container">
        <app-applicant-next-back-btn [nextStep]="true" [filledCorrectly]="workExperienceForm.valid && !isEditing && ((selectedMode === 'APPLICANT_MODE' && formStatus === 'VALID') || (selectedMode === 'FEEDBACK_MODE' && isFeedbackValueUpdated))"
                                     [hasIncorrectFields]="selectedMode === 'REVIEW_MODE' && (hasIncorrectFields || cardsWithIncorrectFields)"
                                     [mode]="selectedMode" (stepEvent)="onStepAction($event)"></app-applicant-next-back-btn>
    </div>

    <div class="d-flex justify-content-center align-items-center back-btn-container">
        <app-applicant-next-back-btn [backStep]="true" (stepEvent)="onStepAction($event)"></app-applicant-next-back-btn>
    </div>
</div>
