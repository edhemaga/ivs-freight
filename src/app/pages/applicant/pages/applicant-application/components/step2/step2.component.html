<!-- Work Experience Container -->
<div class="work-experience-container">

    <!-- Work Experience Header -->
    <h1 class="step-title">Work Experience</h1>

    <!-- Work Experience Information -->
    <div class="work-experience-info">
        <!-- Instructions -->
        <p class="instruction-text">
            In accordance with Federal Motor Carrier Safety Regulations (FMCSR),
            an applicant must list all previous work experience for the past 10 years.
        </p>
        <!-- List Title -->
        <h5 class="list-title">
            Please list starting with most recent employer. Use the add employer link if needed.
        </h5>

        <!-- Work Experience List -->
        <div class="work-experience-list" *ngIf="!workExperienceForm.get('noWorkExperience').value">
            <!-- Employer Details -->
            <div class="employer-details" *ngFor="let workExperience of workExperienceArray">
                <!-- Employer Information -->
                <div class="employer-info">
                    <p class="employer-name">{{ workExperience.employer }}</p>
                    <p class="employment-dates">{{ workExperience.fromDate }} - {{ workExperience.toDate }}</p>
                </div>
                <!-- Job Description -->
                <p class="job-description">{{ workExperience.jobDescription }}</p>
                <!-- Equipment Details -->
                <div class="equipment-details">
                    <p class="equipment-label">Equipment:</p>
                    <div class="equipment-icons">
                        <svg-icon class="truck-icon" src="assets/svg/truckassist-table/truck/ic_truck_semi-truck.svg"></svg-icon>
                        <svg-icon class="trailer-icon" src="assets/svg/common/trailers/ic_trailer_reefer.svg"></svg-icon>
                        <!-- Additional Equipment -->
                        <ng-container *ngIf="workExperience.classesOfEquipment.length > 2">
                            <p class="additional-equipment">+{{ workExperience.classesOfEquipment.length - 2 }}</p>
                        </ng-container>
                    </div>
                </div>
                <!-- Review and Feedback -->
                <app-applicant-review-feedback *ngIf="selectedMode !== 'APPLICANT_MODE'"
                                                [formControlName]="'cardReview' + (i + 1)"
                                                [displayAnnotationButton]="selectedMode === 'REVIEW_MODE' && openAnnotationArray[i].displayAnnotationButton"
                                                [displayAnnotationTextArea]="selectedMode === 'REVIEW_MODE' && openAnnotationArray[i].displayAnnotationTextArea"
                                                [lineIndex]="i"
                                                [cardsLength]="workExperienceArray.length"
                                                [cardsType]="'workExperience'"
                                                [cardIndex]="i"
                                                [isFeedback]="selectedMode === 'FEEDBACK_MODE'"
                                                [feedbackText]="selectedMode === 'FEEDBACK_MODE' && stepFeedbackValues[i].commonMessage"
                                                (annotationBtnClickEvent)="selectedMode === 'REVIEW_MODE' && getAnnotationBtnClickValue($event)">
                </app-applicant-review-feedback>
            </div>
        </div>

        <!-- Work Experience Form -->
        <div class="work-experience-form" *ngIf="(selectedMode !== 'REVIEW_MODE' && !hideFormOnEdit && !displayButtonInsteadOfForm) || (selectedMode === 'REVIEW_MODE' && !isReviewingCard)">
            <app-step2-form [mode]="selectedMode"
                            [isEditing]="isEditing"
                            [formValuesToPatch]="formValuesToPatch"
                            [isReviewingCard]="isReviewingCard"
                            [stepFeedbackValues]="feedbackValuesToPatch"
                            [checkIsRadioUnchecked]="checkIsRadioUnchecked"
                            [displayRadioRequiredNoteArray]="displayRadioRequiredNoteArray"
                            (formValuesEmitter)="getWorkExperienceFormValues($event)"
                            (cancelFormEditingEmitter)="cancelWorkExperienceEditing($event)"
                            (saveFormEditingEmitter)="saveEditedWorkExperience($event)"
                            (formStatusEmitter)="onGetFormStatus($event)"
                            (markInvalidEmitter)="onMarkInvalidEmit($event)"
                            (lastFormValuesEmitter)="onGetLastFormValues($event)"
                            (hasIncorrectFieldsEmitter)="onHasIncorrectFields($event)"
                            (openAnnotationArrayValuesEmitter)="onGetCardOpenAnnotationArrayValues($event)"
                            (radioRequiredNoteEmitter)="onGetRadioRequiredNoteEmit($event)">
            </app-step2-form>
        </div>

    </div>

    <!-- No Work Experience Checkbox -->
    <div class="no-work-experience-checkbox" *ngIf="!isEditing">
        <div class="work-experience-group" [formGroup]="workExperienceForm">
            <app-ta-checkbox formControlName="noWorkExperience"
                             [name]="'noWorkExperience'"
                             [label]="'I donâ€™t have work experience'"
                             [customClass]="'bold-12'"
                             [disabledStillCheckMark]="selectedMode !== 'APPLICANT_MODE'">
            </app-ta-checkbox>
        </div>
    </div>

</div>

<!-- Navigation Buttons -->
<div class="navigation-buttons">
    <!-- Next Button -->
    <div class="next-btn-container">
        <app-applicant-next-back-btn [nextStep]="true"
                                     [filledCorrectly]="workExperienceForm.valid && !isEditing && ((selectedMode === 'APPLICANT_MODE' && formStatus === 'VALID') || (selectedMode === 'FEEDBACK_MODE' && isFeedbackValueUpdated))"
                                     [hasIncorrectFields]="selectedMode === 'REVIEW_MODE' && (hasIncorrectFields || cardsWithIncorrectFields)"
                                     [mode]="selectedMode"
                                     (stepEvent)="onStepAction($event)">
        </app-applicant-next-back-btn>
    </div>
    <!-- Back Button -->
    <div class="back-btn-container">
        <app-applicant-next-back-btn [backStep]="true"
                                     (stepEvent)="onStepAction($event)">
        </app-applicant-next-back-btn>
    </div>
</div>
