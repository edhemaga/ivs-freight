@let store =
    {
        viewData: loadStoreService.viewData$ | async,
        hasAllLoadsSelected: loadStoreService.hasAllLoadsSelected$ | async,
        selectedTab: loadStoreService.selectedTab$ | async,
        columns: loadStoreService.tableColumnsSelector$ | async,
    };
@if (store) {
    <app-new-table
        [columns]="store.columns"
        [rows]="store.viewData"
        [templates]="{
            select,
            loadNumber,
            dispatcher,
            tableAssignedUnitTruck,
            tableAssignedUnitTrailer,
            loadBroker,
            loadStatus,
        }"
    >
        <!-- TODO: For testing load modal only !! Will be removed later !! -->
        <ng-template let-data="data" #select>
            <div (click)="openLoadModal(data.id, !store.selectedTab)">EDIT</div>
        </ng-template>

        <ng-template let-data="data" #loadNumber>
            <span
                class="ta-font-bold text-size-14 text-color-black c-pointer text-hover-blue-15"
                (click)="navigateToLoadDetails(data.id)"
            >
                {{ data.loadNumber }}
            </span>
        </ng-template>

        <ng-template let-data="data" #dispatcher>
            <div class="d-flex align-items-center">
                <app-ca-profile-image
                    [avatarColor]="{
                        background: eColor.BLUE_27,
                        color: eColor.BLUE_28,
                    }"
                    [textShortName]="data.dispatcher?.fullName | nameInitials"
                    [avatarImg]="data.dispatcher?.avatarFile?.url"
                    [isRound]="true"
                ></app-ca-profile-image>

                <span class="text-color-black text-size-14 ml-1">{{
                    data.dispatcher?.fullName
                }}</span>
            </div>
        </ng-template>

        <ng-template let-data="data" #tableAssignedUnitTruck>
            <span class="text-size-14 text-color-black">
                {{ data.driver?.truckNumber }}
            </span>
        </ng-template>

        <ng-template let-data="data" #tableAssignedUnitTrailer>
            <span class="text-size-14 text-color-black">
                {{ data.driver?.trailerNumber }}
            </span>
        </ng-template>

        <ng-template let-data="data" #loadBroker>
            <span class="text-size-14 text-color-black">
                {{ data.broker?.businessName }}
            </span>
        </ng-template>

        <ng-template let-data="data" #loadStatus>
            <span class="ta-font-bold text-size-14 text-color-black">
                <app-ca-load-status
                    [status]="{
                        name: data.status?.statusString,
                        id: data.status?.statusValue?.id,
                    }"
                    [isNoStyle]="false"
                    [fontSize]="14"
                >
                </app-ca-load-status>
            </span>
        </ng-template>
    </app-new-table>
}
